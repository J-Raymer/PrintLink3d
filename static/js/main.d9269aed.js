/*! For license information please see main.d9269aed.js.LICENSE.txt */
(()=>{var e={628:(e,t)=>{"use strict";t.A=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=(e.type||"").toLowerCase(),o=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?r.toLowerCase().endsWith(t):t.endsWith("/*")?o===t.replace(/\/.*$/,""):i===t}))}return!0}},497:(e,t,n)=>{"use strict";var r=n(218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,s){if(s!==r){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var r=n(43),i=n(853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,r,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(f,e)||!h.call(p,e)&&(d.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),w=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),M=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var k=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=k&&e[k]||e["@@iterator"])?e:null}var O,U=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function j(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case w:return"Portal";case A:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case L:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case M:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case I:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return U({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Z(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return U({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function oe(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=U({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Ee=null,Se=null;function Ae(e){if(e=bi(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=xi(t),we(e.stateNode,e.type,t))}}function Me(e){Ee?Se?Se.push(e):Se=[e]:Ee=e}function Te(){if(Ee){var e=Ee,t=Se;if(Se=Ee=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ce(e,t){return e(t)}function Re(){}var Le=!1;function Ie(e,t,n){if(Le)return e(t,n);Le=!0;try{return Ce(e,t,n)}finally{Le=!1,(null!==Ee||null!==Se)&&(Re(),Te())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Ne=!1;if(u)try{var ke={};Object.defineProperty(ke,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch(ue){Ne=!1}function De(e,t,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Ue=null,Fe=!1,Be=null,je={onError:function(e){Oe=!0,Ue=e}};function Ve(e,t,n,r,i,o,s,a,l){Oe=!1,Ue=null,De.apply(je,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(o(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Ge(i),e;if(s===r)return Ge(i),t;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Qe=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Je=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=ht(a):0!==(o&=s)&&(r=ht(o))}else 0!==(s=n&~i)?r=ht(s):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,wt,Et,St,At,Mt=!1,Tt=[],Ct=null,Rt=null,Lt=null,It=new Map,Pt=new Map,Nt=[],kt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Lt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Ot(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ut(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void At(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function jt(){Mt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==Lt&&Ft(Lt)&&(Lt=null),It.forEach(Bt),Pt.forEach(Bt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Mt||(Mt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,jt)))}function zt(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==Rt&&Vt(Rt,e),null!==Lt&&Vt(Lt,e),It.forEach(t),Pt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Ut(n),null===n.blockedOn&&Nt.shift()}var Ht=_.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=1,qt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function Kt(e,t,n,r){var i=bt,o=Ht.transition;Ht.transition=null;try{bt=4,qt(e,t,n,r)}finally{bt=i,Ht.transition=o}}function qt(e,t,n,r){if(Gt){var i=Qt(e,t,n,r);if(null===i)Gr(e,t,r,Xt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,i),!0;case"dragenter":return Rt=Ot(Rt,e,t,n,r,i),!0;case"mouseover":return Lt=Ot(Lt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return It.set(o,Ot(It.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Pt.set(o,Ot(Pt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<kt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&xt(o),null===(o=Qt(e,t,n,r))&&Gr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Xt=null;function Qt(e,t,n,r){if(Xt=null,null!==(e=yi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var s=r-e;for(t=1;t<=s&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var s in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return U(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=U({},cn,{view:0,detail:0}),dn=on(hn),pn=U({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(U({},pn,{dataTransfer:0})),gn=on(U({},hn,{relatedTarget:0})),vn=on(U({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=U({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=on(yn),_n=on(U({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function An(){return Sn}var Mn=U({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=on(Mn),Cn=on(U({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(U({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Ln=on(U({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),In=U({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=on(In),Nn=[9,13,27,32],kn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var On=u&&"TextEvent"in window&&!Dn,Un=u&&(!kn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Bn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Wn(e,t,n,r){Me(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,qn=null;function Xn(e){Fr(e,0)}function Qn(e){if(q(_i(e)))return e}function Yn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Jn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),qn=Kn=null)}function nr(e){if("value"===e.propertyName&&Qn(qn)){var t=[];Wn(t,qn,e,xe(e)),Ie(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(qn)}function or(e,t){if("click"===e)return Qn(t)}function sr(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var s=ur(n,r);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Sr={};function Ar(e){if(Er[e])return Er[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Er[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Mr=Ar("animationend"),Tr=Ar("animationiteration"),Cr=Ar("animationstart"),Rr=Ar("transitionend"),Lr=new Map,Ir="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Lr.set(e,t),l(t,[e])}for(var Nr=0;Nr<Ir.length;Nr++){var kr=Ir[Nr];Pr(kr.toLowerCase(),"on"+(kr[0].toUpperCase()+kr.slice(1)))}Pr(Mr,"onAnimationEnd"),Pr(Tr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Rr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Ur(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,s,a,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(o(198));var u=Ue;Oe=!1,Ue=null,Fe||(Fe=!0,Be=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Ur(i,a,c),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Ur(i,a,c),o=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Hr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Hr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Or.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,jr("selectionchange",!1,t))}}function Hr(e,t,n,r){switch(Yt(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue e}a=a.parentNode}}r=r.return}Ie((function(){var r=o,i=xe(n),s=[];e:{var a=Lr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Mr:case Tr:case Cr:l=vn;break;case Rr:l=Ln;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Pe(f,d))&&u.push(Wr(f,m,p)))),h)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===_e||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[fi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=fn,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==l?a:_i(l),p=null==c?a:_i(c),(a=new u(m,f+"leave",l,n,i)).target=h,a.relatedTarget=p,m=null,yi(i)===r&&((u=new u(d,f+"enter",c,n,i)).target=p,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,f=0,p=u=l;p;p=qr(p))f++;for(p=0,m=d;m;m=qr(m))p++;for(;0<f-p;)u=qr(u),f--;for(;0<p-f;)d=qr(d),p--;for(;f--;){if(u===d||null!==d&&u===d.alternate)break e;u=qr(u),d=qr(d)}u=null}else u=null;null!==l&&Xr(s,a,l,u,!1),null!==c&&null!==h&&Xr(s,h,c,u,!0)}if("select"===(l=(a=r?_i(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Yn;else if(Gn(a))if(Jn)g=sr;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(e,r))?Wn(s,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?_i(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":_r(s,n,i)}var y;if(kn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Un&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Zt="value"in(Jt=i)?Jt.value:Jt.textContent,zn=!0)),0<(v=Kr(r,b)).length&&(b=new _n(b,e,null,n,i),s.push({event:b,listeners:v}),y?b.data=y:null!==(y=Vn(n))&&(b.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!kn&&jn(e,t)?(e=en(),$t=Zt=Jt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Un&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Fr(s,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Pe(e,n))&&r.unshift(Wr(e,o,i)),null!=(o=Pe(e,t))&&r.push(Wr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,o))&&s.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,o))&&s.push(Wr(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,pi="__reactProps$"+hi,fi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[fi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function xi(e){return e[pi]||null}var wi=[],Ei=-1;function Si(e){return{current:e}}function Ai(e){0>Ei||(e.current=wi[Ei],wi[Ei]=null,Ei--)}function Mi(e,t){Ei++,wi[Ei]=e.current,e.current=t}var Ti={},Ci=Si(Ti),Ri=Si(!1),Li=Ti;function Ii(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){Ai(Ri),Ai(Ci)}function ki(e,t,n){if(Ci.current!==Ti)throw Error(o(168));Mi(Ci,t),Mi(Ri,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,H(e)||"Unknown",i));return U({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Li=Ci.current,Mi(Ci,e),Mi(Ri,Ri.current),!0}function Ui(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=Di(e,t,Li),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ri),Ai(Ci),Mi(Ci,e)):Ai(Ri),Mi(Ri,n)}var Fi=null,Bi=!1,ji=!1;function Vi(e){null===Fi?Fi=[e]:Fi.push(e)}function zi(){if(!ji&&null!==Fi){ji=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),qe($e,zi),i}finally{bt=t,ji=!1}}return null}var Hi=[],Gi=0,Wi=null,Ki=0,qi=[],Xi=0,Qi=null,Yi=1,Ji="";function Zi(e,t){Hi[Gi++]=Ki,Hi[Gi++]=Wi,Wi=e,Ki=t}function $i(e,t,n){qi[Xi++]=Yi,qi[Xi++]=Ji,qi[Xi++]=Qi,Qi=e;var r=Yi;e=Ji;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Yi=1<<32-st(t)+i|n<<i|r,Ji=o+e}else Yi=1<<o|n<<i|r,Ji=e}function eo(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function to(e){for(;e===Wi;)Wi=Hi[--Gi],Hi[Gi]=null,Ki=Hi[--Gi],Hi[Gi]=null;for(;e===Qi;)Qi=qi[--Xi],qi[Xi]=null,Ji=qi[--Xi],qi[Xi]=null,Yi=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function so(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qi?{id:Yi,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&ao(e,t)?so(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=ro;e;)e=ci(e.nextSibling)}function fo(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=_.ReactCurrentBatchConfig;function vo(e,t){if(e&&e.defaultProps){for(var n in t=U({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var yo=Si(null),bo=null,_o=null,xo=null;function wo(){xo=_o=bo=null}function Eo(e){var t=yo.current;Ai(yo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ao(e,t){bo=e,xo=_o=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Mo(e){var t=e._currentValue;if(xo!==e)if(e={context:e,memoizedValue:t,next:null},null===_o){if(null===bo)throw Error(o(308));_o=e,bo.dependencies={lanes:0,firstContext:e}}else _o=_o.next=e;return t}var To=null;function Co(e){null===To?To=[e]:To.push(e)}function Ro(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Co(t)):(n.next=i.next,i.next=n),t.interleaved=n,Lo(e,r)}function Lo(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Io=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ko(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Do(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Rl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Lo(e,n)}return null===(i=r.interleaved)?(t.next=t,Co(r)):(t.next=i.next,i.next=t),r.interleaved=t,Lo(e,n)}function Oo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Uo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fo(e,t,n,r){var i=e.updateQueue;Io=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,u=c=l=null,a=o;;){var d=a.lane,p=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(d=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){h=f.call(p,h,d);break e}h=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(d="function"===typeof(f=m.payload)?f.call(p,h,d):f)||void 0===d)break e;h=U({},h,d);break e;case 2:Io=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else p={eventTime:p,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=h):u=u.next=p,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ul|=s,e.lanes=s,e.memoizedState=h}}function Bo(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var jo=(new r.Component).refs;function Vo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:U({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var zo={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=ko(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Oo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),o=ko(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Do(e,o,i))&&(rc(t,e,i,r),Oo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=ko(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Do(e,i,r))&&(rc(t,e,r,n),Oo(t,e,r))}};function Ho(e,t,n,r,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function Go(e,t,n){var r=!1,i=Ti,o=t.contextType;return"object"===typeof o&&null!==o?o=Mo(o):(i=Pi(t)?Li:Ci.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ii(e,i):Ti),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=zo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Wo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&zo.enqueueReplaceState(t,t.state,null)}function Ko(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Po(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Mo(o):(o=Pi(t)?Li:Ci.current,i.context=Ii(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(Vo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&zo.enqueueReplaceState(i,i.state,null),Fo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function qo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Xo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qo(e){return(0,e._init)(e._payload)}function Yo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=kc(e,t)).index=0,e.sibling=null,e}function s(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===P&&Qo(o)===t.type)?((r=i(t,n.props)).ref=qo(e,t,n),r.return=e,r):((r=Dc(n.type,n.key,n.props,null,e.mode,r)).ref=qo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Oc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=qo(e,null,t),n.return=e,n;case w:return(t=Bc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Oc(t,e.mode,n,null)).return=e,t;Xo(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case w:return n.key===i?u(e,t,n,r):null;case P:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Xo(e,n)}return null}function f(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return f(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Xo(t,r)}return null}function m(i,o,a,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=p(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),io&&Zi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Zi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=f(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Zi(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var b=p(i,m,y.value,c);if(null===b){null===m&&(m=v);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===h?u=b:h.sibling=b,h=b,m=v}if(y.done)return n(i,m),io&&Zi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return io&&Zi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=f(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Zi(i,g),u}return function e(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case x:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===E){if(7===u.tag){n(r,u.sibling),(o=i(u,s.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qo(c)===u.type){n(r,u.sibling),(o=i(u,s.props)).ref=qo(r,u,s),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}s.type===E?((o=Oc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Dc(s.type,s.key,s.props,null,r.mode,l)).ref=qo(r,o,s),l.return=r,r=l)}return a(r);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Bc(s,r.mode,l)).return=r,r=o}return a(r);case P:return e(r,o,(u=s._init)(s._payload),l)}if(te(s))return m(r,o,s,l);if(D(s))return g(r,o,s,l);Xo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Fc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Jo=Yo(!0),Zo=Yo(!1),$o={},es=Si($o),ts=Si($o),ns=Si($o);function rs(e){if(e===$o)throw Error(o(174));return e}function is(e,t){switch(Mi(ns,t),Mi(ts,e),Mi(es,$o),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(es),Mi(es,t)}function os(){Ai(es),Ai(ts),Ai(ns)}function ss(e){rs(ns.current);var t=rs(es.current),n=le(t,e.type);t!==n&&(Mi(ts,e),Mi(es,n))}function as(e){ts.current===e&&(Ai(es),Ai(ts))}var ls=Si(0);function cs(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var us=[];function hs(){for(var e=0;e<us.length;e++)us[e]._workInProgressVersionPrimary=null;us.length=0}var ds=_.ReactCurrentDispatcher,ps=_.ReactCurrentBatchConfig,fs=0,ms=null,gs=null,vs=null,ys=!1,bs=!1,_s=0,xs=0;function ws(){throw Error(o(321))}function Es(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function Ss(e,t,n,r,i,s){if(fs=s,ms=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ds.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),bs){s=0;do{if(bs=!1,_s=0,25<=s)throw Error(o(301));s+=1,vs=gs=null,t.updateQueue=null,ds.current=ca,e=n(r,i)}while(bs)}if(ds.current=sa,t=null!==gs&&null!==gs.next,fs=0,vs=gs=ms=null,ys=!1,t)throw Error(o(300));return e}function As(){var e=0!==_s;return _s=0,e}function Ms(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vs?ms.memoizedState=vs=e:vs=vs.next=e,vs}function Ts(){if(null===gs){var e=ms.alternate;e=null!==e?e.memoizedState:null}else e=gs.next;var t=null===vs?ms.memoizedState:vs.next;if(null!==t)vs=t,gs=e;else{if(null===e)throw Error(o(310));e={memoizedState:(gs=e).memoizedState,baseState:gs.baseState,baseQueue:gs.baseQueue,queue:gs.queue,next:null},null===vs?ms.memoizedState=vs=e:vs=vs.next=e}return vs}function Cs(e,t){return"function"===typeof t?t(e):t}function Rs(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=gs,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,c=null,u=s;do{var h=u.lane;if((fs&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,ms.lanes|=h,Ul|=h}u=u.next}while(null!==u&&u!==s);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(_a=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{s=i.lane,ms.lanes|=s,Ul|=s,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ls(e){var t=Ts(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);ar(s,t.memoizedState)||(_a=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Is(){}function Ps(e,t){var n=ms,r=Ts(),i=t(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,_a=!0),r=r.queue,Gs(Ds.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||null!==vs&&1&vs.memoizedState.tag){if(n.flags|=2048,Bs(9,ks.bind(null,n,r,i,t),void 0,null),null===Ll)throw Error(o(349));0!==(30&fs)||Ns(n,t,i)}return i}function Ns(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ks(e,t,n,r){t.value=n,t.getSnapshot=r,Os(t)&&Us(e)}function Ds(e,t,n){return n((function(){Os(t)&&Us(e)}))}function Os(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Us(e){var t=Lo(e,1);null!==t&&rc(t,e,1,-1)}function Fs(e){var t=Ms();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cs,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,ms,e),[t.memoizedState,e]}function Bs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ms.updateQueue)?(t={lastEffect:null,stores:null},ms.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return Ts().memoizedState}function Vs(e,t,n,r){var i=Ms();ms.flags|=e,i.memoizedState=Bs(1|t,n,void 0,void 0===r?null:r)}function zs(e,t,n,r){var i=Ts();r=void 0===r?null:r;var o=void 0;if(null!==gs){var s=gs.memoizedState;if(o=s.destroy,null!==r&&Es(r,s.deps))return void(i.memoizedState=Bs(t,n,o,r))}ms.flags|=e,i.memoizedState=Bs(1|t,n,o,r)}function Hs(e,t){return Vs(8390656,8,e,t)}function Gs(e,t){return zs(2048,8,e,t)}function Ws(e,t){return zs(4,2,e,t)}function Ks(e,t){return zs(4,4,e,t)}function qs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Xs(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zs(4,4,qs.bind(null,t,e),n)}function Qs(){}function Ys(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Js(e,t){var n=Ts();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Es(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zs(e,t,n){return 0===(21&fs)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),ms.lanes|=n,Ul|=n,e.baseState=!0),t)}function $s(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ps.transition;ps.transition={};try{e(!1),t()}finally{bt=n,ps.transition=r}}function ea(){return Ts().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Ro(e,t,n,r))){rc(n,e,r,tc()),oa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=t.interleaved;return null===l?(i.next=i,Co(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ro(e,t,i,r))&&(rc(n,e,r,i=tc()),oa(n,t,r))}}function ra(e){var t=e.alternate;return e===ms||null!==t&&t===ms}function ia(e,t){bs=ys=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function oa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var sa={readContext:Mo,useCallback:ws,useContext:ws,useEffect:ws,useImperativeHandle:ws,useInsertionEffect:ws,useLayoutEffect:ws,useMemo:ws,useReducer:ws,useRef:ws,useState:ws,useDebugValue:ws,useDeferredValue:ws,useTransition:ws,useMutableSource:ws,useSyncExternalStore:ws,useId:ws,unstable_isNewReconciler:!1},aa={readContext:Mo,useCallback:function(e,t){return Ms().memoizedState=[e,void 0===t?null:t],e},useContext:Mo,useEffect:Hs,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Vs(4194308,4,qs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vs(4,2,e,t)},useMemo:function(e,t){var n=Ms();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ms();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,ms,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ms().memoizedState=e},useState:Fs,useDebugValue:Qs,useDeferredValue:function(e){return Ms().memoizedState=e},useTransition:function(){var e=Fs(!1),t=e[0];return e=$s.bind(null,e[1]),Ms().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ms,i=Ms();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Ll)throw Error(o(349));0!==(30&fs)||Ns(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Hs(Ds.bind(null,r,s,e),[e]),r.flags|=2048,Bs(9,ks.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Ms(),t=Ll.identifierPrefix;if(io){var n=Ji;t=":"+t+"R"+(n=(Yi&~(1<<32-st(Yi)-1)).toString(32)+n),0<(n=_s++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Mo,useCallback:Ys,useContext:Mo,useEffect:Gs,useImperativeHandle:Xs,useInsertionEffect:Ws,useLayoutEffect:Ks,useMemo:Js,useReducer:Rs,useRef:js,useState:function(){return Rs(Cs)},useDebugValue:Qs,useDeferredValue:function(e){return Zs(Ts(),gs.memoizedState,e)},useTransition:function(){return[Rs(Cs)[0],Ts().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ps,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Mo,useCallback:Ys,useContext:Mo,useEffect:Gs,useImperativeHandle:Xs,useInsertionEffect:Ws,useLayoutEffect:Ks,useMemo:Js,useReducer:Ls,useRef:js,useState:function(){return Ls(Cs)},useDebugValue:Qs,useDeferredValue:function(e){var t=Ts();return null===gs?t.memoizedState=e:Zs(t,gs.memoizedState,e)},useTransition:function(){return[Ls(Cs)[0],Ts().memoizedState]},useMutableSource:Is,useSyncExternalStore:Ps,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var pa="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=ko(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=ko(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new pa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Mc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=ko(-1,1)).tag=2,Do(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ba=_.ReactCurrentOwner,_a=!1;function xa(e,t,n,r){t.child=null===e?Zo(t,null,n,r):Jo(t,e.child,n,r)}function wa(e,t,n,r,i){n=n.render;var o=t.ref;return Ao(t,i),r=Ss(e,t,n,r,o,i),n=As(),null===e||_a?(io&&n&&eo(t),t.flags|=1,xa(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Nc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=kc(o,r)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(_a=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(_a=!0)}}return Ta(e,t,n,r,i)}function Aa(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mi(kl,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Mi(kl,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Mi(kl,Nl),Nl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Mi(kl,Nl),Nl|=r;return xa(e,t,i,n),t.child}function Ma(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,i){var o=Pi(n)?Li:Ci.current;return o=Ii(t,o),Ao(t,i),n=Ss(e,t,n,r,o,i),r=As(),null===e||_a?(io&&r&&eo(t),t.flags|=1,xa(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var o=!0;Oi(t)}else o=!1;if(Ao(t,i),null===t.stateNode)Ga(e,t),Go(t,n,r),Ko(t,n,r,i),r=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Mo(c):c=Ii(t,c=Pi(n)?Li:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==c)&&Wo(t,s,r,c),Io=!1;var d=t.memoizedState;s.state=d,Fo(t,r,s,i),l=t.memoizedState,a!==r||d!==l||Ri.current||Io?("function"===typeof u&&(Vo(t,n,u,r),l=t.memoizedState),(a=Io||Ho(t,n,a,r,d,l,c))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,No(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:vo(t.type,a),s.props=c,h=t.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Mo(l):l=Ii(t,l=Pi(n)?Li:Ci.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&Wo(t,s,r,l),Io=!1,d=t.memoizedState,s.state=d,Fo(t,r,s,i);var f=t.memoizedState;a!==h||d!==f||Ri.current||Io?("function"===typeof p&&(Vo(t,n,p,r),f=t.memoizedState),(c=Io||Ho(t,n,c,r,d,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),s.props=r,s.state=f,s.context=l,r=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ra(e,t,n,r,o,i)}function Ra(e,t,n,r,i,o){Ma(e,t);var s=0!==(128&t.flags);if(!r&&!s)return i&&Ui(t,n,!1),Wa(e,t,o);r=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&s?(t.child=Jo(t,e.child,null,o),t.child=Jo(t,null,a,o)):xa(e,t,a,o),t.memoizedState=r.state,i&&Ui(t,n,!0),t.child}function La(e){var t=e.stateNode;t.pendingContext?ki(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ki(0,t.context,!1),is(e,t.containerInfo)}function Ia(e,t,n,r,i){return fo(),mo(i),t.flags|=256,xa(e,t,n,r),t.child}var Pa,Na,ka,Da,Oa={dehydrated:null,treeContext:null,retryLane:0};function Ua(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fa(e,t,n){var r,i=t.pendingProps,s=ls.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&s)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Mi(ls,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Uc(l,i,0,null),e=Oc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ua(n),t.memoizedState=Oa,e):Ba(t,l));if(null!==(s=e.memoizedState)&&null!==(r=s.dehydrated))return function(e,t,n,r,i,s,a){if(n)return 256&t.flags?(t.flags&=-257,ja(e,t,a,r=ha(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Uc({mode:"visible",children:r.children},i,0,null),(s=Oc(s,i,a,null)).flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,0!==(1&t.mode)&&Jo(t,e.child,null,a),t.child.memoizedState=Ua(a),t.memoizedState=Oa,s);if(0===(1&t.mode))return ja(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,ja(e,t,a,r=ha(s=Error(o(419)),r,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(r=Ll)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Lo(e,i),rc(r,e,i,-1))}return gc(),ja(e,t,a,r=ha(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Yi,qi[Xi++]=Ji,qi[Xi++]=Qi,Yi=e.id,Ji=e.overflow,Qi=t),t=Ba(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,s,n);if(a){a=i.fallback,l=t.mode,r=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=kc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=kc(r,a):(a=Oc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Ua(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Oa,i}return e=(a=e.child).sibling,i=kc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Ba(e,t){return(t=Uc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ja(e,t,n,r){return null!==r&&mo(r),Jo(t,e.child,null,n),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function za(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Ha(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xa(e,t,r.children,n),0!==(2&(r=ls.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Mi(ls,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===cs(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),za(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===cs(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}za(t,!0,n,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ul|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=kc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=kc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function qa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xa(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qa(t),null;case 1:case 17:return Pi(t.type)&&Ni(),qa(t),null;case 3:return r=t.stateNode,os(),Ai(Ri),Ai(Ci),hs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Na(e,t),qa(t),null;case 5:as(t);var i=rs(ns.current);if(n=t.type,null!==e&&null!=t.stateNode)ka(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return qa(t),null}if(e=rs(es.current),ho(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[di]=t,r[pi]=s,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":Y(r,s),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Br("invalid",r);break;case"textarea":ie(r,s),Br("invalid",r)}for(var l in ye(n,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":K(r),$(r,s,!0);break;case"textarea":K(r),se(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[pi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Br(Dr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":Y(e,r),i=Q(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=U({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(s in ye(n,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Br("scroll",e):null!=u&&b(e,s,u,l))}switch(n){case"input":K(e),$(e,r,!1);break;case"textarea":K(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(s=r.value)?ne(e,!!r.multiple,s,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qa(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=rs(ns.current),rs(es.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(s=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return qa(t),null;case 13:if(Ai(ls),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qa(t),s=!1}else null!==oo&&(ac(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ls.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),qa(t),null);case 4:return os(),Na(e,t),null===e&&zr(t.stateNode.containerInfo),qa(t),null;case 10:return Eo(t.type._context),qa(t),null;case 19:if(Ai(ls),null===(s=t.memoizedState))return qa(t),null;if(r=0!==(128&t.flags),null===(l=s.rendering))if(r)Ka(s,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=cs(e))){for(t.flags|=128,Ka(s,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Mi(ls,1&ls.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Hl&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=cs(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return qa(t),null}else 2*Je()-s.renderingStartTime>Hl&&1073741824!==n&&(t.flags|=128,r=!0,Ka(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,n=ls.current,Mi(ls,r?1&n|2:1&n),t):(qa(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(qa(t),6&t.subtreeFlags&&(t.flags|=8192)):qa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Qa(e,t){switch(to(t),t.tag){case 1:return Pi(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return os(),Ai(Ri),Ai(Ci),hs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return as(t),null;case 13:if(Ai(ls),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(ls),null;case 4:return os(),null;case 10:return Eo(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Na=function(){},ka=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,rs(es.current);var o,s=null;switch(n){case"input":i=Q(e,i),r=Q(e,r),s=[];break;case"select":i=U({},i,{value:void 0}),r=U({},r,{value:void 0}),s=[];break;case"textarea":i=re(e,i),r=re(e,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Br("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ya=!1,Ja=!1,Za="function"===typeof WeakSet?WeakSet:Set,$a=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ac(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Ac(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[pi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function pl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,pl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,pl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,t,s),i=i.next}while(i!==r)}pl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ac(n,t,a)}pl(e,t,n);break;case 21:pl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,pl(e,t,n),Ja=r):pl(e,t,n);break;default:pl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach((function(t){var r=Rc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(o(160));fl(s,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ac(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Ac(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Ac(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ac(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&J(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":Z(i,s);break;case"textarea":oe(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(i,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(i,!!s.multiple,s.defaultValue,!0):ne(i,!!s.multiple,s.multiple?[]:"",!1))}i[pi]=s}catch(g){Ac(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Ac(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Ac(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for($a=e,h=e.child;null!==h;){for(d=$a=h;null!==$a;){switch(f=(p=$a).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){r=p,n=p.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ac(r,n,g)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){wl(d);continue}}null!==f?(f.return=p,$a=f):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ac(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ac(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var s=r.stateNode.containerInfo;cl(e,ll(e),s);break;default:throw Error(o(161))}}catch(a){Ac(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){$a=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==$a;){var i=$a,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||Ya;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=Ya;var c=Ja;if(Ya=s,(Ja=l)&&!c)for($a=i;null!==$a;)l=(s=$a).child,22===s.tag&&null!==s.memoizedState?El(i):null!==l?(l.return=s,$a=l):El(i);for(;null!==o;)$a=o,_l(o,t,n),o=o.sibling;$a=i,Ya=a,Ja=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,$a=o):xl(e)}}function xl(e){for(;null!==$a;){var t=$a;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:vo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Bo(t,s,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Bo(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(o(163))}Ja||512&t.flags&&ol(t)}catch(p){Ac(t,t.return,p)}}if(t===e){$a=null;break}if(null!==(n=t.sibling)){n.return=t.return,$a=n;break}$a=t.return}}function wl(e){for(;null!==$a;){var t=$a;if(t===e){$a=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$a=n;break}$a=t.return}}function El(e){for(;null!==$a;){var t=$a;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ac(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ac(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Ac(t,o,l)}break;case 5:var s=t.return;try{ol(t)}catch(l){Ac(t,s,l)}}}catch(l){Ac(t,t.return,l)}if(t===e){$a=null;break}var a=t.sibling;if(null!==a){a.return=t.return,$a=a;break}$a=t.return}}var Sl,Al=Math.ceil,Ml=_.ReactCurrentDispatcher,Tl=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Rl=0,Ll=null,Il=null,Pl=0,Nl=0,kl=Si(0),Dl=0,Ol=null,Ul=0,Fl=0,Bl=0,jl=null,Vl=null,zl=0,Hl=1/0,Gl=null,Wl=!1,Kl=null,ql=null,Xl=!1,Ql=null,Yl=0,Jl=0,Zl=null,$l=-1,ec=0;function tc(){return 0!==(6&Rl)?Je():-1!==$l?$l:$l=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Rl)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===ec&&(ec=mt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Zl=null,Error(o(185));vt(e,n,r),0!==(2&Rl)&&e===Ll||(e===Ll&&(0===(2&Rl)&&(Fl|=n),4===Dl&&lc(e,Pl)),ic(e,r),1===n&&0===Rl&&0===(1&t.mode)&&(Hl=Je()+500,Bi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var r=dt(e,e===Ll?Pl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Bi=!0,Vi(e)}(cc.bind(null,e)):Vi(cc.bind(null,e)),si((function(){0===(6&Rl)&&zi()})),n=null;else{switch(_t(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Lc(n,oc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function oc(e,t){if($l=-1,ec=0,0!==(6&Rl))throw Error(o(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=dt(e,e===Ll?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Rl;Rl|=2;var s=mc();for(Ll===e&&Pl===t||(Gl=null,Hl=Je()+500,pc(e,t));;)try{bc();break}catch(l){fc(e,l)}wo(),Ml.current=s,Rl=i,null!==Il?t=0:(Ll=null,Pl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=ft(e))&&(r=i,t=sc(e,i))),1===t)throw n=Ol,pc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(s=ft(e))&&(r=s,t=sc(e,s))),1===t))throw n=Ol,pc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:wc(e,Vl,Gl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=zl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vl,Gl),t);break}wc(e,Vl,Gl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-st(r);s=1<<a,(a=t[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Al(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vl,Gl),r);break}wc(e,Vl,Gl);break;default:throw Error(o(329))}}}return ic(e,Je()),e.callbackNode===n?oc.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(pc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Vl,Vl=n,null!==t&&ac(t)),e}function ac(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function lc(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Rl))throw Error(o(327));Ec();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=ft(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Ol,pc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Gl),ic(e,Je()),null}function uc(e,t){var n=Rl;Rl|=1;try{return e(t)}finally{0===(Rl=n)&&(Hl=Je()+500,Bi&&zi())}}function hc(e){null!==Ql&&0===Ql.tag&&0===(6&Rl)&&Ec();var t=Rl;Rl|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Rl=t))&&zi()}}function dc(){Nl=kl.current,Ai(kl)}function pc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:os(),Ai(Ri),Ai(Ci),hs();break;case 5:as(r);break;case 4:os();break;case 13:case 19:Ai(ls);break;case 10:Eo(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Ll=e,Il=e=kc(e.current,null),Pl=Nl=t,Dl=0,Ol=null,Bl=Fl=Ul=0,Vl=jl=null,null!==To){for(t=0;t<To.length;t++)if(null!==(r=(n=To[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}To=null}return e}function fc(e,t){for(;;){var n=Il;try{if(wo(),ds.current=sa,ys){for(var r=ms.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ys=!1}if(fs=0,vs=gs=ms=null,bs=!1,_s=0,Tl.current=null,null===n||null===n.return){Dl=1,Ol=t,Il=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=va(a);if(null!==f){f.flags&=-257,ya(f,a,l,0,t),1&f.mode&&ga(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(s,u,t),gc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),mo(ua(c,l));break e}}s=c=ua(c,l),4!==Dl&&(Dl=2),null===jl?jl=[s]:jl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,fa(0,c,t));break e;case 1:l=c;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===ql||!ql.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Uo(s,ma(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(_){t=_,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function mc(){var e=Ml.current;return Ml.current=sa,null===e?sa:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ll||0===(268435455&Ul)&&0===(268435455&Fl)||lc(Ll,Pl)}function vc(e,t){var n=Rl;Rl|=2;var r=mc();for(Ll===e&&Pl===t||(Gl=null,pc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(wo(),Rl=n,Ml.current=r,null!==Il)throw Error(o(261));return Ll=null,Pl=0,Dl}function yc(){for(;null!==Il;)_c(Il)}function bc(){for(;null!==Il&&!Qe();)_c(Il)}function _c(e){var t=Sl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?xc(e):Il=t,Tl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xa(n,t,Nl)))return void(Il=n)}else{if(null!==(n=Qa(n,t)))return n.flags&=32767,void(Il=n);if(null===e)return Dl=6,void(Il=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Il=t);Il=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Ec()}while(null!==Ql);if(0!==(6&Rl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,s),e===Ll&&(Il=Ll=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,Lc(tt,(function(){return Ec(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Cl.transition,Cl.transition=null;var a=bt;bt=1;var l=Rl;Rl|=4,Tl.current=null,function(e,t){if(ei=Gt,pr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(x){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===n&&++u===i&&(l=a),p===s&&++h===r&&(c=a),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,$a=t;null!==$a;)if(e=(t=$a).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$a=e;else for(;null!==$a;){t=$a;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:vo(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(o(163))}}catch(x){Ac(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,$a=e;break}$a=t.return}m=nl,nl=!1}(e,n),vl(n,e),fr(ti),Gt=!!ei,ti=ei=null,e.current=n,bl(n,e,i),Ye(),Rl=l,bt=a,Cl.transition=s}else e.current=n;if(Xl&&(Xl=!1,Ql=e,Yl=i),s=e.pendingLanes,0===s&&(ql=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&Yl)&&0!==e.tag&&Ec(),s=e.pendingLanes,0!==(1&s)?e===Zl?Jl++:(Jl=0,Zl=e):Jl=0,zi()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function Ec(){if(null!==Ql){var e=_t(Yl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Rl))throw Error(o(331));var i=Rl;for(Rl|=4,$a=e.current;null!==$a;){var s=$a,a=s.child;if(0!==(16&$a.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for($a=u;null!==$a;){var h=$a;switch(h.tag){case 0:case 11:case 15:rl(8,h,s)}var d=h.child;if(null!==d)d.return=h,$a=d;else for(;null!==$a;){var p=(h=$a).sibling,f=h.return;if(sl(h),h===u){$a=null;break}if(null!==p){p.return=f,$a=p;break}$a=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}$a=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,$a=a;else e:for(;null!==$a;){if(0!==(2048&(s=$a).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,$a=y;break e}$a=s.return}}var b=e.current;for($a=b;null!==$a;){var _=(a=$a).child;if(0!==(2064&a.subtreeFlags)&&null!==_)_.return=a,$a=_;else e:for(a=b;null!==$a;){if(0!==(2048&(l=$a).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Ac(l,l.return,w)}if(l===a){$a=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,$a=x;break e}$a=l.return}}if(Rl=i,zi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(w){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Do(e,t=fa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Ac(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===ql||!ql.has(r))){t=Do(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Mc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ll===e&&(Pl&n)===n&&(4===Dl||3===Dl&&(130023424&Pl)===Pl&&500>Je()-zl?pc(e,0):Bl|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=Lo(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Rc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Tc(e,n)}function Lc(e,t){return qe(e,t)}function Ic(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Ic(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function kc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,r,i,s){var a=2;if(r=e,"function"===typeof e)Nc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Oc(n.children,i,s,t);case S:a=8,i|=8;break;case A:return(e=Pc(12,n,t,2|i)).elementType=A,e.lanes=s,e;case R:return(e=Pc(13,n,t,i)).elementType=R,e.lanes=s,e;case L:return(e=Pc(19,n,t,i)).elementType=L,e.lanes=s,e;case N:return Uc(n,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case M:a=10;break e;case T:a=9;break e;case C:a=11;break e;case I:a=14;break e;case P:a=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=s,t}function Oc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Uc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Bc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,o,s,a,l){return e=new jc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(o),e}function zc(e){if(!e)return Ti;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Di(e,n,t)}return t}function Hc(e,t,n,r,i,o,s,a,l){return(e=Vc(n,r,!0,e,0,o,0,a,l)).context=zc(null),n=e.current,(o=ko(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Do(n,o,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,o=tc(),s=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=ko(o,s)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Do(i,t,s))&&(rc(e,i,s,o),Oo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ri.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:La(t),fo();break;case 5:ss(t);break;case 1:Pi(t.type)&&Oi(t);break;case 4:is(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Mi(yo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Mi(ls,1&ls.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fa(e,t,n):(Mi(ls,1&ls.current),null!==(e=Wa(e,t,n))?e.sibling:null);Mi(ls,1&ls.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ha(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Mi(ls,ls.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Wa(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,io&&0!==(1048576&t.flags)&&$i(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Ii(t,Ci.current);Ao(t,n),i=Ss(null,t,r,e,i,n);var s=As();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(s=!0,Oi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Po(t),i.updater=zo,t.stateNode=i,i._reactInternals=t,Ko(t,r,e,n),t=Ra(null,t,r,!0,s,n)):(t.tag=0,io&&s&&eo(t),xa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===I)return 14}return 2}(r),e=vo(r,e),i){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=wa(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,vo(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Ta(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 3:e:{if(La(t),null===e)throw Error(o(387));r=t.pendingProps,i=(s=t.memoizedState).element,No(e,t),Fo(t,r,null,n);var a=t.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Ia(e,t,r,n,i=ua(Error(o(423)),t));break e}if(r!==i){t=Ia(e,t,r,n,i=ua(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=Zo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),r===i){t=Wa(e,t,n);break e}xa(e,t,r,n)}t=t.child}return t;case 5:return ss(t),null===e&&co(t),r=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(t.flags|=32),Ma(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fa(e,t,n);case 4:return is(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Jo(t,null,r,n):xa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wa(e,t,r,i=t.elementType===r?i:vo(r,i),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Mi(yo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ri.current){t=Wa(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===s.tag){(c=ko(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),So(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),So(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ao(t,n),r=r(i=Mo(i)),t.flags|=1,xa(e,t,r,n),t.child;case 14:return i=vo(r=t.type,t.pendingProps),Ea(e,t,r,i=vo(r.type,i),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:vo(r,i),Ga(e,t),t.tag=1,Pi(r)?(e=!0,Oi(t)):e=!1,Ao(t,n),Go(t,r,i),Ko(t,r,i,n),Ra(null,t,r,!0,e,n);case 19:return Ha(e,t,n);case 22:return Aa(e,t,n)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function eu(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Gc(t,s,e,i)}else s=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wc(s);o.call(e)}}var s=Hc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=s,e[fi]=s.current,zr(8===e.nodeType?e.parentNode:e),hc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=l,e[fi]=l.current,zr(8===e.nodeType?e.parentNode:e),hc((function(){Gc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(s)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Gc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Gc(null,e,null,null)})),t[fi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Ut(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Rl)&&(Hl=Je()+500,zi()))}break;case 13:hc((function(){var t=Lo(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Lo(e,134217728);if(null!==t)rc(t,e,134217728,tc());qc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=Lo(e,t);if(null!==n)rc(n,e,t,tc());qc(e,t)}},St=function(){return bt},At=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},we=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(o(90));q(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Re=hc;var tu={usingClientEntryPoint:!1,Events:[bi,_i,xi,Me,Te,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[fi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,i,0,s,a),e[fi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(o(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(o(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[fi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var r=n(43),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var _=b.prototype=new y;_.constructor=b,m(_,v.prototype),_.isPureReactComponent=!0;var x=Array.isArray,w=Object.prototype.hasOwnProperty,E={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:E.current}}function M(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=e),e=""===o?"."+C(l,0):o,x(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),R(s,t,i,"",(function(e){return e}))):null!=s&&(M(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",x(e))for(var c=0;c<e.length;c++){var u=o+C(a=e[c],c);l+=R(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=R(a=a.value,t,i,u=o+C(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function L(e,t,n){if(null==e)return e;var r=[],i=0;return R(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function I(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},N={transition:null},k={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:N,ReactCurrentOwner:E};t.Children={map:L,forEach:function(e,t,n){L(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return L(e,(function(){t++})),t},toArray:function(e){return L(e,(function(e){return e}))||[]},only:function(e){if(!M(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=k,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=M,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:I}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.transition;N.transition={};try{e()}finally{N.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(g=!1,_(e),!m)if(null!==r(c))m=!0,N(w);else{var t=r(u);null!==t&&k(x,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(M),M=-1),f=!0;var o=p;try{for(_(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!R());){var s=d.callback;if("function"===typeof s){d.callback=null,p=d.priorityLevel;var a=s(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),_(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&k(x,h.startTime-n),l=!1}return l}finally{d=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,S=!1,A=null,M=-1,T=5,C=-1;function R(){return!(t.unstable_now()-C<T)}function L(){if(null!==A){var e=t.unstable_now();C=e;var n=!0;try{n=A(!0,e)}finally{n?E():(S=!1,A=null)}}else S=!1}if("function"===typeof b)E=function(){b(L)};else if("undefined"!==typeof MessageChannel){var I=new MessageChannel,P=I.port2;I.port1.onmessage=L,E=function(){P.postMessage(null)}}else E=function(){v(L,0)};function N(e){A=e,S||(S=!0,E())}function k(e,n){M=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,N(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(M),M=-1):g=!0,k(x,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,N(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>r[e]));return s.default=()=>r,n.d(o,s),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".a6a97343.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="app:";n.l=(r,i,o,s)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/printlink3d/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,s=r[0],a=r[1],l=r[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(43),r=n.t(t,2),i=n(391),o=n(950),s=n.t(o,2);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function u(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(rA){}}}function h(e,t){return{usr:e.state,key:e.key,idx:t}}function d(e,t,n,r){return void 0===n&&(n=null),a({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?f(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function f(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function m(t,n,r,i){void 0===i&&(i={});let{window:o=document.defaultView,v5Compat:s=!1}=i,u=o.history,f=e.Pop,m=null,g=v();function v(){return(u.state||{idx:null}).idx}function y(){f=e.Pop;let t=v(),n=null==t?null:t-g;g=t,m&&m({action:f,location:_.location,delta:n})}function b(e){let t="null"!==o.location.origin?o.location.origin:o.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,u.replaceState(a({},u.state,{idx:g}),""));let _={get action(){return f},get location(){return t(o,u)},listen(e){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(l,y),m=e,()=>{o.removeEventListener(l,y),m=null}},createHref:e=>n(o,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){f=e.Push;let i=d(_.location,t,n);r&&r(i,t),g=v()+1;let a=h(i,g),l=_.createHref(i);try{u.pushState(a,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;o.location.assign(l)}s&&m&&m({action:f,location:_.location,delta:1})},replace:function(t,n){f=e.Replace;let i=d(_.location,t,n);r&&r(i,t),g=v();let o=h(i,g),a=_.createHref(i);u.replaceState(o,"",a),s&&m&&m({action:f,location:_.location,delta:0})},go:e=>u.go(e)};return _}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){void 0===n&&(n="/");let r=I(("string"===typeof t?f(t):t).pathname||"/",n);if(null==r)return null;let i=y(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let o=null;for(let s=0;null==o&&s<i.length;++s){let e=L(r);o=C(i[s],e)}return o}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(c(s.relativePath.startsWith(r),'Absolute route path "'+s.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(r.length));let a=O([r,s.relativePath]),l=n.concat(s);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),y(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:T(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)})),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let s=b(r.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const _=/^:[\w-]+$/,x=3,w=2,E=1,S=10,A=-2,M=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(M)&&(r+=A),t&&(r+=w),n.filter((e=>!M(e))).reduce(((e,t)=>e+(_.test(t)?x:""===t?E:S)),r)}function C(e,t){let{routesMeta:n}=e,r={},i="/",o=[];for(let s=0;s<n.length;++s){let e=n[s],a=s===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=R({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;o.push({params:r,pathname:O([i,c.pathname]),pathnameBase:U(O([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=O([i,c.pathnameBase]))}return o}function R(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function L(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function I(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function k(e,t){let n=N(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function D(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=f(e):(i=a({},e),c(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let o,s=""===e||""===i.pathname,l=s?"/":i.pathname;if(null==l)o=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?f(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:F(r),hash:B(i)}}(i,o),h=l&&"/"!==l&&l.endsWith("/"),d=(s||"."===l)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!d||(u.pathname+="/"),u}const O=e=>e.join("/").replace(/\/\/+/g,"/"),U=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),F=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function j(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const V=["post","put","patch","delete"],z=(new Set(V),["get",...V]);new Set(z),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const G=t.createContext(null);const W=t.createContext(null);const K=t.createContext(null);const q=t.createContext(null);const X=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function Y(){return null!=t.useContext(q)}function J(){return Y()||c(!1),t.useContext(q).location}function Z(e){t.useContext(K).static||t.useLayoutEffect(e)}function $(){let{isDataRoute:e}=t.useContext(X);return e?function(){let{router:e}=ue(le.UseNavigateStable),n=de(ce.UseNavigateStable),r=t.useRef(!1);Z((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,H({fromRouteId:n},i)))}),[e,n]);return i}():function(){Y()||c(!1);let e=t.useContext(G),{basename:n,future:r,navigator:i}=t.useContext(K),{matches:o}=t.useContext(X),{pathname:s}=J(),a=JSON.stringify(k(o,r.v7_relativeSplatPath)),l=t.useRef(!1);Z((()=>{l.current=!0}));let u=t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let o=D(t,JSON.parse(a),s,"path"===r.relative);null==e&&"/"!==n&&(o.pathname="/"===o.pathname?n:O([n,o.pathname])),(r.replace?i.replace:i.push)(o,r.state,r)}),[n,i,a,s,e]);return u}()}const ee=t.createContext(null);function te(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(K),{matches:o}=t.useContext(X),{pathname:s}=J(),a=JSON.stringify(k(o,i.v7_relativeSplatPath));return t.useMemo((()=>D(e,JSON.parse(a),s,"path"===r)),[e,a,s,r])}function ne(n,r,i,o){Y()||c(!1);let{navigator:s}=t.useContext(K),{matches:a}=t.useContext(X),l=a[a.length-1],u=l?l.params:{},h=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,p=J();if(r){var m;let e="string"===typeof r?f(r):r;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||c(!1),d=e}else d=p;let g=d.pathname||"/",y=g;if("/"!==h){let e=h.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=v(n,{pathname:y});let _=ae(b&&b.map((e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:O([h,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:O([h,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,i,o);return r&&_?t.createElement(q.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:e.Pop}},_):_}function re(){let e=function(){var e;let n=t.useContext(Q),r=he(ce.UseRouteError),i=de(ce.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=j(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:o},r):null,null)}const ie=t.createElement(re,null);class oe extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(X.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function se(e){let{routeContext:n,match:r,children:i}=e,o=t.useContext(G);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(X.Provider,{value:n},i)}function ae(e,n,r,i){var o;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var s;if(null==(s=r)||!s.errors)return null;e=r.matches}let a=e,l=null==(o=r)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||c(!1),a=a.slice(0,Math.min(a.length,e+1))}let u=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,a=h>=0?a.slice(0,h+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,c=!1,d=null,p=null;var f;r&&(s=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||ie,u&&(h<0&&0===o?(f="route-fallback",!1||pe[f]||(pe[f]=!0),c=!0,p=null):h===o&&(c=!0,p=i.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,o+1)),g=()=>{let n;return n=s?d:c?p:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(se,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(oe,{location:r.location,revalidation:r.revalidation,component:d,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var le=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(le||{}),ce=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ce||{});function ue(e){let n=t.useContext(G);return n||c(!1),n}function he(e){let n=t.useContext(W);return n||c(!1),n}function de(e){let n=function(e){let n=t.useContext(X);return n||c(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||c(!1),r.route.id}const pe={};r.startTransition;function fe(e){let{to:n,replace:r,state:i,relative:o}=e;Y()||c(!1);let{future:s,static:a}=t.useContext(K),{matches:l}=t.useContext(X),{pathname:u}=J(),h=$(),d=D(n,k(l,s.v7_relativeSplatPath),u,"path"===o),p=JSON.stringify(d);return t.useEffect((()=>h(JSON.parse(p),{replace:r,state:i,relative:o})),[h,p,o,r,i]),null}function me(e){return function(e){let n=t.useContext(X).outlet;return n?t.createElement(ee.Provider,{value:e},n):n}(e.context)}function ge(e){c(!1)}function ve(n){let{basename:r="/",children:i=null,location:o,navigationType:s=e.Pop,navigator:a,static:l=!1,future:u}=n;Y()&&c(!1);let h=r.replace(/^\/*/,"/"),d=t.useMemo((()=>({basename:h,navigator:a,static:l,future:H({v7_relativeSplatPath:!1},u)})),[h,u,a,l]);"string"===typeof o&&(o=f(o));let{pathname:p="/",search:m="",hash:g="",state:v=null,key:y="default"}=o,b=t.useMemo((()=>{let e=I(p,h);return null==e?null:{location:{pathname:e,search:m,hash:g,state:v,key:y},navigationType:s}}),[h,p,m,g,v,y,s]);return null==b?null:t.createElement(K.Provider,{value:d},t.createElement(q.Provider,{children:i,value:b}))}function ye(e){let{children:t,location:n}=e;return ne(be(t),n)}new Promise((()=>{}));t.Component;function be(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,be(e.props.children,o));e.type!==ge&&c(!1),e.props.index&&e.props.children&&c(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=be(e.props.children,o)),r.push(s)})),r}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const we=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];try{window.__reactRouterVersion="6"}catch(rA){}new Map;const Ee=r.startTransition;s.flushSync,r.useId;function Se(e){let{basename:n,children:r,future:i,window:o}=e,s=t.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),m((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return d("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:p(t)}),null,a)));let l=s.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},f=t.useCallback((e=>{h&&Ee?Ee((()=>u(e))):u(e)}),[u,h]);return t.useLayoutEffect((()=>l.listen(f)),[l,f]),t.createElement(ve,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ae="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Me=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Te=t.forwardRef((function(e,n){let r,{onClick:i,relative:o,reloadDocument:s,replace:a,state:l,target:u,to:h,preventScrollReset:d,unstable_viewTransition:f}=e,m=xe(e,we),{basename:g}=t.useContext(K),v=!1;if("string"===typeof h&&Me.test(h)&&(r=h,Ae))try{let e=new URL(window.location.href),t=h.startsWith("//")?new URL(e.protocol+h):new URL(h),n=I(t.pathname,g);t.origin===e.origin&&null!=n?h=n+t.search+t.hash:v=!0}catch(rA){}let y=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||c(!1);let{basename:i,navigator:o}=t.useContext(K),{hash:s,pathname:a,search:l}=te(e,{relative:r}),u=a;return"/"!==i&&(u="/"===a?i:O([i,a])),o.createHref({pathname:u,search:l,hash:s})}(h,{relative:o}),b=function(e,n){let{target:r,replace:i,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l}=void 0===n?{}:n,c=$(),u=J(),h=te(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:p(u)===p(h);c(e,{replace:n,state:o,preventScrollReset:s,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,o,r,e,s,a,l])}(h,{replace:a,state:l,target:u,preventScrollReset:d,relative:o,unstable_viewTransition:f});return t.createElement("a",_e({},m,{href:r||y,onClick:v||s?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))}));var Ce,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ce||(Ce={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));const Le=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:s}=t;n(e),r(e),i(e),o(e),s(e)}))},Ie=n.p+"static/media/homepage-main.2ba6cb0003c4389f40a7.jpg",Pe=n.p+"static/media/homepage-sub-small.b4ffe0a9094b6e26df45.jpg";var Ne=n(579);function ke(){return(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{className:"bg-center bg-cover bg-no-repeat",style:{backgroundImage:"url(".concat(Ie,")"),height:"100vh"},children:[(0,Ne.jsx)("div",{style:{backgroundColor:"rgba(0,0,0,0.5)",top:"0",bottom:"0",left:"0",right:"0",position:"absolute",zIndex:"1"}}),(0,Ne.jsxs)("div",{className:"flex flex-col h-full items-center justify-center gap-4 relative",style:{zIndex:"2"},children:[(0,Ne.jsx)("h2",{className:"text-white text-2xl font-bold mb-6 md:text-8xl",children:"3D Printing Made Local"}),(0,Ne.jsxs)("div",{className:"mx-4 md:mx-0",children:[(0,Ne.jsx)("a",{className:"p-4 py-3 bg-brand-blue rounded text-white mb-3 md:mb-0 md:mr-3 text-xl font-bold inline-block w-full md:w-[280px] text-center",href:"#iwantprint",children:"I have something to print"}),(0,Ne.jsx)("a",{className:"p-4 py-3 bg-brand-purple rounded text-white text-xl font-bold inline-block w-full md:w-[280px] text-center",href:"#ihaveprinter",children:"I have a 3D printer"})]})]})]}),(0,Ne.jsxs)("div",{className:"container mx-[5%] w-[90%] md:w-full md:m-auto",children:[(0,Ne.jsxs)("div",{id:"iwantprint",className:"flex flex-col items-center justify-center py-[100px]",children:[(0,Ne.jsx)("h2",{className:"font-bold text-5xl pb-8 text-center",children:"Getting Your Model Printed"}),(0,Ne.jsxs)("div",{className:"flex flex-col md:flex-row gap-12 w-full py-8",children:[(0,Ne.jsxs)("div",{className:"flex flex-col items-center p-4 pb-8 px-12 rounded w-full md:w-[25%] text-xl text-center",style:{border:"1px solid #ccc"},children:[(0,Ne.jsx)("div",{class:"flex items-center justify-center w-24 h-24 step-circle rounded-full",children:(0,Ne.jsx)("span",{class:"text-5xl font-bold",children:"1"})}),(0,Ne.jsx)("h2",{className:"text-2xl mb-4",children:"Upload a 3D Model"}),(0,Ne.jsxs)("p",{children:["We accept STL files or a link to ",(0,Ne.jsx)("a",{href:"https://www.thingiverse.com/",className:"fg-brand-blue",children:"thingiverse"})]})]}),(0,Ne.jsxs)("div",{className:"flex flex-col items-center p-4 pb-8 px-12 rounded w-full md:w-[25%] text-xl text-center",style:{border:"1px solid #ccc"},children:[(0,Ne.jsx)("div",{class:"flex items-center justify-center w-24 h-24 step-circle rounded-full",children:(0,Ne.jsx)("span",{class:"text-5xl font-bold",children:"2"})}),(0,Ne.jsx)("h2",{className:"text-2xl mb-4 mt-3",children:"Set Your Preferences"}),(0,Ne.jsx)("p",{children:"Customize your print by specifying material, color, and infill"})]}),(0,Ne.jsxs)("div",{className:"flex flex-col items-center p-4 pb-8 px-12 rounded w-full md:w-[25%] text-xl text-center",style:{border:"1px solid #ccc"},children:[(0,Ne.jsx)("div",{class:"flex items-center justify-center w-24 h-24 step-circle rounded-full",children:(0,Ne.jsx)("span",{class:"text-5xl font-bold",children:"3"})}),(0,Ne.jsx)("h2",{className:"text-2xl mb-4 mt-3",children:"Submit Your Order"}),(0,Ne.jsx)("p",{children:"We\u2019ll connect you with a local 3D printing enthusiast to get your order printed"})]}),(0,Ne.jsxs)("div",{className:"flex flex-col items-center p-4 pb-8 px-12 rounded w-full md:w-[25%] text-xl text-center",style:{border:"1px solid #ccc"},children:[(0,Ne.jsx)("div",{class:"flex items-center justify-center w-24 h-24 step-circle rounded-full",children:(0,Ne.jsx)("span",{class:"text-5xl font-bold",children:"4"})}),(0,Ne.jsx)("h2",{className:"text-2xl mb-4 mt-3",children:"Pickup Your Order"}),(0,Ne.jsx)("p",{children:"Connect with your 3D printer to pickup your print"})]})]}),(0,Ne.jsx)(Te,{to:"/create",className:"mt-8 bg-brand-blue text-white p-4 px-6 rounded",children:"Get Started"})]}),(0,Ne.jsx)("div",{id:"ihaveprinter",children:(0,Ne.jsxs)("div",{className:"flex flex-col w-[90%] md:flex-row items-center p-12 rounded",style:{backgroundColor:"#F7F7F7"},children:[(0,Ne.jsxs)("div",{className:" w-[100%] md:w-[40%] pr-12",children:[(0,Ne.jsx)("h2",{className:"font-bold text-5xl mb-8",children:"I Have a 3D Printer"}),(0,Ne.jsxs)("p",{className:"text-xl mb-8",children:["Select a job in your local area and start making extra money! It\u2019s as easy as that.",(0,Ne.jsx)("br",{}),(0,Ne.jsx)("br",{}),"Our mission at PrintLink3d is to connect customers with local 3D printing enthusiasts. Interested? "]}),(0,Ne.jsx)(Te,{to:"/browse",className:"bg-brand-purple text-white p-4 px-6 rounded",children:"Browse Jobs"})]}),(0,Ne.jsx)("div",{className:"w-full md:w-[60%]",children:(0,Ne.jsx)("img",{className:"rounded",src:Pe})})]})})]}),(0,Ne.jsx)("div",{className:"bg-black w-full h-[70px] mt-[100px]",children:(0,Ne.jsx)("div",{className:"container m-auto text-white pt-[25px]",children:(0,Ne.jsx)("p",{className:"text-xl font-bold",children:"\xa9 PrintLink3d 2024"})})})]})}const De=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,s=o?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|s>>4;let h=(15&s)<<2|l>>6,d=63&l;a||(d=64,o||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(De(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const s=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==s||null==a)throw new Ue;const l=t<<2|o>>4;if(r.push(l),64!==s){const e=o<<4&240|s>>2;if(r.push(e),64!==a){const e=s<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fe=function(e){return function(e){const t=De(e);return Oe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Be=function(e){try{return Oe.decodeString(e,!0)}catch(rA){console.error("base64Decode failed: ",rA)}return null};const je=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Ve=()=>{try{return je()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/printlink3d",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_KEY:"AIzaSyAL-MdgOol7KOcEXtyaZ4mvkaLRSvqRsRk",REACT_APP_GOOGLE_KEY:"AIzaSyBeu0giaCGz9vMeTn1HBRtTRlWQuVZwpZs"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(rA){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(rA){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(rA))}},ze=e=>{var t,n;return null===(n=null===(t=Ve())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},He=e=>{const t=ze(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ge=()=>{var e;return null===(e=Ve())||void 0===e?void 0:e.config},We=e=>{var t;return null===(t=Ve())||void 0===t?void 0:t["_".concat(e)]};class Ke{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function qe(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Fe(JSON.stringify({alg:"none",type:"JWT"})),Fe(JSON.stringify(o)),""].join(".")}function Xe(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Qe(){return!function(){var e;const t=null===(e=Ve())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(rA){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ye(){try{return"object"===typeof indexedDB}catch(rA){return!1}}class Je extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ze.prototype.create)}}class Ze{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace($e,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",o="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Je(n,o,t)}}const $e=/\{\$([^}]+)}/g;function et(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(tt(n)&&tt(o)){if(!et(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function tt(e){return null!==e&&"object"===typeof e}function nt(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function rt(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function it(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class ot{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=st),void 0===r.error&&(r.error=st),void 0===r.complete&&(r.complete=st);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(rA){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(rA){"undefined"!==typeof console&&console.error&&console.error(rA)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function st(){}function at(e){return e&&e._delegate?e._delegate:e}class lt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ct="[DEFAULT]";class ut{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Ke;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(rA){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(rA){if(r)return null;throw rA}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ct})}catch(rA){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(rA){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&o.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===ct?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ct;return this.component?this.component.multipleInstances?e:ct:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ht{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new ut(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const dt=[];var pt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pt||(pt={}));const ft={debug:pt.DEBUG,verbose:pt.VERBOSE,info:pt.INFO,warn:pt.WARN,error:pt.ERROR,silent:pt.SILENT},mt=pt.INFO,gt={[pt.DEBUG]:"log",[pt.VERBOSE]:"log",[pt.INFO]:"info",[pt.WARN]:"warn",[pt.ERROR]:"error"},vt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=gt[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,o=new Array(i>2?i-2:0),s=2;s<i;s++)o[s-2]=arguments[s];console[r]("[".concat(n,"]  ").concat(e.name,":"),...o)};class yt{constructor(e){this.name=e,this._logLevel=mt,this._logHandler=vt,this._userLogHandler=null,dt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?ft[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.DEBUG,...t),this._logHandler(this,pt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.VERBOSE,...t),this._logHandler(this,pt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.INFO,...t),this._logHandler(this,pt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.WARN,...t),this._logHandler(this,pt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,pt.ERROR,...t),this._logHandler(this,pt.ERROR,...t)}}const bt=(e,t)=>t.some((t=>e instanceof t));let _t,xt;const wt=new WeakMap,Et=new WeakMap,St=new WeakMap,At=new WeakMap,Mt=new WeakMap;let Tt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Et.get(e);if("objectStoreNames"===t)return e.objectStoreNames||St.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Lt(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ct(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(xt||(xt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(It(this),n),Lt(wt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Lt(e.apply(It(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const o=e.call(It(this),t,...r);return St.set(o,t.sort?t.sort():[t]),Lt(o)}}function Rt(e){return"function"===typeof e?Ct(e):(e instanceof IDBTransaction&&function(e){if(Et.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));Et.set(e,t)}(e),bt(e,_t||(_t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Tt):e)}function Lt(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Lt(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&wt.set(t,e)})).catch((()=>{})),Mt.set(t,e),t}(e);if(At.has(e))return At.get(e);const t=Rt(e);return t!==e&&(At.set(e,t),Mt.set(t,e)),t}const It=e=>Mt.get(e);const Pt=["get","getKey","getAll","getAllKeys","count"],Nt=["put","add","delete","clear"],kt=new Map;function Dt(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(kt.get(t))return kt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Nt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Pt.includes(n))return;const o=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let o=t.store;for(var s=arguments.length,a=new Array(s>1?s-1:0),l=1;l<s;l++)a[l-1]=arguments[l];return r&&(o=o.index(a.shift())),(await Promise.all([o[n](...a),i&&t.done]))[0]};return kt.set(t,o),o}Tt=(e=>({...e,get:(t,n,r)=>Dt(t,n)||e.get(t,n,r),has:(t,n)=>!!Dt(t,n)||e.has(t,n)}))(Tt);class Ot{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Ut="@firebase/app",Ft="0.10.0",Bt=new yt("@firebase/app"),jt="[DEFAULT]",Vt={[Ut]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},zt=new Map,Ht=new Map,Gt=new Map;function Wt(e,t){try{e.container.addComponent(t)}catch(rA){Bt.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),rA)}}function Kt(e){const t=e.name;if(Gt.has(t))return Bt.debug("There were multiple attempts to register component ".concat(t,".")),!1;Gt.set(t,e);for(const n of zt.values())Wt(n,e);for(const n of Ht.values())Wt(n,e);return!0}function qt(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Xt(e){return void 0!==e.settings}const Qt=new Ze("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Yt{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new lt("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qt.create("app-deleted",{appName:this._name})}}const Jt="10.10.0";function Zt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:jt,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Qt.create("bad-app-name",{appName:String(i)});if(n||(n=Ge()),!n)throw Qt.create("no-options");const o=zt.get(i);if(o){if(et(n,o.options)&&et(r,o.config))return o;throw Qt.create("duplicate-app",{appName:i})}const s=new ht(i);for(const l of Gt.values())s.addComponent(l);const a=new Yt(n,r,s);return zt.set(i,a),a}function $t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;const t=zt.get(e);if(!t&&e===jt&&Ge())return Zt();if(!t)throw Qt.create("no-app",{appName:e});return t}function en(e,t,n){var r;let i=null!==(r=Vt[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=t.match(/\s|\//);if(o||s){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&e.push("and"),s&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Bt.warn(e.join(" "))}Kt(new lt("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}const tn="firebase-heartbeat-database",nn=1,rn="firebase-heartbeat-store";let on=null;function sn(){return on||(on=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=indexedDB.open(e,t),a=Lt(s);return r&&s.addEventListener("upgradeneeded",(e=>{r(Lt(s.result),e.oldVersion,e.newVersion,Lt(s.transaction),e)})),n&&s.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(tn,nn,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(rn)}catch(rA){console.warn(rA)}}}).catch((e=>{throw Qt.create("idb-open",{originalErrorMessage:e.message})}))),on}async function an(e,t){try{const n=(await sn()).transaction(rn,"readwrite"),r=n.objectStore(rn);await r.put(t,ln(e)),await n.done}catch(rA){if(rA instanceof Je)Bt.warn(rA.message);else{const t=Qt.create("idb-set",{originalErrorMessage:null===rA||void 0===rA?void 0:rA.message});Bt.warn(t.message)}}}function ln(e){return"".concat(e.name,"!").concat(e.options.appId)}class cn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new hn(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=un();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=un(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),dn(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),dn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=Fe(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function un(){return(new Date).toISOString().substring(0,10)}class hn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ye()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await sn()).transaction(rn),n=await t.objectStore(rn).get(ln(e));return await t.done,n}catch(rA){if(rA instanceof Je)Bt.warn(rA.message);else{const t=Qt.create("idb-get",{originalErrorMessage:null===rA||void 0===rA?void 0:rA.message});Bt.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return an(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return an(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function dn(e){return Fe(JSON.stringify({version:2,heartbeats:e})).length}var pn;pn="",Kt(new lt("platform-logger",(e=>new Ot(e)),"PRIVATE")),Kt(new lt("heartbeat",(e=>new cn(e)),"PRIVATE")),en(Ut,Ft,pn),en(Ut,Ft,"esm2017"),en("fire-js","");var fn,mn="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},gn={},vn=vn||{},yn=mn||self;function bn(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function _n(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var xn="closure_uid_"+(1e9*Math.random()>>>0),wn=0;function En(e,t,n){return e.call.apply(e.bind,arguments)}function Sn(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function An(e,t,n){return(An=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?En:Sn).apply(null,arguments)}function Mn(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Tn(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function Cn(){this.s=this.s,this.o=this.o}Cn.prototype.s=!1,Cn.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,xn)&&e[xn]||(e[xn]=++wn))},Cn.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Rn=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ln(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function In(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(bn(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Pn(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Pn.prototype.h=function(){this.defaultPrevented=!0};var Nn=function(){if(!yn.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};yn.addEventListener("test",e,t),yn.removeEventListener("test",e,t)}catch(n){}return e}();function kn(e){return/^[\s\xa0]*$/.test(e)}function Dn(){var e=yn.navigator;return e&&(e=e.userAgent)?e:""}function On(e){return-1!=Dn().indexOf(e)}function Un(e){return Un[" "](e),e}Un[" "]=function(){};var Fn,Bn,jn=On("Opera"),Vn=On("Trident")||On("MSIE"),zn=On("Edge"),Hn=zn||Vn,Gn=On("Gecko")&&!(-1!=Dn().toLowerCase().indexOf("webkit")&&!On("Edge"))&&!(On("Trident")||On("MSIE"))&&!On("Edge"),Wn=-1!=Dn().toLowerCase().indexOf("webkit")&&!On("Edge");function Kn(){var e=yn.document;return e?e.documentMode:void 0}e:{var qn="",Xn=function(){var e=Dn();return Gn?/rv:([^\);]+)(\)|;)/.exec(e):zn?/Edge\/([\d\.]+)/.exec(e):Vn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Wn?/WebKit\/(\S+)/.exec(e):jn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Xn&&(qn=Xn?Xn[1]:""),Vn){var Qn=Kn();if(null!=Qn&&Qn>parseFloat(qn)){Fn=String(Qn);break e}}Fn=qn}if(yn.document&&Vn){var Yn=Kn();Bn=Yn||(parseInt(Fn,10)||void 0)}else Bn=void 0;var Jn=Bn;function Zn(e,t){if(Pn.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Gn){e:{try{Un(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:$n[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Zn.$.h.call(this)}}Tn(Zn,Pn);var $n={2:"touch",3:"pen",4:"mouse"};Zn.prototype.h=function(){Zn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var er="closure_listenable_"+(1e6*Math.random()|0),tr=0;function nr(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++tr,this.fa=this.ia=!1}function rr(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ir(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function or(e){const t={};for(const n in e)t[n]=e[n];return t}const sr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ar(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<sr.length;t++)n=sr[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function lr(e){this.src=e,this.g={},this.h=0}function cr(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=Rn(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(rr(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ur(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}lr.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var s=ur(e,t,r,i);return-1<s?(t=e[s],n||(t.ia=!1)):((t=new nr(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var hr="closure_lm_"+(1e6*Math.random()|0),dr={};function pr(e,t,n,r,i){if(r&&r.once)return mr(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)pr(e,t[o],n,r,i);return null}return n=wr(n),e&&e[er]?e.O(t,n,_n(r)?!!r.capture:!!r,i):fr(e,t,n,!1,r,i)}function fr(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var s=_n(i)?!!i.capture:!!i,a=_r(e);if(a||(e[hr]=a=new lr(e)),(n=a.add(t,n,r,s,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=br;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Nn||(i=s),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(yr(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function mr(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)mr(e,t[o],n,r,i);return null}return n=wr(n),e&&e[er]?e.P(t,n,_n(r)?!!r.capture:!!r,i):fr(e,t,n,!0,r,i)}function gr(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)gr(e,t[o],n,r,i);else r=_n(r)?!!r.capture:!!r,n=wr(n),e&&e[er]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=ur(o=e.g[t],n,r,i))&&(rr(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--)))):e&&(e=_r(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ur(t,n,r,i)),(n=-1<e?t[e]:null)&&vr(n))}function vr(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[er])cr(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(yr(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_r(t))?(cr(n,e),0==n.h&&(n.src=null,t[hr]=null)):rr(e)}}}function yr(e){return e in dr?dr[e]:dr[e]="on"+e}function br(e,t){if(e.fa)e=!0;else{t=new Zn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&vr(e),e=n.call(r,t)}return e}function _r(e){return(e=e[hr])instanceof lr?e:null}var xr="__closure_events_fn_"+(1e9*Math.random()>>>0);function wr(e){return"function"===typeof e?e:(e[xr]||(e[xr]=function(t){return e.handleEvent(t)}),e[xr])}function Er(){Cn.call(this),this.i=new lr(this),this.S=this,this.J=null}function Sr(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Pn(t,e);else if(t instanceof Pn)t.target=t.target||e;else{var i=t;ar(t=new Pn(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=t.g=n[o];i=Ar(s,r,!0,t)&&i}if(i=Ar(s=t.g=e,r,!0,t)&&i,i=Ar(s,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=Ar(s=t.g=n[o],r,!1,t)&&i}function Ar(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var s=t[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,l=s.la||s.src;s.ia&&cr(e.i,s),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}Tn(Er,Cn),Er.prototype[er]=!0,Er.prototype.removeEventListener=function(e,t,n,r){gr(this,e,t,n,r)},Er.prototype.N=function(){if(Er.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)rr(n[r]);delete t.g[e],t.h--}}this.J=null},Er.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Er.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Mr=yn.JSON.stringify;function Tr(){var e=kr;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Cr=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Rr),(e=>e.reset()));class Rr{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lr(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ir(e){yn.setTimeout((()=>{throw e}),0)}let Pr,Nr=!1,kr=new class{constructor(){this.h=this.g=null}add(e,t){const n=Cr.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Dr=()=>{const e=yn.Promise.resolve(void 0);Pr=()=>{e.then(Or)}};var Or=()=>{for(var e;e=Tr();){try{e.h.call(e.g)}catch(n){Ir(n)}var t=Cr;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Nr=!1};function Ur(e,t){Er.call(this),this.h=e||1,this.g=t||yn,this.j=An(this.qb,this),this.l=Date.now()}function Fr(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Br(e,t,n){if("function"===typeof e)n&&(e=An(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=An(e.handleEvent,e)}return 2147483647<Number(t)?-1:yn.setTimeout(e,t||0)}function jr(e){e.g=Br((()=>{e.g=null,e.i&&(e.i=!1,jr(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Tn(Ur,Er),(fn=Ur.prototype).ga=!1,fn.T=null,fn.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Sr(this,"tick"),this.ga&&(Fr(this),this.start()))}},fn.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},fn.N=function(){Ur.$.N.call(this),Fr(this),delete this.g};class Vr extends Cn{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:jr(this)}N(){super.N(),this.g&&(yn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function zr(e){Cn.call(this),this.h=e,this.g={}}Tn(zr,Cn);var Hr=[];function Gr(e,t,n,r){Array.isArray(n)||(n&&(Hr[0]=n.toString()),n=Hr);for(var i=0;i<n.length;i++){var o=pr(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Wr(e){ir(e.g,(function(e,t){this.g.hasOwnProperty(t)&&vr(e)}),e),e.g={}}function Kr(){this.g=!0}function qr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Mr(n)}catch(a){return t}}(e,n)+(r?" "+r:"")}))}zr.prototype.N=function(){zr.$.N.call(this),Wr(this)},zr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Kr.prototype.Ea=function(){this.g=!1},Kr.prototype.info=function(){};var Xr={},Qr=null;function Yr(){return Qr=Qr||new Er}function Jr(e){Pn.call(this,Xr.Ta,e)}function Zr(e){const t=Yr();Sr(t,new Jr(t))}function $r(e,t){Pn.call(this,Xr.STAT_EVENT,e),this.stat=t}function ei(e){const t=Yr();Sr(t,new $r(t,e))}function ti(e,t){Pn.call(this,Xr.Ua,e),this.size=t}function ni(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return yn.setTimeout((function(){e()}),t)}Xr.Ta="serverreachability",Tn(Jr,Pn),Xr.STAT_EVENT="statevent",Tn($r,Pn),Xr.Ua="timingevent",Tn(ti,Pn);var ri={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ii={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function oi(){}function si(e){return e.h||(e.h=e.i())}function ai(){}oi.prototype.h=null;var li,ci={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function ui(){Pn.call(this,"d")}function hi(){Pn.call(this,"c")}function di(){}function pi(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new zr(this),this.P=mi,e=Hn?125:void 0,this.V=new Ur(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new fi}function fi(){this.i=null,this.g="",this.h=!1}Tn(ui,Pn),Tn(hi,Pn),Tn(di,oi),di.prototype.g=function(){return new XMLHttpRequest},di.prototype.i=function(){return{}},li=new di;var mi=45e3,gi={},vi={};function yi(e,t,n){e.L=1,e.A=Ui(Pi(t)),e.u=n,e.S=!0,bi(e,null)}function bi(e,t){e.G=Date.now(),Ei(e),e.B=Pi(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),Yi(n.i,"t",r),e.o=0,n=e.l.J,e.h=new fi,e.g=Zo(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Vr(An(e.Pa,e,e.g),e.O)),Gr(e.U,e.g,"readystatechange",e.nb),t=e.I?or(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Zr(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var s="",a=o.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");s=2<=h.length&&"type"==h[1]?s+(u+"=")+c+"&":s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+s}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function _i(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function xi(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=wi(e,n),r==vi){4==t&&(e.s=4,ei(14),i=!1),qr(e.j,e.m,null,"[Incomplete Response]");break}if(r==gi){e.s=4,ei(15),qr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}qr(e.j,e.m,r,null),Ci(e,r)}_i(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,ei(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Go(t),t.M=!0,ei(11))):(qr(e.j,e.m,n,"[Invalid Chunked Response]"),Ti(e),Mi(e))}function wi(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?vi:(n=Number(t.substring(n,r)),isNaN(n)?gi:(r+=1)+n>t.length?vi:(t=t.slice(r,r+n),e.o=r+n,t))}function Ei(e){e.Y=Date.now()+e.P,Si(e,e.P)}function Si(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=ni(An(e.lb,e),t)}function Ai(e){e.C&&(yn.clearTimeout(e.C),e.C=null)}function Mi(e){0==e.l.H||e.J||qo(e.l,e)}function Ti(e){Ai(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Fr(e.V),Wr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ci(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ro(n.i,e)))if(!e.K&&ro(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Ko(n),Oo(n)}Ho(n),ei(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ni(An(n.ib,n),6e3));if(1>=no(n.i)&&n.oa){try{n.oa()}catch(c_){}n.oa=void 0}}else Qo(n,11)}else if((e.K||n.g==e)&&Ko(n),!kn(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(io(o,o.h),o.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Oi(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var s=e;if((r=n).wa=Jo(r,r.J?r.pa:null,r.Y),s.K){oo(r.i,s);var a=s,l=r.L;l&&a.setTimeout(l),a.C&&(Ai(a),Ei(a)),r.g=s}else zo(r);0<n.j.length&&Fo(n)}else"stop"!=c[0]&&"close"!=c[0]||Qo(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Qo(n,7):Do(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Zr()}catch(c_){}}function Ri(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(bn(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(bn(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(bn(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(fn=pi.prototype).setTimeout=function(e){this.P=e},fn.nb=function(e){e=e.target;const t=this.M;t&&3==Ro(e)?t.l():this.Pa(e)},fn.Pa=function(e){try{if(e==this.g)e:{const u=Ro(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Hn||this.g&&(this.h.h||this.g.ja()||Lo(this.g)))){this.J||4!=u||7==t||Zr(),Ai(this);var n=this.g.da();this.ca=n;t:if(_i(this)){var r=Lo(this.g);e="";var i=r.length,o=4==Ro(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ti(this),Mi(this);var s="";break t}this.h.i=new yn.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,s){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+s}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kn(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,ei(12),Ti(this),Mi(this);break e}qr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ci(this,n)}this.S?(xi(this,u,s),Hn&&this.i&&3==u&&(Gr(this.U,this.V,"tick",this.mb),this.V.start())):(qr(this.j,this.m,s,null),Ci(this,s)),4==u&&Ti(this),this.i&&!this.J&&(4==u?qo(this.l,this):(this.i=!1,Ei(this)))}else(function(e){const t={};e=(e.g&&2<=Ro(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(kn(e[r]))continue;var n=Lr(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<s.indexOf("Unknown SID")?(this.s=3,ei(12)):(this.s=0,ei(13)),Ti(this),Mi(this)}}}catch(u){}},fn.mb=function(){if(this.g){var e=Ro(this.g),t=this.g.ja();this.o<t.length&&(Ai(this),xi(this,e,t),this.i&&4!=e&&Ei(this))}},fn.cancel=function(){this.J=!0,Ti(this)},fn.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Zr(),ei(17)),Ti(this),this.s=2,Mi(this)):Si(this,this.Y-e)};var Li=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ii(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Ii){this.h=e.h,Ni(this,e.j),this.s=e.s,this.g=e.g,ki(this,e.m),this.l=e.l;var t=e.i,n=new Ki;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Di(this,n),this.o=e.o}else e&&(t=String(e).match(Li))?(this.h=!1,Ni(this,t[1]||"",!0),this.s=Fi(t[2]||""),this.g=Fi(t[3]||"",!0),ki(this,t[4]),this.l=Fi(t[5]||"",!0),Di(this,t[6]||"",!0),this.o=Fi(t[7]||"")):(this.h=!1,this.i=new Ki(null,this.h))}function Pi(e){return new Ii(e)}function Ni(e,t,n){e.j=n?Fi(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ki(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Di(e,t,n){t instanceof Ki?(e.i=t,function(e,t){t&&!e.j&&(qi(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Xi(this,t),Yi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Bi(t,Gi)),e.i=new Ki(t,e.h))}function Oi(e,t,n){e.i.set(t,n)}function Ui(e){return Oi(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Fi(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Bi(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ji),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ji(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ii.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Bi(t,Vi,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Bi(t,Vi,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Bi(n,"/"==n.charAt(0)?Hi:zi,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Bi(n,Wi)),e.join("")};var Vi=/[#\/\?@]/g,zi=/[#\?:]/g,Hi=/[#\?]/g,Gi=/[#\?@]/g,Wi=/#/g;function Ki(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function qi(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Xi(e,t){qi(e),t=Ji(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Qi(e,t){return qi(e),t=Ji(e,t),e.g.has(t)}function Yi(e,t,n){Xi(e,t),0<n.length&&(e.i=null,e.g.set(Ji(e,t),Ln(n)),e.h+=n.length)}function Ji(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(fn=Ki.prototype).add=function(e,t){qi(this),this.i=null,e=Ji(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},fn.forEach=function(e,t){qi(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},fn.ta=function(){qi(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},fn.Z=function(e){qi(this);let t=[];if("string"===typeof e)Qi(this,e)&&(t=t.concat(this.g.get(Ji(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},fn.set=function(e,t){return qi(this),this.i=null,Qi(this,e=Ji(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},fn.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},fn.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;""!==s[r]&&(i+="="+encodeURIComponent(String(s[r]))),e.push(i)}}return this.i=e.join("&")};var Zi=class{constructor(e,t){this.g=e,this.map=t}};function $i(e){this.l=e||eo,yn.PerformanceNavigationTiming?e=0<(e=yn.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(yn.g&&yn.g.Ka&&yn.g.Ka()&&yn.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var eo=10;function to(e){return!!e.h||!!e.g&&e.g.size>=e.j}function no(e){return e.h?1:e.g?e.g.size:0}function ro(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function io(e,t){e.g?e.g.add(t):e.h=t}function oo(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function so(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Ln(e.i)}$i.prototype.cancel=function(){if(this.i=so(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ao,lo=class{stringify(e){return yn.JSON.stringify(e,void 0)}parse(e){return yn.JSON.parse(e,void 0)}};function co(){this.g=new lo}function uo(e,t,n){const r=n||"";try{Ri(e,(function(e,n){let i=e;_n(e)&&(i=Mr(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(rA){throw t.push(r+"type="+encodeURIComponent("_badmap")),rA}}function ho(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function po(e){this.l=e.ec||null,this.j=e.ob||!1}function fo(e,t){Er.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=mo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tn(po,oi),po.prototype.g=function(){return new fo(this.l,this.j)},po.prototype.i=(ao={},function(){return ao}),Tn(fo,Er);var mo=0;function go(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function vo(e){e.readyState=4,e.l=null,e.j=null,e.A=null,yo(e)}function yo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(fn=fo.prototype).open=function(e,t){if(this.readyState!=mo)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,yo(this)},fn.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||yn).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},fn.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,vo(this)),this.readyState=mo},fn.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,yo(this)),this.g&&(this.readyState=3,yo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof yn.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;go(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},fn.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?vo(this):yo(this),3==this.readyState&&go(this)}},fn.Za=function(e){this.g&&(this.response=this.responseText=e,vo(this))},fn.Ya=function(e){this.g&&(this.response=e,vo(this))},fn.ka=function(){this.g&&vo(this)},fn.setRequestHeader=function(e,t){this.v.append(e,t)},fn.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},fn.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fo.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var bo=yn.JSON.parse;function _o(e){Er.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=xo,this.L=this.M=!1}Tn(_o,Er);var xo="",wo=/^https?$/i,Eo=["POST","PUT"];function So(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Ao(e),To(e)}function Ao(e){e.F||(e.F=!0,Sr(e,"complete"),Sr(e,"error"))}function Mo(e){if(e.h&&"undefined"!=typeof vn&&(!e.C[1]||4!=Ro(e)||2!=e.da()))if(e.v&&4==Ro(e))Br(e.La,0,e);else if(Sr(e,"readystatechange"),4==Ro(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(Li)[1]||null;!i&&yn.self&&yn.self.location&&(i=yn.self.location.protocol.slice(0,-1)),r=!wo.test(i?i.toLowerCase():"")}n=r}if(n)Sr(e,"complete"),Sr(e,"success");else{e.m=6;try{var o=2<Ro(e)?e.g.statusText:""}catch(s){o=""}e.j=o+" ["+e.da()+"]",Ao(e)}}finally{To(e)}}}function To(e,t){if(e.g){Co(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||Sr(e,"ready");try{n.onreadystatechange=r}catch(rA){}}}function Co(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(yn.clearTimeout(e.A),e.A=null)}function Ro(e){return e.g?e.g.readyState:0}function Lo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case xo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Us){return null}}function Io(e){let t="";return ir(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Po(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Io(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Oi(e,t,n))}function No(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function ko(e){this.Ga=0,this.j=[],this.l=new Kr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=No("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=No("baseRetryDelayMs",5e3,e),this.hb=No("retryDelaySeedMs",1e4,e),this.eb=No("forwardChannelMaxRetries",2,e),this.xa=No("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new $i(e&&e.concurrentRequestLimit),this.Ja=new co,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Do(e){if(Uo(e),3==e.H){var t=e.W++,n=Pi(e.I);if(Oi(n,"SID",e.K),Oi(n,"RID",t),Oi(n,"TYPE","terminate"),jo(e,n),(t=new pi(e,e.l,t)).L=2,t.A=Ui(Pi(n)),n=!1,yn.navigator&&yn.navigator.sendBeacon)try{n=yn.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&yn.Image&&((new Image).src=t.A,n=!0),n||(t.g=Zo(t.l,null),t.g.ha(t.A)),t.G=Date.now(),Ei(t)}Yo(e)}function Oo(e){e.g&&(Go(e),e.g.cancel(),e.g=null)}function Uo(e){Oo(e),e.u&&(yn.clearTimeout(e.u),e.u=null),Ko(e),e.i.cancel(),e.m&&("number"===typeof e.m&&yn.clearTimeout(e.m),e.m=null)}function Fo(e){if(!to(e.i)&&!e.m){e.m=!0;var t=e.Na;Pr||Dr(),Nr||(Pr(),Nr=!0),kr.add(t,e),e.C=0}}function Bo(e,t){var n;n=t?t.m:e.W++;const r=Pi(e.I);Oi(r,"SID",e.K),Oi(r,"RID",n),Oi(r,"AID",e.V),jo(e,r),e.o&&e.s&&Po(r,e.o,e.s),n=new pi(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Vo(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),io(e.i,n),yi(n,r,t)}function jo(e,t){e.na&&ir(e.na,(function(e,n){Oi(t,n,e)})),e.h&&Ri({},(function(e,n){Oi(t,n,e)}))}function Vo(e,t,n){n=Math.min(e.j.length,n);var r=e.h?An(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{uo(l,e,"req"+n+"_")}catch(o){r&&r(l)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function zo(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Pr||Dr(),Nr||(Pr(),Nr=!0),kr.add(t,e),e.A=0}}function Ho(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ni(An(e.Ma,e),Xo(e,e.A)),e.A++,!0)}function Go(e){null!=e.B&&(yn.clearTimeout(e.B),e.B=null)}function Wo(e){e.g=new pi(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Pi(e.wa);Oi(t,"RID","rpc"),Oi(t,"SID",e.K),Oi(t,"AID",e.V),Oi(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Oi(t,"TO",e.qa),Oi(t,"TYPE","xmlhttp"),jo(e,t),e.o&&e.s&&Po(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Ui(Pi(t)),n.u=null,n.S=!0,bi(n,e)}function Ko(e){null!=e.v&&(yn.clearTimeout(e.v),e.v=null)}function qo(e,t){var n=null;if(e.g==t){Ko(e),Go(e),e.g=null;var r=2}else{if(!ro(e.i,t))return;n=t.F,oo(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;Sr(r=Yr(),new ti(r,n)),Fo(e)}else zo(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(no(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ni(An(e.Na,e,t),Xo(e,e.C)),e.C++,!0))}(e,t)||2==r&&Ho(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qo(e,5);break;case 4:Qo(e,10);break;case 3:Qo(e,6);break;default:Qo(e,2)}}function Xo(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Qo(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=An(e.pb,e);n||(n=new Ii("//www.google.com/images/cleardot.gif"),yn.location&&"http"==yn.location.protocol||Ni(n,"https"),Ui(n)),function(e,t){const n=new Kr;if(yn.Image){const r=new Image;r.onload=Mn(ho,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Mn(ho,n,r,"TestLoadImage: error",!1,t),r.onabort=Mn(ho,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Mn(ho,n,r,"TestLoadImage: timeout",!1,t),yn.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ei(2);e.H=0,e.h&&e.h.za(t),Yo(e),Uo(e)}function Yo(e){if(e.H=0,e.ma=[],e.h){const t=so(e.i);0==t.length&&0==e.j.length||(In(e.ma,t),In(e.ma,e.j),e.i.i.length=0,Ln(e.j),e.j.length=0),e.h.ya()}}function Jo(e,t,n){var r=n instanceof Ii?Pi(n):new Ii(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ki(r,r.m);else{var i=yn.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new Ii(null);r&&Ni(o,r),t&&(o.g=t),i&&ki(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&Oi(r,n,t),Oi(r,"VER",e.ra),jo(e,r),r}function Zo(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new _o(new po({ob:n})):new _o(e.va)).Oa(e.J),t}function $o(){}function es(){if(Vn&&!(10<=Number(Jn)))throw Error("Environmental error: no available transport.")}function ts(e,t){Er.call(this),this.g=new ko(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!kn(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kn(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new is(this)}function ns(e){ui.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function rs(){hi.call(this),this.status=1}function is(e){this.g=e}function os(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ss(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],s=t+(o^n&(i^o))+r[0]+3614090360&4294967295;s=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(s<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|s>>>10))+((s=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|s>>>25))+((s=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|s>>>20))+((s=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|s>>>15))+((s=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|s>>>10))+((s=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|s>>>12))+((s=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|s>>>27))+((s=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|s>>>23))+((s=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|s>>>18))+((s=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|s>>>12))+((s=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|s>>>9))+((s=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|s>>>28))+((s=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|s>>>21))+((s=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|s>>>16))+((s=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|s>>>9))+((s=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|s>>>11))+((s=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|s>>>22))+((s=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|s>>>17))+((s=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|s>>>11))+((o=(t=n+((s=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|s>>>26))+((s=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|s>>>22))^((i=o+((s=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|s>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function as(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}(fn=_o.prototype).Oa=function(e){this.M=e},fn.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():li.g(),this.C=this.u?si(this.u):si(li),this.g.onreadystatechange=An(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(o){return void So(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=yn.FormData&&e instanceof yn.FormData,!(0<=Rn(Eo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,a]of n)this.g.setRequestHeader(s,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Co(this),0<this.B&&((this.L=function(e){return Vn&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=An(this.ua,this)):this.A=Br(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){So(this,o)}},fn.ua=function(){"undefined"!=typeof vn&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))},fn.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Sr(this,"complete"),Sr(this,"abort"),To(this))},fn.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),To(this,!0)),_o.$.N.call(this)},fn.La=function(){this.s||(this.G||this.v||this.l?Mo(this):this.kb())},fn.kb=function(){Mo(this)},fn.isActive=function(){return!!this.g},fn.da=function(){try{return 2<Ro(this)?this.g.status:-1}catch(ao){return-1}},fn.ja=function(){try{return this.g?this.g.responseText:""}catch(ao){return""}},fn.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),bo(t)}},fn.Ia=function(){return this.m},fn.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(fn=ko.prototype).ra=8,fn.H=1,fn.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new pi(this,this.l,e);let o=this.s;if(this.U&&(o?(o=or(o),ar(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Vo(this,i,t),Oi(n=Pi(this.I),"RID",e),Oi(n,"CVER",22),this.F&&Oi(n,"X-HTTP-Session-Id",this.F),jo(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(Io(o)))+"&"+t:this.o&&Po(n,this.o,o)),io(this.i,i),this.bb&&Oi(n,"TYPE","init"),this.P?(Oi(n,"$req",t),Oi(n,"SID","null"),i.aa=!0,yi(i,n,null)):yi(i,n,t),this.H=2}}else 3==this.H&&(e?Bo(this,e):0==this.j.length||to(this.i)||Bo(this))},fn.Ma=function(){if(this.u=null,Wo(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ni(An(this.jb,this),e)}},fn.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ei(10),Oo(this),Wo(this))},fn.ib=function(){null!=this.v&&(this.v=null,Oo(this),Ho(this),ei(19))},fn.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ei(2)):(this.l.info("Failed to ping google.com"),ei(1))},fn.isActive=function(){return!!this.h&&this.h.isActive(this)},(fn=$o.prototype).Ba=function(){},fn.Aa=function(){},fn.za=function(){},fn.ya=function(){},fn.isActive=function(){return!0},fn.Va=function(){},es.prototype.g=function(e,t){return new ts(e,t)},Tn(ts,Er),ts.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ei(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Jo(e,null,e.Y),Fo(e)},ts.prototype.close=function(){Do(this.g)},ts.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Mr(e),e=n);t.j.push(new Zi(t.fb++,e)),3==t.H&&Fo(t)},ts.prototype.N=function(){this.g.h=null,delete this.j,Do(this.g),delete this.g,ts.$.N.call(this)},Tn(ns,ui),Tn(rs,hi),Tn(is,$o),is.prototype.Ba=function(){Sr(this.g,"a")},is.prototype.Aa=function(e){Sr(this.g,new ns(e))},is.prototype.za=function(e){Sr(this.g,new rs)},is.prototype.ya=function(){Sr(this.g,"b")},Tn(os,(function(){this.blockSize=-1})),os.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},os.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)ss(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){ss(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){ss(this,r),i=0;break}}this.h=i,this.i+=t},os.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var ls={};function cs(e){return-128<=e&&128>e?function(e,t){var n=ls;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new as([0|e],0>e?-1:0)})):new as([0|e],0>e?-1:0)}function us(e){if(isNaN(e)||!isFinite(e))return ds;if(0>e)return vs(us(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=hs;return new as(t,0)}var hs=4294967296,ds=cs(0),ps=cs(1),fs=cs(16777216);function ms(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function gs(e){return-1==e.h}function vs(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new as(n,~e.h).add(ps)}function ys(e,t){return e.add(vs(t))}function bs(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function _s(e,t){this.g=e,this.h=t}function xs(e,t){if(ms(t))throw Error("division by zero");if(ms(e))return new _s(ds,ds);if(gs(e))return t=xs(vs(e),t),new _s(vs(t.g),vs(t.h));if(gs(t))return t=xs(e,vs(t)),new _s(vs(t.g),t.h);if(30<e.g.length){if(gs(e)||gs(t))throw Error("slowDivide_ only works with positive integers.");for(var n=ps,r=t;0>=r.X(e);)n=ws(n),r=ws(r);var i=Es(n,1),o=Es(r,1);for(r=Es(r,2),n=Es(n,2);!ms(r);){var s=o.add(r);0>=s.X(e)&&(i=i.add(n),o=s),r=Es(r,1),n=Es(n,1)}return t=ys(e,i.R(t)),new _s(i,t)}for(i=ds;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),s=(o=us(n)).R(t);gs(s)||0<s.X(e);)s=(o=us(n-=r)).R(t);ms(o)&&(o=ps),i=i.add(o),e=ys(e,s)}return new _s(i,e)}function ws(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new as(n,e.h)}function Es(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new as(i,e.h)}(fn=as.prototype).ea=function(){if(gs(this))return-vs(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:hs+r)*t,t*=hs}return e},fn.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(ms(this))return"0";if(gs(this))return"-"+vs(this).toString(e);for(var t=us(Math.pow(e,6)),n=this,r="";;){var i=xs(n,t).g,o=((0<(n=ys(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(ms(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},fn.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},fn.X=function(e){return gs(e=ys(this,e))?-1:ms(e)?0:1},fn.abs=function(){return gs(this)?vs(this):this},fn.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),s=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new as(n,-2147483648&n[n.length-1]?-1:0)},fn.R=function(e){if(ms(this)||ms(e))return ds;if(gs(this))return gs(e)?vs(this).R(vs(e)):vs(vs(this).R(e));if(gs(e))return vs(this.R(vs(e)));if(0>this.X(fs)&&0>e.X(fs))return us(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,s=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=s*l,bs(n,2*r+2*i),n[2*r+2*i+1]+=o*l,bs(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,bs(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,bs(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new as(n,0)},fn.gb=function(e){return xs(this,e).h},fn.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new as(n,this.h&e.h)},fn.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new as(n,this.h|e.h)},fn.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new as(n,this.h^e.h)},es.prototype.createWebChannel=es.prototype.g,ts.prototype.send=ts.prototype.u,ts.prototype.open=ts.prototype.m,ts.prototype.close=ts.prototype.close,ri.NO_ERROR=0,ri.TIMEOUT=8,ri.HTTP_ERROR=6,ii.COMPLETE="complete",ai.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",Er.prototype.listen=Er.prototype.O,_o.prototype.listenOnce=_o.prototype.P,_o.prototype.getLastError=_o.prototype.Sa,_o.prototype.getLastErrorCode=_o.prototype.Ia,_o.prototype.getStatus=_o.prototype.da,_o.prototype.getResponseJson=_o.prototype.Wa,_o.prototype.getResponseText=_o.prototype.ja,_o.prototype.send=_o.prototype.ha,_o.prototype.setWithCredentials=_o.prototype.Oa,os.prototype.digest=os.prototype.l,os.prototype.reset=os.prototype.reset,os.prototype.update=os.prototype.j,as.prototype.add=as.prototype.add,as.prototype.multiply=as.prototype.R,as.prototype.modulo=as.prototype.gb,as.prototype.compare=as.prototype.X,as.prototype.toNumber=as.prototype.ea,as.prototype.toString=as.prototype.toString,as.prototype.getBits=as.prototype.D,as.fromNumber=us,as.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return vs(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=us(Math.pow(n,8)),i=ds,o=0;o<t.length;o+=8){var s=Math.min(8,t.length-o),a=parseInt(t.substring(o,o+s),n);8>s?(s=us(Math.pow(n,s)),i=i.R(s).add(us(a))):i=(i=i.R(r)).add(us(a))}return i};var Ss=gn.createWebChannelTransport=function(){return new es},As=gn.getStatEventTarget=function(){return Yr()},Ms=gn.ErrorCode=ri,Ts=gn.EventType=ii,Cs=gn.Event=Xr,Rs=gn.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ls=(gn.FetchXmlHttpFactory=po,gn.WebChannel=ai),Is=gn.XhrIo=_o,Ps=gn.Md5=os,Ns=gn.Integer=as;const ks="@firebase/firestore";class Ds{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ds.UNAUTHENTICATED=new Ds(null),Ds.GOOGLE_CREDENTIALS=new Ds("google-credentials-uid"),Ds.FIRST_PARTY=new Ds("first-party-uid"),Ds.MOCK_USER=new Ds("mock-user");let Os="10.10.0";const Us=new yt("@firebase/firestore");function Fs(){return Us.logLevel}function Bs(e){if(Us.logLevel<=pt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zs);Us.debug("Firestore (".concat(Os,"): ").concat(e),...i)}}function js(e){if(Us.logLevel<=pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zs);Us.error("Firestore (".concat(Os,"): ").concat(e),...i)}}function Vs(e){if(Us.logLevel<=pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(zs);Us.warn("Firestore (".concat(Os,"): ").concat(e),...i)}}function zs(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Hs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Os,") INTERNAL ASSERTION FAILED: ")+e;throw js(t),new Error(t)}function Gs(e,t){e||Hs()}function Ws(e,t){return e}const Ks={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qs extends Je{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Xs{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Qs{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ys{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ds.UNAUTHENTICATED)))}shutdown(){}}class Js{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Zs{constructor(e){this.t=e,this.currentUser=Ds.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Xs;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Xs,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},s=e=>{Bs("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>s(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?s(e):(Bs("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Xs)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Bs("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gs("string"==typeof t.accessToken),new Qs(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gs(null===e||"string"==typeof e),new Ds(e)}}class $s{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Ds.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class ea{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new $s(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Ds.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class ta{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class na{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Bs("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Bs("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Bs("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Bs("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Gs("string"==typeof e.token),this.R=e.token,new ta(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ra(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class ia{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=ra(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function oa(e,t){return e<t?-1:e>t?1:0}function sa(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}class aa{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qs(Ks.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qs(Ks.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qs(Ks.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qs(Ks.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return aa.fromMillis(Date.now())}static fromDate(e){return aa.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new aa(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oa(this.nanoseconds,e.nanoseconds):oa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class la{constructor(e){this.timestamp=e}static fromTimestamp(e){return new la(e)}static min(){return new la(new aa(0,0))}static max(){return new la(new aa(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ca{constructor(e,t,n){void 0===t?t=0:t>e.length&&Hs(),void 0===n?n=e.length-t:n>e.length-t&&Hs(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ca.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ca?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ua extends ca{construct(e,t,n){return new ua(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new qs(Ks.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ua(e)}static emptyPath(){return new ua([])}}const ha=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class da extends ca{construct(e,t,n){return new da(e,t,n)}static isValidIdentifier(e){return ha.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),da.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new da(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new qs(Ks.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new qs(Ks.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new qs(Ks.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new qs(Ks.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new da(t)}static emptyPath(){return new da([])}}class pa{constructor(e){this.path=e}static fromPath(e){return new pa(ua.fromString(e))}static fromName(e){return new pa(ua.fromString(e).popFirst(5))}static empty(){return new pa(ua.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ua.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ua.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pa(new ua(e.slice()))}}class fa{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}fa.UNKNOWN_ID=-1;function ma(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=la.fromTimestamp(1e9===r?new aa(n+1,0):new aa(n,r));return new va(i,pa.empty(),t)}function ga(e){return new va(e.readTime,e.key,-1)}class va{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new va(la.min(),pa.empty(),-1)}static max(){return new va(la.max(),pa.empty(),-1)}}function ya(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=pa.comparator(e.documentKey,t.documentKey),0!==n?n:oa(e.largestBatchId,t.largestBatchId))}const ba="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _a{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xa(e){if(e.code!==Ks.FAILED_PRECONDITION||e.message!==ba)throw e;Bs("LocalStore","Unexpectedly lost primary lease")}class wa{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Hs(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new wa(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof wa?t:wa.resolve(t)}catch(e){return wa.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):wa.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):wa.reject(t)}static resolve(e){return new wa(((t,n)=>{t(e)}))}static reject(e){return new wa(((t,n)=>{n(e)}))}static waitFor(e){return new wa(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=wa.resolve(!1);for(const n of e)t=t.next((e=>e?wa.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new wa(((n,r)=>{const i=e.length,o=new Array(i);let s=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{o[l]=e,++s,s===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new wa(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class Ea{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Xs,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ma(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ia(t.target.error);this.V.reject(new Ma(e,n))}}static open(e,t,n,r){try{return new Ea(t,e.transaction(r,n))}catch(e){throw new Ma(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Bs("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ca(t)}}class Sa{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Sa.S(Xe())&&js("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Bs("SimpleDb","Removing database:",e),Ra(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ye())return!1;if(Sa.C())return!0;const e=Xe(),t=Sa.S(e),n=0<t&&t<10,r=Sa.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Bs("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ma(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new qs(Ks.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new qs(Ks.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ma(e,r))},r.onupgradeneeded=e=>{Bs("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Bs("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=Ea.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),wa.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(Bs("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Aa{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ra(this.k.delete())}}class Ma extends qs{constructor(e,t){super(Ks.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ta(e){return"IndexedDbTransactionError"===e.name}class Ca{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Bs("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Bs("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ra(n)}add(e){return Bs("SimpleDb","ADD",this.store.name,e,e),Ra(this.store.add(e))}get(e){return Ra(this.store.get(e)).next((t=>(void 0===t&&(t=null),Bs("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Bs("SimpleDb","DELETE",this.store.name,e),Ra(this.store.delete(e))}count(){return Bs("SimpleDb","COUNT",this.store.name),Ra(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new wa(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new wa(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Bs("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new wa(((n,r)=>{t.onerror=e=>{const t=Ia(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new wa(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new Aa(i),s=t(i.primaryKey,i.value,o);if(s instanceof wa){const e=s.catch((e=>(o.done(),wa.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>wa.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ra(e){return new wa(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ia(e.target.error);n(t)}}))}let La=!1;function Ia(e){const t=Sa.S(Xe());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new qs("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return La||(La=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Pa{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Na(e){return null==e}function ka(e){return 0===e&&1/e==-1/0}function Da(e){return"number"==typeof e&&Number.isInteger(e)&&!ka(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}Pa._e=-1;const Oa=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ua=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Fa=Ua;function Ba(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ja(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Va(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class za{constructor(e,t){this.comparator=e,this.root=t||Ga.EMPTY}insert(e,t){return new za(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ga.BLACK,null,null))}remove(e){return new za(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ga.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ha(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ha(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ha(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ha(this.root,e,this.comparator,!0)}}class Ha{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ga{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Ga.RED,this.left=null!=r?r:Ga.EMPTY,this.right=null!=i?i:Ga.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Ga(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ga.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ga.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ga.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ga.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Hs();if(this.right.isRed())throw Hs();const e=this.left.check();if(e!==this.right.check())throw Hs();return e+(this.isRed()?0:1)}}Ga.EMPTY=null,Ga.RED=!0,Ga.BLACK=!1,Ga.EMPTY=new class{constructor(){this.size=0}get key(){throw Hs()}get value(){throw Hs()}get color(){throw Hs()}get left(){throw Hs()}get right(){throw Hs()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Ga(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wa{constructor(e){this.comparator=e,this.data=new za(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ka(this.data.getIterator())}getIteratorFrom(e){return new Ka(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof Wa))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Wa(this.comparator);return t.data=e,t}}class Ka{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class qa{constructor(e){this.fields=e,e.sort(da.comparator)}static empty(){return new qa([])}unionWith(e){let t=new Wa(da.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new qa(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Xa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Qa{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Xa("Invalid base64 string: "+e):e}}(e);return new Qa(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Qa(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qa.EMPTY_BYTE_STRING=new Qa("");const Ya=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ja(e){if(Gs(!!e),"string"==typeof e){let t=0;const n=Ya.exec(e);if(Gs(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Za(e.seconds),nanos:Za(e.nanos)}}function Za(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function $a(e){return"string"==typeof e?Qa.fromBase64String(e):Qa.fromUint8Array(e)}function el(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function tl(e){const t=e.mapValue.fields.__previous_value__;return el(t)?tl(t):t}function nl(e){const t=Ja(e.mapValue.fields.__local_write_time__.timestampValue);return new aa(t.seconds,t.nanos)}class rl{constructor(e,t,n,r,i,o,s,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.longPollingOptions=a,this.useFetchStreams=l}}class il{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new il("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof il&&e.projectId===this.projectId&&e.database===this.database}}const ol={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function sl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?el(e)?4:_l(e)?9007199254740991:10:Hs()}function al(e,t){if(e===t)return!0;const n=sl(e);if(n!==sl(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nl(e).isEqual(nl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ja(e.timestampValue),r=Ja(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return $a(e.bytesValue).isEqual($a(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Za(e.geoPointValue.latitude)===Za(t.geoPointValue.latitude)&&Za(e.geoPointValue.longitude)===Za(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Za(e.integerValue)===Za(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Za(e.doubleValue),r=Za(t.doubleValue);return n===r?ka(n)===ka(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return sa(e.arrayValue.values||[],t.arrayValue.values||[],al);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Ba(n)!==Ba(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!al(n[i],r[i])))return!1;return!0}(e,t);default:return Hs()}}function ll(e,t){return void 0!==(e.values||[]).find((e=>al(e,t)))}function cl(e,t){if(e===t)return 0;const n=sl(e),r=sl(t);if(n!==r)return oa(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oa(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Za(e.integerValue||e.doubleValue),r=Za(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ul(e.timestampValue,t.timestampValue);case 4:return ul(nl(e),nl(t));case 5:return oa(e.stringValue,t.stringValue);case 6:return function(e,t){const n=$a(e),r=$a(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=oa(n[i],r[i]);if(0!==e)return e}return oa(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=oa(Za(e.latitude),Za(t.latitude));return 0!==n?n:oa(Za(e.longitude),Za(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=cl(n[i],r[i]);if(e)return e}return oa(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===ol.mapValue&&t===ol.mapValue)return 0;if(e===ol.mapValue)return 1;if(t===ol.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let s=0;s<r.length&&s<o.length;++s){const e=oa(r[s],o[s]);if(0!==e)return e;const t=cl(n[r[s]],i[o[s]]);if(0!==t)return t}return oa(r.length,o.length)}(e.mapValue,t.mapValue);default:throw Hs()}}function ul(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return oa(e,t);const n=Ja(e),r=Ja(t),i=oa(n.seconds,r.seconds);return 0!==i?i:oa(n.nanos,r.nanos)}function hl(e){return dl(e)}function dl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ja(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return $a(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return pa.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=dl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(dl(e.fields[i]));return n+"}"}(e.mapValue):Hs()}function pl(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function fl(e){return!!e&&"integerValue"in e}function ml(e){return!!e&&"arrayValue"in e}function gl(e){return!!e&&"nullValue"in e}function vl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function yl(e){return!!e&&"mapValue"in e}function bl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ja(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=bl(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=bl(e.arrayValue.values[n]);return t}return Object.assign({},e)}function _l(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class xl{constructor(e){this.value=e}static empty(){return new xl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!yl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bl(t)}setAll(e){let t=da.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=bl(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());yl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return al(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];yl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ja(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new xl(bl(this.value))}}function wl(e){const t=[];return ja(e.fields,((e,n)=>{const r=new da([e]);if(yl(n)){const e=wl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new qa(t)}class El{constructor(e,t,n,r,i,o,s){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=s}static newInvalidDocument(e){return new El(e,0,la.min(),la.min(),la.min(),xl.empty(),0)}static newFoundDocument(e,t,n,r){return new El(e,1,t,la.min(),n,r,0)}static newNoDocument(e,t){return new El(e,2,t,la.min(),la.min(),xl.empty(),0)}static newUnknownDocument(e,t){return new El(e,3,t,la.min(),la.min(),xl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(la.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=la.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof El&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new El(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Sl{constructor(e,t){this.position=e,this.inclusive=t}}function Al(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],s=e.position[i];if(r=o.field.isKeyField()?pa.comparator(pa.fromName(s.referenceValue),n.key):cl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function Ml(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!al(e.position[n],t.position[n]))return!1;return!0}class Tl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Cl(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Rl{}class Ll extends Rl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Fl(e,t,n):"array-contains"===t?new zl(e,n):"in"===t?new Hl(e,n):"not-in"===t?new Gl(e,n):"array-contains-any"===t?new Wl(e,n):new Ll(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Bl(e,n):new jl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(cl(t,this.value)):null!==t&&sl(this.value)===sl(t)&&this.matchesComparison(cl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Hs()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Il extends Rl{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Il(e,t)}matches(e){return Pl(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Pl(e){return"and"===e.op}function Nl(e){return kl(e)&&Pl(e)}function kl(e){for(const t of e.filters)if(t instanceof Il)return!1;return!0}function Dl(e){if(e instanceof Ll)return e.field.canonicalString()+e.op.toString()+hl(e.value);if(Nl(e))return e.filters.map((e=>Dl(e))).join(",");{const t=e.filters.map((e=>Dl(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function Ol(e,t){return e instanceof Ll?function(e,t){return t instanceof Ll&&e.op===t.op&&e.field.isEqual(t.field)&&al(e.value,t.value)}(e,t):e instanceof Il?function(e,t){return t instanceof Il&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&Ol(n,t.filters[r])),!0)}(e,t):void Hs()}function Ul(e){return e instanceof Ll?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(hl(e.value))}(e):e instanceof Il?function(e){return e.op.toString()+" {"+e.getFilters().map(Ul).join(" ,")+"}"}(e):"Filter"}class Fl extends Ll{constructor(e,t,n){super(e,t,n),this.key=pa.fromName(n.referenceValue)}matches(e){const t=pa.comparator(e.key,this.key);return this.matchesComparison(t)}}class Bl extends Ll{constructor(e,t){super(e,"in",t),this.keys=Vl("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class jl extends Ll{constructor(e,t){super(e,"not-in",t),this.keys=Vl("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Vl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>pa.fromName(e.referenceValue)))}class zl extends Ll{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ml(t)&&ll(t.arrayValue,this.value)}}class Hl extends Ll{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&ll(this.value.arrayValue,t)}}class Gl extends Ll{constructor(e,t){super(e,"not-in",t)}matches(e){if(ll(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!ll(this.value.arrayValue,t)}}class Wl extends Ll{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ml(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>ll(this.value.arrayValue,e)))}}class Kl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ce=null}}function ql(e){return new Kl(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Xl(e){const t=Ws(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>Dl(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Na(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>hl(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>hl(e))).join(",")),t.ce=e}return t.ce}function Ql(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Cl(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Ol(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Ml(e.startAt,t.startAt)&&Ml(e.endAt,t.endAt)}function Yl(e){return pa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Jl{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Zl(e,t,n,r,i,o,s,a){return new Jl(e,t,n,r,i,o,s,a)}function $l(e){return new Jl(e)}function ec(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function tc(e){return null!==e.collectionGroup}function nc(e){const t=Ws(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new Wa(da.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new Tl(r,n))})),e.has(da.keyField().canonicalString())||t.le.push(new Tl(da.keyField(),n))}return t.le}function rc(e){const t=Ws(e);return t.he||(t.he=ic(t,nc(e))),t.he}function ic(e,t){if("F"===e.limitType)return ql(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new Tl(e.field,t)}));const n=e.endAt?new Sl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Sl(e.startAt.position,e.startAt.inclusive):null;return ql(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function oc(e,t){const n=e.filters.concat([t]);return new Jl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function sc(e,t,n){return new Jl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function ac(e,t){return Ql(rc(e),rc(t))&&e.limitType===t.limitType}function lc(e){return"".concat(Xl(rc(e)),"|lt:").concat(e.limitType)}function cc(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>Ul(e))).join(", "),"]")),Na(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>hl(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>hl(e))).join(",")),"Target(".concat(t,")")}(rc(e)),"; limitType=").concat(e.limitType,")")}function uc(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):pa.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of nc(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Al(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,nc(e),t))&&!(e.endAt&&!function(e,t,n){const r=Al(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,nc(e),t))}(e,t)}function hc(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dc(e){return(t,n)=>{let r=!1;for(const i of nc(e)){const e=pc(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function pc(e,t,n){const r=e.field.isKeyField()?pa.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?cl(r,i):Hs()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Hs()}}class fc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return Va(this.inner)}size(){return this.innerSize}}const mc=new za(pa.comparator);function gc(){return mc}const vc=new za(pa.comparator);function yc(){let e=vc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function bc(e){let t=vc;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function _c(){return wc()}function xc(){return wc()}function wc(){return new fc((e=>e.toString()),((e,t)=>e.isEqual(t)))}const Ec=new za(pa.comparator),Sc=new Wa(pa.comparator);function Ac(){let e=Sc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const Mc=new Wa(oa);function Tc(){return Mc}function Cc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ka(t)?"-0":t}}function Rc(e){return{integerValue:""+e}}function Lc(e,t){return Da(t)?Rc(t):Cc(e,t)}class Ic{constructor(){this._=void 0}}function Pc(e,t,n){return e instanceof Dc?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&el(t)&&(t=tl(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Oc?Uc(e,t):e instanceof Fc?Bc(e,t):function(e,t){const n=kc(e,t),r=Vc(n)+Vc(e.Ie);return fl(n)&&fl(e.Ie)?Rc(r):Cc(e.serializer,r)}(e,t)}function Nc(e,t,n){return e instanceof Oc?Uc(e,t):e instanceof Fc?Bc(e,t):n}function kc(e,t){return e instanceof jc?function(e){return fl(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Dc extends Ic{}class Oc extends Ic{constructor(e){super(),this.elements=e}}function Uc(e,t){const n=zc(t);for(const r of e.elements)n.some((e=>al(e,r)))||n.push(r);return{arrayValue:{values:n}}}class Fc extends Ic{constructor(e){super(),this.elements=e}}function Bc(e,t){let n=zc(t);for(const r of e.elements)n=n.filter((e=>!al(e,r)));return{arrayValue:{values:n}}}class jc extends Ic{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Vc(e){return Za(e.integerValue||e.doubleValue)}function zc(e){return ml(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Hc{constructor(e,t){this.field=e,this.transform=t}}class Gc{constructor(e,t){this.version=e,this.transformResults=t}}class Wc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wc}static exists(e){return new Wc(void 0,e)}static updateTime(e){return new Wc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kc(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class qc{}function Xc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new iu(e.key,Wc.none()):new $c(e.key,e.data,Wc.none());{const n=e.data,r=xl.empty();let i=new Wa(da.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new eu(e.key,r,new qa(i.toArray()),Wc.none())}}function Qc(e,t,n){e instanceof $c?function(e,t,n){const r=e.value.clone(),i=nu(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof eu?function(e,t,n){if(!Kc(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=nu(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(tu(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Yc(e,t,n,r){return e instanceof $c?function(e,t,n,r){if(!Kc(e.precondition,t))return n;const i=e.value.clone(),o=ru(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof eu?function(e,t,n,r){if(!Kc(e.precondition,t))return n;const i=ru(e.fieldTransforms,r,t),o=t.data;return o.setAll(tu(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return Kc(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Jc(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=kc(r.transform,e||null);null!=i&&(null===n&&(n=xl.empty()),n.set(r.field,i))}return n||null}function Zc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&sa(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Oc&&t instanceof Oc||e instanceof Fc&&t instanceof Fc?sa(e.elements,t.elements,al):e instanceof jc&&t instanceof jc?al(e.Ie,t.Ie):e instanceof Dc&&t instanceof Dc}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class $c extends qc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class eu extends qc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function tu(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function nu(e,t,n){const r=new Map;Gs(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],s=o.transform,a=t.data.field(o.field);r.set(o.field,Nc(s,a,n[i]))}return r}function ru(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,Pc(e,o,t))}return r}class iu extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ou extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class su{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Qc(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Yc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Yc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=xc();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let s=this.applyToLocalView(o,i.mutatedFields);s=t.has(r.key)?null:s;const a=Xc(o,s);null!==a&&n.set(r.key,a),o.isValidDocument()||o.convertToNoDocument(la.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ac())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,((e,t)=>Zc(e,t)))&&sa(this.baseMutations,e.baseMutations,((e,t)=>Zc(e,t)))}}class au{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Gs(e.mutations.length===n.length);let r=Ec;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new au(e,t,n,r)}}class lu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class cu{constructor(e,t){this.count=e,this.unchangedNames=t}}var uu,hu;function du(e){switch(e){default:return Hs();case Ks.CANCELLED:case Ks.UNKNOWN:case Ks.DEADLINE_EXCEEDED:case Ks.RESOURCE_EXHAUSTED:case Ks.INTERNAL:case Ks.UNAVAILABLE:case Ks.UNAUTHENTICATED:return!1;case Ks.INVALID_ARGUMENT:case Ks.NOT_FOUND:case Ks.ALREADY_EXISTS:case Ks.PERMISSION_DENIED:case Ks.FAILED_PRECONDITION:case Ks.ABORTED:case Ks.OUT_OF_RANGE:case Ks.UNIMPLEMENTED:case Ks.DATA_LOSS:return!0}}function pu(e){if(void 0===e)return js("GRPC error has no .code"),Ks.UNKNOWN;switch(e){case uu.OK:return Ks.OK;case uu.CANCELLED:return Ks.CANCELLED;case uu.UNKNOWN:return Ks.UNKNOWN;case uu.DEADLINE_EXCEEDED:return Ks.DEADLINE_EXCEEDED;case uu.RESOURCE_EXHAUSTED:return Ks.RESOURCE_EXHAUSTED;case uu.INTERNAL:return Ks.INTERNAL;case uu.UNAVAILABLE:return Ks.UNAVAILABLE;case uu.UNAUTHENTICATED:return Ks.UNAUTHENTICATED;case uu.INVALID_ARGUMENT:return Ks.INVALID_ARGUMENT;case uu.NOT_FOUND:return Ks.NOT_FOUND;case uu.ALREADY_EXISTS:return Ks.ALREADY_EXISTS;case uu.PERMISSION_DENIED:return Ks.PERMISSION_DENIED;case uu.FAILED_PRECONDITION:return Ks.FAILED_PRECONDITION;case uu.ABORTED:return Ks.ABORTED;case uu.OUT_OF_RANGE:return Ks.OUT_OF_RANGE;case uu.UNIMPLEMENTED:return Ks.UNIMPLEMENTED;case uu.DATA_LOSS:return Ks.DATA_LOSS;default:return Hs()}}(hu=uu||(uu={}))[hu.OK=0]="OK",hu[hu.CANCELLED=1]="CANCELLED",hu[hu.UNKNOWN=2]="UNKNOWN",hu[hu.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hu[hu.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hu[hu.NOT_FOUND=5]="NOT_FOUND",hu[hu.ALREADY_EXISTS=6]="ALREADY_EXISTS",hu[hu.PERMISSION_DENIED=7]="PERMISSION_DENIED",hu[hu.UNAUTHENTICATED=16]="UNAUTHENTICATED",hu[hu.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hu[hu.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hu[hu.ABORTED=10]="ABORTED",hu[hu.OUT_OF_RANGE=11]="OUT_OF_RANGE",hu[hu.UNIMPLEMENTED=12]="UNIMPLEMENTED",hu[hu.INTERNAL=13]="INTERNAL",hu[hu.UNAVAILABLE=14]="UNAVAILABLE",hu[hu.DATA_LOSS=15]="DATA_LOSS";let fu=null;function mu(){return new TextEncoder}const gu=new Ns([4294967295,4294967295],0);function vu(e){const t=mu().encode(e),n=new Ps;return n.update(t),new Uint8Array(n.digest())}function yu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new Ns([n,r],0),new Ns([i,o],0)]}class bu{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new _u("Invalid padding: ".concat(t));if(n<0)throw new _u("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new _u("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new _u("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Ns.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Ns.fromNumber(n)));return 1===r.compare(gu)&&(r=new Ns([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=vu(e),[n,r]=yu(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new bu(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=vu(e),[n,r]=yu(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class _u extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class xu{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,wu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new xu(la.min(),r,new za(oa),gc(),Ac())}}class wu{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new wu(n,t,Ac(),Ac(),Ac())}}class Eu{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class Su{constructor(e,t){this.targetId=e,this.fe=t}}class Au{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qa.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Mu{constructor(){this.ge=0,this.pe=Ru(),this.ye=Qa.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Ac(),t=Ac(),n=Ac();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Hs()}})),new wu(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=Ru()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Gs(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class Tu{constructor(e){this.Be=e,this.ke=new Map,this.qe=gc(),this.Qe=Cu(),this.Ke=new za(oa)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Hs()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Yl(i))if(0===n){const e=new pa(i.path);this.We(t,e,El.newNoDocument(e,la.min()))}else Gs(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==fu||fu.tt(function(e,t,n,r,i){var o,s,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(o=null==d?void 0:d.hashCount)&&void 0!==o?o:0,bitmapLength:null!==(l=null===(a=null===(s=null==d?void 0:d.bits)||void 0===s?void 0:s.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Be.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,s;try{o=$a(n).toUint8Array()}catch(e){if(e instanceof Xa)return Vs("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{s=new bu(o,r,i)}catch(e){return Vs(e instanceof _u?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===s.Te?null:s}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Be.nt(),o="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Yl(i.target)){const t=new pa(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,El.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=Ac();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new xu(e,t,this.Ke,this.qe,n);return this.qe=gc(),this.Qe=Cu(),this.Ke=new za(oa),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new Mu,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new Wa(oa),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Bs("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new Mu),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function Cu(){return new za(pa.comparator)}function Ru(){return new za(pa.comparator)}const Lu={asc:"ASCENDING",desc:"DESCENDING"},Iu={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pu={and:"AND",or:"OR"};class Nu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ku(e,t){return e.useProto3Json||Na(t)?t:{value:t}}function Du(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ou(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Uu(e,t){return Du(e,t.toTimestamp())}function Fu(e){return Gs(!!e),la.fromTimestamp(function(e){const t=Ja(e);return new aa(t.seconds,t.nanos)}(e))}function Bu(e,t){return ju(e,t).canonicalString()}function ju(e,t){const n=function(e){return new ua(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Vu(e){const t=ua.fromString(e);return Gs(ah(t)),t}function zu(e,t){return Bu(e.databaseId,t.path)}function Hu(e,t){const n=Vu(t);if(n.get(1)!==e.databaseId.projectId)throw new qs(Ks.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new qs(Ks.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new pa(qu(n))}function Gu(e,t){return Bu(e.databaseId,t)}function Wu(e){const t=Vu(e);return 4===t.length?ua.emptyPath():qu(t)}function Ku(e){return new ua(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qu(e){return Gs(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Xu(e,t,n){return{name:zu(e,t),fields:n.value.mapValue.fields}}function Qu(e,t){let n;if(t instanceof $c)n={update:Xu(e,t.key,t.value)};else if(t instanceof iu)n={delete:zu(e,t.key)};else if(t instanceof eu)n={update:Xu(e,t.key,t.data),updateMask:sh(t.fieldMask)};else{if(!(t instanceof ou))return Hs();n={verify:zu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof Dc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Oc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof jc)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Hs()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Uu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Hs()}(e,t.precondition)),n}function Yu(e,t){return{documents:[Gu(e,t.path)]}}function Ju(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Gu(e,i);const o=function(e){if(0!==e.length)return oh(Il.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:rh(e.field),direction:eh(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const a=ku(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function Zu(e){let t=Wu(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Gs(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=$u(e);return t instanceof Il&&Nl(t)?t.getFilters():[t]}(n.where));let s=[];n.orderBy&&(s=function(e){return e.map((e=>function(e){return new Tl(ih(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Na(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Sl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Sl(n,t)}(n.endAt)),Zl(t,i,s,o,a,"F",l,c)}function $u(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ih(e.unaryFilter.field);return Ll.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ih(e.unaryFilter.field);return Ll.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ih(e.unaryFilter.field);return Ll.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ih(e.unaryFilter.field);return Ll.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Hs()}}(e):void 0!==e.fieldFilter?function(e){return Ll.create(ih(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Hs()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Il.create(e.compositeFilter.filters.map((e=>$u(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Hs()}}(e.compositeFilter.op))}(e):Hs()}function eh(e){return Lu[e]}function th(e){return Iu[e]}function nh(e){return Pu[e]}function rh(e){return{fieldPath:e.canonicalString()}}function ih(e){return da.fromServerFormat(e.fieldPath)}function oh(e){return e instanceof Ll?function(e){if("=="===e.op){if(vl(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NAN"}};if(gl(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(vl(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NOT_NAN"}};if(gl(e.value))return{unaryFilter:{field:rh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rh(e.field),op:th(e.op),value:e.value}}}(e):e instanceof Il?function(e){const t=e.getFilters().map((e=>oh(e)));return 1===t.length?t[0]:{compositeFilter:{op:nh(e.op),filters:t}}}(e):Hs()}function sh(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function ah(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class lh{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:la.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:la.min(),s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Qa.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s,this.expectedCount=a}withSequenceNumber(e){return new lh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new lh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class ch{constructor(e){this.ct=e}}function uh(e){const t=Zu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?sc(t,t.limit,"L"):t}class hh{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Za(e.integerValue));else if("doubleValue"in e){const n=Za(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),ka(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft($a(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?_l(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):Hs()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),pa.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}hh.bt=new hh;class dh{constructor(){this._n=new ph}addToCollectionParentIndex(e,t){return this._n.add(t),wa.resolve()}getCollectionParents(e,t){return wa.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return wa.resolve()}deleteFieldIndex(e,t){return wa.resolve()}deleteAllFieldIndexes(e){return wa.resolve()}createTargetIndexes(e,t){return wa.resolve()}getDocumentsMatchingTarget(e,t){return wa.resolve(null)}getIndexType(e,t){return wa.resolve(0)}getFieldIndexes(e,t){return wa.resolve([])}getNextCollectionGroupToUpdate(e){return wa.resolve(null)}getMinOffset(e,t){return wa.resolve(va.min())}getMinOffsetFromCollectionGroup(e,t){return wa.resolve(va.min())}updateCollectionGroup(e,t,n){return wa.resolve()}updateIndexEntries(e,t){return wa.resolve()}}class ph{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Wa(ua.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Wa(ua.comparator)).toArray()}}new Uint8Array(0);class fh{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new fh(e,fh.DEFAULT_COLLECTION_PERCENTILE,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}fh.DEFAULT_COLLECTION_PERCENTILE=10,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fh.DEFAULT=new fh(41943040,fh.DEFAULT_COLLECTION_PERCENTILE,fh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fh.DISABLED=new fh(-1,0,0);class mh{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new mh(0)}static Ln(){return new mh(-1)}}class gh{constructor(){this.changes=new fc((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,El.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?wa.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class vh{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class yh{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Yc(n.mutation,e,qa.empty(),aa.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,Ac()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ac();const r=_c();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=yc();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=_c();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,Ac())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=gc();const o=wc(),s=wc();return t.forEach(((e,t)=>{const s=n.get(t.key);r.has(t.key)&&(void 0===s||s.mutation instanceof eu)?i=i.insert(t.key,t):void 0!==s?(o.set(t.key,s.mutation.getFieldMask()),Yc(s.mutation,t,s.mutation.getFieldMask(),aa.now())):o.set(t.key,qa.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return s.set(e,new vh(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),s)))}recalculateAndSaveOverlays(e,t){const n=wc();let r=new za(((e,t)=>e-t)),i=Ac();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let s=n.get(e)||qa.empty();s=i.applyToLocalView(o,s),n.set(e,s);const a=(r.get(i.batchId)||Ac()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const o=[],s=r.getReverseIterator();for(;s.hasNext();){const r=s.getNext(),a=r.key,l=r.value,c=xc();l.forEach((e=>{if(!i.has(e)){const r=Xc(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,a,c))}return wa.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return pa.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):tc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):wa.resolve(_c());let s=-1,a=i;return o.next((t=>wa.forEach(t,((t,n)=>(s<n.largestBatchId&&(s=n.largestBatchId),i.get(t)?wa.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,Ac()))).next((e=>({batchId:s,changes:bc(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pa(t)).next((e=>{let t=yc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=yc();return this.indexManager.getCollectionParents(e,i).next((s=>wa.forEach(s,(s=>{const a=function(e,t){return new Jl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,El.newInvalidDocument(r)))}));let n=yc();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&Yc(o.mutation,r,qa.empty(),aa.now()),uc(t,r)&&(n=n.insert(e,r))})),n}))}}class bh{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return wa.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Fu(e.createTime)}}(t)),wa.resolve()}getNamedQuery(e,t){return wa.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:uh(e.bundledQuery),readTime:Fu(e.readTime)}}(t)),wa.resolve()}}class _h{constructor(){this.overlays=new za(pa.comparator),this.hr=new Map}getOverlay(e,t){return wa.resolve(this.overlays.get(t))}getOverlays(e,t){const n=_c();return wa.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),wa.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),wa.resolve()}getOverlaysForCollection(e,t,n){const r=_c(),i=t.length+1,o=new pa(t.child("")),s=this.overlays.getIteratorFrom(o);for(;s.hasNext();){const e=s.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return wa.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new za(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=_c(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const s=_c(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>s.set(e,t))),!(s.size()>=r)););return wa.resolve(s)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new lu(t,n));let i=this.hr.get(t);void 0===i&&(i=Ac(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}class xh{constructor(){this.Pr=new Wa(wh.Ir),this.Tr=new Wa(wh.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new wh(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new wh(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new pa(new ua([])),n=new wh(t,e),r=new wh(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new pa(new ua([])),n=new wh(t,e),r=new wh(t,e+1);let i=Ac();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new wh(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class wh{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return pa.comparator(e.key,t.key)||oa(e.pr,t.pr)}static Er(e,t){return oa(e.pr,t.pr)||pa.comparator(e.key,t.key)}}class Eh{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new Wa(wh.Ir)}checkEmpty(e){return wa.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new su(i,t,n,r);this.mutationQueue.push(o);for(const s of r)this.wr=this.wr.add(new wh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast());return wa.resolve(o)}lookupMutationBatch(e,t){return wa.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return wa.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return wa.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return wa.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new wh(t,0),r=new wh(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),wa.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Wa(oa);return t.forEach((e=>{const t=new wh(e,0),r=new wh(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),wa.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;pa.isDocumentKey(i)||(i=i.child(""));const o=new wh(new pa(i),0);let s=new Wa(oa);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(s=s.add(e.pr)),!0)}),o),wa.resolve(this.Dr(s))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Gs(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return wa.forEach(t.mutations,(r=>{const i=new wh(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new wh(t,0),r=this.wr.firstAfterOrEqual(n);return wa.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,wa.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Sh{constructor(e){this.vr=e,this.docs=new za(pa.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return wa.resolve(n?n.document.mutableCopy():El.newInvalidDocument(t))}getEntries(e,t){let n=gc();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():El.newInvalidDocument(e))})),wa.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=gc();const o=t.path,s=new pa(o.child("")),a=this.docs.getIteratorFrom(s);for(;a.hasNext();){const{key:e,value:{document:s}}=a.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||ya(ga(s),n)<=0||(r.has(s.key)||uc(t,s))&&(i=i.insert(s.key,s.mutableCopy()))}return wa.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Hs()}Fr(e,t){return wa.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Ah(this)}getSize(e){return wa.resolve(this.size)}}class Ah extends gh{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),wa.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Mh{constructor(e){this.persistence=e,this.Mr=new fc((e=>Xl(e)),Ql),this.lastRemoteSnapshotVersion=la.min(),this.highestTargetId=0,this.Or=0,this.Nr=new xh,this.targetCount=0,this.Lr=mh.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),wa.resolve()}getLastRemoteSnapshotVersion(e){return wa.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return wa.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),wa.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),wa.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new mh(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,wa.resolve()}updateTargetData(e,t){return this.qn(t),wa.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,wa.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,s)=>{s.sequenceNumber<=t&&null===n.get(s.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,s.targetId)),r++)})),wa.waitFor(i).next((()=>r))}getTargetCount(e){return wa.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return wa.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),wa.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),wa.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),wa.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return wa.resolve(n)}containsKey(e,t){return wa.resolve(this.Nr.containsKey(t))}}class Th{constructor(e,t){this.Br={},this.overlays={},this.kr=new Pa(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Mh(this),this.indexManager=new dh,this.remoteDocumentCache=function(e){return new Sh(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new ch(t),this.$r=new bh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new _h,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Eh(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Bs("MemoryPersistence","Starting transaction:",e);const r=new Ch(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return wa.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Ch extends _a{constructor(e){super(),this.currentSequenceNumber=e}}class Rh{constructor(e){this.persistence=e,this.zr=new xh,this.jr=null}static Hr(e){return new Rh(e)}get Jr(){if(this.jr)return this.jr;throw Hs()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),wa.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),wa.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),wa.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return wa.forEach(this.Jr,(n=>{const r=pa.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,la.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return wa.or([()=>wa.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Lh{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=Ac(),r=Ac();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Lh(e,t.fromCache,n,r)}}class Ih{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ph{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=Qe()?8:Sa.v(Xe())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new Ih;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(Fs()<=pt.DEBUG&&Bs("QueryEngine","SDK will not create cache indexes for query:",cc(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),wa.resolve()):(Fs()<=pt.DEBUG&&Bs("QueryEngine","Query:",cc(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(Fs()<=pt.DEBUG&&Bs("QueryEngine","The SDK decides to create cache indexes for query:",cc(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rc(t))):wa.resolve())}ji(e,t){if(ec(t))return wa.resolve(null);let n=rc(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=sc(t,null,"F"),n=rc(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=Ac(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,sc(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return ec(t)||r.isEqual(la.min())?wa.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?wa.resolve(null):(Fs()<=pt.DEBUG&&Bs("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),cc(t)),this.es(e,o,t,ma(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new Wa(dc(e));return t.forEach(((t,r)=>{uc(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return Fs()<=pt.DEBUG&&Bs("QueryEngine","Using full collection scan to execute query:",cc(t)),this.zi.getDocumentsMatchingQuery(e,t,va.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class Nh{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new za(oa),this.rs=new fc((e=>Xl(e)),Ql),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yh(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function kh(e,t,n,r){return new Nh(e,t,n,r)}async function Dh(e,t){const n=Ws(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let s=Ac();for(const e of r){i.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)s=s.add(t.key)}return n.localDocuments.getDocuments(e,s).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function Oh(e){const t=Ws(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Uh(e,t,n){let r=Ac(),i=Ac();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=gc();return n.forEach(((n,o)=>{const s=e.get(n);o.isFoundDocument()!==s.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(la.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!s.isValidDocument()||o.version.compareTo(s.version)>0||0===o.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):Bs("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function Fh(e,t){const n=Ws(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Bh(e,t){const n=Ws(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,wa.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new lh(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function jh(e,t,n){const r=Ws(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Ta(e))throw e;Bs("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Vh(e,t,n){const r=Ws(e);let i=la.min(),o=Ac();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Ws(e),i=r.rs.get(n);return void 0!==i?wa.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,rc(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:la.min(),n?o:Ac()))).next((e=>(zh(r,hc(t),e),{documents:e,hs:o})))))}function zh(e,t,n){let r=e.ss.get(t)||la.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}class Hh{constructor(){this.activeTargetIds=Tc()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Gh{constructor(){this.no=new Hh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Hh,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wh{io(e){}shutdown(){}}class Kh{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Bs("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Bs("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let qh=null;function Xh(){return null===qh?qh=268435456+Math.round(2147483648*Math.random()):qh++,"0x"+qh.toString(16)}const Qh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Yh{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Jh="WebChannelConnection";class Zh extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(r),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get wo(){return!1}So(e,t,n,r,i){const o=Xh(),s=this.bo(e,t.toUriEncodedString());Bs("RestConnection","Sending RPC '".concat(e,"' ").concat(o,":"),s,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,r,i),this.Co(e,s,a,n).then((t=>(Bs("RestConnection","Received RPC '".concat(e,"' ").concat(o,": "),t),t)),(t=>{throw Vs("RestConnection","RPC '".concat(e,"' ").concat(o," failed with error: "),t,"url: ",s,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Os,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=Qh[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Xh();return new Promise(((o,s)=>{const a=new Is;a.setWithCredentials(!0),a.listenOnce(Ts.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ms.NO_ERROR:const t=a.getResponseJson();Bs(Jh,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),o(t);break;case Ms.TIMEOUT:Bs(Jh,"RPC '".concat(e,"' ").concat(i," timed out")),s(new qs(Ks.DEADLINE_EXCEEDED,"Request time out"));break;case Ms.HTTP_ERROR:const n=a.getStatus();if(Bs(Jh,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ks).indexOf(t)>=0?t:Ks.UNKNOWN}(t.status);s(new qs(e,t.message))}else s(new qs(Ks.UNKNOWN,"Server responded with status "+a.getStatus()))}else s(new qs(Ks.UNAVAILABLE,"Connection failed."));break;default:Hs()}}finally{Bs(Jh,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Bs(Jh,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Xh(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ss(),s=As(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Bs(Jh,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=o.createWebChannel(c,a);let h=!1,d=!1;const p=new Yh({lo:t=>{d?Bs(Jh,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Bs(Jh,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},ho:()=>u.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(u,Ls.EventType.OPEN,(()=>{d||Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),f(u,Ls.EventType.CLOSE,(()=>{d||(d=!0,Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.Vo())})),f(u,Ls.EventType.ERROR,(t=>{d||(d=!0,Vs(Jh,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),p.Vo(new qs(Ks.UNAVAILABLE,"The operation could not be completed")))})),f(u,Ls.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Gs(!!i);const o=i,s=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(s){Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," received error:"),s);const t=s.status;let n=function(e){const t=uu[e];if(void 0!==t)return pu(t)}(t),i=s.message;void 0===n&&(n=Ks.INTERNAL,i="Unknown error status: "+t+" with message "+s.message),d=!0,p.Vo(new qs(n,i)),u.close()}else Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.mo(i)}})),f(s,Cs.STAT_EVENT,(t=>{t.stat===Rs.PROXY?Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Rs.NOPROXY&&Bs(Jh,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{p.Ro()}),0),p}}function $h(){return"undefined"!=typeof document?document:null}function ed(e){return new Nu(e,!0)}class td{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Bs("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class nd{constructor(e,t,n,r,i,o,s,a){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=s,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new td(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Ks.RESOURCE_EXHAUSTED?(js(t.toString()),js("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Ks.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Wo===t&&this.o_(n,r)}),(t=>{e((()=>{const e=new qs(Ks.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Bs("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Bs("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class rd extends nd{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Hs()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(Gs(void 0===t||"string"==typeof t),Qa.fromBase64String(t||"")):(Gs(void 0===t||t instanceof Uint8Array),Qa.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&function(e){const t=void 0===e.code?Ks.UNKNOWN:pu(e.code);return new qs(t,e.message||"")}(s);n=new Au(r,i,o,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Hu(e,r.document.name),o=Fu(r.document.updateTime),s=r.document.createTime?Fu(r.document.createTime):la.min(),a=new xl({mapValue:{fields:r.document.fields}}),l=El.newFoundDocument(i,o,s,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Eu(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Hu(e,r.document),o=r.readTime?Fu(r.readTime):la.min(),s=El.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Eu([],a,s.key,s)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Hu(e,r.document),o=r.removedTargetIds||[];n=new Eu([],o,i,null)}else{if(!("filter"in t))return Hs();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new cu(r,i),s=e.targetId;n=new Su(s,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return la.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?la.min():t.readTime?Fu(t.readTime):la.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Ku(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Yl(r)?{documents:Yu(e,r)}:{query:Ju(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ou(e,t.resumeToken);const r=ku(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(la.min())>0){n.readTime=Du(e,t.snapshotVersion.toTimestamp());const r=ku(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Hs()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Ku(this.serializer),t.removeTarget=e,this.t_(t)}}class id extends nd{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Gs(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Gs(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Fu(e.updateTime):Fu(t);return n.isEqual(la.min())&&(n=Fu(t)),new Gc(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Fu(e.commitTime);return this.listener.T_(n,t)}return Gs(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Ku(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Qu(this.serializer,e)))};this.t_(t)}}class od extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new qs(Ks.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[o,s]=i;return this.connection.So(e,ju(t,n),r,o,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ks.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qs(Ks.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((o=>{let[s,a]=o;return this.connection.vo(e,ju(t,n),r,s,a,i)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Ks.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qs(Ks.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class sd{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(js(t),this.g_=!1):Bs("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class ad{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{gd(this)&&(Bs("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ws(e);t.v_.add(4),await cd(t),t.x_.set("Unknown"),t.v_.delete(4),await ld(t)}(this))}))})),this.x_=new sd(n,r)}}async function ld(e){if(gd(e))for(const t of e.F_)await t(!0)}async function cd(e){for(const t of e.F_)await t(!1)}function ud(e,t){const n=Ws(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),md(n)?fd(n):kd(n).Jo()&&dd(n,t))}function hd(e,t){const n=Ws(e),r=kd(n);n.C_.delete(t),r.Jo()&&pd(n,t),0===n.C_.size&&(r.Jo()?r.Xo():gd(n)&&n.x_.set("Unknown"))}function dd(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(la.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}kd(e).c_(t)}function pd(e,t){e.O_.Oe(t),kd(e).l_(t)}function fd(e){e.O_=new Tu({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),kd(e).start(),e.x_.p_()}function md(e){return gd(e)&&!kd(e).Ho()&&e.C_.size>0}function gd(e){return 0===Ws(e).v_.size}function vd(e){e.O_=void 0}async function yd(e){e.C_.forEach(((t,n)=>{dd(e,t)}))}async function bd(e,t){vd(e),md(e)?(e.x_.S_(t),fd(e)):e.x_.set("Unknown")}async function _d(e,t,n){if(e.x_.set("Online"),t instanceof Au&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){Bs("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await xd(e,n)}else if(t instanceof Eu?e.O_.$e(t):t instanceof Su?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(la.min()))try{const t=await Oh(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(Qa.EMPTY_BYTE_STRING,r.snapshotVersion)),pd(e,t);const i=new lh(r.target,t,n,r.sequenceNumber);dd(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Bs("RemoteStore","Failed to raise snapshot:",t),await xd(e,t)}}async function xd(e,t,n){if(!Ta(t))throw t;e.v_.add(1),await cd(e),e.x_.set("Offline"),n||(n=()=>Oh(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Bs("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await ld(e)}))}function wd(e,t){return t().catch((n=>xd(e,n,t)))}async function Ed(e){const t=Ws(e),n=Dd(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Sd(t);)try{const e=await Fh(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,Ad(t,e)}catch(e){await xd(t,e)}Md(t)&&Td(t)}function Sd(e){return gd(e)&&e.D_.length<10}function Ad(e,t){e.D_.push(t);const n=Dd(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Md(e){return gd(e)&&!Dd(e).Ho()&&e.D_.length>0}function Td(e){Dd(e).start()}async function Cd(e){Dd(e).d_()}async function Rd(e){const t=Dd(e);for(const n of e.D_)t.I_(n.mutations)}async function Ld(e,t,n){const r=e.D_.shift(),i=au.from(r,t,n);await wd(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await Ed(e)}async function Id(e,t){t&&Dd(e).P_&&await async function(e,t){if(function(e){return du(e)&&e!==Ks.ABORTED}(t.code)){const n=e.D_.shift();Dd(e).Zo(),await wd(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Ed(e)}}(e,t),Md(e)&&Td(e)}async function Pd(e,t){const n=Ws(e);n.asyncQueue.verifyOperationInProgress(),Bs("RemoteStore","RemoteStore received new credentials");const r=gd(n);n.v_.add(3),await cd(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await ld(n)}async function Nd(e,t){const n=Ws(e);t?(n.v_.delete(2),await ld(n)):t||(n.v_.add(2),await cd(n),n.x_.set("Unknown"))}function kd(e){return e.N_||(e.N_=function(e,t,n){const r=Ws(e);return r.R_(),new rd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:yd.bind(null,e),To:bd.bind(null,e),u_:_d.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),md(e)?fd(e):e.x_.set("Unknown")):(await e.N_.stop(),vd(e))}))),e.N_}function Dd(e){return e.L_||(e.L_=function(e,t,n){const r=Ws(e);return r.R_(),new id(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:Cd.bind(null,e),To:Id.bind(null,e),E_:Rd.bind(null,e),T_:Ld.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await Ed(e)):(await e.L_.stop(),e.D_.length>0&&(Bs("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class Od{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Xs,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,s=new Od(e,t,o,r,i);return s.start(n),s}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qs(Ks.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ud(e,t){if(js("AsyncQueue","".concat(t,": ").concat(e)),Ta(e))return new qs(Ks.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Fd{constructor(e){this.comparator=e?(t,n)=>e(t,n)||pa.comparator(t.key,n.key):(e,t)=>pa.comparator(e.key,t.key),this.keyedMap=yc(),this.sortedSet=new za(this.comparator)}static emptySet(e){return new Fd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fd))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Fd;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Bd{constructor(){this.B_=new za(pa.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Hs():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class jd{constructor(e,t,n,r,i,o,s,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new jd(e,t,Fd.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Vd{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class zd{constructor(){this.queries=new fc((e=>lc(e)),ac),this.onlineState="Unknown",this.W_=new Set}}async function Hd(e,t){const n=Ws(e);let r=3;const i=t.query;let o=n.queries.get(i);o?!o.K_()&&t.U_()&&(r=2):(o=new Vd,r=t.U_()?0:1);try{switch(r){case 0:o.q_=await n.onListen(i,!0);break;case 1:o.q_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=Ud(e,"Initialization of query '".concat(cc(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,o),o.Q_.push(t),t.G_(n.onlineState),o.q_&&t.z_(o.q_)&&qd(n)}async function Gd(e,t){const n=Ws(e),r=t.query;let i=3;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),0===o.Q_.length?i=t.U_()?0:1:!o.K_()&&t.U_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Wd(e,t){const n=Ws(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(i)&&(r=!0);t.q_=i}}r&&qd(n)}function Kd(e,t,n){const r=Ws(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function qd(e){e.W_.forEach((e=>{e.next()}))}var Xd,Qd;(Qd=Xd||(Xd={})).j_="default",Qd.Cache="cache";class Yd{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new jd(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=jd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==Xd.Cache}}class Jd{constructor(e){this.key=e}}class Zd{constructor(e){this.key=e}}class $d{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=Ac(),this.mutatedKeys=Ac(),this.ha=dc(e),this.Pa=new Fd(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new Bd,r=t?t.Pa:this.Pa;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,s=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=uc(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.da(c,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.ha(u,a)>0||l&&this.ha(u,l)<0)&&(s=!0)):!c&&u?(n.track({type:0,doc:u}),p=!0):c&&!u&&(n.track({type:1,doc:c}),p=!0,(a||l)&&(s=!0)),p&&(u?(o=o.add(u),i=d?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Pa:o,Ea:n,Xi:s,mutatedKeys:i}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const o=e.Ea.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Hs()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),r=null!=r&&r;const s=t&&!r?this.Ra():[],a=0===this.la.size&&this.current&&!r?1:0,l=a!==this.ca;return this.ca=a,0!==o.length||l?{snapshot:new jd(this.query,e.Pa,i,o,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:s}:{Va:s}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new Bd,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=Ac(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new Zd(e))})),this.la.forEach((n=>{e.has(n)||t.push(new Jd(n))})),t}fa(e){this.ua=e.hs,this.la=Ac();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return jd.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class ep{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class tp{constructor(e){this.key=e,this.pa=!1}}class np{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.ya={},this.wa=new fc((e=>lc(e)),ac),this.Sa=new Map,this.ba=new Set,this.Da=new za(pa.comparator),this.Ca=new Map,this.va=new xh,this.Fa={},this.Ma=new Map,this.xa=mh.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function rp(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Sp(e);let i;const o=r.wa.get(t);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.ga()):i=await op(r,t,n,!0),i}async function ip(e,t){const n=Sp(e);await op(n,t,!0,!1)}async function op(e,t,n,r){const i=await Bh(e.localStore,rc(t)),o=i.targetId,s=n?e.sharedClientState.addLocalQueryTarget(o):"not-current";let a;return r&&(a=await sp(e,t,o,"current"===s,i.resumeToken)),e.isPrimaryClient&&n&&ud(e.remoteStore,i),a}async function sp(e,t,n,r,i){e.Na=(t,n,r)=>async function(e,t,n,r){let i=t.view.Ta(n);i.Xi&&(i=await Vh(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,i)})));const o=r&&r.targetChanges.get(t.targetId),s=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,o,s);return yp(e,t.targetId,a.Va),a.snapshot}(e,t,n,r);const o=await Vh(e.localStore,t,!0),s=new $d(t,o.hs),a=s.Ta(o.documents),l=wu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=s.applyChanges(a,e.isPrimaryClient,l);yp(e,n,c.Va);const u=new ep(t,n,s);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),c.snapshot}async function ap(e,t,n){const r=Ws(e),i=r.wa.get(t),o=r.Sa.get(i.targetId);if(o.length>1)return r.Sa.set(i.targetId,o.filter((e=>!ac(e,t)))),void r.wa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jh(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&hd(r.remoteStore,i.targetId),gp(r,i.targetId)})).catch(xa)):(gp(r,i.targetId),await jh(r.localStore,i.targetId,!0))}async function lp(e,t){const n=Ws(e),r=n.wa.get(t),i=n.Sa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hd(n.remoteStore,r.targetId))}async function cp(e,t){const n=Ws(e);try{const e=await function(e,t){const n=Ws(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const s=[];t.targetChanges.forEach(((o,a)=>{const l=i.get(a);if(!l)return;s.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Qa.EMPTY_BYTE_STRING,la.min()).withLastLimboFreeSnapshotVersion(la.min()):o.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(o.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,o)&&s.push(n.Qr.updateTargetData(e,c))}));let a=gc(),l=Ac();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),s.push(Uh(e,o,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!r.isEqual(la.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));s.push(t)}return wa.waitFor(s).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Ca.get(t);r&&(Gs(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.pa=!0:e.modifiedDocuments.size>0?Gs(r.pa):e.removedDocuments.size>0&&(Gs(r.pa),r.pa=!1))})),await xp(n,e,t)}catch(e){await xa(e)}}function up(e,t,n){const r=Ws(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wa.forEach(((n,r)=>{const i=r.view.G_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Ws(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.G_(t)&&(r=!0)})),r&&qd(n)}(r.eventManager,t),e.length&&r.ya.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function hp(e,t,n){const r=Ws(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ca.get(t),o=i&&i.key;if(o){let e=new za(pa.comparator);e=e.insert(o,El.newNoDocument(o,la.min()));const n=Ac().add(o),i=new xu(la.min(),new Map,new za(oa),e,n);await cp(r,i),r.Da=r.Da.remove(o),r.Ca.delete(t),_p(r)}else await jh(r.localStore,t,!1).then((()=>gp(r,t,n))).catch(xa)}async function dp(e,t){const n=Ws(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ws(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let s=wa.resolve();return o.forEach((e=>{s=s.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);Gs(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),s.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ac();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);mp(n,r,null),fp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xp(n,e)}catch(e){await xa(e)}}async function pp(e,t,n){const r=Ws(e);try{const e=await function(e,t){const n=Ws(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Gs(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);mp(r,t,n),fp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await xp(r,e)}catch(n){await xa(n)}}function fp(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function mp(e,t,n){const r=Ws(e);let i=r.Fa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Fa[r.currentUser.toKey()]=i}}function gp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Sa.get(t))e.wa.delete(r),n&&e.ya.La(r,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||vp(e,t)}))}function vp(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(hd(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),_p(e))}function yp(e,t,n){for(const r of n)r instanceof Jd?(e.va.addReference(r.key,t),bp(e,r)):r instanceof Zd?(Bs("SyncEngine","Document no longer in limbo: "+r.key),e.va.removeReference(r.key,t),e.va.containsKey(r.key)||vp(e,r.key)):Hs()}function bp(e,t){const n=t.key,r=n.path.canonicalString();e.Da.get(n)||e.ba.has(r)||(Bs("SyncEngine","New document in limbo: "+n),e.ba.add(r),_p(e))}function _p(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new pa(ua.fromString(t)),r=e.xa.next();e.Ca.set(r,new tp(n)),e.Da=e.Da.insert(n,r),ud(e.remoteStore,new lh(rc($l(n.path)),r,"TargetPurposeLimboResolution",Pa._e))}}async function xp(e,t,n){const r=Ws(e),i=[],o=[],s=[];r.wa.isEmpty()||(r.wa.forEach(((e,a)=>{s.push(r.Na(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=Lh.Ki(a.targetId,e);o.push(t)}})))})),await Promise.all(s),r.ya.u_(i),await async function(e,t){const n=Ws(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>wa.forEach(t,(t=>wa.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>wa.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Ta(e))throw e;Bs("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function wp(e,t){const n=Ws(e);if(!n.currentUser.isEqual(t)){Bs("SyncEngine","User change. New user:",t.toKey());const e=await Dh(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new qs(Ks.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await xp(n,e.us)}}function Ep(e,t){const n=Ws(e),r=n.Ca.get(t);if(r&&r.pa)return Ac().add(r.key);{let e=Ac();const r=n.Sa.get(t);if(!r)return e;for(const t of r){const r=n.wa.get(t);e=e.unionWith(r.view.Ia)}return e}}function Sp(e){const t=Ws(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=cp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ep.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hp.bind(null,t),t.ya.u_=Wd.bind(null,t.eventManager),t.ya.La=Kd.bind(null,t.eventManager),t}function Ap(e){const t=Ws(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=dp.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pp.bind(null,t),t}class Mp{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return kh(this.persistence,new Ph,e.initialUser,this.serializer)}createPersistence(e){return new Th(Rh.Hr,this.serializer)}createSharedClientState(e){return new Gh}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Tp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>up(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=wp.bind(null,this.syncEngine),await Nd(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zd}createDatastore(e){const t=ed(e.databaseInfo.databaseId),n=function(e){return new Zh(e)}(e.databaseInfo);return function(e,t,n,r){return new od(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new ad(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>up(this.syncEngine,e,0)),Kh.D()?new Kh:new Wh)}createSyncEngine(e,t){return function(e,t,n,r,i,o,s){const a=new np(e,t,n,r,i,o);return s&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=Ws(e);Bs("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await cd(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}class Cp{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):js("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class Rp{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Ds.UNAUTHENTICATED,this.clientId=ia.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Bs("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Bs("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qs(Ks.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Xs;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ud(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function Lp(e,t){e.asyncQueue.verifyOperationInProgress(),Bs("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await Dh(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function Ip(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Np(e);Bs("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>Pd(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>Pd(t.remoteStore,n))),e._onlineComponents=t}function Pp(e){return"FirebaseError"===e.name?e.code===Ks.FAILED_PRECONDITION||e.code===Ks.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Np(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Bs("FirestoreClient","Using user provided OfflineComponentProvider");try{await Lp(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Pp(n))throw n;Vs("Error using user provided cache. Falling back to memory cache: "+n),await Lp(e,new Mp)}}else Bs("FirestoreClient","Using default OfflineComponentProvider"),await Lp(e,new Mp);return e._offlineComponents}async function kp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Bs("FirestoreClient","Using user provided OnlineComponentProvider"),await Ip(e,e._uninitializedComponentsProvider._online)):(Bs("FirestoreClient","Using default OnlineComponentProvider"),await Ip(e,new Tp))),e._onlineComponents}function Dp(e){return kp(e).then((e=>e.syncEngine))}async function Op(e){const t=await kp(e),n=t.eventManager;return n.onListen=rp.bind(null,t.syncEngine),n.onUnlisten=ap.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ip.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=lp.bind(null,t.syncEngine),n}function Up(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Xs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Cp({next:o=>{t.enqueueAndForget((()=>Gd(e,s)));const a=o.docs.has(n);!a&&o.fromCache?i.reject(new qs(Ks.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new qs(Ks.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),s=new Yd($l(n.path),o,{includeMetadataChanges:!0,ta:!0});return Hd(e,s)}(await Op(e),e.asyncQueue,t,n,r))),r.promise}function Fp(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Xs;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new Cp({next:n=>{t.enqueueAndForget((()=>Gd(e,s))),n.fromCache&&"server"===r.source?i.reject(new qs(Ks.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),s=new Yd(n,o,{includeMetadataChanges:!0,ta:!0});return Hd(e,s)}(await Op(e),e.asyncQueue,t,n,r))),r.promise}function Bp(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const jp=new Map;function Vp(e,t,n){if(!n)throw new qs(Ks.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function zp(e){if(!pa.isDocumentKey(e))throw new qs(Ks.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Hp(e){if(pa.isDocumentKey(e))throw new qs(Ks.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Gp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Hs()}function Wp(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qs(Ks.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gp(e);throw new qs(Ks.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}class Kp{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new qs(Ks.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qs(Ks.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new qs(Ks.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bp(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new qs(Ks.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new qs(Ks.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new qs(Ks.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qp{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new qs(Ks.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qs(Ks.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kp(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ys;switch(e.type){case"firstParty":return new ea(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new qs(Ks.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=jp.get(e);t&&(Bs("ComponentProvider","Removing Datastore"),jp.delete(e),t.terminate())}(this),Promise.resolve()}}class Xp{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Xp(this.firestore,e,this._query)}}class Qp{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yp(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qp(this.firestore,e,this._key)}}class Yp extends Xp{constructor(e,t,n){super(e,t,$l(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qp(this.firestore,null,new pa(e))}withConverter(e){return new Yp(this.firestore,e,this._path)}}function Jp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=at(e),Vp("collection","path",t),e instanceof qp){const n=ua.fromString(t,...r);return Hp(n),new Yp(e,null,n)}{if(!(e instanceof Qp||e instanceof Yp))throw new qs(Ks.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ua.fromString(t,...r));return Hp(n),new Yp(e.firestore,null,n)}}function Zp(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=at(e),1===arguments.length&&(t=ia.newId()),Vp("doc","path",t),e instanceof qp){const n=ua.fromString(t,...r);return zp(n),new Qp(e,null,new pa(n))}{if(!(e instanceof Qp||e instanceof Yp))throw new qs(Ks.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ua.fromString(t,...r));return zp(n),new Qp(e.firestore,e instanceof Yp?e.converter:null,new pa(n))}}class $p{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new td(this,"async_queue_retry"),this.cu=()=>{const e=$h();e&&Bs("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=$h();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=$h();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new Xs;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(rA){if(!Ta(rA))throw rA;Bs("AsyncQueue","Operation failed with retryable error: "+rA)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw js("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const r=Od.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(r),r}lu(){this.ou&&Hs()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function ef(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class tf extends qp{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new $p,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||rf(this),this._firestoreClient.terminate()}}function nf(e){return e._firestoreClient||rf(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function rf(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new rl(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Bp(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Rp(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}class of{constructor(e){this._byteString=e}static fromBase64String(e){try{return new of(Qa.fromBase64String(e))}catch(e){throw new qs(Ks.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new of(Qa.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class sf{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new qs(Ks.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new da(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class af{constructor(e){this._methodName=e}}class lf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qs(Ks.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qs(Ks.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oa(this._lat,e._lat)||oa(this._long,e._long)}}const cf=/^__.*__$/;class uf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new eu(e,this.data,this.fieldMask,t,this.fieldTransforms):new $c(e,this.data,t,this.fieldTransforms)}}class hf{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new eu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function df(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Hs()}}class pf{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Ru(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new pf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.pu(e),r}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.mu({path:n,gu:!1});return r.Ru(),r}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return If(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(df(this.Vu)&&cf.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class ff{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ed(e)}Cu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new pf({Vu:e,methodName:t,Du:n,path:da.emptyPath(),gu:!1,bu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mf(e){const t=e._freezeSettings(),n=ed(e._databaseId);return new ff(e._databaseId,!!t.ignoreUndefinedProperties,n)}function gf(e,t,n,r,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const s=e.Cu(o.merge||o.mergeFields?2:0,t,n,i);Tf("Data must be an object, but it was:",s,r);const a=Af(r,s);let l,c;if(o.merge)l=new qa(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Cf(t,r,n);if(!s.contains(i))throw new qs(Ks.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Pf(e,i)||e.push(i)}l=new qa(e),c=s.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=s.fieldTransforms;return new uf(new xl(a),l,c)}class vf extends af{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vf}}function yf(e,t,n){return new pf({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class bf extends af{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=yf(this,e,!0),n=this.vu.map((e=>Sf(e,t))),r=new Oc(n);return new Hc(e.path,r)}isEqual(e){return e instanceof bf&&et(this.vu,e.vu)}}class _f extends af{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=yf(this,e,!0),n=this.vu.map((e=>Sf(e,t))),r=new Fc(n);return new Hc(e.path,r)}isEqual(e){return e instanceof _f&&et(this.vu,e.vu)}}function xf(e,t,n,r){const i=e.Cu(1,t,n);Tf("Data must be an object, but it was:",i,r);const o=[],s=xl.empty();ja(r,((e,r)=>{const a=Lf(t,e,n);r=at(r);const l=i.yu(a);if(r instanceof vf)o.push(a);else{const e=Sf(r,l);null!=e&&(o.push(a),s.set(a,e))}}));const a=new qa(o);return new hf(s,a,i.fieldTransforms)}function wf(e,t,n,r,i,o){const s=e.Cu(1,t,n),a=[Cf(t,r,n)],l=[i];if(o.length%2!=0)throw new qs(Ks.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<o.length;d+=2)a.push(Cf(t,o[d])),l.push(o[d+1]);const c=[],u=xl.empty();for(let d=a.length-1;d>=0;--d)if(!Pf(c,a[d])){const e=a[d];let t=l[d];t=at(t);const n=s.yu(e);if(t instanceof vf)c.push(e);else{const r=Sf(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new qa(c);return new hf(u,h,s.fieldTransforms)}function Ef(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Sf(n,e.Cu(r?4:3,t))}function Sf(e,t){if(Mf(e=at(e)))return Tf("Unsupported field value:",t,e),Af(e,t);if(e instanceof af)return function(e,t){if(!df(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Sf(i,t.wu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=at(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Lc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=aa.fromDate(e);return{timestampValue:Du(t.serializer,n)}}if(e instanceof aa){const n=new aa(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Du(t.serializer,n)}}if(e instanceof lf)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof of)return{bytesValue:Ou(t.serializer,e._byteString)};if(e instanceof Qp){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Su("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Bu(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(Gp(e)))}(e,t)}function Af(e,t){const n={};return Va(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ja(e,((e,r)=>{const i=Sf(r,t.fu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Mf(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof aa||e instanceof lf||e instanceof of||e instanceof Qp||e instanceof af)}function Tf(e,t,n){if(!Mf(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Gp(n);throw"an object"===r?t.Su(e+" a custom object"):t.Su(e+" "+r)}}function Cf(e,t,n){if((t=at(t))instanceof sf)return t._internalPath;if("string"==typeof t)return Lf(e,t);throw If("Field path arguments must be of type string or ",e,!1,void 0,n)}const Rf=new RegExp("[~\\*/\\[\\]]");function Lf(e,t,n){if(t.search(Rf)>=0)throw If("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new sf(...t.split("."))._internalPath}catch(Tn){throw If("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function If(e,t,n,r,i){const o=r&&!r.isEmpty(),s=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(o||s)&&(l+=" (found",o&&(l+=" in field ".concat(r)),s&&(l+=" in document ".concat(i)),l+=")"),new qs(Ks.INVALID_ARGUMENT,a+e+l)}function Pf(e,t){return e.some((e=>e.isEqual(t)))}class Nf{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qp(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Df("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kf extends Nf{data(){return super.data()}}function Df(e,t){return"string"==typeof t?Lf(e,t):t instanceof sf?t._internalPath:t._delegate._internalPath}function Of(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new qs(Ks.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Uf{}class Ff extends Uf{}function Bf(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];t instanceof Uf&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof zf)).length,n=e.filter((e=>e instanceof jf)).length;if(t>1||t>0&&n>0)throw new qs(Ks.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)e=s._apply(e);return e}class jf extends Ff{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new jf(e,t,n)}_apply(e){const t=this._parse(e);return qf(e._query,t),new Xp(e.firestore,e.converter,oc(e._query,t))}_parse(e){const t=mf(e.firestore),n=function(e,t,n,r,i,o,s){let a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new qs(Ks.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on documentId()."));if("in"===o||"not-in"===o){Kf(s,o);const t=[];for(const n of s)t.push(Wf(r,e,n));a={arrayValue:{values:t}}}else a=Wf(r,e,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Kf(s,o),a=Ef(n,t,s,"in"===o||"not-in"===o);return Ll.create(i,o,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Vf(e,t,n){const r=t,i=Df("where",e);return jf._create(i,r,n)}class zf extends Uf{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zf(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:Il.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)qf(n,i),n=oc(n,i)}(e._query,t),new Xp(e.firestore,e.converter,oc(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Hf extends Ff{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Hf(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new qs(Ks.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new qs(Ks.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tl(t,n)}(e._query,this._field,this._direction);return new Xp(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Jl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Gf(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Df("orderBy",e);return Hf._create(n,t)}function Wf(e,t,n){if("string"==typeof(n=at(n))){if(""===n)throw new qs(Ks.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!tc(t)&&-1!==n.indexOf("/"))throw new qs(Ks.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ua.fromString(n));if(!pa.isDocumentKey(r))throw new qs(Ks.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return pl(e,new pa(r))}if(n instanceof Qp)return pl(e,n._key);throw new qs(Ks.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Gp(n),"."))}function Kf(e,t){if(!Array.isArray(e)||0===e.length)throw new qs(Ks.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function qf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new qs(Ks.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new qs(Ks.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Xf(e,t){if(!(t instanceof jf||t instanceof zf))throw new qs(Ks.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Qf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(sl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Za(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($a(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Hs()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ja(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new lf(Za(e.latitude),Za(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=tl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(nl(e));default:return null}}convertTimestamp(e){const t=Ja(e);return new aa(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ua.fromString(e);Gs(ah(n));const r=new il(n.get(1),n.get(3)),i=new pa(n.popFirst(5));return r.isEqual(t)||js("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Yf(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Jf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zf extends Nf{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new $f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Df("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class $f extends Zf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class em{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Jf(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new $f(this._firestore,this._userDataWriter,n.key,n,new Jf(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qs(Ks.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new $f(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Jf(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new $f(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Jf(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:tm(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function tm(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Hs()}}class nm extends Qf{constructor(e){super(),this.firestore=e}convertBytes(e){return new of(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Qp(this.firestore,null,t)}}function rm(e){e=Wp(e,Xp);const t=Wp(e.firestore,tf),n=nf(t),r=new nm(t);return Of(e._query),Fp(n,e._query).then((n=>new em(t,r,e,n)))}function im(e,t,n){e=Wp(e,Qp);const r=Wp(e.firestore,tf),i=mf(r);let o;for(var s=arguments.length,a=new Array(s>3?s-3:0),l=3;l<s;l++)a[l-3]=arguments[l];return o="string"==typeof(t=at(t))||t instanceof sf?wf(i,"updateDoc",e._key,t,n,a):xf(i,"updateDoc",e._key,t),am(r,[o.toMutation(e._key,Wc.exists(!0))])}function om(e,t){const n=Wp(e.firestore,tf),r=Zp(e),i=Yf(e.converter,t);return am(n,[gf(mf(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Wc.exists(!1))]).then((()=>r))}function sm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=at(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||ef(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(ef(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(o=e.error)||void 0===o?void 0:o.bind(e),n[l+2]=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}let u,h,d;if(e instanceof Qp)h=Wp(e.firestore,tf),d=$l(e._key.path),u={next:t=>{n[l]&&n[l](lm(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Wp(e,Xp);h=Wp(t.firestore,tf),d=t._query;const r=new nm(h);u={next:e=>{n[l]&&n[l](new em(h,r,t,e))},error:n[l+1],complete:n[l+2]},Of(e._query)}return function(e,t,n,r){const i=new Cp(r),o=new Yd(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>Hd(await Op(e),o))),()=>{i.Qa(),e.asyncQueue.enqueueAndForget((async()=>Gd(await Op(e),o)))}}(nf(h),d,c,u)}function am(e,t){return function(e,t){const n=new Xs;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=Ap(e);try{const e=await function(e,t){const n=Ws(e),r=aa.now(),i=t.reduce(((e,t)=>e.add(t.key)),Ac());let o,s;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=gc(),l=Ac();return n.os.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{o=i;const s=[];for(const e of t){const t=Jc(e,o.get(e.key).overlayedDocument);null!=t&&s.push(new eu(e.key,t,wl(t.value.mapValue),Wc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,s,t)})).next((t=>{s=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:s.batchId,changes:bc(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Fa[e.currentUser.toKey()];r||(r=new za(oa)),r=r.insert(t,n),e.Fa[e.currentUser.toKey()]=r}(r,e.batchId,n),await xp(r,e.changes),await Ed(r.remoteStore)}catch(e){const t=Ud(e,"Failed to persist write");n.reject(t)}}(await Dp(e),t,n))),n.promise}(nf(e),t)}function lm(e,t,n){const r=n.docs.get(t._key),i=new nm(e);return new Zf(e,i,t._key,r,new Jf(n.hasPendingWrites,n.fromCache),t.converter)}function cm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new bf("arrayUnion",t)}function um(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new _f("arrayRemove",t)}new WeakMap;function hm(e){let{children:n,submitText:r,validDetails:i,handleSubmit:o,showNext:s,showSubmit:a=!0}=e;const[l,c]=(0,t.useState)(0);function u(){c(l+1)}function h(){c(l-1)}return(0,Ne.jsxs)("div",{className:"full-screen flex rounded-lg relative divide-x divide-gray-300",children:[(0,Ne.jsx)("div",{className:"md:flex flex-col w-[300px] p-2 mt-2",children:t.Children.map(n,((e,t)=>t===l?(0,Ne.jsxs)("div",{className:"flex block font-bold p-3 rounded-lg brand-blue-accent",children:[(0,Ne.jsx)("div",{className:"inline-block mr-2",children:(0,Ne.jsx)("span",{className:"flex w-7 h-7 text-md items-center justify-center rounded-full border border-2 border-brand-blue",children:t+1})}),(0,Ne.jsx)("span",{className:"inline text-xl",children:e.props.title})]}):(0,Ne.jsxs)("div",{className:"flex block font-bold p-3",children:[(0,Ne.jsx)("div",{className:"inline-block mr-2",children:(0,Ne.jsx)("span",{className:"flex h-7 w-7 text-md items-center justify-center rounded-full border border-2 border-black",children:t+1})}),(0,Ne.jsx)("span",{className:"inline text-xl",children:e.props.title})]})))}),(0,Ne.jsxs)("div",{className:"flex flex-col grow",children:[(0,Ne.jsx)("div",{className:"p-3 h-full-less-bottom-bar",children:t.Children.map(n,((e,t)=>{if(t===l)return e}))}),(0,Ne.jsx)("div",{className:"pt-2 pb-2 border-t border-gray-300",children:(0,Ne.jsxs)("div",{className:"float-right mr-3",children:[function(){if(2!=l)return l>0?(0,Ne.jsx)("button",{className:"bg-gray-200 border border-gray-400 text-gray-700 font-bold py-2 px-4 rounded mr-2",onClick:h,children:"Back"}):(0,Ne.jsx)("button",{className:"bg-gray-200 border border-gray-400 text-gray-700 font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed mr-2",children:"Back"})}(),function(){if(3!=t.Children.count(n)){if(l<t.Children.count(n)-1)return s?(0,Ne.jsx)("button",{className:"bg-brand-blue hover:bg-blue-900 border border-brand-blue text-white font-bold py-2 px-4 rounded",onClick:u,children:"Next"}):(0,Ne.jsx)("button",{className:"bg-gray-200 border border-gray-400 text-gray-700 font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed mr-2",children:"Next"});if(!a)return;return i?(0,Ne.jsx)("button",{className:"bg-brand-blue hover:bg-blue-900 border border-brand-blue text-white font-bold py-2 px-4 rounded",onClick:o,children:r}):(0,Ne.jsx)("button",{className:"bg-gray-200 border border-gray-400 text-gray-700 font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed mr-2",children:r})}if(0===l)return s?(0,Ne.jsx)("button",{className:"bg-brand-blue border border-brand-blue text-white font-bold py-2 px-4 rounded",onClick:u,children:"Next"}):(0,Ne.jsx)("button",{className:"bg-gray-200 border border-gray-400 text-gray-700 font-bold py-2 px-4 rounded opacity-50 cursor-not-allowed mr-2",children:"Next"});if(1===l){if(!a)return;return(0,Ne.jsx)("button",{className:"bg-blue-500 hover:bg-blue-700 border border-blue-500 text-white font-bold py-2 px-4 rounded",onClick:u,children:r})}}()]})})]})]})}function dm(e){let{children:t,title:n}=e;return(0,Ne.jsx)(Ne.Fragment,{children:t})}function pm(e){let{label:t,initValue:n,options:r,onChange:i,padding:o=2.5}=e;return(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsx)("select",{name:"selector",id:t,onChange:e=>{i(e.target.value)},className:"shadow w-40 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded focus:ring-blue-500 focus:border-blue-500 block p-".concat(o),children:r.map(((e,t)=>e===n?(0,Ne.jsx)("option",{value:e,selected:!0,children:e},t):(0,Ne.jsx)("option",{value:e,children:e},t)))})})}function fm(e){let{helpText:n}=e;const[r,i]=(0,t.useState)(!1);return(0,Ne.jsxs)("div",{className:"relative inline-block px-1 py-1",children:[(0,Ne.jsx)("button",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",className:"w-6 h-6",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.879 7.519c1.171-1.025 3.071-1.025 4.242 0 1.172 1.025 1.172 2.687 0 3.712-.203.179-.43.326-.67.442-.745.361-1.45.999-1.45 1.827v.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 5.25h.008v.008H12v-.008Z"})})}),r&&(0,Ne.jsx)("div",{className:"absolute left-0 w-48 bg-gray-200 text-gray-800 rounded-md shadow-lg z-10",children:(0,Ne.jsx)("div",{className:"px-4 py-4",children:(0,Ne.jsx)("p",{className:"text-sm",children:n})})})]})}function mm(e){let{type:n,placeholder:r,onChange:i,min:o,max:s,step:a,value:l,width:c=10,maxLength:u,onKeyDown:h,onBlur:d}=e;const[p,f]=(0,t.useState)(l.length);return(0,Ne.jsxs)("div",{className:"flex flex-col",children:[(0,Ne.jsx)("input",{style:{width:"".concat(c,"rem")},className:"shadow appearance-none bg-gray-50 border rounded py-2 px-3 border-gray-300 text-gray-900 text-sm",id:n,placeholder:r,type:n,onChange:e=>{f(e.target.value.length),i(e)},value:l,min:o,max:s,maxLength:u,step:a,onKeyDown:h,onBlur:d}),u&&(0,Ne.jsx)("p",{className:"text-sm text-gray-400",children:"".concat(p,"/").concat(u," characters")})]})}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Os=e}(Jt),Kt(new lt("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const o=e.getProvider("app").getImmediate(),s=new tf(new Zs(e.getProvider("auth-internal")),new na(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qs(Ks.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new il(e.options.projectId,t)}(o,r),o);return i=Object.assign({useFetchStreams:t},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),en(ks,"4.5.1",e),en(ks,"4.5.1","esm2017")}();en("firebase","10.10.0","app");function gm(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function vm(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(rA){o(rA)}}function a(e){try{l(r.throw(e))}catch(rA){o(rA)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function ym(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(rA){a=[6,rA],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}Object.create;function bm(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function _m(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;function xm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wm=xm,Em=new Ze("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Sm=new yt("@firebase/auth");function Am(e){if(Sm.logLevel<=pt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Sm.error("Auth (".concat(Jt,"): ").concat(e),...n)}}function Mm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Im(e,...n)}function Tm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Im(e,...n)}function Cm(e,t,n){const r=Object.assign(Object.assign({},wm()),{[t]:n});return new Ze("auth","Firebase",r).create(t,{appName:e.name})}function Rm(e){return Cm(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lm(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Mm(e,"argument-error"),Cm(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Im(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Em.create(e,...n)}function Pm(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Im(t,...r)}}function Nm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Am(t),new Error(t)}function km(e,t){e||Nm(t)}function Dm(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Om(){return"http:"===Um()||"https:"===Um()}function Um(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Fm(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Om()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Bm{constructor(e,t){this.shortDelay=e,this.longDelay=t,km(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Xe())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Fm()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function jm(e,t){km(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Vm{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Nm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Nm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Nm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const zm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Hm=new Bm(3e4,6e4);function Gm(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Wm(e,t,n,r){return Km(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const s=nt(Object.assign({key:e.config.apiKey},o)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Vm.fetch()(Xm(e,e.config.apiHost,n,s),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Km(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},zm),t);try{const t=new Ym(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Jm(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,s]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Jm(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw Jm(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw Jm(e,"user-disabled",o);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(s)throw Cm(e,a,s);Mm(e,a)}}catch(rA){if(rA instanceof Je)throw rA;Mm(e,"network-request-failed",{message:String(rA)})}}async function qm(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const o=await Wm(e,t,n,r,i);return"mfaPendingCredential"in o&&Mm(e,"multi-factor-auth-required",{_serverResponse:o}),o}function Xm(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?jm(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Qm(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ym{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(Tm(this.auth,"network-request-failed"))),Hm.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jm(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tm(e,t,r);return i.customData._tokenResponse=n,i}function Zm(e){return void 0!==e&&void 0!==e.enterprise}class $m{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Qm(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function eg(e,t){return Wm(e,"GET","/v2/recaptchaConfig",Gm(e,t))}async function tg(e,t){return Wm(e,"POST","/v1/accounts:lookup",t)}function ng(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(rA){}}function rg(e){return 1e3*Number(e)}function ig(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Am("JWT malformed, contained fewer than 3 sections"),null;try{const e=Be(n);return e?JSON.parse(e):(Am("Failed to decode base64 JWT payload"),null)}catch(rA){return Am("Caught error parsing JWT payload as JSON",null===rA||void 0===rA?void 0:rA.toString()),null}}function og(e){const t=ig(e);return Pm(t,"internal-error"),Pm("undefined"!==typeof t.exp,"internal-error"),Pm("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function sg(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(rA){throw rA instanceof Je&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(rA)&&e.auth.currentUser===e&&await e.auth.signOut(),rA}}class ag{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(rA){return void((null===rA||void 0===rA?void 0:rA.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class lg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ng(this.lastLoginAt),this.creationTime=ng(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function cg(e){var t;const n=e.auth,r=await e.getIdToken(),i=await sg(e,tg(n,{idToken:r}));Pm(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const s=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?ug(o.providerUserInfo):[],a=(l=e.providerData,c=s,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&o.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new lg(o.createdAt,o.lastLoginAt),isAnonymous:d};Object.assign(e,p)}function ug(e){return e.map((e=>{var{providerId:t}=e,n=gm(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class hg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pm(e.idToken,"internal-error"),Pm("undefined"!==typeof e.idToken,"internal-error"),Pm("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):og(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pm(0!==e.length,"internal-error");const t=og(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Pm(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Km(e,{},(async()=>{const n=nt({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=Xm(e,r,"/v1/token","key=".concat(i)),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/x-www-form-urlencoded",Vm.fetch()(o,{method:"POST",headers:s,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new hg;return n&&(Pm("string"===typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(Pm("string"===typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(Pm("number"===typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hg,this.toJSON())}_performRefresh(){return Nm("not implemented")}}function dg(e,t){Pm("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class pg{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ag(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lg(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await sg(this,this.stsTokenManager.getToken(this.auth,e));return Pm(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=at(e),r=await n.getIdToken(t),i=ig(r);Pm(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"===typeof i.firebase?i.firebase:void 0,s=null===o||void 0===o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:ng(rg(i.auth_time)),issuedAtTime:ng(rg(i.iat)),expirationTime:ng(rg(i.exp)),signInProvider:s||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=at(e);await cg(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Pm(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pg(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pm(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await cg(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xt(this.auth.app))return Promise.reject(Rm(this.auth));const e=await this.getIdToken();return await sg(this,async function(e,t){return Wm(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,s,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(s=t.tenantId)&&void 0!==s?s:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:b,isAnonymous:_,providerData:x,stsTokenManager:w}=t;Pm(y&&w,e,"internal-error");const E=hg.fromJSON(this.name,w);Pm("string"===typeof y,e,"internal-error"),dg(u,e.name),dg(h,e.name),Pm("boolean"===typeof b,e,"internal-error"),Pm("boolean"===typeof _,e,"internal-error"),dg(d,e.name),dg(p,e.name),dg(f,e.name),dg(m,e.name),dg(g,e.name),dg(v,e.name);const S=new pg({uid:y,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:_,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:E,createdAt:g,lastLoginAt:v});return x&&Array.isArray(x)&&(S.providerData=x.map((e=>Object.assign({},e)))),m&&(S._redirectEventId=m),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hg;r.updateFromServerResponse(t);const i=new pg({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await cg(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Pm(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?ug(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),s=new hg;s.updateFromIdToken(n);const a=new pg({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new lg(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(a,l),a}}const fg=new Map;function mg(e){km(e instanceof Function,"Expected a class definition");let t=fg.get(e);return t?(km(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,fg.set(e,t),t)}class gg{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gg.type="NONE";const vg=gg;function yg(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class bg{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=yg(this.userKey,r.apiKey,i),this.fullPersistenceKey=yg("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pg._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new bg(mg(vg),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||mg(vg);const o=yg(n,e.config.apiKey,e.name);let s=null;for(const c of t)try{const t=await c._get(o);if(t){const n=pg._fromJSON(e,t);c!==i&&(s=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],s&&await i._set(o,s.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(l){}}))),new bg(i,e,n)):new bg(i,e,n)}}function _g(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sg(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(xg(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Mg(t))return"Blackberry";if(Tg(t))return"Webos";if(wg(t))return"Safari";if((t.includes("chrome/")||Eg(t))&&!t.includes("edge/"))return"Chrome";if(Ag(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function xg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/firefox\//i.test(e)}function wg(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Eg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/crios\//i.test(e)}function Sg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iemobile/i.test(e)}function Ag(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/android/i.test(e)}function Mg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/blackberry/i.test(e)}function Tg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/webos/i.test(e)}function Cg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Rg(){return function(){const e=Xe();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Lg(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe();return Cg(e)||Ag(e)||Tg(e)||Mg(e)||/windows phone/i.test(e)||Sg(e)}function Ig(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=_g(Xe());break;case"Worker":t="".concat(_g(Xe()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Jt,"/").concat(r)}class Pg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(rA){r(rA)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(rA){t.reverse();for(const n of t)try{n()}catch(j_){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===rA||void 0===rA?void 0:rA.message})}}}class Ng{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,s;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNumericCharacter)||void 0===o||o),a.isValid&&(a.isValid=null===(s=a.containsNonAlphanumericCharacter)||void 0===s||s),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class kg{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Og(this),this.idTokenSubscription=new Og(this),this.beforeStateQueue=new Pg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Em,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=mg(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await bg.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(rA){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await tg(this,{idToken:e}),n=await pg._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Xt(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null===r||void 0===r?void 0:r._redirectEventId,s=await this.tryRedirectSignIn(e);n&&n!==o||!(null===s||void 0===s?void 0:s.user)||(r=s.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(rA){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(rA)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pm(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(rA){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await cg(e)}catch(rA){if((null===rA||void 0===rA?void 0:rA.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xt(this.app))return Promise.reject(Rm(this));const t=e?at(e):null;return t&&Pm(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Pm(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Xt(this.app)?Promise.reject(Rm(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xt(this.app)?Promise.reject(Rm(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(mg(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Wm(e,"GET","/v2/passwordPolicy",Gm(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ng(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ze("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Wm(e,"POST","/v2/accounts:revokeToken",Gm(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&mg(e)||this._popupRedirectResolver;Pm(t,this,"argument-error"),this.redirectPersistenceManager=await bg.create(this,[mg(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let o=!1;const s=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pm(s,this,"internal-error"),s.then((()=>{o||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pm(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ig(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Sm.logLevel<=pt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Sm.warn("Auth (".concat(Jt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Dg(e){return at(e)}class Og{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new ot(e,t);return n.subscribe.bind(n)}((e=>this.observer=e))}get next(){return Pm(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Ug={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Fg(e){return Ug.loadJS(e)}function Bg(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class jg{constructor(e){this.type="recaptcha-enterprise",this.auth=Dg(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;Zm(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{eg(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new $m(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&Zm(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Ug.recaptchaEnterpriseScript;0!==t.length&&(t+=i),Fg(t).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function Vg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new jg(e);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},t);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function zg(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Vg(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await Vg(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Hg(e,t,n){const r=Dg(e);Pm(r._canInitEmulator,r,"emulator-config-failed"),Pm(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),o=Gg(t),{host:s,port:a}=function(e){const t=Gg(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Wg(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Wg(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Gg(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wg(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Kg{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nm("not implemented")}_getIdTokenResponse(e){return Nm("not implemented")}_linkToIdToken(e,t){return Nm("not implemented")}_getReauthenticationResolver(e){return Nm("not implemented")}}async function qg(e,t){return Wm(e,"POST","/v1/accounts:signUp",t)}async function Xg(e,t){return qm(e,"POST","/v1/accounts:signInWithPassword",Gm(e,t))}class Qg extends Kg{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Qg(e,t,"password")}static _fromEmailAndCode(e,t){return new Qg(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return zg(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Xg);case"emailLink":return async function(e,t){return qm(e,"POST","/v1/accounts:signInWithEmailLink",Gm(e,t))}(e,{email:this._email,oobCode:this._password});default:Mm(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return zg(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",qg);case"emailLink":return async function(e,t){return qm(e,"POST","/v1/accounts:signInWithEmailLink",Gm(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Mm(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Yg(e,t){return qm(e,"POST","/v1/accounts:signInWithIdp",Gm(e,t))}class Jg extends Kg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Jg(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mm("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=gm(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Jg(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Yg(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Yg(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Yg(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=nt(t)}return e}}const Zg={USER_NOT_FOUND:"user-not-found"};class $g extends Kg{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new $g({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new $g({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return qm(e,"POST","/v1/accounts:signInWithPhoneNumber",Gm(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await qm(e,"POST","/v1/accounts:signInWithPhoneNumber",Gm(e,t));if(n.temporaryProof)throw Jm(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return qm(e,"POST","/v1/accounts:signInWithPhoneNumber",Gm(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Zg)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new $g({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ev{constructor(e){var t,n,r,i,o,s;const a=rt(it(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Pm(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=a.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(s=a.tenantId)&&void 0!==s?s:null}static parseLink(e){const t=function(e){const t=rt(it(e)).link,n=t?rt(it(t)).deep_link_id:null,r=rt(it(e)).deep_link_id;return(r?rt(it(r)).link:null)||r||n||t||e}(e);try{return new ev(t)}catch(n){return null}}}class tv{constructor(){this.providerId=tv.PROVIDER_ID}static credential(e,t){return Qg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ev.parseLink(t);return Pm(n,"argument-error"),Qg._fromEmailAndCode(e,n.code,n.tenantId)}}tv.PROVIDER_ID="password",tv.EMAIL_PASSWORD_SIGN_IN_METHOD="password",tv.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class nv{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class rv extends nv{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class iv extends rv{constructor(){super("facebook.com")}static credential(e){return Jg._fromParams({providerId:iv.PROVIDER_ID,signInMethod:iv.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return iv.credentialFromTaggedObject(e)}static credentialFromError(e){return iv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return iv.credential(t.oauthAccessToken)}catch(n){return null}}}iv.FACEBOOK_SIGN_IN_METHOD="facebook.com",iv.PROVIDER_ID="facebook.com";class ov extends rv{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Jg._fromParams({providerId:ov.PROVIDER_ID,signInMethod:ov.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ov.credentialFromTaggedObject(e)}static credentialFromError(e){return ov.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return ov.credential(n,r)}catch(i){return null}}}ov.GOOGLE_SIGN_IN_METHOD="google.com",ov.PROVIDER_ID="google.com";class sv extends rv{constructor(){super("github.com")}static credential(e){return Jg._fromParams({providerId:sv.PROVIDER_ID,signInMethod:sv.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return sv.credentialFromTaggedObject(e)}static credentialFromError(e){return sv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return sv.credential(t.oauthAccessToken)}catch(n){return null}}}sv.GITHUB_SIGN_IN_METHOD="github.com",sv.PROVIDER_ID="github.com";class av extends rv{constructor(){super("twitter.com")}static credential(e,t){return Jg._fromParams({providerId:av.PROVIDER_ID,signInMethod:av.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return av.credentialFromTaggedObject(e)}static credentialFromError(e){return av.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return av.credential(n,r)}catch(i){return null}}}async function lv(e,t){return qm(e,"POST","/v1/accounts:signUp",Gm(e,t))}av.TWITTER_SIGN_IN_METHOD="twitter.com",av.PROVIDER_ID="twitter.com";class cv{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await pg._fromIdTokenResponse(e,n,r),o=uv(n);return new cv({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=uv(n);return new cv({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function uv(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class hv extends Je{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hv.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new hv(e,t,n,r)}}function dv(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw hv._fromErrorAndOperation(e,n,t,r);throw n}))}async function pv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await sg(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return cv._forOperation(e,"link",r)}async function fv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Xt(r.app))return Promise.reject(Rm(r));const i="reauthenticate";try{const o=await sg(e,dv(r,i,t,e),n);Pm(o.idToken,r,"internal-error");const s=ig(o.idToken);Pm(s,r,"internal-error");const{sub:a}=s;return Pm(e.uid===a,r,"user-mismatch"),cv._forOperation(e,i,o)}catch(rA){throw(null===rA||void 0===rA?void 0:rA.code)==="auth/".concat("user-not-found")&&Mm(r,"user-mismatch"),rA}}async function mv(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Xt(e.app))return Promise.reject(Rm(e));const r="signIn",i=await dv(e,r,t),o=await cv._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function gv(e,t){return mv(Dg(e),t)}async function vv(e){const t=Dg(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}new WeakMap;const yv="__sak";class bv{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(yv,"1"),this.storage.removeItem(yv),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class _v extends bv{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Xe();return wg(e)||Cg(e)}()&&function(){try{return!(!window||window===window.top)}catch(rA){return!1}}(),this.fallbackToPolling=Lg(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Rg()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_v.type="LOCAL";const xv=_v;class wv extends bv{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}wv.type="SESSION";const Ev=wv;class Sv{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Sv(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null===o||void 0===o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const s=Array.from(o).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(s);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Av(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Sv.receivers=[];class Mv{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((s,a)=>{const l=Av("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),s(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}function Tv(){return window}function Cv(){return"undefined"!==typeof Tv().WorkerGlobalScope&&"function"===typeof Tv().importScripts}const Rv="firebaseLocalStorageDb",Lv="firebaseLocalStorage",Iv="fbase_key";class Pv{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Nv(e,t){return e.transaction([Lv],t?"readwrite":"readonly").objectStore(Lv)}function kv(){const e=indexedDB.open(Rv,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Lv,{keyPath:Iv})}catch(rA){n(rA)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Lv)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Rv);return new Pv(e).toPromise()}(),t(await kv()))}))}))}async function Dv(e,t,n){const r=Nv(e,!0).put({[Iv]:t,value:n});return new Pv(r).toPromise()}function Ov(e,t){const n=Nv(e,!0).delete(t);return new Pv(n).toPromise()}class Uv{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await kv()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(rA){if(t++>3)throw rA;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cv()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sv._getInstance(Cv()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Mv(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kv();return await Dv(e,yv,"1"),await Ov(e,yv),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>Dv(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Nv(e,!1).get(t),r=await new Pv(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>Ov(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Nv(e,!1).getAll();return new Pv(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Uv.type="LOCAL";const Fv=Uv;Bg("rcb"),new Bm(3e4,6e4);const Bv="recaptcha";async function jv(e,t,n){var r;const i=await n.verify();try{let o;if(Pm("string"===typeof i,e,"argument-error"),Pm(n.type===Bv,e,"argument-error"),o="string"===typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){Pm("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Wm(e,"POST","/v2/accounts/mfaEnrollment:start",Gm(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Pm("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;Pm(n,e,"missing-multi-factor-info");const s=await function(e,t){return Wm(e,"POST","/v2/accounts/mfaSignIn:start",Gm(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return s.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Wm(e,"POST","/v1/accounts:sendVerificationCode",Gm(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class Vv{constructor(e){this.providerId=Vv.PROVIDER_ID,this.auth=Dg(e)}verifyPhoneNumber(e,t){return jv(this.auth,e,at(t))}static credential(e,t){return $g._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Vv.credentialFromTaggedObject(t)}static credentialFromError(e){return Vv.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?$g._fromTokenResponse(n,r):null}}function zv(e,t){return t?mg(t):(Pm(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Vv.PROVIDER_ID="phone",Vv.PHONE_SIGN_IN_METHOD="phone";class Hv extends Kg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Yg(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Yg(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Yg(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Gv(e){return mv(e.auth,new Hv(e),e.bypassAuthState)}function Wv(e){const{auth:t,user:n}=e;return Pm(n,t,"internal-error"),fv(n,new Hv(e),e.bypassAuthState)}async function Kv(e){const{auth:t,user:n}=e;return Pm(n,t,"internal-error"),pv(n,new Hv(e),e.bypassAuthState)}class qv{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(rA){this.reject(rA)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:s}=e;if(o)return void this.reject(o);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(s)(a))}catch(rA){this.reject(rA)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Gv;case"linkViaPopup":case"linkViaRedirect":return Kv;case"reauthViaPopup":case"reauthViaRedirect":return Wv;default:Mm(this.auth,"internal-error")}}resolve(e){km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Xv=new Bm(2e3,1e4);class Qv extends qv{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Qv.currentPopupAction&&Qv.currentPopupAction.cancel(),Qv.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pm(e,this.auth,"internal-error"),e}async onExecution(){km(1===this.filter.length,"Popup operations only handle one event");const e=Av();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(Tm(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Tm(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qv.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(Tm(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Xv.get())};e()}}Qv.currentPopupAction=null;const Yv="pendingRedirect",Jv=new Map;class Zv extends qv{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Jv.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ty(t),r=ey(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(rA){e=()=>Promise.reject(rA)}Jv.set(this.auth._key(),e)}return this.bypassAuthState||Jv.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function $v(e,t){Jv.set(e._key(),t)}function ey(e){return mg(e._redirectPersistence)}function ty(e){return yg(Yv,e.config.apiKey,e.name)}async function ny(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Xt(e.app))return Promise.reject(Rm(e));const r=Dg(e),i=zv(r,t),o=new Zv(r,i,n),s=await o.execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,t)),s}class ry{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oy(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!oy(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Tm(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(iy(e))}saveEventToCache(e){this.cachedEventUids.add(iy(e)),this.lastProcessedEventTime=Date.now()}}function iy(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function oy(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const sy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ay=/^https?/;async function ly(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Wm(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(cy(r))return}catch(n){}Mm(e,"unauthorized-domain")}function cy(e){const t=Dm(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!ay.test(n))return!1;if(sy.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const uy=new Bm(3e4,6e4);function hy(){const e=Tv().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function dy(e){return new Promise(((t,n)=>{var r,i,o;function s(){hy(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{hy(),n(Tm(e,"network-request-failed"))},timeout:uy.get()})}if(null===(i=null===(r=Tv().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=Tv().gapi)||void 0===o?void 0:o.load)){const t=Bg("iframefcb");return Tv()[t]=()=>{gapi.load?s():n(Tm(e,"network-request-failed"))},Fg("".concat(Ug.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}s()}})).catch((e=>{throw py=null,e}))}let py=null;const fy=new Bm(5e3,15e3),my="__/auth/iframe",gy="emulator/auth/iframe",vy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function by(e){const t=e.config;Pm(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?jm(t,gy):"https://".concat(e.config.authDomain,"/").concat(my),r={apiKey:t.apiKey,appName:e.name,v:Jt},i=yy.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(nt(r).slice(1))}async function _y(e){const t=await function(e){return py=py||dy(e),py}(e),n=Tv().gapi;return Pm(n,e,"internal-error"),t.open({where:document.body,url:by(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:vy,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=Tm(e,"network-request-failed"),o=Tv().setTimeout((()=>{r(i)}),fy.get());function s(){Tv().clearTimeout(o),n(t)}t.ping(s).then(s,(()=>{r(i)}))}))))}const xy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class wy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(rA){}}}function Ey(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},xy),{width:r.toString(),height:i.toString(),top:o,left:s}),c=Xe().toLowerCase();n&&(a=Eg(c)?"_blank":n),xg(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return Cg(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new wy(null);const h=window.open(t||"",a,u);Pm(h,e,"popup-blocked");try{h.focus()}catch(rA){}return new wy(h)}const Sy="__/auth/handler",Ay="emulator/auth/handler",My=encodeURIComponent("fac");async function Ty(e,t,n,r,i,o){Pm(e.config.authDomain,e,"auth-domain-config-required"),Pm(e.config.apiKey,e,"invalid-api-key");const s={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Jt,eventId:i};if(t instanceof nv){t.setDefaultLanguage(e.languageCode),s.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(s.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))s[e]=t}if(t instanceof rv){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(s.scopes=e.join(","))}e.tenantId&&(s.tid=e.tenantId);const a=s;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(My,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Sy);return jm(t,Ay)}(e),"?").concat(nt(a).slice(1)).concat(c)}const Cy="webStorageSupport";const Ry=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ev,this._completeRedirectFn=ny,this._overrideRedirectResult=$v}async _openPopup(e,t,n,r){var i;km(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Ey(e,await Ty(e,t,n,Dm(),r),Av())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Tv().location.href=e}(await Ty(e,t,n,Dm(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(km(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await _y(e),n=new ry(e);return t.register("authEvent",(t=>{Pm(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Cy,{type:Cy},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Cy];void 0!==i&&t(!!i),Mm(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ly(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Lg()||wg()||Cg()}};var Ly="@firebase/auth",Iy="1.7.0";class Py{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pm(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ny=We("authIdTokenMaxAge")||300;let ky=null;var Dy;!function(e){Ug=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Tm("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Dy="Browser",Kt(new lt("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;Pm(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:s,authDomain:a,clientPlatform:Dy,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ig(Dy)},c=new kg(r,i,o,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(mg);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Kt(new lt("auth-internal",(e=>(e=>new Py(e))(Dg(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),en(Ly,Iy,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Dy)),en(Ly,Iy,"esm2017");const Oy="firebasestorage.googleapis.com",Uy="storageBucket";class Fy extends Je{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Vy(e),"Firebase Storage: ".concat(t," (").concat(Vy(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Fy.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Vy(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var By,jy;function Vy(e){return"storage/"+e}function zy(){return new Fy(By.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Hy(){return new Fy(By.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gy(){return new Fy(By.CANCELED,"User canceled the upload/download.")}function Wy(){return new Fy(By.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ky(e){return new Fy(By.INVALID_ARGUMENT,e)}function qy(){return new Fy(By.APP_DELETED,"The Firebase app was deleted.")}function Xy(e,t){return new Fy(By.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Qy(e){throw new Fy(By.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(By||(By={}));class Yy{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Yy.makeFromUrl(e,t)}catch(rA){return new Yy(e,"")}if(""===n.path)return n;throw r=e,new Fy(By.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const s=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(s,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(t===Oy?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new Yy(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new Fy(By.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Jy{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Zy(e){return"string"===typeof e||e instanceof String}function $y(e){return eb()&&e instanceof Blob}function eb(){return"undefined"!==typeof Blob}function tb(e,t,n,r){if(r<t)throw Ky("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ky("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function nb(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function rb(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function ib(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(jy||(jy={}));class ob{constructor(e,t,n,r,i,o,s,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=s,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new sb(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===jy.NO_ERROR,i=n.getStatus();if(!t||ib(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===jy.ABORT;return void e(!1,new sb(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new sb(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(rA){r(rA)}else if(null!==i){const e=zy();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?qy():Gy())}else{r(Hy())}};this.canceled_?t(0,new sb(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,s=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function d(){o&&clearTimeout(o)}function p(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||s)return d(),void u.call(null,e,...n);let o;r<64&&(r*=2),1===a?(a=2,o=0):o=1e3*(r+Math.random()),h(o)}let f=!1;function m(e){f||(f=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),o=setTimeout((()=>{s=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class sb{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function ab(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function lb(){const e=ab();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(eb())return new Blob(n);throw new Fy(By.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function cb(e){if("undefined"===typeof atob)throw t="base-64",new Fy(By.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const ub={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hb{constructor(e,t){this.data=e,this.contentType=t||null}}function db(e,t){switch(e){case ub.RAW:return new hb(pb(t));case ub.BASE64:case ub.BASE64URL:return new hb(fb(e,t));case ub.DATA_URL:return new hb(function(e){const t=new mb(e);return t.base64?fb(ub.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(rA){throw Xy(ub.DATA_URL,"Malformed data URL.")}return pb(t)}(t.rest)}(t),new mb(t).contentType)}throw zy()}function pb(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function fb(e,t){switch(e){case ub.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Xy(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case ub.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Xy(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=cb(t)}catch(rA){if(rA.message.includes("polyfill"))throw rA;throw Xy(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class mb{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Xy(ub.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class gb{constructor(e,t){let n=0,r="";$y(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if($y(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new gb(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new gb(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(eb()){const e=t.map((e=>e instanceof gb?e.data_:e));return new gb(lb.apply(null,e))}{const e=t.map((e=>Zy(e)?db(ub.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new gb(r,!0)}}uploadData(){return this.data_}}function vb(e){let t;try{t=JSON.parse(e)}catch(rA){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yb(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function bb(e,t){return t}class _b{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||bb}}let xb=null;function wb(){if(xb)return xb;const e=[];e.push(new _b("bucket")),e.push(new _b("generation")),e.push(new _b("metageneration")),e.push(new _b("name","fullPath",!0));const t=new _b("name");t.xform=function(e,t){return function(e){return!Zy(e)||e.length<2?e:yb(e)}(t)},e.push(t);const n=new _b("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new _b("timeCreated")),e.push(new _b("updated")),e.push(new _b("md5Hash",null,!0)),e.push(new _b("cacheControl",null,!0)),e.push(new _b("contentDisposition",null,!0)),e.push(new _b("contentEncoding",null,!0)),e.push(new _b("contentLanguage",null,!0)),e.push(new _b("contentType",null,!0)),e.push(new _b("metadata","customMetadata",!0)),xb=e,xb}function Eb(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new Yy(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Sb(e,t,n){const r=vb(t);if(null===r)return null;return Eb(e,r,n)}function Ab(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class Mb{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Tb(e){if(!e)throw zy()}function Cb(e,t){return function(n,r){const i=Sb(e,r,t);return Tb(null!==i),i}}function Rb(e,t){return function(n,r){const i=Sb(e,r,t);return Tb(null!==i),function(e,t,n,r){const i=vb(t);if(null===i)return null;if(!Zy(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const s=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return nb("/b/"+s(i)+"/o/"+s(o),n,r)+rb({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Lb(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Fy(By.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Fy(By.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new Fy(By.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Fy(By.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Ib(e){const t=Lb(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new Fy(By.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function Pb(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Nb(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();s["Content-Type"]="multipart/related; boundary="+a;const l=Pb(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ab(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=gb.getBlob(c,r,u);if(null===h)throw Wy();const d={name:l.fullPath},p=nb(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new Mb(p,"POST",Cb(e,n),f);return m.urlParams=d,m.headers=s,m.body=h.uploadData(),m.errorHandler=Lb(t),m}let kb=null;class Db{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=jy.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=jy.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=jy.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Qy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Qy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Qy("cannot .getStatus() before sending");try{return this.xhr_.status}catch(rA){return-1}}getResponse(){if(!this.sent_)throw Qy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Qy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Ob extends Db{initXhr(){this.xhr_.responseType="text"}}function Ub(){return kb?kb():new Ob}class Fb{constructor(e,t){this._service=e,this._location=t instanceof Yy?t:Yy.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Fb(e,t)}get root(){const e=new Yy(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return yb(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Yy(this._location.bucket,e);return new Fb(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Fy(By.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Bb(e,t,n){e._throwIfRoot("uploadBytes");const r=Nb(e.storage,e._location,wb(),new gb(t,!0),n);return e.storage.makeRequestWithTokens(r,Ub).then((t=>({metadata:t,ref:e})))}function jb(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=nb(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new Mb(r,"GET",Rb(e,n),i);return o.errorHandler=Ib(t),o}(e.storage,e._location,wb());return e.storage.makeRequestWithTokens(t,Ub).then((e=>{if(null===e)throw new Fy(By.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Vb(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Yy(e._location.bucket,n);return new Fb(e.storage,r)}function zb(e,t){if(e instanceof Wb){const n=e;if(null==n._bucket)throw new Fy(By.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Uy+"' property when initializing the app?");const r=new Fb(n,n._bucket);return null!=t?zb(r,t):r}return void 0!==t?Vb(e,t):e}function Hb(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Wb)return new Fb(e,t);throw Ky("To use ref(service, url), the first argument must be a Storage instance.")}return zb(e,t)}function Gb(e,t){const n=null===t||void 0===t?void 0:t[Uy];return null==n?null:Yy.makeFromBucketSpec(n,e)}class Wb{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Oy,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Yy.makeFromBucketSpec(r,this._host):Gb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Yy.makeFromBucketSpec(this._url,e):this._bucket=Gb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){tb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){tb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Fb(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Jy(qy());{const o=function(e,t,n,r,i,o){let s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=rb(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new ob(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,s)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Kb="@firebase/storage",qb="0.12.3",Xb="storage";function Qb(e,t,n){return Bb(e=at(e),t,n)}function Yb(e){return jb(e=at(e))}function Jb(e,t){return Hb(e=at(e),t)}function Zb(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new Wb(r,i,o,n,Jt)}Kt(new lt(Xb,Zb,"PUBLIC").setMultipleInstances(!0)),en(Kb,qb,""),en(Kb,qb,"esm2017");const $b=Zt({apiKey:"AIzaSyAL-MdgOol7KOcEXtyaZ4mvkaLRSvqRsRk",authDomain:"printlink3d.firebaseapp.com",projectId:"printlink3d",storageBucket:"printlink3d.appspot.com",messagingSenderId:"939443006579",appId:"1:939443006579:web:c20e016a8141c533f68e06",measurementId:"G-1KM4ZV982H"}),e_=function(e,t){const n="string"==typeof e?e:t||"(default)",r=qt("object"==typeof e?e:$t(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=He("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const o=(e=Wp(e,qp))._getSettings(),s="".concat(t,":").concat(n);if("firestore.googleapis.com"!==o.host&&o.host!==s&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Ds.MOCK_USER;else{t=qe(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new qs(Ks.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Ds(o)}e._authCredentials=new Js(new Qs(t,n))}}(r,...e)}return r}($b),t_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t(),t=arguments.length>1?arguments[1]:void 0;e=at(e);const n=qt(e,Xb).getImmediate({identifier:t}),r=He("storage");return r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:qe(i,e.app.options.projectId))}(e,t,n,r)}(n,...r),n}($b),n_=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t();const t=qt(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=qt(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(et(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Mm(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Ry,persistence:[Fv,xv,Ev]}),r=We("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ny)return;const r=null===t||void 0===t?void 0:t.token;ky!==r&&(ky=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){at(e).beforeAuthStateChanged(t,n)}(n,t,(()=>t(n.currentUser))),function(e,t,n,r){at(e).onIdTokenChanged(t,n,r)}(n,(e=>t(e)))}}var i;const o=ze("auth");return o&&Hg(n,"http://".concat(o)),n}($b);async function r_(e){const t=Jp(e,"Materials");return(await rm(t)).docs.map((e=>e.data()))}function i_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=Jp(e_,"Jobs/".concat(e,"/BidHistory"));let i=null;i=Bf(r,Vf("Active","==",!0),null===n?Gf("Timestamp","desc"):Vf("PrinterUid","==",n));return sm(i,(e=>{t(e)}))}function o_(e,t){return im(Zp(e_,"Jobs/".concat(e)),t)}async function s_(e){return new Promise(((t,n)=>{Yb(Jb(t_,"images/".concat(e,".png"))).then((e=>{const n=new XMLHttpRequest;n.responseType="blob",n.onload=()=>{const e=n.response,r=new FileReader;r.readAsDataURL(e),r.onloadend=function(){t(r.result)}},n.open("GET",e),n.send()})).catch((e=>{console.error("Error fetching thumbnail: ",e),n(e)}))}))}function a_(e){let{value:t,onChange:n}=e;return(0,Ne.jsx)("div",{children:(0,Ne.jsx)("textarea",{class:"px-2 py-1 bg-gray-50 border border-gray-300 text-gray-900 rounded-md focus:ring-blue-500 focus:border-blue-500 block",value:t,onChange:n,rows:"4",cols:"50"})})}const l_=100;var c_=function(){return c_=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c_.apply(this,arguments)};function u_(){return u_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u_.apply(this,arguments)}function h_(e){return h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h_(e)}function d_(e){var t=function(e,t){if("object"!==h_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h_(t)?t:String(t)}function p_(e,t,n){return(t=d_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f_(Object(n),!0).forEach((function(t){p_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d_(r.key),r)}}function v_(e,t){return v_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v_(e,t)}function y_(e){return y_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y_(e)}function b_(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y_(e);if(t){var i=y_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===h_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function __(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x_(e,t){if(e){if("string"==typeof e)return __(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?__(e,t):void 0}}function w_(e){return function(e){if(Array.isArray(e))return __(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E_=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(t){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),S_="-ms-",A_="-moz-",M_="-webkit-",T_="decl",C_="@keyframes",R_=Math.abs,L_=String.fromCharCode,I_=Object.assign;function P_(e){return e.trim()}function N_(e,t,n){return e.replace(t,n)}function k_(e,t){return e.indexOf(t)}function D_(e,t){return 0|e.charCodeAt(t)}function O_(e,t,n){return e.slice(t,n)}function U_(e){return e.length}function F_(e){return e.length}function B_(e,t){return t.push(e),e}var j_=1,V_=1,z_=0,H_=0,G_=0,W_="";function K_(e,t,n,r,i,o,s){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:j_,column:V_,length:s,return:""}}function q_(e,t){return I_(K_("",null,null,"",null,null,0),e,{length:-e.length},t)}function X_(){return G_=H_<z_?D_(W_,H_++):0,V_++,10===G_&&(V_=1,j_++),G_}function Q_(){return D_(W_,H_)}function Y_(){return H_}function J_(e,t){return O_(W_,e,t)}function Z_(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function $_(e){return j_=V_=1,z_=U_(W_=e),H_=0,[]}function ex(e){return W_="",e}function tx(e){return P_(J_(H_-1,ix(91===e?e+2:40===e?e+1:e)))}function nx(e){for(;(G_=Q_())&&G_<33;)X_();return Z_(e)>2||Z_(G_)>3?"":" "}function rx(e,t){for(;--t&&X_()&&!(G_<48||G_>102||G_>57&&G_<65||G_>70&&G_<97););return J_(e,Y_()+(t<6&&32==Q_()&&32==X_()))}function ix(e){for(;X_();)switch(G_){case e:return H_;case 34:case 39:34!==e&&39!==e&&ix(G_);break;case 40:41===e&&ix(e);break;case 92:X_()}return H_}function ox(e,t){for(;X_()&&e+G_!==57&&(e+G_!==84||47!==Q_()););return"/*"+J_(t,H_-1)+"*"+L_(47===e?e:X_())}function sx(e){for(;!Z_(Q_());)X_();return J_(e,H_)}function ax(e){return ex(lx("",null,null,null,[""],e=$_(e),0,[0],e))}function lx(e,t,n,r,i,o,s,a,l){for(var c=0,u=0,h=s,d=0,p=0,f=0,m=1,g=1,v=1,y=0,b="",_=i,x=o,w=r,E=b;g;)switch(f=y,y=X_()){case 40:if(108!=f&&58==D_(E,h-1)){-1!=k_(E+=N_(tx(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:E+=tx(y);break;case 9:case 10:case 13:case 32:E+=nx(f);break;case 92:E+=rx(Y_()-1,7);continue;case 47:switch(Q_()){case 42:case 47:B_(ux(ox(X_(),Y_()),t,n),l);break;default:E+="/"}break;case 123*m:a[c++]=U_(E)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:p>0&&U_(E)-h&&B_(p>32?hx(E+";",r,n,h-1):hx(N_(E," ","")+";",r,n,h-2),l);break;case 59:E+=";";default:if(B_(w=cx(E,t,n,c,u,i,a,b,_=[],x=[],h),o),123===y)if(0===u)lx(E,t,w,w,_,o,h,a,x);else switch(99===d&&110===D_(E,3)?100:d){case 100:case 109:case 115:lx(e,w,w,r&&B_(cx(e,w,w,0,0,i,a,b,i,_=[],h),x),i,x,h,a,r?_:x);break;default:lx(E,w,w,w,[""],x,0,a,x)}}c=u=p=0,m=v=1,b=E="",h=s;break;case 58:h=1+U_(E),p=f;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==(G_=H_>0?D_(W_,--H_):0,V_--,10===G_&&(V_=1,j_--),G_))continue;switch(E+=L_(y),y*m){case 38:v=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(U_(E)-1)*v,v=1;break;case 64:45===Q_()&&(E+=tx(X_())),d=Q_(),u=h=U_(b=E+=sx(Y_())),y++;break;case 45:45===f&&2==U_(E)&&(m=0)}}return o}function cx(e,t,n,r,i,o,s,a,l,c,u){for(var h=i-1,d=0===i?o:[""],p=F_(d),f=0,m=0,g=0;f<r;++f)for(var v=0,y=O_(e,h+1,h=R_(m=s[f])),b=e;v<p;++v)(b=P_(m>0?d[v]+" "+y:N_(y,/&\f/g,d[v])))&&(l[g++]=b);return K_(e,t,n,0===i?"rule":a,l,c,u)}function ux(e,t,n){return K_(e,t,n,"comm",L_(G_),O_(e,2,-2),0)}function hx(e,t,n,r){return K_(e,t,n,T_,O_(e,0,r),O_(e,r+1,-1),r)}function dx(e,t){for(var n="",r=F_(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function px(e,t,n,r){switch(e.type){case"@import":case T_:return e.return=e.return||e.value;case"comm":return"";case C_:return e.return=e.value+"{"+dx(e.children,r)+"}";case"rule":e.value=e.props.join(",")}return U_(n=dx(e.children,r))?e.return=e.value+"{"+n+"}":""}function fx(e){var t=F_(e);return function(n,r,i,o){for(var s="",a=0;a<t;a++)s+=e[a](n,r,i,o)||"";return s}}function mx(e){return function(t){t.root||(t=t.return)&&e(t)}}function gx(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var vx=function(e,t,n){for(var r=0,i=0;r=i,i=Q_(),38===r&&12===i&&(t[n]=1),!Z_(i);)X_();return J_(e,H_)},yx=new WeakMap,bx=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||yx.get(n))&&!r){yx.set(e,!0);for(var i=[],o=function(e,t){return ex(function(e,t){var n=-1,r=44;do{switch(Z_(r)){case 0:38===r&&12===Q_()&&(t[n]=1),e[n]+=vx(H_-1,t,n);break;case 2:e[n]+=tx(r);break;case 4:if(44===r){e[++n]=58===Q_()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=L_(r)}}while(r=X_());return e}($_(e),t))}(t,i),s=n.props,a=0,l=0;a<o.length;a++)for(var c=0;c<s.length;c++,l++)e.props[l]=i[a]?o[a].replace(/&\f/g,s[c]):s[c]+" "+o[a]}}},_x=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function xx(e,t){switch(function(e,t){return 45^D_(e,0)?(((t<<2^D_(e,0))<<2^D_(e,1))<<2^D_(e,2))<<2^D_(e,3):0}(e,t)){case 5103:return M_+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return M_+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return M_+e+A_+e+S_+e+e;case 6828:case 4268:return M_+e+S_+e+e;case 6165:return M_+e+S_+"flex-"+e+e;case 5187:return M_+e+N_(e,/(\w+).+(:[^]+)/,M_+"box-$1$2-ms-flex-$1$2")+e;case 5443:return M_+e+S_+"flex-item-"+N_(e,/flex-|-self/,"")+e;case 4675:return M_+e+S_+"flex-line-pack"+N_(e,/align-content|flex-|-self/,"")+e;case 5548:return M_+e+S_+N_(e,"shrink","negative")+e;case 5292:return M_+e+S_+N_(e,"basis","preferred-size")+e;case 6060:return M_+"box-"+N_(e,"-grow","")+M_+e+S_+N_(e,"grow","positive")+e;case 4554:return M_+N_(e,/([^-])(transform)/g,"$1"+M_+"$2")+e;case 6187:return N_(N_(N_(e,/(zoom-|grab)/,M_+"$1"),/(image-set)/,M_+"$1"),e,"")+e;case 5495:case 3959:return N_(e,/(image-set\([^]*)/,M_+"$1$`$1");case 4968:return N_(N_(e,/(.+:)(flex-)?(.*)/,M_+"box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+M_+e+e;case 4095:case 3583:case 4068:case 2532:return N_(e,/(.+)-inline(.+)/,M_+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(U_(e)-1-t>6)switch(D_(e,t+1)){case 109:if(45!==D_(e,t+4))break;case 102:return N_(e,/(.+:)(.+)-([^]+)/,"$1"+M_+"$2-$3$1"+A_+(108==D_(e,t+3)?"$3":"$2-$3"))+e;case 115:return~k_(e,"stretch")?xx(N_(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==D_(e,t+1))break;case 6444:switch(D_(e,U_(e)-3-(~k_(e,"!important")&&10))){case 107:return N_(e,":",":"+M_)+e;case 101:return N_(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+M_+(45===D_(e,14)?"inline-":"")+"box$3$1"+M_+"$2$3$1-ms-$2box$3")+e}break;case 5936:switch(D_(e,t+11)){case 114:return M_+e+S_+N_(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return M_+e+S_+N_(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return M_+e+S_+N_(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return M_+e+S_+e+e}return e}var wx,Ex,Sx="undefined"!=typeof document,Ax=Sx?void 0:(wx=function(){return gx((function(){var e={};return function(t){return e[t]}}))},Ex=new WeakMap,function(e){if(Ex.has(e))return Ex.get(e);var t=wx();return Ex.set(e,t),t}),Mx=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case T_:e.return=xx(e.value,e.length);break;case C_:return dx([q_(e,{value:N_(e.value,"@","@"+M_)})],r);case"rule":if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=/(::plac\w+|:read-\w+)/.exec(e))?e[0]:e}(t)){case":read-only":case":read-write":return dx([q_(e,{props:[N_(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return dx([q_(e,{props:[N_(t,/:(plac\w+)/,":"+M_+"input-$1")]}),q_(e,{props:[N_(t,/:(plac\w+)/,":-moz-$1")]}),q_(e,{props:[N_(t,/:(plac\w+)/,"-ms-input-$1")]})],r)}return""}))}}],Tx=function(e){var t=e.key;if(Sx&&"css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||Mx;var i,o,s={},a=[];Sx&&(i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)s[t[n]]=!0;a.push(e)})));var l=[bx,_x];if(Sx){var c,u=[px,mx((function(e){c.insert(e)}))],h=fx(l.concat(r,u));o=function(e,t,n,r){c=n,dx(ax(e?e+"{"+t.styles+"}":t.styles),h),r&&(m.inserted[t.name]=!0)}}else{var d=[px],p=fx(l.concat(r,d)),f=Ax(r)(t);o=function(e,t,n,r){var i=t.name,o=function(e,t){var n=t.name;return void 0===f[n]&&(f[n]=dx(ax(e?e+"{"+t.styles+"}":t.styles),p)),f[n]}(e,t);return void 0===m.compat?(r&&(m.inserted[i]=!0),o):r?void(m.inserted[i]=o):o}}var m={key:t,sheet:new E_({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return m.sheet.hydrate(a),m};function Cx(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var Rx="function"==typeof Symbol&&Symbol.for,Lx=Rx?Symbol.for("react.element"):60103,Ix=Rx?Symbol.for("react.portal"):60106,Px=Rx?Symbol.for("react.fragment"):60107,Nx=Rx?Symbol.for("react.strict_mode"):60108,kx=Rx?Symbol.for("react.profiler"):60114,Dx=Rx?Symbol.for("react.provider"):60109,Ox=Rx?Symbol.for("react.context"):60110,Ux=Rx?Symbol.for("react.async_mode"):60111,Fx=Rx?Symbol.for("react.concurrent_mode"):60111,Bx=Rx?Symbol.for("react.forward_ref"):60112,jx=Rx?Symbol.for("react.suspense"):60113,Vx=Rx?Symbol.for("react.suspense_list"):60120,zx=Rx?Symbol.for("react.memo"):60115,Hx=Rx?Symbol.for("react.lazy"):60116,Gx=Rx?Symbol.for("react.block"):60121,Wx=Rx?Symbol.for("react.fundamental"):60117,Kx=Rx?Symbol.for("react.responder"):60118,qx=Rx?Symbol.for("react.scope"):60119;function Xx(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Lx:switch(e=e.type){case Ux:case Fx:case Px:case kx:case Nx:case jx:return e;default:switch(e=e&&e.$$typeof){case Ox:case Bx:case Hx:case zx:case Dx:return e;default:return t}}case Ix:return t}}}function Qx(e){return Xx(e)===Fx}var Yx={AsyncMode:Ux,ConcurrentMode:Fx,ContextConsumer:Ox,ContextProvider:Dx,Element:Lx,ForwardRef:Bx,Fragment:Px,Lazy:Hx,Memo:zx,Portal:Ix,Profiler:kx,StrictMode:Nx,Suspense:jx,isAsyncMode:function(e){return Qx(e)||Xx(e)===Ux},isConcurrentMode:Qx,isContextConsumer:function(e){return Xx(e)===Ox},isContextProvider:function(e){return Xx(e)===Dx},isElement:function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Lx},isForwardRef:function(e){return Xx(e)===Bx},isFragment:function(e){return Xx(e)===Px},isLazy:function(e){return Xx(e)===Hx},isMemo:function(e){return Xx(e)===zx},isPortal:function(e){return Xx(e)===Ix},isProfiler:function(e){return Xx(e)===kx},isStrictMode:function(e){return Xx(e)===Nx},isSuspense:function(e){return Xx(e)===jx},isValidElementType:function(e){return"string"==typeof e||"function"==typeof e||e===Px||e===Fx||e===kx||e===Nx||e===jx||e===Vx||"object"==typeof e&&null!==e&&(e.$$typeof===Hx||e.$$typeof===zx||e.$$typeof===Dx||e.$$typeof===Ox||e.$$typeof===Bx||e.$$typeof===Wx||e.$$typeof===Kx||e.$$typeof===qx||e.$$typeof===Gx)},typeOf:Xx},Jx=(Cx((function(e,t){})),Cx((function(e){e.exports=Yx}))),Zx={};Zx[Jx.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Zx[Jx.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var $x="undefined"!=typeof document;function ew(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}var tw=function(e,t,n){var r=e.key+"-"+t.name;(!1===n||!1===$x&&void 0!==e.compat)&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},nw=function(e,t,n){tw(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i="",o=t;do{var s=e.insert(t===o?"."+r:"",o,e.sheet,!0);$x||void 0===s||(i+=s),o=o.next}while(void 0!==o);if(!$x&&0!==i.length)return i}},rw={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},iw=/[A-Z]|^ms/g,ow=/_EMO_([^_]+?)_([^]*?)_EMO_/g,sw=function(e){return 45===e.charCodeAt(1)},aw=function(e){return null!=e&&"boolean"!=typeof e},lw=gx((function(e){return sw(e)?e:e.replace(iw,"-$&").toLowerCase()})),cw=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(ow,(function(e,t,n){return hw={name:t,styles:n,next:hw},t}))}return 1===rw[e]||sw(e)||"number"!=typeof t||0===t?t:t+"px"};function uw(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return hw={name:n.name,styles:n.styles,next:hw},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)hw={name:r.name,styles:r.styles,next:hw},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=uw(e,t,n[i])+";";else for(var o in n){var s=n[o];if("object"!=typeof s)null!=t&&void 0!==t[s]?r+=o+"{"+t[s]+"}":aw(s)&&(r+=lw(o)+":"+cw(o,s)+";");else if(!Array.isArray(s)||"string"!=typeof s[0]||null!=t&&void 0!==t[s[0]]){var a=uw(e,t,s);switch(o){case"animation":case"animationName":r+=lw(o)+":"+a+";";break;default:r+=o+"{"+a+"}"}}else for(var l=0;l<s.length;l++)aw(s[l])&&(r+=lw(o)+":"+cw(o,s[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=hw,o=n(e);return hw=i,uw(e,t,o)}}if(null==t)return n;var s=t[n];return void 0!==s?s:n}var hw,dw=/label:\s*([^\s;\n{]+)\s*(;|$)/g,pw=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";hw=void 0;var o=e[0];null==o||void 0===o.raw?(r=!1,i+=uw(n,t,o)):i+=o[0];for(var s=1;s<e.length;s++)i+=uw(n,t,e[s]),r&&(i+=o[s]);dw.lastIndex=0;for(var a,l="";null!==(a=dw.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:hw}},fw="undefined"!=typeof document,mw=!!t.useInsertionEffect&&t.useInsertionEffect,gw=fw&&mw||function(e){return e()},vw=mw||t.useLayoutEffect,yw="undefined"!=typeof document,bw={}.hasOwnProperty,_w=(0,t.createContext)("undefined"!=typeof HTMLElement?Tx({key:"css"}):null);_w.Provider;var xw=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(_w);return e(n,i,r)}))};yw||(xw=function(e){return function(n){var r=(0,t.useContext)(_w);return null===r?(r=Tx({key:"css"}),(0,t.createElement)(_w.Provider,{value:r},e(n,r))):e(n,r)}});var ww=(0,t.createContext)({}),Ew=(new Set(["renderWithHooks","processChild","finishClassComponent","renderToString"]),"__EMOTION_TYPE_PLEASE_DO_NOT_USE__"),Sw=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;tw(n,r,i);var o=gw((function(){return nw(n,r,i)}));if(!yw&&void 0!==o){for(var s,a=r.name,l=r.next;void 0!==l;)a+=" "+l.name,l=l.next;return(0,t.createElement)("style",((s={})["data-emotion"]=n.key+" "+a,s.dangerouslySetInnerHTML={__html:o},s.nonce=n.sheet.nonce,s))}return null},Aw=xw((function(e,n,r){var i=e.css;"string"==typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var o=e[Ew],s=[i],a="";"string"==typeof e.className?a=ew(n.registered,s,e.className):null!=e.className&&(a=e.className+" ");var l=pw(s,void 0,(0,t.useContext)(ww));a+=n.key+"-"+l.name;var c={};for(var u in e)!bw.call(e,u)||"css"===u||u===Ew||(c[u]=e[u]);return c.ref=r,c.className=a,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Sw,{cache:n,serialized:l,isStringTag:"string"==typeof o}),(0,t.createElement)(o,c))}));Cx((function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));var Mw=function(e,n){var r=arguments;if(null==n||!bw.call(n,"css"))return t.createElement.apply(void 0,r);var i=r.length,o=new Array(i);o[0]=Aw,o[1]=function(e,t){var n={};for(var r in t)bw.call(t,r)&&(n[r]=t[r]);return n[Ew]=e,n}(e,n);for(var s=2;s<i;s++)o[s]=r[s];return t.createElement.apply(null,o)};xw((function(e,n){var r=e.styles,i=pw([r],void 0,(0,t.useContext)(ww));if(!yw){for(var o,s=i.name,a=i.styles,l=i.next;void 0!==l;)s+=" "+l.name,a+=l.styles,l=l.next;var c=!0===n.compat,u=n.insert("",{name:s,styles:a},n.sheet,c);return c?null:(0,t.createElement)("style",((o={})["data-emotion"]=n.key+"-global "+s,o.dangerouslySetInnerHTML={__html:u},o.nonce=n.sheet.nonce,o))}var h=(0,t.useRef)();return vw((function(){var e=n.key+"-global",t=new n.sheet.constructor({key:e,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),r=!1,o=document.querySelector('style[data-emotion="'+e+" "+i.name+'"]');return n.sheet.tags.length&&(t.before=n.sheet.tags[0]),null!==o&&(r=!0,o.setAttribute("data-emotion",e),t.hydrate([o])),h.current=[t,r],function(){t.flush()}}),[n]),vw((function(){var e=h.current,t=e[0];if(e[1])e[1]=!1;else{if(void 0!==i.next&&nw(n,i.next,!0),t.tags.length){var r=t.tags[t.tags.length-1].nextElementSibling;t.before=r,t.flush()}n.insert("",i,t,!1)}}),[n,i.name]),null}));function Tw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pw(t)}var Cw=function e(t){for(var n=t.length,r=0,i="";r<n;r++){var o=t[r];if(null!=o){var s=void 0;switch(typeof o){case"boolean":break;case"object":if(Array.isArray(o))s=e(o);else for(var a in s="",o)o[a]&&a&&(s&&(s+=" "),s+=a);break;default:s=o}s&&(i&&(i+=" "),i+=s)}}return i};var Rw=function(e){var n,r=e.cache,i=e.serializedArr,o=gw((function(){for(var e="",t=0;t<i.length;t++){var n=nw(r,i[t],!1);yw||void 0===n||(e+=n)}if(!yw)return e}));return yw||0===o.length?null:(0,t.createElement)("style",((n={})["data-emotion"]=r.key+" "+i.map((function(e){return e.name})).join(" "),n.dangerouslySetInnerHTML={__html:o},n.nonce=r.sheet.nonce,n))};xw((function(e,n){var r=[],i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var o=pw(t,n.registered);return r.push(o),tw(n,o,!1),n.key+"-"+o.name},o={css:i,cx:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,t,n){var r=[],i=ew(e,r,n);return r.length<2?n:i+t(r)}(n.registered,i,Cw(t))},theme:(0,t.useContext)(ww)},s=e.children(o);return!0,(0,t.createElement)(t.Fragment,null,(0,t.createElement)(Rw,{cache:n,serializedArr:r}),s)}));function Lw(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||x_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iw(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Pw(e){var t;return(null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function Nw(e){return Pw(e).getComputedStyle(e)}const kw=Math.round;function Dw(e){return Bw(e)?(e.nodeName||"").toLowerCase():""}let Ow;function Uw(e){return e instanceof Pw(e).HTMLElement}function Fw(e){return e instanceof Pw(e).Element}function Bw(e){return e instanceof Pw(e).Node}function jw(e){return"undefined"!=typeof ShadowRoot&&(e instanceof Pw(e).ShadowRoot||e instanceof ShadowRoot)}function Vw(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Nw(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function zw(e){return Fw(e)?e:e.contextElement}const Hw={x:1,y:1};function Gw(e){const t=zw(e);if(!Uw(t))return Hw;const n=t.getBoundingClientRect(),{width:r,height:i,fallback:o}=function(e){const t=Nw(e);let n=parseFloat(t.width),r=parseFloat(t.height);const i=e.offsetWidth,o=e.offsetHeight,s=kw(n)!==i||kw(r)!==o;return s&&(n=i,r=o),{width:n,height:r,fallback:s}}(t);let s=(o?kw(n.width):n.width)/r,a=(o?kw(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function Ww(e,t,n,r){var i,o;void 0===t&&(t=!1),void 0===n&&(n=!1);const s=e.getBoundingClientRect(),a=zw(e);let l=Hw;t&&(r?Fw(r)&&(l=Gw(r)):l=Gw(e));const c=a?Pw(a):window,u=/^((?!chrome|android).)*safari/i.test(function(){if(Ow)return Ow;const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?(Ow=e.brands.map((e=>e.brand+"/"+e.version)).join(" "),Ow):navigator.userAgent}())&&n;let h=(s.left+(u&&(null==(i=c.visualViewport)?void 0:i.offsetLeft)||0))/l.x,d=(s.top+(u&&(null==(o=c.visualViewport)?void 0:o.offsetTop)||0))/l.y,p=s.width/l.x,f=s.height/l.y;if(a){const e=Pw(a),t=r&&Fw(r)?Pw(r):r;let n=e.frameElement;for(;n&&r&&t!==e;){const e=Gw(n),t=n.getBoundingClientRect(),r=getComputedStyle(n);t.x+=(n.clientLeft+parseFloat(r.paddingLeft))*e.x,t.y+=(n.clientTop+parseFloat(r.paddingTop))*e.y,h*=e.x,d*=e.y,p*=e.x,f*=e.y,h+=t.x,d+=t.y,n=Pw(n).frameElement}}return{width:p,height:f,top:d,right:h+p,bottom:d+f,left:h,x:h,y:d}}function Kw(e){const t=function(e){if("html"===Dw(e))return e;const t=e.assignedSlot||e.parentNode||jw(e)&&e.host||function(e){return((Bw(e)?e.ownerDocument:e.document)||window.document).documentElement}(e);return jw(t)?t.host:t}(e);return function(e){return["html","body","#document"].includes(Dw(e))}(t)?t.ownerDocument.body:Uw(t)&&Vw(t)?t:Kw(t)}function qw(e,t){var n;void 0===t&&(t=[]);const r=Kw(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),o=Pw(r);return i?t.concat(o,o.visualViewport||[],Vw(r)?r:[]):t.concat(r,qw(r))}var Xw="undefined"!=typeof document?t.useLayoutEffect:t.useEffect,Qw=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Yw=function(){};function Jw(e,t){return t?"-"===t[0]?e+t:e+"__"+t:e}function Zw(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=[].concat(r);if(t&&e)for(var s in t)t.hasOwnProperty(s)&&t[s]&&o.push("".concat(Jw(e,s)));return o.filter((function(e){return e})).map((function(e){return String(e).trim()})).join(" ")}var $w=function(e){return t=e,Array.isArray(t)?e.filter(Boolean):"object"===h_(e)&&null!==e?[e]:[];var t},eE=function(e){return e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme,m_({},Iw(e,Qw))},tE=function(e,t,n){var r=e.cx,i=e.getStyles,o=e.getClassNames,s=e.className;return{css:i(t,e),className:r(null!=n?n:{},o(t,e),s)}};function nE(e){return[document.documentElement,document.body,window].indexOf(e)>-1}function rE(e){return nE(e)?window.pageYOffset:e.scrollTop}function iE(e,t){nE(e)?window.scrollTo(0,t):e.scrollTop=t}function oE(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Yw,i=rE(e),o=t-i,s=0;!function t(){var a=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(s+=10,i,o,n);iE(e,a),s<n?window.requestAnimationFrame(t):r(e)}()}function sE(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=t.offsetHeight/3;r.bottom+i>n.bottom?iE(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+i,e.scrollHeight)):r.top-i<n.top&&iE(e,Math.max(t.offsetTop-i,0))}function aE(){try{return document.createEvent("TouchEvent"),!0}catch(rA){return!1}}var lE=!1,cE={get passive(){return lE=!0}},uE="undefined"!=typeof window?window:{};uE.addEventListener&&uE.removeEventListener&&(uE.addEventListener("p",Yw,cE),uE.removeEventListener("p",Yw,!1));var hE=lE;function dE(e){return null!=e}function pE(e,t,n){return e?t:n}var fE=function(e){return"auto"===e?"bottom":e},mE=(0,t.createContext)(null),gE=function(e){var n=e.children,r=e.minMenuHeight,i=e.maxMenuHeight,o=e.menuPlacement,s=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,c=((0,t.useContext)(mE)||{}).setPortalPlacement,u=(0,t.useRef)(null),h=Lw((0,t.useState)(i),2),d=h[0],p=h[1],f=Lw((0,t.useState)(null),2),m=f[0],g=f[1],v=l.spacing.controlHeight;return Xw((function(){var e=u.current;if(e){var t="fixed"===s,n=function(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,i=e.placement,o=e.shouldScroll,s=e.isFixedPosition,a=e.controlHeight,l=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/;if("fixed"===t.position)return document.documentElement;for(var i=e;i=i.parentElement;)if(t=getComputedStyle(i),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return i;return document.documentElement}(n),c={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return c;var u,h=l.getBoundingClientRect().height,d=n.getBoundingClientRect(),p=d.bottom,f=d.height,m=d.top,g=n.offsetParent.getBoundingClientRect().top,v=s||nE(u=l)?window.innerHeight:u.clientHeight,y=rE(l),b=parseInt(getComputedStyle(n).marginBottom,10),_=parseInt(getComputedStyle(n).marginTop,10),x=g-_,w=v-m,E=x+y,S=h-y-m,A=p-v+y+b,M=y+m-_,T=160;switch(i){case"auto":case"bottom":if(w>=f)return{placement:"bottom",maxHeight:t};if(S>=f&&!s)return o&&oE(l,A,T),{placement:"bottom",maxHeight:t};if(!s&&S>=r||s&&w>=r)return o&&oE(l,A,T),{placement:"bottom",maxHeight:s?w-b:S-b};if("auto"===i||s){var C=t,R=s?x:E;return R>=r&&(C=Math.min(R-b-a,t)),{placement:"top",maxHeight:C}}if("bottom"===i)return o&&iE(l,A),{placement:"bottom",maxHeight:t};break;case"top":if(x>=f)return{placement:"top",maxHeight:t};if(E>=f&&!s)return o&&oE(l,M,T),{placement:"top",maxHeight:t};if(!s&&E>=r||s&&x>=r){var L=t;return(!s&&E>=r||s&&x>=r)&&(L=s?x-_:E-_),o&&oE(l,M,T),{placement:"top",maxHeight:L}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'.concat(i,'".'))}return c}({maxHeight:i,menuEl:e,minHeight:r,placement:o,shouldScroll:a&&!t,isFixedPosition:t,controlHeight:v});p(n.maxHeight),g(n.placement),null==c||c(n.placement)}}),[i,o,s,a,r,c,v]),n({ref:u,placerProps:m_(m_({},e),{},{placement:m||fE(o),maxHeight:d})})},vE=function(e,t){var n=e.theme,r=n.spacing.baseUnit,i=n.colors;return m_({textAlign:"center"},t?{}:{color:i.neutral40,padding:"".concat(2*r,"px ").concat(3*r,"px")})},yE=vE,bE=vE,_E=function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({},tE(e,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),n),t)};_E.defaultProps={children:"No options"};var xE=function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({},tE(e,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),n),t)};xE.defaultProps={children:"Loading..."};var wE,EE,SE,AE=["size"],ME={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},TE=function(e){var t=e.size,n=Iw(e,AE);return Mw("svg",u_({height:t,width:t,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:ME},n))},CE=function(e){return Mw(TE,u_({size:20},e),Mw("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},RE=function(e){return Mw(TE,u_({size:20},e),Mw("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},LE=function(e,t){var n=e.isFocused,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return m_({label:"indicatorContainer",display:"flex",transition:"color 150ms"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*i,":hover":{color:n?o.neutral80:o.neutral40}})},IE=LE,PE=LE,NE=function(){var e=Tw.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(wE||(EE=["\n  0%, 80%, 100% { opacity: 0; }\n  40% { opacity: 1; }\n"],SE||(SE=EE.slice(0)),wE=Object.freeze(Object.defineProperties(EE,{raw:{value:Object.freeze(SE)}})))),kE=function(e){var t=e.delay,n=e.offset;return Mw("span",{css:Tw({animation:"".concat(NE," 1s ease-in-out ").concat(t,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:n?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},DE=function(e){var t=e.innerProps,n=e.isRtl;return Mw("div",u_({},tE(e,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),t),Mw(kE,{delay:0,offset:n}),Mw(kE,{delay:160,offset:!0}),Mw(kE,{delay:320,offset:!n}))};DE.defaultProps={size:4};var OE=["data"],UE=["innerRef","isDisabled","isHidden","inputClassName"],FE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},BE={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":m_({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},FE)},jE=function(e){return m_({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},FE)},VE=function(e){var t=e.children,n=e.innerProps;return Mw("div",n,t)},zE={ClearIndicator:function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({},tE(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),n),t||Mw(CE,null))},Control:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.innerRef,o=e.innerProps,s=e.menuIsOpen;return Mw("div",u_({ref:i},tE(e,"control",{control:!0,"control--is-disabled":n,"control--is-focused":r,"control--menu-is-open":s}),o),t)},DropdownIndicator:function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({},tE(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),n),t||Mw(RE,null))},DownChevron:RE,CrossIcon:CE,Group:function(e){var t=e.children,n=e.cx,r=e.getStyles,i=e.getClassNames,o=e.Heading,s=e.headingProps,a=e.innerProps,l=e.label,c=e.theme,u=e.selectProps;return Mw("div",u_({},tE(e,"group",{group:!0}),a),Mw(o,u_({},s,{selectProps:u,theme:c,getStyles:r,getClassNames:i,cx:n}),l),Mw("div",null,t))},GroupHeading:function(e){var t=eE(e);t.data;var n=Iw(t,OE);return Mw("div",u_({},tE(e,"groupHeading",{"group-heading":!0}),n))},IndicatorsContainer:function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({},tE(e,"indicatorsContainer",{indicators:!0}),n),t)},IndicatorSeparator:function(e){var t=e.innerProps;return Mw("span",u_({},t,tE(e,"indicatorSeparator",{"indicator-separator":!0})))},Input:function(e){var t=e.cx,n=e.value,r=eE(e),i=r.innerRef,o=r.isDisabled,s=r.isHidden,a=r.inputClassName,l=Iw(r,UE);return Mw("div",u_({},tE(e,"input",{"input-container":!0}),{"data-value":n||""}),Mw("input",u_({className:t({input:!0},a),ref:i,style:jE(s),disabled:o},l)))},LoadingIndicator:DE,Menu:function(e){var t=e.children,n=e.innerRef,r=e.innerProps;return Mw("div",u_({},tE(e,"menu",{menu:!0}),{ref:n},r),t)},MenuList:function(e){var t=e.children,n=e.innerProps,r=e.innerRef,i=e.isMulti;return Mw("div",u_({},tE(e,"menuList",{"menu-list":!0,"menu-list--is-multi":i}),{ref:r},n),t)},MenuPortal:function(e){var n=e.appendTo,r=e.children,i=e.controlElement,s=e.innerProps,a=e.menuPlacement,l=e.menuPosition,c=(0,t.useRef)(null),u=(0,t.useRef)(null),h=Lw((0,t.useState)(fE(a)),2),d=h[0],p=h[1],f=(0,t.useMemo)((function(){return{setPortalPlacement:p}}),[]),m=Lw((0,t.useState)(null),2),g=m[0],v=m[1],y=(0,t.useCallback)((function(){if(i){var e=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(i),t="fixed"===l?0:window.pageYOffset,n=e[d]+t;n===(null==g?void 0:g.offset)&&e.left===(null==g?void 0:g.rect.left)&&e.width===(null==g?void 0:g.rect.width)||v({offset:n,rect:e})}}),[i,l,d,null==g?void 0:g.offset,null==g?void 0:g.rect.left,null==g?void 0:g.rect.width]);Xw((function(){y()}),[y]);var b=(0,t.useCallback)((function(){"function"==typeof u.current&&(u.current(),u.current=null),i&&c.current&&(u.current=function(e,t,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=!0,animationFrame:a=!1}=r,l=i&&!a,c=l||o?[...Fw(e)?qw(e):e.contextElement?qw(e.contextElement):[],...qw(t)]:[];c.forEach((e=>{l&&e.addEventListener("scroll",n,{passive:!0}),o&&e.addEventListener("resize",n)}));let u,h=null;if(s){let r=!0;h=new ResizeObserver((()=>{r||n(),r=!1})),Fw(e)&&!a&&h.observe(e),Fw(e)||!e.contextElement||a||h.observe(e.contextElement),h.observe(t)}let d=a?Ww(e):null;return a&&function t(){const r=Ww(e);!d||r.x===d.x&&r.y===d.y&&r.width===d.width&&r.height===d.height||n(),d=r,u=requestAnimationFrame(t)}(),n(),()=>{var e;c.forEach((e=>{l&&e.removeEventListener("scroll",n),o&&e.removeEventListener("resize",n)})),null==(e=h)||e.disconnect(),h=null,a&&cancelAnimationFrame(u)}}(i,c.current,y,{elementResize:"ResizeObserver"in window}))}),[i,y]);Xw((function(){b()}),[b]);var _=(0,t.useCallback)((function(e){c.current=e,b()}),[b]);if(!n&&"fixed"!==l||!g)return null;var x=Mw("div",u_({ref:_},tE(m_(m_({},e),{},{offset:g.offset,position:l,rect:g.rect}),"menuPortal",{"menu-portal":!0}),s),r);return Mw(mE.Provider,{value:f},n?(0,o.createPortal)(x,n):x)},LoadingMessage:xE,NoOptionsMessage:_E,MultiValue:function(e){var t=e.children,n=e.components,r=e.data,i=e.innerProps,o=e.isDisabled,s=e.removeProps,a=e.selectProps,l=n.Container,c=n.Label,u=n.Remove;return Mw(l,{data:r,innerProps:m_(m_({},tE(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),i),selectProps:a},Mw(c,{data:r,innerProps:m_({},tE(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:a},t),Mw(u,{data:r,innerProps:m_(m_({},tE(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(t||"option")},s),selectProps:a}))},MultiValueContainer:VE,MultiValueLabel:VE,MultiValueRemove:function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({role:"button"},n),t||Mw(CE,{size:14}))},Option:function(e){var t=e.children,n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.innerRef,s=e.innerProps;return Mw("div",u_({},tE(e,"option",{option:!0,"option--is-disabled":n,"option--is-focused":r,"option--is-selected":i}),{ref:o,"aria-disabled":n},s),t)},Placeholder:function(e){var t=e.children,n=e.innerProps;return Mw("div",u_({},tE(e,"placeholder",{placeholder:!0}),n),t)},SelectContainer:function(e){var t=e.children,n=e.innerProps,r=e.isDisabled,i=e.isRtl;return Mw("div",u_({},tE(e,"container",{"--is-disabled":r,"--is-rtl":i}),n),t)},SingleValue:function(e){var t=e.children,n=e.isDisabled,r=e.innerProps;return Mw("div",u_({},tE(e,"singleValue",{"single-value":!0,"single-value--is-disabled":n}),r),t)},ValueContainer:function(e){var t=e.children,n=e.innerProps,r=e.isMulti,i=e.hasValue;return Mw("div",u_({},tE(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":i}),n),t)}},HE=Number.isNaN||function(e){return"number"==typeof e&&e!=e};function GE(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!((r=e[n])===(i=t[n])||HE(r)&&HE(i)))return!1;var r,i;return!0}for(var WE={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},KE=function(e){return Mw("span",u_({css:WE},e))},qE={guidance:function(e){var t=e.isSearchable,n=e.isMulti,r=e.isDisabled,i=e.tabSelectsValue;switch(e.context){case"menu":return"Use Up and Down to choose options".concat(r?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(i?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(t?",type to refine list":"",", press Down to open the menu, ").concat(n?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var t=e.action,n=e.label,r=void 0===n?"":n,i=e.labels,o=e.isDisabled;switch(t){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(i.length>1?"s":""," ").concat(i.join(","),", selected.");case"select-option":return"option ".concat(r,o?" is disabled. Select another option.":", selected.");default:return""}},onFocus:function(e){var t=e.context,n=e.focused,r=e.options,i=e.label,o=void 0===i?"":i,s=e.selectValue,a=e.isDisabled,l=e.isSelected,c=function(e,t){return e&&e.length?"".concat(e.indexOf(t)+1," of ").concat(e.length):""};if("value"===t&&s)return"value ".concat(o," focused, ").concat(c(s,n),".");if("menu"===t){var u=a?" disabled":"",h="".concat(l?"selected":"focused").concat(u);return"option ".concat(o," ").concat(h,", ").concat(c(r,n),".")}return""},onFilter:function(e){var t=e.inputValue,n=e.resultsMessage;return"".concat(n).concat(t?" for search term "+t:"",".")}},XE=function(e){var n=e.ariaSelection,r=e.focusedOption,i=e.focusedValue,o=e.focusableOptions,s=e.isFocused,a=e.selectValue,l=e.selectProps,c=e.id,u=l.ariaLiveMessages,h=l.getOptionLabel,d=l.inputValue,p=l.isMulti,f=l.isOptionDisabled,m=l.isSearchable,g=l.menuIsOpen,v=l.options,y=l.screenReaderStatus,b=l.tabSelectsValue,_=l["aria-label"],x=l["aria-live"],w=(0,t.useMemo)((function(){return m_(m_({},qE),u||{})}),[u]),E=(0,t.useMemo)((function(){var e,t="";if(n&&w.onChange){var r=n.option,i=n.options,o=n.removedValue,s=n.removedValues,l=n.value,c=o||r||(e=l,Array.isArray(e)?null:e),u=c?h(c):"",d=i||s||void 0,p=d?d.map(h):[],m=m_({isDisabled:c&&f(c,a),label:u,labels:p},n);t=w.onChange(m)}return t}),[n,w,f,a,h]),S=(0,t.useMemo)((function(){var e="",t=r||i,n=!!(r&&a&&a.includes(r));if(t&&w.onFocus){var s={focused:t,label:h(t),isDisabled:f(t,a),isSelected:n,options:o,context:t===r?"menu":"value",selectValue:a};e=w.onFocus(s)}return e}),[r,i,h,f,w,o,a]),A=(0,t.useMemo)((function(){var e="";if(g&&v.length&&w.onFilter){var t=y({count:o.length});e=w.onFilter({inputValue:d,resultsMessage:t})}return e}),[o,d,g,w,v,y]),M=(0,t.useMemo)((function(){var e="";if(w.guidance){var t=i?"value":g?"menu":"input";e=w.guidance({"aria-label":_,context:t,isDisabled:r&&f(r,a),isMulti:p,isSearchable:m,tabSelectsValue:b})}return e}),[_,r,i,p,f,m,g,w,a,b]),T="".concat(S," ").concat(A," ").concat(M),C=Mw(t.Fragment,null,Mw("span",{id:"aria-selection"},E),Mw("span",{id:"aria-context"},T)),R="initial-input-focus"===(null==n?void 0:n.action);return Mw(t.Fragment,null,Mw(KE,{id:c},R&&C),Mw(KE,{"aria-live":x,"aria-atomic":"false","aria-relevant":"additions text"},s&&!R&&C))},QE=[{base:"A",letters:"A\u24b6\uff21\xc0\xc1\xc2\u1ea6\u1ea4\u1eaa\u1ea8\xc3\u0100\u0102\u1eb0\u1eae\u1eb4\u1eb2\u0226\u01e0\xc4\u01de\u1ea2\xc5\u01fa\u01cd\u0200\u0202\u1ea0\u1eac\u1eb6\u1e00\u0104\u023a\u2c6f"},{base:"AA",letters:"\ua732"},{base:"AE",letters:"\xc6\u01fc\u01e2"},{base:"AO",letters:"\ua734"},{base:"AU",letters:"\ua736"},{base:"AV",letters:"\ua738\ua73a"},{base:"AY",letters:"\ua73c"},{base:"B",letters:"B\u24b7\uff22\u1e02\u1e04\u1e06\u0243\u0182\u0181"},{base:"C",letters:"C\u24b8\uff23\u0106\u0108\u010a\u010c\xc7\u1e08\u0187\u023b\ua73e"},{base:"D",letters:"D\u24b9\uff24\u1e0a\u010e\u1e0c\u1e10\u1e12\u1e0e\u0110\u018b\u018a\u0189\ua779"},{base:"DZ",letters:"\u01f1\u01c4"},{base:"Dz",letters:"\u01f2\u01c5"},{base:"E",letters:"E\u24ba\uff25\xc8\xc9\xca\u1ec0\u1ebe\u1ec4\u1ec2\u1ebc\u0112\u1e14\u1e16\u0114\u0116\xcb\u1eba\u011a\u0204\u0206\u1eb8\u1ec6\u0228\u1e1c\u0118\u1e18\u1e1a\u0190\u018e"},{base:"F",letters:"F\u24bb\uff26\u1e1e\u0191\ua77b"},{base:"G",letters:"G\u24bc\uff27\u01f4\u011c\u1e20\u011e\u0120\u01e6\u0122\u01e4\u0193\ua7a0\ua77d\ua77e"},{base:"H",letters:"H\u24bd\uff28\u0124\u1e22\u1e26\u021e\u1e24\u1e28\u1e2a\u0126\u2c67\u2c75\ua78d"},{base:"I",letters:"I\u24be\uff29\xcc\xcd\xce\u0128\u012a\u012c\u0130\xcf\u1e2e\u1ec8\u01cf\u0208\u020a\u1eca\u012e\u1e2c\u0197"},{base:"J",letters:"J\u24bf\uff2a\u0134\u0248"},{base:"K",letters:"K\u24c0\uff2b\u1e30\u01e8\u1e32\u0136\u1e34\u0198\u2c69\ua740\ua742\ua744\ua7a2"},{base:"L",letters:"L\u24c1\uff2c\u013f\u0139\u013d\u1e36\u1e38\u013b\u1e3c\u1e3a\u0141\u023d\u2c62\u2c60\ua748\ua746\ua780"},{base:"LJ",letters:"\u01c7"},{base:"Lj",letters:"\u01c8"},{base:"M",letters:"M\u24c2\uff2d\u1e3e\u1e40\u1e42\u2c6e\u019c"},{base:"N",letters:"N\u24c3\uff2e\u01f8\u0143\xd1\u1e44\u0147\u1e46\u0145\u1e4a\u1e48\u0220\u019d\ua790\ua7a4"},{base:"NJ",letters:"\u01ca"},{base:"Nj",letters:"\u01cb"},{base:"O",letters:"O\u24c4\uff2f\xd2\xd3\xd4\u1ed2\u1ed0\u1ed6\u1ed4\xd5\u1e4c\u022c\u1e4e\u014c\u1e50\u1e52\u014e\u022e\u0230\xd6\u022a\u1ece\u0150\u01d1\u020c\u020e\u01a0\u1edc\u1eda\u1ee0\u1ede\u1ee2\u1ecc\u1ed8\u01ea\u01ec\xd8\u01fe\u0186\u019f\ua74a\ua74c"},{base:"OI",letters:"\u01a2"},{base:"OO",letters:"\ua74e"},{base:"OU",letters:"\u0222"},{base:"P",letters:"P\u24c5\uff30\u1e54\u1e56\u01a4\u2c63\ua750\ua752\ua754"},{base:"Q",letters:"Q\u24c6\uff31\ua756\ua758\u024a"},{base:"R",letters:"R\u24c7\uff32\u0154\u1e58\u0158\u0210\u0212\u1e5a\u1e5c\u0156\u1e5e\u024c\u2c64\ua75a\ua7a6\ua782"},{base:"S",letters:"S\u24c8\uff33\u1e9e\u015a\u1e64\u015c\u1e60\u0160\u1e66\u1e62\u1e68\u0218\u015e\u2c7e\ua7a8\ua784"},{base:"T",letters:"T\u24c9\uff34\u1e6a\u0164\u1e6c\u021a\u0162\u1e70\u1e6e\u0166\u01ac\u01ae\u023e\ua786"},{base:"TZ",letters:"\ua728"},{base:"U",letters:"U\u24ca\uff35\xd9\xda\xdb\u0168\u1e78\u016a\u1e7a\u016c\xdc\u01db\u01d7\u01d5\u01d9\u1ee6\u016e\u0170\u01d3\u0214\u0216\u01af\u1eea\u1ee8\u1eee\u1eec\u1ef0\u1ee4\u1e72\u0172\u1e76\u1e74\u0244"},{base:"V",letters:"V\u24cb\uff36\u1e7c\u1e7e\u01b2\ua75e\u0245"},{base:"VY",letters:"\ua760"},{base:"W",letters:"W\u24cc\uff37\u1e80\u1e82\u0174\u1e86\u1e84\u1e88\u2c72"},{base:"X",letters:"X\u24cd\uff38\u1e8a\u1e8c"},{base:"Y",letters:"Y\u24ce\uff39\u1ef2\xdd\u0176\u1ef8\u0232\u1e8e\u0178\u1ef6\u1ef4\u01b3\u024e\u1efe"},{base:"Z",letters:"Z\u24cf\uff3a\u0179\u1e90\u017b\u017d\u1e92\u1e94\u01b5\u0224\u2c7f\u2c6b\ua762"},{base:"a",letters:"a\u24d0\uff41\u1e9a\xe0\xe1\xe2\u1ea7\u1ea5\u1eab\u1ea9\xe3\u0101\u0103\u1eb1\u1eaf\u1eb5\u1eb3\u0227\u01e1\xe4\u01df\u1ea3\xe5\u01fb\u01ce\u0201\u0203\u1ea1\u1ead\u1eb7\u1e01\u0105\u2c65\u0250"},{base:"aa",letters:"\ua733"},{base:"ae",letters:"\xe6\u01fd\u01e3"},{base:"ao",letters:"\ua735"},{base:"au",letters:"\ua737"},{base:"av",letters:"\ua739\ua73b"},{base:"ay",letters:"\ua73d"},{base:"b",letters:"b\u24d1\uff42\u1e03\u1e05\u1e07\u0180\u0183\u0253"},{base:"c",letters:"c\u24d2\uff43\u0107\u0109\u010b\u010d\xe7\u1e09\u0188\u023c\ua73f\u2184"},{base:"d",letters:"d\u24d3\uff44\u1e0b\u010f\u1e0d\u1e11\u1e13\u1e0f\u0111\u018c\u0256\u0257\ua77a"},{base:"dz",letters:"\u01f3\u01c6"},{base:"e",letters:"e\u24d4\uff45\xe8\xe9\xea\u1ec1\u1ebf\u1ec5\u1ec3\u1ebd\u0113\u1e15\u1e17\u0115\u0117\xeb\u1ebb\u011b\u0205\u0207\u1eb9\u1ec7\u0229\u1e1d\u0119\u1e19\u1e1b\u0247\u025b\u01dd"},{base:"f",letters:"f\u24d5\uff46\u1e1f\u0192\ua77c"},{base:"g",letters:"g\u24d6\uff47\u01f5\u011d\u1e21\u011f\u0121\u01e7\u0123\u01e5\u0260\ua7a1\u1d79\ua77f"},{base:"h",letters:"h\u24d7\uff48\u0125\u1e23\u1e27\u021f\u1e25\u1e29\u1e2b\u1e96\u0127\u2c68\u2c76\u0265"},{base:"hv",letters:"\u0195"},{base:"i",letters:"i\u24d8\uff49\xec\xed\xee\u0129\u012b\u012d\xef\u1e2f\u1ec9\u01d0\u0209\u020b\u1ecb\u012f\u1e2d\u0268\u0131"},{base:"j",letters:"j\u24d9\uff4a\u0135\u01f0\u0249"},{base:"k",letters:"k\u24da\uff4b\u1e31\u01e9\u1e33\u0137\u1e35\u0199\u2c6a\ua741\ua743\ua745\ua7a3"},{base:"l",letters:"l\u24db\uff4c\u0140\u013a\u013e\u1e37\u1e39\u013c\u1e3d\u1e3b\u017f\u0142\u019a\u026b\u2c61\ua749\ua781\ua747"},{base:"lj",letters:"\u01c9"},{base:"m",letters:"m\u24dc\uff4d\u1e3f\u1e41\u1e43\u0271\u026f"},{base:"n",letters:"n\u24dd\uff4e\u01f9\u0144\xf1\u1e45\u0148\u1e47\u0146\u1e4b\u1e49\u019e\u0272\u0149\ua791\ua7a5"},{base:"nj",letters:"\u01cc"},{base:"o",letters:"o\u24de\uff4f\xf2\xf3\xf4\u1ed3\u1ed1\u1ed7\u1ed5\xf5\u1e4d\u022d\u1e4f\u014d\u1e51\u1e53\u014f\u022f\u0231\xf6\u022b\u1ecf\u0151\u01d2\u020d\u020f\u01a1\u1edd\u1edb\u1ee1\u1edf\u1ee3\u1ecd\u1ed9\u01eb\u01ed\xf8\u01ff\u0254\ua74b\ua74d\u0275"},{base:"oi",letters:"\u01a3"},{base:"ou",letters:"\u0223"},{base:"oo",letters:"\ua74f"},{base:"p",letters:"p\u24df\uff50\u1e55\u1e57\u01a5\u1d7d\ua751\ua753\ua755"},{base:"q",letters:"q\u24e0\uff51\u024b\ua757\ua759"},{base:"r",letters:"r\u24e1\uff52\u0155\u1e59\u0159\u0211\u0213\u1e5b\u1e5d\u0157\u1e5f\u024d\u027d\ua75b\ua7a7\ua783"},{base:"s",letters:"s\u24e2\uff53\xdf\u015b\u1e65\u015d\u1e61\u0161\u1e67\u1e63\u1e69\u0219\u015f\u023f\ua7a9\ua785\u1e9b"},{base:"t",letters:"t\u24e3\uff54\u1e6b\u1e97\u0165\u1e6d\u021b\u0163\u1e71\u1e6f\u0167\u01ad\u0288\u2c66\ua787"},{base:"tz",letters:"\ua729"},{base:"u",letters:"u\u24e4\uff55\xf9\xfa\xfb\u0169\u1e79\u016b\u1e7b\u016d\xfc\u01dc\u01d8\u01d6\u01da\u1ee7\u016f\u0171\u01d4\u0215\u0217\u01b0\u1eeb\u1ee9\u1eef\u1eed\u1ef1\u1ee5\u1e73\u0173\u1e77\u1e75\u0289"},{base:"v",letters:"v\u24e5\uff56\u1e7d\u1e7f\u028b\ua75f\u028c"},{base:"vy",letters:"\ua761"},{base:"w",letters:"w\u24e6\uff57\u1e81\u1e83\u0175\u1e87\u1e85\u1e98\u1e89\u2c73"},{base:"x",letters:"x\u24e7\uff58\u1e8b\u1e8d"},{base:"y",letters:"y\u24e8\uff59\u1ef3\xfd\u0177\u1ef9\u0233\u1e8f\xff\u1ef7\u1e99\u1ef5\u01b4\u024f\u1eff"},{base:"z",letters:"z\u24e9\uff5a\u017a\u1e91\u017c\u017e\u1e93\u1e95\u01b6\u0225\u0240\u2c6c\ua763"}],YE=new RegExp("["+QE.map((function(e){return e.letters})).join("")+"]","g"),JE={},ZE=0;ZE<QE.length;ZE++)for(var $E=QE[ZE],eS=0;eS<$E.letters.length;eS++)JE[$E.letters[eS]]=$E.base;var tS=function(e){return e.replace(YE,(function(e){return JE[e]}))},nS=function(e,t){void 0===t&&(t=GE);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&t(r,n.lastArgs))return n.lastResult;var o=e.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}(tS),rS=function(e){return e.replace(/^\s+|\s+$/g,"")},iS=function(e){return"".concat(e.label," ").concat(e.value)},oS=["innerRef"];function sS(e){var t=e.innerRef,n=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=Object.entries(e).filter((function(e){var t=Lw(e,1)[0];return!n.includes(t)}));return i.reduce((function(e,t){var n=Lw(t,2),r=n[0],i=n[1];return e[r]=i,e}),{})}(Iw(e,oS),"onExited","in","enter","exit","appear");return Mw("input",u_({ref:t},n,{css:Tw({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var aS=["boxSizing","height","overflow","paddingRight","position"],lS={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function cS(e){e.preventDefault()}function uS(e){e.stopPropagation()}function hS(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function dS(){return"ontouchstart"in window||navigator.maxTouchPoints}var pS=!("undefined"==typeof window||!window.document||!window.document.createElement),fS=0,mS={capture:!1,passive:!1},gS=function(){return document.activeElement&&document.activeElement.blur()},vS={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function yS(e){var n=e.children,r=e.lockEnabled,i=e.captureEnabled,o=function(e){var n=e.isEnabled,r=e.onBottomArrive,i=e.onBottomLeave,o=e.onTopArrive,s=e.onTopLeave,a=(0,t.useRef)(!1),l=(0,t.useRef)(!1),c=(0,t.useRef)(0),u=(0,t.useRef)(null),h=(0,t.useCallback)((function(e,t){if(null!==u.current){var n=u.current,c=n.scrollTop,h=n.scrollHeight,d=n.clientHeight,p=u.current,f=t>0,m=h-d-c,g=!1;m>t&&a.current&&(i&&i(e),a.current=!1),f&&l.current&&(s&&s(e),l.current=!1),f&&t>m?(r&&!a.current&&r(e),p.scrollTop=h,g=!0,a.current=!0):!f&&-t>c&&(o&&!l.current&&o(e),p.scrollTop=0,g=!0,l.current=!0),g&&function(e){e.preventDefault(),e.stopPropagation()}(e)}}),[r,i,o,s]),d=(0,t.useCallback)((function(e){h(e,e.deltaY)}),[h]),p=(0,t.useCallback)((function(e){c.current=e.changedTouches[0].clientY}),[]),f=(0,t.useCallback)((function(e){var t=c.current-e.changedTouches[0].clientY;h(e,t)}),[h]),m=(0,t.useCallback)((function(e){if(e){var t=!!hE&&{passive:!1};e.addEventListener("wheel",d,t),e.addEventListener("touchstart",p,t),e.addEventListener("touchmove",f,t)}}),[f,p,d]),g=(0,t.useCallback)((function(e){e&&(e.removeEventListener("wheel",d,!1),e.removeEventListener("touchstart",p,!1),e.removeEventListener("touchmove",f,!1))}),[f,p,d]);return(0,t.useEffect)((function(){if(n){var e=u.current;return m(e),function(){g(e)}}}),[n,m,g]),function(e){u.current=e}}({isEnabled:void 0===i||i,onBottomArrive:e.onBottomArrive,onBottomLeave:e.onBottomLeave,onTopArrive:e.onTopArrive,onTopLeave:e.onTopLeave}),s=function(e){var n=e.isEnabled,r=e.accountForScrollbars,i=void 0===r||r,o=(0,t.useRef)({}),s=(0,t.useRef)(null),a=(0,t.useCallback)((function(e){if(pS){var t=document.body,n=t&&t.style;if(i&&aS.forEach((function(e){var t=n&&n[e];o.current[e]=t})),i&&fS<1){var r=parseInt(o.current.paddingRight,10)||0,s=document.body?document.body.clientWidth:0,a=window.innerWidth-s+r||0;Object.keys(lS).forEach((function(e){var t=lS[e];n&&(n[e]=t)})),n&&(n.paddingRight="".concat(a,"px"))}t&&dS()&&(t.addEventListener("touchmove",cS,mS),e&&(e.addEventListener("touchstart",hS,mS),e.addEventListener("touchmove",uS,mS))),fS+=1}}),[i]),l=(0,t.useCallback)((function(e){if(pS){var t=document.body,n=t&&t.style;fS=Math.max(fS-1,0),i&&fS<1&&aS.forEach((function(e){var t=o.current[e];n&&(n[e]=t)})),t&&dS()&&(t.removeEventListener("touchmove",cS,mS),e&&(e.removeEventListener("touchstart",hS,mS),e.removeEventListener("touchmove",uS,mS)))}}),[i]);return(0,t.useEffect)((function(){if(n){var e=s.current;return a(e),function(){l(e)}}}),[n,a,l]),function(e){s.current=e}}({isEnabled:r});return Mw(t.Fragment,null,r&&Mw("div",{onClick:gS,css:vS}),n((function(e){o(e),s(e)})))}var bS={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},_S=function(e){var t=e.name,n=e.onFocus;return Mw("input",{required:!0,name:t,tabIndex:-1,"aria-hidden":"true",onFocus:n,css:bS,value:"",onChange:function(){}})},xS={clearIndicator:PE,container:function(e){var t=e.isDisabled;return{label:"container",direction:e.isRtl?"rtl":void 0,pointerEvents:t?"none":void 0,position:"relative"}},control:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.theme,o=i.colors,s=i.borderRadius;return m_({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:i.spacing.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},t?{}:{backgroundColor:n?o.neutral5:o.neutral0,borderColor:n?o.neutral10:r?o.primary:o.neutral20,borderRadius:s,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},dropdownIndicator:IE,group:function(e,t){var n=e.theme.spacing;return t?{}:{paddingBottom:2*n.baseUnit,paddingTop:2*n.baseUnit}},groupHeading:function(e,t){var n=e.theme,r=n.colors,i=n.spacing;return m_({label:"group",cursor:"default",display:"block"},t?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:3*i.baseUnit,paddingRight:3*i.baseUnit,textTransform:"uppercase"})},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing.baseUnit,o=r.colors;return m_({label:"indicatorSeparator",alignSelf:"stretch",width:1},t?{}:{backgroundColor:n?o.neutral10:o.neutral20,marginBottom:2*i,marginTop:2*i})},input:function(e,t){var n=e.isDisabled,r=e.value,i=e.theme,o=i.spacing,s=i.colors;return m_(m_({visibility:n?"hidden":"visible",transform:r?"translateZ(0)":""},BE),t?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:s.neutral80})},loadingIndicator:function(e,t){var n=e.isFocused,r=e.size,i=e.theme,o=i.colors,s=i.spacing.baseUnit;return m_({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},t?{}:{color:n?o.neutral60:o.neutral20,padding:2*s})},loadingMessage:bE,menu:function(e,t){var n,r=e.placement,i=e.theme,o=i.borderRadius,s=i.spacing,a=i.colors;return m_((p_(n={label:"menu"},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(r),"100%"),p_(n,"position","absolute"),p_(n,"width","100%"),p_(n,"zIndex",1),n),t?{}:{backgroundColor:a.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:s.menuGutter,marginTop:s.menuGutter})},menuList:function(e,t){var n=e.maxHeight,r=e.theme.spacing.baseUnit;return m_({maxHeight:n,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},t?{}:{paddingBottom:r,paddingTop:r})},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors;return m_({label:"multiValue",display:"flex",minWidth:0},t?{}:{backgroundColor:o.neutral10,borderRadius:i/2,margin:r.baseUnit/2})},multiValueLabel:function(e,t){var n=e.theme,r=n.borderRadius,i=n.colors,o=e.cropWithEllipsis;return m_({overflow:"hidden",textOverflow:o||void 0===o?"ellipsis":void 0,whiteSpace:"nowrap"},t?{}:{borderRadius:r/2,color:i.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},multiValueRemove:function(e,t){var n=e.theme,r=n.spacing,i=n.borderRadius,o=n.colors,s=e.isFocused;return m_({alignItems:"center",display:"flex"},t?{}:{borderRadius:i/2,backgroundColor:s?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},noOptionsMessage:yE,option:function(e,t){var n=e.isDisabled,r=e.isFocused,i=e.isSelected,o=e.theme,s=o.spacing,a=o.colors;return m_({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},t?{}:{backgroundColor:i?a.primary:r?a.primary25:"transparent",color:n?a.neutral20:i?a.neutral0:"inherit",padding:"".concat(2*s.baseUnit,"px ").concat(3*s.baseUnit,"px"),":active":{backgroundColor:n?void 0:i?a.primary:a.primary50}})},placeholder:function(e,t){var n=e.theme,r=n.spacing,i=n.colors;return m_({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},t?{}:{color:i.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},singleValue:function(e,t){var n=e.isDisabled,r=e.theme,i=r.spacing,o=r.colors;return m_({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t?{}:{color:n?o.neutral40:o.neutral80,marginLeft:i.baseUnit/2,marginRight:i.baseUnit/2})},valueContainer:function(e,t){var n=e.theme.spacing,r=e.isMulti,i=e.hasValue,o=e.selectProps.controlShouldRenderValue;return m_({alignItems:"center",display:r&&i&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},t?{}:{padding:"".concat(n.baseUnit/2,"px ").concat(2*n.baseUnit,"px")})}},wS={borderRadius:4,colors:{primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},spacing:{baseUnit:4,controlHeight:38,menuGutter:8}},ES={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:aE(),captureMenuScroll:!aE(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:function(e,t){if(e.data.__isNew__)return!0;var n=m_({ignoreCase:!0,ignoreAccents:!0,stringify:iS,trim:!0,matchFrom:"any"},undefined),r=n.ignoreCase,i=n.ignoreAccents,o=n.stringify,s=n.trim,a=n.matchFrom,l=s?rS(t):t,c=s?rS(o(e)):o(e);return r&&(l=l.toLowerCase(),c=c.toLowerCase()),i&&(l=nS(l),c=tS(c)),"start"===a?c.substr(0,l.length)===l:c.indexOf(l)>-1},formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(rA){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return"".concat(t," result").concat(1!==t?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function SS(e,t,n,r){return{type:"option",data:t,isDisabled:LS(e,t,n),isSelected:IS(e,t,n),label:CS(e,t),value:RS(e,t),index:r}}function AS(e,t){return e.options.map((function(n,r){if("options"in n){var i=n.options.map((function(n,r){return SS(e,n,t,r)})).filter((function(t){return TS(e,t)}));return i.length>0?{type:"group",data:n,options:i,index:r}:void 0}var o=SS(e,n,t,r);return TS(e,o)?o:void 0})).filter(dE)}function MS(e){return e.reduce((function(e,t){return"group"===t.type?e.push.apply(e,w_(t.options.map((function(e){return e.data})))):e.push(t.data),e}),[])}function TS(e,t){var n=e.inputValue,r=void 0===n?"":n,i=t.data,o=t.isSelected,s=t.label,a=t.value;return(!NS(e)||!o)&&PS(e,{label:s,value:a,data:i},r)}var CS=function(e,t){return e.getOptionLabel(t)},RS=function(e,t){return e.getOptionValue(t)};function LS(e,t,n){return"function"==typeof e.isOptionDisabled&&e.isOptionDisabled(t,n)}function IS(e,t,n){if(n.indexOf(t)>-1)return!0;if("function"==typeof e.isOptionSelected)return e.isOptionSelected(t,n);var r=RS(e,t);return n.some((function(t){return RS(e,t)===r}))}function PS(e,t,n){return!e.filterOption||e.filterOption(t,n)}var NS=function(e){var t=e.hideSelectedOptions,n=e.isMulti;return void 0===t?n:t},kS=1,DS=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v_(e,t)}(s,t.Component);var n,r,i,o=b_(s);function s(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=o.call(this,e)).state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},t.blockOptionHover=!1,t.isComposing=!1,t.commonProps=void 0,t.initialTouchX=0,t.initialTouchY=0,t.instancePrefix="",t.openAfterFocus=!1,t.scrollToFocusedOptionOnUpdate=!1,t.userIsDragging=void 0,t.controlRef=null,t.getControlRef=function(e){t.controlRef=e},t.focusedOptionRef=null,t.getFocusedOptionRef=function(e){t.focusedOptionRef=e},t.menuListRef=null,t.getMenuListRef=function(e){t.menuListRef=e},t.inputRef=null,t.getInputRef=function(e){t.inputRef=e},t.focus=t.focusInput,t.blur=t.blurInput,t.onChange=function(e,n){var r=t.props,i=r.onChange,o=r.name;n.name=o,t.ariaOnChange(e,n),i(e,n)},t.setValue=function(e,n,r){var i=t.props,o=i.closeMenuOnSelect,s=i.isMulti,a=i.inputValue;t.onInputChange("",{action:"set-value",prevInputValue:a}),o&&(t.setState({inputIsHiddenAfterUpdate:!s}),t.onMenuClose()),t.setState({clearFocusValueOnUpdate:!0}),t.onChange(e,{action:n,option:r})},t.selectOption=function(e){var n=t.props,r=n.blurInputOnSelect,i=n.isMulti,o=n.name,s=t.state.selectValue,a=i&&t.isOptionSelected(e,s),l=t.isOptionDisabled(e,s);if(a){var c=t.getOptionValue(e);t.setValue(s.filter((function(e){return t.getOptionValue(e)!==c})),"deselect-option",e)}else{if(l)return void t.ariaOnChange(e,{action:"select-option",option:e,name:o});i?t.setValue([].concat(w_(s),[e]),"select-option",e):t.setValue(e,"select-option")}r&&t.blurInput()},t.removeValue=function(e){var n=t.props.isMulti,r=t.state.selectValue,i=t.getOptionValue(e),o=r.filter((function(e){return t.getOptionValue(e)!==i})),s=pE(n,o,o[0]||null);t.onChange(s,{action:"remove-value",removedValue:e}),t.focusInput()},t.clearValue=function(){var e=t.state.selectValue;t.onChange(pE(t.props.isMulti,[],null),{action:"clear",removedValues:e})},t.popValue=function(){var e=t.props.isMulti,n=t.state.selectValue,r=n[n.length-1],i=n.slice(0,n.length-1),o=pE(e,i,i[0]||null);t.onChange(o,{action:"pop-value",removedValue:r})},t.getValue=function(){return t.state.selectValue},t.cx=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Zw.apply(void 0,[t.props.classNamePrefix].concat(n))},t.getOptionLabel=function(e){return CS(t.props,e)},t.getOptionValue=function(e){return RS(t.props,e)},t.getStyles=function(e,n){var r=t.props.unstyled,i=xS[e](n,r);i.boxSizing="border-box";var o=t.props.styles[e];return o?o(i,n):i},t.getClassNames=function(e,n){var r,i;return null===(r=(i=t.props.classNames)[e])||void 0===r?void 0:r.call(i,n)},t.getElementId=function(e){return"".concat(t.instancePrefix,"-").concat(e)},t.getComponents=function(){return e=t.props,m_(m_({},zE),e.components);var e},t.buildCategorizedOptions=function(){return AS(t.props,t.state.selectValue)},t.getCategorizedOptions=function(){return t.props.menuIsOpen?t.buildCategorizedOptions():[]},t.buildFocusableOptions=function(){return MS(t.buildCategorizedOptions())},t.getFocusableOptions=function(){return t.props.menuIsOpen?t.buildFocusableOptions():[]},t.ariaOnChange=function(e,n){t.setState({ariaSelection:m_({value:e},n)})},t.onMenuMouseDown=function(e){0===e.button&&(e.stopPropagation(),e.preventDefault(),t.focusInput())},t.onMenuMouseMove=function(e){t.blockOptionHover=!1},t.onControlMouseDown=function(e){if(!e.defaultPrevented){var n=t.props.openMenuOnClick;t.state.isFocused?t.props.menuIsOpen?"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&t.onMenuClose():n&&t.openMenu("first"):(n&&(t.openAfterFocus=!0),t.focusInput()),"INPUT"!==e.target.tagName&&"TEXTAREA"!==e.target.tagName&&e.preventDefault()}},t.onDropdownIndicatorMouseDown=function(e){if(!(e&&"mousedown"===e.type&&0!==e.button||t.props.isDisabled)){var n=t.props,r=n.isMulti,i=n.menuIsOpen;t.focusInput(),i?(t.setState({inputIsHiddenAfterUpdate:!r}),t.onMenuClose()):t.openMenu("first"),e.preventDefault()}},t.onClearIndicatorMouseDown=function(e){e&&"mousedown"===e.type&&0!==e.button||(t.clearValue(),e.preventDefault(),t.openAfterFocus=!1,"touchend"===e.type?t.focusInput():setTimeout((function(){return t.focusInput()})))},t.onScroll=function(e){"boolean"==typeof t.props.closeMenuOnScroll?e.target instanceof HTMLElement&&nE(e.target)&&t.props.onMenuClose():"function"==typeof t.props.closeMenuOnScroll&&t.props.closeMenuOnScroll(e)&&t.props.onMenuClose()},t.onCompositionStart=function(){t.isComposing=!0},t.onCompositionEnd=function(){t.isComposing=!1},t.onTouchStart=function(e){var n=e.touches,r=n&&n.item(0);r&&(t.initialTouchX=r.clientX,t.initialTouchY=r.clientY,t.userIsDragging=!1)},t.onTouchMove=function(e){var n=e.touches,r=n&&n.item(0);if(r){var i=Math.abs(r.clientX-t.initialTouchX),o=Math.abs(r.clientY-t.initialTouchY);t.userIsDragging=i>5||o>5}},t.onTouchEnd=function(e){t.userIsDragging||(t.controlRef&&!t.controlRef.contains(e.target)&&t.menuListRef&&!t.menuListRef.contains(e.target)&&t.blurInput(),t.initialTouchX=0,t.initialTouchY=0)},t.onControlTouchEnd=function(e){t.userIsDragging||t.onControlMouseDown(e)},t.onClearIndicatorTouchEnd=function(e){t.userIsDragging||t.onClearIndicatorMouseDown(e)},t.onDropdownIndicatorTouchEnd=function(e){t.userIsDragging||t.onDropdownIndicatorMouseDown(e)},t.handleInputChange=function(e){var n=t.props.inputValue,r=e.currentTarget.value;t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange(r,{action:"input-change",prevInputValue:n}),t.props.menuIsOpen||t.onMenuOpen()},t.onInputFocus=function(e){t.props.onFocus&&t.props.onFocus(e),t.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(t.openAfterFocus||t.props.openMenuOnFocus)&&t.openMenu("first"),t.openAfterFocus=!1},t.onInputBlur=function(e){var n=t.props.inputValue;t.menuListRef&&t.menuListRef.contains(document.activeElement)?t.inputRef.focus():(t.props.onBlur&&t.props.onBlur(e),t.onInputChange("",{action:"input-blur",prevInputValue:n}),t.onMenuClose(),t.setState({focusedValue:null,isFocused:!1}))},t.onOptionHover=function(e){t.blockOptionHover||t.state.focusedOption===e||t.setState({focusedOption:e})},t.shouldHideSelectedOptions=function(){return NS(t.props)},t.onValueInputFocus=function(e){e.preventDefault(),e.stopPropagation(),t.focus()},t.onKeyDown=function(e){var n=t.props,r=n.isMulti,i=n.backspaceRemovesValue,o=n.escapeClearsValue,s=n.inputValue,a=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,u=n.onKeyDown,h=n.tabSelectsValue,d=n.openMenuOnFocus,p=t.state,f=p.focusedOption,m=p.focusedValue,g=p.selectValue;if(!(l||"function"==typeof u&&(u(e),e.defaultPrevented))){switch(t.blockOptionHover=!0,e.key){case"ArrowLeft":if(!r||s)return;t.focusValue("previous");break;case"ArrowRight":if(!r||s)return;t.focusValue("next");break;case"Delete":case"Backspace":if(s)return;if(m)t.removeValue(m);else{if(!i)return;r?t.popValue():a&&t.clearValue()}break;case"Tab":if(t.isComposing)return;if(e.shiftKey||!c||!h||!f||d&&t.isOptionSelected(f,g))return;t.selectOption(f);break;case"Enter":if(229===e.keyCode)break;if(c){if(!f)return;if(t.isComposing)return;t.selectOption(f);break}return;case"Escape":c?(t.setState({inputIsHiddenAfterUpdate:!1}),t.onInputChange("",{action:"menu-close",prevInputValue:s}),t.onMenuClose()):a&&o&&t.clearValue();break;case" ":if(s)return;if(!c){t.openMenu("first");break}if(!f)return;t.selectOption(f);break;case"ArrowUp":c?t.focusOption("up"):t.openMenu("last");break;case"ArrowDown":c?t.focusOption("down"):t.openMenu("first");break;case"PageUp":if(!c)return;t.focusOption("pageup");break;case"PageDown":if(!c)return;t.focusOption("pagedown");break;case"Home":if(!c)return;t.focusOption("first");break;case"End":if(!c)return;t.focusOption("last");break;default:return}e.preventDefault()}},t.instancePrefix="react-select-"+(t.props.instanceId||++kS),t.state.selectValue=$w(e.value),e.menuIsOpen&&t.state.selectValue.length){var n=t.buildFocusableOptions(),r=n.indexOf(t.state.selectValue[0]);t.state.focusedOption=n[r]}return t}return n=s,r=[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&sE(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,i=this.state.isFocused;(i&&!n&&e.isDisabled||i&&r&&!e.menuIsOpen)&&this.focusInput(),i&&n&&!e.isDisabled?this.setState({isFocused:!1},this.onMenuClose):i||n||!e.isDisabled||this.inputRef!==document.activeElement||this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(sE(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(e){var t=this,n=this.state,r=n.selectValue,i=n.isFocused,o=this.buildFocusableOptions(),s="first"===e?0:o.length-1;if(!this.props.isMulti){var a=o.indexOf(r[0]);a>-1&&(s=a)}this.scrollToFocusedOptionOnUpdate=!(i&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:o[s]},(function(){return t.onMenuOpen()}))}},{key:"focusValue",value:function(e){var t=this.state,n=t.selectValue,r=t.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var i=n.indexOf(r);r||(i=-1);var o=n.length-1,s=-1;if(n.length){switch(e){case"previous":s=0===i?0:-1===i?o:i-1;break;case"next":i>-1&&i<o&&(s=i+1)}this.setState({inputIsHidden:-1!==s,focusedValue:n[s]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state.focusedOption,r=this.getFocusableOptions();if(r.length){var i=0,o=r.indexOf(n);n||(o=-1),"up"===e?i=o>0?o-1:r.length-1:"down"===e?i=(o+1)%r.length:"pageup"===e?(i=o-t)<0&&(i=0):"pagedown"===e?(i=o+t)>r.length-1&&(i=r.length-1):"last"===e&&(i=r.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:r[i],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?"function"==typeof this.props.theme?this.props.theme(wS):m_(m_({},wS),this.props.theme):wS}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.cx,n=this.getStyles,r=this.getClassNames,i=this.getValue,o=this.selectOption,s=this.setValue,a=this.props,l=a.isMulti,c=a.isRtl,u=a.options;return{clearValue:e,cx:t,getStyles:n,getClassNames:r,getValue:i,hasValue:this.hasValue(),isMulti:l,isRtl:c,options:u,selectOption:o,selectProps:a,setValue:s,theme:this.getTheme()}}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e,t){return LS(this.props,e,t)}},{key:"isOptionSelected",value:function(e,t){return IS(this.props,e,t)}},{key:"filterOption",value:function(e,t){return PS(this.props,e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var e=this.props,n=e.isDisabled,r=e.isSearchable,i=e.inputId,o=e.inputValue,s=e.tabIndex,a=e.form,l=e.menuIsOpen,c=e.required,u=this.getComponents().Input,h=this.state,d=h.inputIsHidden,p=h.ariaSelection,f=this.commonProps,m=i||this.getElementId("input"),g=m_(m_(m_({"aria-autocomplete":"list","aria-expanded":l,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":c,role:"combobox"},l&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!r&&{"aria-readonly":!0}),this.hasValue()?"initial-input-focus"===(null==p?void 0:p.action)&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return r?t.createElement(u,u_({},f,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:m,innerRef:this.getInputRef,isDisabled:n,isHidden:d,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:s,form:a,type:"text",value:o},g)):t.createElement(sS,u_({id:m,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Yw,onFocus:this.onInputFocus,disabled:n,tabIndex:s,inputMode:"none",form:a,value:""},g))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,n=this.getComponents(),r=n.MultiValue,i=n.MultiValueContainer,o=n.MultiValueLabel,s=n.MultiValueRemove,a=n.SingleValue,l=n.Placeholder,c=this.commonProps,u=this.props,h=u.controlShouldRenderValue,d=u.isDisabled,p=u.isMulti,f=u.inputValue,m=u.placeholder,g=this.state,v=g.selectValue,y=g.focusedValue,b=g.isFocused;if(!this.hasValue()||!h)return f?null:t.createElement(l,u_({},c,{key:"placeholder",isDisabled:d,isFocused:b,innerProps:{id:this.getElementId("placeholder")}}),m);if(p)return v.map((function(n,a){var l=n===y,u="".concat(e.getOptionLabel(n),"-").concat(e.getOptionValue(n));return t.createElement(r,u_({},c,{components:{Container:i,Label:o,Remove:s},isFocused:l,isDisabled:d,key:u,index:a,removeProps:{onClick:function(){return e.removeValue(n)},onTouchEnd:function(){return e.removeValue(n)},onMouseDown:function(e){e.preventDefault()}},data:n}),e.formatOptionLabel(n,"value"))}));if(f)return null;var _=v[0];return t.createElement(a,u_({},c,{data:_,isDisabled:d}),this.formatOptionLabel(_,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.getComponents().ClearIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,s=this.state.isFocused;if(!this.isClearable()||!e||i||!this.hasValue()||o)return null;var a={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,u_({},n,{innerProps:a,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var e=this.getComponents().LoadingIndicator,n=this.commonProps,r=this.props,i=r.isDisabled,o=r.isLoading,s=this.state.isFocused;return e&&o?t.createElement(e,u_({},n,{innerProps:{"aria-hidden":"true"},isDisabled:i,isFocused:s})):null}},{key:"renderIndicatorSeparator",value:function(){var e=this.getComponents(),n=e.DropdownIndicator,r=e.IndicatorSeparator;if(!n||!r)return null;var i=this.commonProps,o=this.props.isDisabled,s=this.state.isFocused;return t.createElement(r,u_({},i,{isDisabled:o,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var e=this.getComponents().DropdownIndicator;if(!e)return null;var n=this.commonProps,r=this.props.isDisabled,i=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return t.createElement(e,u_({},n,{innerProps:o,isDisabled:r,isFocused:i}))}},{key:"renderMenu",value:function(){var e=this,n=this.getComponents(),r=n.Group,i=n.GroupHeading,o=n.Menu,s=n.MenuList,a=n.MenuPortal,l=n.LoadingMessage,c=n.NoOptionsMessage,u=n.Option,h=this.commonProps,d=this.state.focusedOption,p=this.props,f=p.captureMenuScroll,m=p.inputValue,g=p.isLoading,v=p.loadingMessage,y=p.minMenuHeight,b=p.maxMenuHeight,_=p.menuIsOpen,x=p.menuPlacement,w=p.menuPosition,E=p.menuPortalTarget,S=p.menuShouldBlockScroll,A=p.menuShouldScrollIntoView,M=p.noOptionsMessage,T=p.onMenuScrollToTop,C=p.onMenuScrollToBottom;if(!_)return null;var R,L=function(n,r){var i=n.type,o=n.data,s=n.isDisabled,a=n.isSelected,l=n.label,c=n.value,p=d===o,f=s?void 0:function(){return e.onOptionHover(o)},m=s?void 0:function(){return e.selectOption(o)},g="".concat(e.getElementId("option"),"-").concat(r),v={id:g,onClick:m,onMouseMove:f,onMouseOver:f,tabIndex:-1};return t.createElement(u,u_({},h,{innerProps:v,data:o,isDisabled:s,isSelected:a,key:g,label:l,type:i,value:c,isFocused:p,innerRef:p?e.getFocusedOptionRef:void 0}),e.formatOptionLabel(n.data,"menu"))};if(this.hasOptions())R=this.getCategorizedOptions().map((function(n){if("group"===n.type){var o=n.data,s=n.options,a=n.index,l="".concat(e.getElementId("group"),"-").concat(a),c="".concat(l,"-heading");return t.createElement(r,u_({},h,{key:l,data:o,options:s,Heading:i,headingProps:{id:c,data:n.data},label:e.formatGroupLabel(n.data)}),n.options.map((function(e){return L(e,"".concat(a,"-").concat(e.index))})))}if("option"===n.type)return L(n,"".concat(n.index))}));else if(g){var I=v({inputValue:m});if(null===I)return null;R=t.createElement(l,h,I)}else{var P=M({inputValue:m});if(null===P)return null;R=t.createElement(c,h,P)}var N={minMenuHeight:y,maxMenuHeight:b,menuPlacement:x,menuPosition:w,menuShouldScrollIntoView:A},k=t.createElement(gE,u_({},h,N),(function(n){var r=n.ref,i=n.placerProps,a=i.placement,l=i.maxHeight;return t.createElement(o,u_({},h,N,{innerRef:r,innerProps:{onMouseDown:e.onMenuMouseDown,onMouseMove:e.onMenuMouseMove,id:e.getElementId("listbox")},isLoading:g,placement:a}),t.createElement(yS,{captureEnabled:f,onTopArrive:T,onBottomArrive:C,lockEnabled:S},(function(n){return t.createElement(s,u_({},h,{innerRef:function(t){e.getMenuListRef(t),n(t)},isLoading:g,maxHeight:l,focusedOption:d}),R)})))}));return E||"fixed"===w?t.createElement(a,u_({},h,{appendTo:E,controlElement:this.controlRef,menuPlacement:x,menuPosition:w}),k):k}},{key:"renderFormField",value:function(){var e=this,n=this.props,r=n.delimiter,i=n.isDisabled,o=n.isMulti,s=n.name,a=n.required,l=this.state.selectValue;if(a&&!this.hasValue()&&!i)return t.createElement(_S,{name:s,onFocus:this.onValueInputFocus});if(s&&!i){if(o){if(r){var c=l.map((function(t){return e.getOptionValue(t)})).join(r);return t.createElement("input",{name:s,type:"hidden",value:c})}var u=l.length>0?l.map((function(n,r){return t.createElement("input",{key:"i-".concat(r),name:s,type:"hidden",value:e.getOptionValue(n)})})):t.createElement("input",{name:s,type:"hidden",value:""});return t.createElement("div",null,u)}var h=l[0]?this.getOptionValue(l[0]):"";return t.createElement("input",{name:s,type:"hidden",value:h})}}},{key:"renderLiveRegion",value:function(){var e=this.commonProps,n=this.state,r=n.ariaSelection,i=n.focusedOption,o=n.focusedValue,s=n.isFocused,a=n.selectValue,l=this.getFocusableOptions();return t.createElement(XE,u_({},e,{id:this.getElementId("live-region"),ariaSelection:r,focusedOption:i,focusedValue:o,isFocused:s,selectValue:a,focusableOptions:l}))}},{key:"render",value:function(){var e=this.getComponents(),n=e.Control,r=e.IndicatorsContainer,i=e.SelectContainer,o=e.ValueContainer,s=this.props,a=s.className,l=s.id,c=s.isDisabled,u=s.menuIsOpen,h=this.state.isFocused,d=this.commonProps=this.getCommonProps();return t.createElement(i,u_({},d,{className:a,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:h}),this.renderLiveRegion(),t.createElement(n,u_({},d,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:h,menuIsOpen:u}),t.createElement(o,u_({},d,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),t.createElement(r,u_({},d,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){var n=t.prevProps,r=t.clearFocusValueOnUpdate,i=t.inputIsHiddenAfterUpdate,o=t.ariaSelection,s=t.isFocused,a=t.prevWasFocused,l=e.options,c=e.value,u=e.menuIsOpen,h=e.inputValue,d=e.isMulti,p=$w(c),f={};if(n&&(c!==n.value||l!==n.options||u!==n.menuIsOpen||h!==n.inputValue)){var m=u?function(e,t){return MS(AS(e,t))}(e,p):[],g=r?function(e,t){var n=e.focusedValue,r=e.selectValue.indexOf(n);if(r>-1){if(t.indexOf(n)>-1)return n;if(r<t.length)return t[r]}return null}(t,p):null,v=function(e,t){var n=e.focusedOption;return n&&t.indexOf(n)>-1?n:t[0]}(t,m);f={selectValue:p,focusedOption:v,focusedValue:g,clearFocusValueOnUpdate:!1}}var y=null!=i&&e!==n?{inputIsHidden:i,inputIsHiddenAfterUpdate:void 0}:{},b=o,_=s&&a;return s&&!_&&(b={value:pE(d,p,p[0]||null),options:p,action:"initial-input-focus"},_=!a),"initial-input-focus"===(null==o?void 0:o.action)&&(b=null),m_(m_(m_({},f),y),{},{prevProps:e,ariaSelection:b,prevWasFocused:_})}}],r&&g_(n.prototype,r),i&&g_(n,i),Object.defineProperty(n,"prototype",{writable:!1}),s}();DS.defaultProps=ES;var OS=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"],US=["defaultOptions","cacheOptions","loadOptions","options","isLoading","onInputChange","filterOption"],FS=Cx((function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),BS=Cx((function(e){var t=FS.default;e.exports=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,n||"default");if("object"!==t(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),jS=Cx((function(e){var t=FS.default;e.exports=function(e){var n=BS(e,"string");return"symbol"===t(n)?n:String(n)},e.exports.__esModule=!0,e.exports.default=e.exports})),VS=Cx((function(e){e.exports=function(e,t,n){return(t=jS(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports}));Cx((function(e){function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}e.exports=function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?t(Object(r),!0).forEach((function(t){VS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports})),Cx((function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports})),Cx((function(e){function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,jS(r.key),r)}}e.exports=function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}));var zS=Cx((function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}));Cx((function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zS(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}));var HS=Cx((function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),GS=Cx((function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.__esModule=!0,e.exports.default=e.exports})),WS=Cx((function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports})),KS=Cx((function(e){var t=FS.default;e.exports=function(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return WS(e)},e.exports.__esModule=!0,e.exports.default=e.exports}));Cx((function(e){e.exports=function(e){var t=GS();return function(){var n,r=HS(e);if(t){var i=HS(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return KS(this,n)}},e.exports.__esModule=!0,e.exports.default=e.exports}));var qS=Cx((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r},e.exports.__esModule=!0,e.exports.default=e.exports})),XS=Cx((function(e){e.exports=function(e){if(Array.isArray(e))return qS(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),QS=Cx((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),YS=Cx((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return qS(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qS(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports})),JS=Cx((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}));Cx((function(e){e.exports=function(e){return XS(e)||QS(e)||YS(e)||JS()},e.exports.__esModule=!0,e.exports.default=e.exports}));var ZS=Cx((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports})),$S=Cx((function(e){e.exports=function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}},e.exports.__esModule=!0,e.exports.default=e.exports})),eA=Cx((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports}));Cx((function(e){e.exports=function(e,t){return ZS(e)||$S(e,t)||YS(e,t)||eA()},e.exports.__esModule=!0,e.exports.default=e.exports}));var tA=Cx((function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i},e.exports.__esModule=!0,e.exports.default=e.exports}));Cx((function(e){e.exports=function(e,t){if(null==e)return{};var n,r,i=tA(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i},e.exports.__esModule=!0,e.exports.default=e.exports})),Cx((function(e){e.exports=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},e.exports.__esModule=!0,e.exports.default=e.exports}));var nA,rA,iA=(0,t.forwardRef)((function(e,n){var r=function(e){var n=e.defaultOptions,r=void 0!==n&&n,i=e.cacheOptions,o=void 0!==i&&i,s=e.loadOptions;e.options;var a=e.isLoading,l=void 0!==a&&a,c=e.onInputChange,u=e.filterOption,h=void 0===u?null:u,d=Iw(e,US),p=d.inputValue,f=(0,t.useRef)(void 0),m=(0,t.useRef)(!1),g=Lw((0,t.useState)(Array.isArray(r)?r:void 0),2),v=g[0],y=g[1],b=Lw((0,t.useState)(void 0!==p?p:""),2),_=b[0],x=b[1],w=Lw((0,t.useState)(!0===r),2),E=w[0],S=w[1],A=Lw((0,t.useState)(void 0),2),M=A[0],T=A[1],C=Lw((0,t.useState)([]),2),R=C[0],L=C[1],I=Lw((0,t.useState)(!1),2),P=I[0],N=I[1],k=Lw((0,t.useState)({}),2),D=k[0],O=k[1],U=Lw((0,t.useState)(void 0),2),F=U[0],B=U[1],j=Lw((0,t.useState)(void 0),2),V=j[0],z=j[1];o!==V&&(O({}),z(o)),r!==F&&(y(Array.isArray(r)?r:void 0),B(r)),(0,t.useEffect)((function(){return m.current=!0,function(){m.current=!1}}),[]);var H=(0,t.useCallback)((function(e,t){if(!s)return t();var n=s(e,t);n&&"function"==typeof n.then&&n.then(t,(function(){return t()}))}),[s]);(0,t.useEffect)((function(){!0===r&&H(_,(function(e){m.current&&(y(e||[]),S(!!f.current))}))}),[]);var G=(0,t.useCallback)((function(e,t){var n=function(e,t,n){if(n){var r=n(e,t);if("string"==typeof r)return r}return e}(e,t,c);if(!n)return f.current=void 0,x(""),T(""),L([]),S(!1),void N(!1);if(o&&D[n])x(n),T(n),L(D[n]),S(!1),N(!1);else{var r=f.current={};x(n),S(!0),N(!M),H(n,(function(e){m&&r===f.current&&(f.current=void 0,S(!1),T(n),L(e||[]),N(!1),O(e?m_(m_({},D),{},p_({},n,e)):D))}))}}),[o,H,M,D,c]),W=P?[]:_&&M?R:v||[];return m_(m_({},d),{},{options:W,isLoading:E||l,onInputChange:G,filterOption:h})}(e),i=function(e){var n=e.defaultInputValue,r=void 0===n?"":n,i=e.defaultMenuIsOpen,o=void 0!==i&&i,s=e.defaultValue,a=void 0===s?null:s,l=e.inputValue,c=e.menuIsOpen,u=e.onChange,h=e.onInputChange,d=e.onMenuClose,p=e.onMenuOpen,f=e.value,m=Iw(e,OS),g=Lw((0,t.useState)(void 0!==l?l:r),2),v=g[0],y=g[1],b=Lw((0,t.useState)(void 0!==c?c:o),2),_=b[0],x=b[1],w=Lw((0,t.useState)(void 0!==f?f:a),2),E=w[0],S=w[1],A=(0,t.useCallback)((function(e,t){"function"==typeof u&&u(e,t),S(e)}),[u]),M=(0,t.useCallback)((function(e,t){var n;"function"==typeof h&&(n=h(e,t)),y(void 0!==n?n:e)}),[h]),T=(0,t.useCallback)((function(){"function"==typeof p&&p(),x(!0)}),[p]),C=(0,t.useCallback)((function(){"function"==typeof d&&d(),x(!1)}),[d]),R=void 0!==l?l:v,L=void 0!==c?c:_,I=void 0!==f?f:E;return m_(m_({},m),{},{inputValue:R,menuIsOpen:L,onChange:A,onInputChange:M,onMenuClose:C,onMenuOpen:T,value:I})}(r);return t.createElement(DS,u_({ref:n},i))})),oA=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!=t&&n!=n};(rA=nA||(nA={}))[rA.INITIALIZED=0]="INITIALIZED",rA[rA.LOADING=1]="LOADING",rA[rA.SUCCESS=2]="SUCCESS",rA[rA.FAILURE=3]="FAILURE";class sA{constructor(e){let{apiKey:t,authReferrerPolicy:n,channel:r,client:i,id:o="__googleMapsScriptId",language:s,libraries:a=[],mapIds:l,nonce:c,region:u,retries:h=3,url:d="https://maps.googleapis.com/maps/api/js",version:p}=e;if(this.CALLBACK="__googleMapsCallback",this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=n,this.channel=r,this.client=i,this.id=o||"__googleMapsScriptId",this.language=s,this.libraries=a,this.mapIds=l,this.nonce=c,this.region=u,this.retries=h,this.url=d,this.version=p,sA.instance){if(!oA(this.options,sA.instance.options))throw new Error("Loader must not be called again with different options. ".concat(JSON.stringify(this.options)," !== ").concat(JSON.stringify(sA.instance.options)));return sA.instance}sA.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?nA.FAILURE:this.done?nA.SUCCESS:this.loading?nA.LOADING:nA.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=".concat(this.CALLBACK),this.apiKey&&(e+="&key=".concat(this.apiKey)),this.channel&&(e+="&channel=".concat(this.channel)),this.client&&(e+="&client=".concat(this.client)),this.libraries.length>0&&(e+="&libraries=".concat(this.libraries.join(","))),this.language&&(e+="&language=".concat(this.language)),this.region&&(e+="&region=".concat(this.region)),this.version&&(e+="&v=".concat(this.version)),this.mapIds&&(e+="&map_ids=".concat(this.mapIds.join(","))),this.authReferrerPolicy&&(e+="&auth_referrer_policy=".concat(this.authReferrerPolicy)),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise(((e,t)=>{this.loadCallback((n=>{n?t(n.error):e(window.google)}))}))}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){if(document.getElementById(this.id))return void this.callback();const e=this.createUrl(),t=document.createElement("script");t.id=this.id,t.type="text/javascript",t.src=e,t.onerror=this.loadErrorCallback.bind(this),t.defer=!0,t.async=!0,this.nonce&&(t.nonce=this.nonce),document.head.appendChild(t)}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const e=this.errors.length*Math.pow(2,this.errors.length);console.log("Failed to load Google Maps script, retrying in ".concat(e," ms.")),setTimeout((()=>{this.deleteScript(),this.setScript()}),e)}else this.onerrorEvent=e,this.callback()}setCallback(){window.__googleMapsCallback=this.callback.bind(this)}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach((e=>{e(this.onerrorEvent)})),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version)return console.warn("Google Maps already loaded outside @googlemaps/js-api-loader.This may result in undesirable behavior as options and script parameters may not match."),void this.callback();this.loading||(this.loading=!0,this.setCallback(),this.setScript())}}}var aA=function(e){var n=e.autocompletionRequest,r=e.debounce,i=e.minLengthAutocomplete,o=e.placesService,s=e.sessionToken,a=e.withSessionToken,l=function(e,n,r){void 0===r&&(r={});var i=r.maxWait,o=(0,t.useRef)(null),s=(0,t.useRef)([]),a=r.leading,l=void 0===r.trailing||r.trailing,c=(0,t.useRef)(!1),u=(0,t.useRef)(null),h=(0,t.useRef)(!1),d=(0,t.useRef)(e);d.current=e;var p=(0,t.useCallback)((function(){clearTimeout(u.current),clearTimeout(o.current),o.current=null,s.current=[],u.current=null,c.current=!1}),[]);(0,t.useEffect)((function(){return h.current=!1,function(){h.current=!0}}),[]);var f=(0,t.useCallback)((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];s.current=e,clearTimeout(u.current),c.current&&(c.current=!1),u.current||!a||c.current||(d.current.apply(d,e),c.current=!0),u.current=setTimeout((function(){var t=!0;a&&c.current&&(t=!1),p(),!h.current&&l&&t&&d.current.apply(d,e)}),n),i&&!o.current&&l&&(o.current=setTimeout((function(){var e=s.current;p(),h.current||d.current.apply(null,e)}),i))}),[i,n,p,a,l]),m=(0,t.useCallback)((function(){u.current&&(d.current.apply(null,s.current),p())}),[p]);return[f,p,m]}((function(e,t){if(!o)return t([]);if(e.length<i)return t([]);var r=c_({},n);o.getPlacePredictions(function(e,t,n){var r,i=e.bounds,o=e.location,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["bounds","location"]),a=c_({input:t},s);return n&&(a.sessionToken=n),i&&(a.bounds=new((r=google.maps.LatLngBounds).bind.apply(r,function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}([void 0],i)))),o&&(a.location=new google.maps.LatLng(o)),a}(r,e,a&&s),(function(e){t((e||[]).map((function(e){return{label:e.description,value:e}})))}))}),r)[0];return l},lA=(0,t.forwardRef)((function(e,n){var r,i,o,s,a,l,c,u,h=function(e){var n=e.apiKey,r=e.apiOptions,i=e.onLoadFailed,o=(0,t.useState)(void 0),s=o[0],a=o[1],l=(0,t.useState)(void 0),c=l[0],u=l[1],h=function(){if(!window.google)throw new Error("[react-google-places-autocomplete]: Google script not loaded");if(!window.google.maps)throw new Error("[react-google-places-autocomplete]: Google maps script not loaded");if(!window.google.maps.places)throw new Error("[react-google-places-autocomplete]: Google maps places script not loaded");a(new window.google.maps.places.AutocompleteService),u(new google.maps.places.AutocompleteSessionToken)};return(0,t.useEffect)((function(){n?function(e,t,n,r){new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}(void 0,void 0,void 0,(function(){var e;return function(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}(this,(function(t){switch(t.label){case 0:if(!n)return[2];t.label=1;case 1:return t.trys.push([1,4,,5]),window.google&&window.google.maps&&window.google.maps.places?[3,3]:[4,new sA(c_({apiKey:n},c_({libraries:["places"]},r))).load()];case 2:t.sent(),t.label=3;case 3:return h(),[3,5];case 4:return e=t.sent(),"function"==typeof i&&i(e),[3,5];case 5:return[2]}}))})):h()}),[]),{placesService:s,sessionToken:c,setSessionToken:u}}({apiKey:null!==(r=e.apiKey)&&void 0!==r?r:"",apiOptions:null!==(i=e.apiOptions)&&void 0!==i?i:{},onLoadFailed:null!==(o=e.onLoadFailed)&&void 0!==o?o:console.error}),d=h.placesService,p=h.sessionToken,f=h.setSessionToken,m=aA({autocompletionRequest:null!==(s=e.autocompletionRequest)&&void 0!==s?s:{},debounce:null!==(a=e.debounce)&&void 0!==a?a:300,minLengthAutocomplete:null!==(l=e.minLengthAutocomplete)&&void 0!==l?l:0,placesService:d,sessionToken:p,withSessionToken:null!==(c=e.withSessionToken)&&void 0!==c&&c});return(0,t.useImperativeHandle)(n,(function(){return{getSessionToken:function(){return p},refreshSessionToken:function(){f(new google.maps.places.AutocompleteSessionToken)}}}),[p]),t.createElement(iA,c_({},null!==(u=e.selectProps)&&void 0!==u?u:{},{loadOptions:m,getOptionValue:function(e){return e.value.place_id}}))})),cA=function(e){return new Promise((function(t,n){try{return t({lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}catch(e){return n(e)}}))},uA=function(e){var t=new window.google.maps.Geocoder,n=window.google.maps.GeocoderStatus.OK;return new Promise((function(r,i){t.geocode({placeId:e},(function(e,t){return t!==n?i(t):r(e)}))}))},hA=function(e,t){return hA=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},hA(e,t)};function dA(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}hA(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var pA=function(){return pA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},pA.apply(this,arguments)};function fA(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function mA(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{l(r.next(e))}catch(rA){o(rA)}}function a(e){try{l(r.throw(e))}catch(rA){o(rA)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((r=r.apply(e,t||[])).next())}))}function gA(e,t){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=t.call(e,s)}catch(rA){o=[6,rA],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function vA(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yA=function(e,t,n,r,i,o,s,a){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,s,a],u=0;(l=new Error(t.replace(/%s/g,(function(){return c[u++]})))).name="Invariant Violation"}throw l.framesToPop=1,l}},bA=vA(yA),_A=(0,t.createContext)(null);function xA(e,t,n,r){var i={};return function(e,t){Object.keys(e).forEach((function(n){return t(e[n],n)}))}(e,(function(e,o){var s=n[o];s!==t[o]&&(i[o]=s,e(r,s))})),i}function wA(e,t,n){var r=function(e,t,n){return Object.keys(e).reduce((function(n,r){return t(n,e[r],r)}),n)}(n,(function(n,r,i){return"function"===typeof e[i]&&n.push(google.maps.event.addListener(t,r,e[i])),n}),[]);return r}function EA(e){google.maps.event.removeListener(e)}function SA(e){void 0===e&&(e=[]),e.forEach(EA)}function AA(e){var t=e.updaterMap,n=e.eventMap,r=e.prevProps,i=e.nextProps,o=e.instance,s=wA(i,o,n);return xA(t,r,i,o),s}var MA={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},TA={extraMapTypes:function(e,t){t.forEach((function(t,n){e.mapTypes.set(String(n),t)}))},center:function(e,t){e.setCenter(t)},clickableIcons:function(e,t){e.setClickableIcons(t)},heading:function(e,t){e.setHeading(t)},mapTypeId:function(e,t){e.setMapTypeId(t)},options:function(e,t){e.setOptions(t)},streetView:function(e,t){e.setStreetView(t)},tilt:function(e,t){e.setTilt(t)},zoom:function(e,t){e.setZoom(t)}};(0,t.memo)((function(e){var n=e.children,r=e.options,i=e.id,o=e.mapContainerStyle,s=e.mapContainerClassName,a=e.center,l=e.onClick,c=e.onDblClick,u=e.onDrag,h=e.onDragEnd,d=e.onDragStart,p=e.onMouseMove,f=e.onMouseOut,m=e.onMouseOver,g=e.onMouseDown,v=e.onMouseUp,y=e.onRightClick,b=e.onCenterChanged,_=e.onLoad,x=e.onUnmount,w=(0,t.useState)(null),E=w[0],S=w[1],A=(0,t.useRef)(null),M=(0,t.useState)(null),T=M[0],C=M[1],R=(0,t.useState)(null),L=R[0],I=R[1],P=(0,t.useState)(null),N=P[0],k=P[1],D=(0,t.useState)(null),O=D[0],U=D[1],F=(0,t.useState)(null),B=F[0],j=F[1],V=(0,t.useState)(null),z=V[0],H=V[1],G=(0,t.useState)(null),W=G[0],K=G[1],q=(0,t.useState)(null),X=q[0],Q=q[1],Y=(0,t.useState)(null),J=Y[0],Z=Y[1],$=(0,t.useState)(null),ee=$[0],te=$[1],ne=(0,t.useState)(null),re=ne[0],ie=ne[1],oe=(0,t.useState)(null),se=oe[0],ae=oe[1];return(0,t.useEffect)((function(){r&&null!==E&&E.setOptions(r)}),[E,r]),(0,t.useEffect)((function(){null!==E&&"undefined"!==typeof a&&E.setCenter(a)}),[E,a]),(0,t.useEffect)((function(){E&&c&&(null!==L&&google.maps.event.removeListener(L),I(google.maps.event.addListener(E,"dblclick",c)))}),[c]),(0,t.useEffect)((function(){E&&h&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(E,"dragend",h)))}),[h]),(0,t.useEffect)((function(){E&&d&&(null!==O&&google.maps.event.removeListener(O),U(google.maps.event.addListener(E,"dragstart",d)))}),[d]),(0,t.useEffect)((function(){E&&g&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(E,"mousedown",g)))}),[g]),(0,t.useEffect)((function(){E&&p&&(null!==z&&google.maps.event.removeListener(z),H(google.maps.event.addListener(E,"mousemove",p)))}),[p]),(0,t.useEffect)((function(){E&&f&&(null!==W&&google.maps.event.removeListener(W),K(google.maps.event.addListener(E,"mouseout",f)))}),[f]),(0,t.useEffect)((function(){E&&m&&(null!==X&&google.maps.event.removeListener(X),Q(google.maps.event.addListener(E,"mouseover",m)))}),[m]),(0,t.useEffect)((function(){E&&v&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(E,"mouseup",v)))}),[v]),(0,t.useEffect)((function(){E&&y&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(E,"rightclick",y)))}),[y]),(0,t.useEffect)((function(){E&&l&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(E,"click",l)))}),[l]),(0,t.useEffect)((function(){E&&u&&(null!==se&&google.maps.event.removeListener(se),ae(google.maps.event.addListener(E,"drag",u)))}),[u]),(0,t.useEffect)((function(){E&&b&&(null!==T&&google.maps.event.removeListener(T),C(google.maps.event.addListener(E,"center_changed",b)))}),[l]),(0,t.useEffect)((function(){var e=null===A.current?null:new google.maps.Map(A.current,r);return S(e),null!==e&&_&&_(e),function(){null!==e&&x&&x(e)}}),[]),(0,Ne.jsx)("div",{id:i,ref:A,style:o,className:s,children:(0,Ne.jsx)(_A.Provider,{value:E,children:null!==E?n:null})})}));var CA=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={map:null},t.registeredEvents=[],t.mapRef=null,t.getInstance=function(){return null===t.mapRef?null:new google.maps.Map(t.mapRef,t.props.options)},t.panTo=function(e){var n=t.getInstance();n&&n.panTo(e)},t.setMapCallback=function(){null!==t.state.map&&t.props.onLoad&&t.props.onLoad(t.state.map)},t.getRef=function(e){t.mapRef=e},t}return dA(t,e),t.prototype.componentDidMount=function(){var e=this.getInstance();this.registeredEvents=AA({updaterMap:TA,eventMap:MA,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{map:e}}),this.setMapCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.map&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:TA,eventMap:MA,prevProps:e,nextProps:this.props,instance:this.state.map}))},t.prototype.componentWillUnmount=function(){null!==this.state.map&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),SA(this.registeredEvents))},t.prototype.render=function(){return(0,Ne.jsx)("div",{id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName,children:(0,Ne.jsx)(_A.Provider,{value:this.state.map,children:null!==this.state.map?this.props.children:null})})},t}(t.PureComponent),RA="undefined"!==typeof document;function LA(e){var t=e.url,n=e.id,r=e.nonce;return RA?new Promise((function(e,i){var o=document.getElementById(n),s=window;if(o){var a=o.getAttribute("data-state");if(o.src===t&&"error"!==a){if("ready"===a)return e(n);var l=s.initMap,c=o.onerror;return s.initMap=function(){l&&l(),e(n)},void(o.onerror=function(e){c&&c(e),i(e)})}o.remove()}var u=document.createElement("script");u.type="text/javascript",u.src=t,u.id=n,u.async=!0,u.nonce=r||"",u.onerror=function(e){u.setAttribute("data-state","error"),i(e)},s.initMap=function(){u.setAttribute("data-state","ready"),e(n)},document.head.appendChild(u)})).catch((function(e){throw console.error("injectScript error: ",e),e})):Promise.reject(new Error("document is undefined"))}function IA(e){var t=e.href;return!(!t||0!==t.indexOf("https://fonts.googleapis.com/css?family=Roboto")&&0!==t.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text"))||("style"===e.tagName.toLowerCase()&&e.styleSheet&&e.styleSheet.cssText&&0===e.styleSheet.cssText.replace("\r\n","").indexOf(".gm-style")?(e.styleSheet.cssText="",!0):"style"===e.tagName.toLowerCase()&&e.innerHTML&&0===e.innerHTML.replace("\r\n","").indexOf(".gm-style")?(e.innerHTML="",!0):"style"===e.tagName.toLowerCase()&&!e.styleSheet&&!e.innerHTML)}function PA(){var e=document.getElementsByTagName("head")[0];if(e){var t=e.insertBefore.bind(e);e.insertBefore=function(n,r){return IA(n)||Reflect.apply(t,e,[n,r]),n};var n=e.appendChild.bind(e);e.appendChild=function(t){return IA(t)||Reflect.apply(n,e,[t]),t}}}function NA(e){var t=e.googleMapsApiKey,n=e.googleMapsClientId,r=e.version,i=void 0===r?"weekly":r,o=e.language,s=e.region,a=e.libraries,l=e.channel,c=e.mapIds,u=e.authReferrerPolicy,h=[];return bA(t&&n||!(t&&n),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?h.push("key=".concat(t)):n&&h.push("client=".concat(n)),i&&h.push("v=".concat(i)),o&&h.push("language=".concat(o)),s&&h.push("region=".concat(s)),a&&a.length&&h.push("libraries=".concat(a.sort().join(","))),l&&h.push("channel=".concat(l)),c&&c.length&&h.push("map_ids=".concat(c.join(","))),u&&h.push("auth_referrer_policy=".concat(u)),h.push("callback=initMap"),"https://maps.googleapis.com/maps/api/js?".concat(h.join("&"))}var kA=!1;function DA(){return(0,Ne.jsx)("div",{children:"Loading..."})}var OA,UA={id:"script-loader",version:"weekly"},FA=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.check=(0,t.createRef)(),n.state={loaded:!1},n.cleanupCallback=function(){delete window.google.maps,n.injectScript()},n.isCleaningUp=function(){return mA(n,void 0,void 0,(function(){function e(e){if(kA){if(RA)var t=window.setInterval((function(){kA||(window.clearInterval(t),e())}),1)}else e()}return gA(this,(function(t){return[2,new Promise(e)]}))}))},n.cleanup=function(){kA=!0;var e=document.getElementById(n.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter((function(e){return"string"===typeof e.src&&e.src.includes("maps.googleapis")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("link")).filter((function(e){return"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"===e.href})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)})),Array.prototype.slice.call(document.getElementsByTagName("style")).filter((function(e){return void 0!==e.innerText&&e.innerText.length>0&&e.innerText.includes(".gm-")})).forEach((function(e){e.parentNode&&e.parentNode.removeChild(e)}))},n.injectScript=function(){n.props.preventGoogleFontsLoading&&PA(),bA(!!n.props.id,'LoadScript requires "id" prop to be a string: %s',n.props.id),LA({id:n.props.id,nonce:n.props.nonce,url:NA(n.props)}).then((function(){n.props.onLoad&&n.props.onLoad(),n.setState((function(){return{loaded:!0}}))})).catch((function(e){n.props.onError&&n.props.onError(e),console.error("\n          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(n.props.googleMapsApiKey||"-",") or Client ID (").concat(n.props.googleMapsClientId||"-",") to <LoadScript />\n          Otherwise it is a Network issue.\n        "))}))},n}return dA(n,e),n.prototype.componentDidMount=function(){if(RA){if(window.google&&window.google.maps&&!kA)return void console.error("google api is already presented");this.isCleaningUp().then(this.injectScript).catch((function(e){console.error("Error at injecting script after cleaning up: ",e)}))}},n.prototype.componentDidUpdate=function(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),RA&&e.language!==this.props.language&&(this.cleanup(),this.setState((function(){return{loaded:!1}}),this.cleanupCallback))},n.prototype.componentWillUnmount=function(){var e=this;if(RA){this.cleanup();window.setTimeout((function(){e.check.current||(delete window.google,kA=!1)}),1),this.props.onUnmount&&this.props.onUnmount()}},n.prototype.render=function(){return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||(0,Ne.jsx)(DA,{})]})},n.defaultProps=UA,n}(t.PureComponent);var BA=(0,Ne.jsx)(DA,{});(0,t.memo)((function(e){var n=e.loadingElement,r=e.onLoad,i=e.onError,o=e.onUnmount,s=e.children,a=function(e){var n=e.id,r=void 0===n?UA.id:n,i=e.version,o=void 0===i?UA.version:i,s=e.nonce,a=e.googleMapsApiKey,l=e.googleMapsClientId,c=e.language,u=e.region,h=e.libraries,d=e.preventGoogleFontsLoading,p=e.channel,f=e.mapIds,m=e.authReferrerPolicy,g=(0,t.useRef)(!1),v=(0,t.useState)(!1),y=v[0],b=v[1],_=(0,t.useState)(void 0),x=_[0],w=_[1];(0,t.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]),(0,t.useEffect)((function(){RA&&d&&PA()}),[d]),(0,t.useEffect)((function(){y&&bA(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")}),[y]);var E=NA({version:o,googleMapsApiKey:a,googleMapsClientId:l,language:c,region:u,libraries:h,channel:p,mapIds:f,authReferrerPolicy:m});(0,t.useEffect)((function(){function e(){g.current&&(b(!0),OA=E)}RA&&(window.google&&window.google.maps&&OA===E?e():LA({id:r,url:E,nonce:s}).then(e).catch((function(e){g.current&&w(e),console.warn("\n        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (".concat(a||"-",") or Client ID (").concat(l||"-",")\n        Otherwise it is a Network issue.\n      ")),console.error(e)})))}),[r,E,s]);var S=(0,t.useRef)();return(0,t.useEffect)((function(){S.current&&h!==S.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),S.current=h}),[h]),{isLoaded:y,loadError:x,url:E}}(fA(e,["loadingElement","onLoad","onError","onUnmount","children"])),l=a.isLoaded,c=a.loadError;return(0,t.useEffect)((function(){l&&"function"===typeof r&&r()}),[l,r]),(0,t.useEffect)((function(){c&&"function"===typeof i&&i(c)}),[c,i]),(0,t.useEffect)((function(){return function(){o&&o()}}),[o]),l?s:n||BA}));var jA;!function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"}(jA||(jA={}));var VA={},zA={options:function(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var n=e.options,r=e.onLoad,i=e.onUnmount,o=(0,t.useContext)(_A),s=(0,t.useState)(null),a=s[0],l=s[1];return(0,t.useEffect)((function(){null!==a&&a.setMap(o)}),[o]),(0,t.useEffect)((function(){n&&null!==a&&a.setOptions(n)}),[a,n]),(0,t.useEffect)((function(){var e=new google.maps.TrafficLayer(pA(pA({},n||{}),{map:o}));return l(e),r&&r(e),function(){null!==a&&(i&&i(a),a.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={trafficLayer:null},t.setTrafficLayerCallback=function(){null!==t.state.trafficLayer&&t.props.onLoad&&t.props.onLoad(t.state.trafficLayer)},t.registeredEvents=[],t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.TrafficLayer(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:zA,eventMap:VA,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{trafficLayer:e}}),this.setTrafficLayerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.trafficLayer&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:zA,eventMap:VA,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))},t.prototype.componentWillUnmount=function(){null!==this.state.trafficLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),SA(this.registeredEvents),this.state.trafficLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);(0,t.memo)((function(e){var n=e.onLoad,r=e.onUnmount,i=(0,t.useContext)(_A),o=(0,t.useState)(null),s=o[0],a=o[1];return(0,t.useEffect)((function(){null!==s&&s.setMap(i)}),[i]),(0,t.useEffect)((function(){var e=new google.maps.BicyclingLayer;return a(e),e.setMap(i),n&&n(e),function(){null!==e&&(r&&r(e),e.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={bicyclingLayer:null},t.setBicyclingLayerCallback=function(){null!==t.state.bicyclingLayer&&(t.state.bicyclingLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.bicyclingLayer))},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.BicyclingLayer;this.setState((function(){return{bicyclingLayer:e}}),this.setBicyclingLayerCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.bicyclingLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);(0,t.memo)((function(e){var n=e.onLoad,r=e.onUnmount,i=(0,t.useContext)(_A),o=(0,t.useState)(null),s=o[0],a=o[1];return(0,t.useEffect)((function(){null!==s&&s.setMap(i)}),[i]),(0,t.useEffect)((function(){var e=new google.maps.TransitLayer;return a(e),e.setMap(i),n&&n(e),function(){null!==s&&(r&&r(s),s.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={transitLayer:null},t.setTransitLayerCallback=function(){null!==t.state.transitLayer&&(t.state.transitLayer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.transitLayer))},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.TransitLayer;this.setState((function(){return{transitLayer:e}}),this.setTransitLayerCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.transitLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var HA={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},GA={drawingMode:function(e,t){e.setDrawingMode(t)},options:function(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var n=e.options,r=e.drawingMode,i=e.onCircleComplete,o=e.onMarkerComplete,s=e.onOverlayComplete,a=e.onPolygonComplete,l=e.onPolylineComplete,c=e.onRectangleComplete,u=e.onLoad,h=e.onUnmount,d=(0,t.useContext)(_A),p=(0,t.useState)(null),f=p[0],m=p[1],g=(0,t.useState)(null),v=g[0],y=g[1],b=(0,t.useState)(null),_=b[0],x=b[1],w=(0,t.useState)(null),E=w[0],S=w[1],A=(0,t.useState)(null),M=A[0],T=A[1],C=(0,t.useState)(null),R=C[0],L=C[1],I=(0,t.useState)(null),P=I[0],N=I[1];return(0,t.useEffect)((function(){null!==f&&f.setMap(d)}),[d]),(0,t.useEffect)((function(){n&&null!==f&&f.setOptions(n)}),[f,n]),(0,t.useEffect)((function(){null!==f&&f.setDrawingMode(null!==r&&void 0!==r?r:null)}),[f,r]),(0,t.useEffect)((function(){f&&i&&(null!==v&&google.maps.event.removeListener(v),y(google.maps.event.addListener(f,"circlecomplete",i)))}),[f,i]),(0,t.useEffect)((function(){f&&o&&(null!==_&&google.maps.event.removeListener(_),x(google.maps.event.addListener(f,"markercomplete",o)))}),[f,o]),(0,t.useEffect)((function(){f&&s&&(null!==E&&google.maps.event.removeListener(E),S(google.maps.event.addListener(f,"overlaycomplete",s)))}),[f,s]),(0,t.useEffect)((function(){f&&a&&(null!==M&&google.maps.event.removeListener(M),T(google.maps.event.addListener(f,"polygoncomplete",a)))}),[f,a]),(0,t.useEffect)((function(){f&&l&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(f,"polylinecomplete",l)))}),[f,l]),(0,t.useEffect)((function(){f&&c&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(f,"rectanglecomplete",c)))}),[f,c]),(0,t.useEffect)((function(){bA(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);var e=new google.maps.drawing.DrawingManager(pA(pA({},n||{}),{map:d}));return r&&e.setDrawingMode(r),i&&y(google.maps.event.addListener(e,"circlecomplete",i)),o&&x(google.maps.event.addListener(e,"markercomplete",o)),s&&S(google.maps.event.addListener(e,"overlaycomplete",s)),a&&T(google.maps.event.addListener(e,"polygoncomplete",a)),l&&L(google.maps.event.addListener(e,"polylinecomplete",l)),c&&N(google.maps.event.addListener(e,"rectanglecomplete",c)),m(e),u&&u(e),function(){null!==f&&(v&&google.maps.event.removeListener(v),_&&google.maps.event.removeListener(_),E&&google.maps.event.removeListener(E),M&&google.maps.event.removeListener(M),R&&google.maps.event.removeListener(R),P&&google.maps.event.removeListener(P),h&&h(f),f.setMap(null))}}),[]),null})),function(e){function t(t){var n=e.call(this,t)||this;return n.registeredEvents=[],n.state={drawingManager:null},n.setDrawingManagerCallback=function(){null!==n.state.drawingManager&&n.props.onLoad&&n.props.onLoad(n.state.drawingManager)},bA(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing),n}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.drawing.DrawingManager(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:GA,eventMap:HA,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{drawingManager:e}}),this.setDrawingManagerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.drawingManager&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:GA,eventMap:HA,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))},t.prototype.componentWillUnmount=function(){null!==this.state.drawingManager&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),SA(this.registeredEvents),this.state.drawingManager.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var WA={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},KA={animation:function(e,t){e.setAnimation(t)},clickable:function(e,t){e.setClickable(t)},cursor:function(e,t){e.setCursor(t)},draggable:function(e,t){e.setDraggable(t)},icon:function(e,t){e.setIcon(t)},label:function(e,t){e.setLabel(t)},map:function(e,t){e.setMap(t)},opacity:function(e,t){e.setOpacity(t)},options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},shape:function(e,t){e.setShape(t)},title:function(e,t){e.setTitle(t)},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},qA={};(0,t.memo)((function(e){var n=e.position,r=e.options,i=e.clusterer,o=e.noClustererRedraw,s=e.children,a=e.draggable,l=e.visible,c=e.animation,u=e.clickable,h=e.cursor,d=e.icon,p=e.label,f=e.opacity,m=e.shape,g=e.title,v=e.zIndex,y=e.onClick,b=e.onDblClick,_=e.onDrag,x=e.onDragEnd,w=e.onDragStart,E=e.onMouseOut,S=e.onMouseOver,A=e.onMouseUp,M=e.onMouseDown,T=e.onRightClick,C=e.onClickableChanged,R=e.onCursorChanged,L=e.onAnimationChanged,I=e.onDraggableChanged,P=e.onFlatChanged,N=e.onIconChanged,k=e.onPositionChanged,D=e.onShapeChanged,O=e.onTitleChanged,U=e.onVisibleChanged,F=e.onZindexChanged,B=e.onLoad,j=e.onUnmount,V=(0,t.useContext)(_A),z=(0,t.useState)(null),H=z[0],G=z[1],W=(0,t.useState)(null),K=W[0],q=W[1],X=(0,t.useState)(null),Q=X[0],Y=X[1],J=(0,t.useState)(null),Z=J[0],$=J[1],ee=(0,t.useState)(null),te=ee[0],ne=ee[1],re=(0,t.useState)(null),ie=re[0],oe=re[1],se=(0,t.useState)(null),ae=se[0],le=se[1],ce=(0,t.useState)(null),ue=ce[0],he=ce[1],de=(0,t.useState)(null),pe=de[0],fe=de[1],me=(0,t.useState)(null),ge=me[0],ve=me[1],ye=(0,t.useState)(null),be=ye[0],_e=ye[1],xe=(0,t.useState)(null),we=xe[0],Ee=xe[1],Se=(0,t.useState)(null),Ae=Se[0],Me=Se[1],Te=(0,t.useState)(null),Ce=Te[0],Re=Te[1],Le=(0,t.useState)(null),Ie=Le[0],Pe=Le[1],ke=(0,t.useState)(null),De=ke[0],Oe=ke[1],Ue=(0,t.useState)(null),Fe=Ue[0],Be=Ue[1],je=(0,t.useState)(null),Ve=je[0],ze=je[1],He=(0,t.useState)(null),Ge=He[0],We=He[1],Ke=(0,t.useState)(null),qe=Ke[0],Xe=Ke[1],Qe=(0,t.useState)(null),Ye=Qe[0],Je=Qe[1],Ze=(0,t.useState)(null),$e=Ze[0],et=Ze[1];(0,t.useEffect)((function(){null!==H&&H.setMap(V)}),[V]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==H&&H.setOptions(r)}),[H,r]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==H&&H.setDraggable(a)}),[H,a]),(0,t.useEffect)((function(){n&&null!==H&&H.setPosition(n)}),[H,n]),(0,t.useEffect)((function(){"undefined"!==typeof l&&null!==H&&H.setVisible(l)}),[H,l]),(0,t.useEffect)((function(){null===H||void 0===H||H.setAnimation(c)}),[H,c]),(0,t.useEffect)((function(){H&&void 0!==u&&H.setClickable(u)}),[H,u]),(0,t.useEffect)((function(){H&&void 0!==h&&H.setCursor(h)}),[H,h]),(0,t.useEffect)((function(){H&&void 0!==d&&H.setIcon(d)}),[H,d]),(0,t.useEffect)((function(){H&&void 0!==p&&H.setLabel(p)}),[H,p]),(0,t.useEffect)((function(){H&&void 0!==f&&H.setOpacity(f)}),[H,f]),(0,t.useEffect)((function(){H&&void 0!==m&&H.setShape(m)}),[H,m]),(0,t.useEffect)((function(){H&&void 0!==g&&H.setTitle(g)}),[H,g]),(0,t.useEffect)((function(){H&&void 0!==v&&H.setZIndex(v)}),[H,v]),(0,t.useEffect)((function(){H&&b&&(null!==K&&google.maps.event.removeListener(K),q(google.maps.event.addListener(H,"dblclick",b)))}),[b]),(0,t.useEffect)((function(){H&&x&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(H,"dragend",x)))}),[x]),(0,t.useEffect)((function(){H&&w&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(H,"dragstart",w)))}),[w]),(0,t.useEffect)((function(){H&&M&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(H,"mousedown",M)))}),[M]),(0,t.useEffect)((function(){H&&E&&(null!==ie&&google.maps.event.removeListener(ie),oe(google.maps.event.addListener(H,"mouseout",E)))}),[E]),(0,t.useEffect)((function(){H&&S&&(null!==ae&&google.maps.event.removeListener(ae),le(google.maps.event.addListener(H,"mouseover",S)))}),[S]),(0,t.useEffect)((function(){H&&A&&(null!==ue&&google.maps.event.removeListener(ue),he(google.maps.event.addListener(H,"mouseup",A)))}),[A]),(0,t.useEffect)((function(){H&&T&&(null!==pe&&google.maps.event.removeListener(pe),fe(google.maps.event.addListener(H,"rightclick",T)))}),[T]),(0,t.useEffect)((function(){H&&y&&(null!==ge&&google.maps.event.removeListener(ge),ve(google.maps.event.addListener(H,"click",y)))}),[y]),(0,t.useEffect)((function(){H&&_&&(null!==be&&google.maps.event.removeListener(be),_e(google.maps.event.addListener(H,"drag",_)))}),[_]),(0,t.useEffect)((function(){H&&C&&(null!==we&&google.maps.event.removeListener(we),Ee(google.maps.event.addListener(H,"clickable_changed",C)))}),[C]),(0,t.useEffect)((function(){H&&R&&(null!==Ae&&google.maps.event.removeListener(Ae),Me(google.maps.event.addListener(H,"cursor_changed",R)))}),[R]),(0,t.useEffect)((function(){H&&L&&(null!==Ce&&google.maps.event.removeListener(Ce),Re(google.maps.event.addListener(H,"animation_changed",L)))}),[L]),(0,t.useEffect)((function(){H&&I&&(null!==Ie&&google.maps.event.removeListener(Ie),Pe(google.maps.event.addListener(H,"draggable_changed",I)))}),[I]),(0,t.useEffect)((function(){H&&P&&(null!==De&&google.maps.event.removeListener(De),Oe(google.maps.event.addListener(H,"flat_changed",P)))}),[P]),(0,t.useEffect)((function(){H&&N&&(null!==Fe&&google.maps.event.removeListener(Fe),Be(google.maps.event.addListener(H,"icon_changed",N)))}),[N]),(0,t.useEffect)((function(){H&&k&&(null!==Ve&&google.maps.event.removeListener(Ve),ze(google.maps.event.addListener(H,"position_changed",k)))}),[k]),(0,t.useEffect)((function(){H&&D&&(null!==Ge&&google.maps.event.removeListener(Ge),We(google.maps.event.addListener(H,"shape_changed",D)))}),[D]),(0,t.useEffect)((function(){H&&O&&(null!==qe&&google.maps.event.removeListener(qe),Xe(google.maps.event.addListener(H,"title_changed",O)))}),[O]),(0,t.useEffect)((function(){H&&U&&(null!==Ye&&google.maps.event.removeListener(Ye),Je(google.maps.event.addListener(H,"visible_changed",U)))}),[U]),(0,t.useEffect)((function(){H&&F&&(null!==$e&&google.maps.event.removeListener($e),et(google.maps.event.addListener(H,"zindex_changed",F)))}),[F]),(0,t.useEffect)((function(){var e=pA(pA(pA({},r||qA),i?qA:{map:V}),{position:n}),t=new google.maps.Marker(e);return i?i.addMarker(t,!!o):t.setMap(V),n&&t.setPosition(n),"undefined"!==typeof l&&t.setVisible(l),"undefined"!==typeof a&&t.setDraggable(a),"undefined"!==typeof u&&t.setClickable(u),"string"===typeof h&&t.setCursor(h),d&&t.setIcon(d),"undefined"!==typeof p&&t.setLabel(p),"undefined"!==typeof f&&t.setOpacity(f),m&&t.setShape(m),"string"===typeof g&&t.setTitle(g),"number"===typeof v&&t.setZIndex(v),b&&q(google.maps.event.addListener(t,"dblclick",b)),x&&Y(google.maps.event.addListener(t,"dragend",x)),w&&$(google.maps.event.addListener(t,"dragstart",w)),M&&ne(google.maps.event.addListener(t,"mousedown",M)),E&&oe(google.maps.event.addListener(t,"mouseout",E)),S&&le(google.maps.event.addListener(t,"mouseover",S)),A&&he(google.maps.event.addListener(t,"mouseup",A)),T&&fe(google.maps.event.addListener(t,"rightclick",T)),y&&ve(google.maps.event.addListener(t,"click",y)),_&&_e(google.maps.event.addListener(t,"drag",_)),C&&Ee(google.maps.event.addListener(t,"clickable_changed",C)),R&&Me(google.maps.event.addListener(t,"cursor_changed",R)),L&&Re(google.maps.event.addListener(t,"animation_changed",L)),I&&Pe(google.maps.event.addListener(t,"draggable_changed",I)),P&&Oe(google.maps.event.addListener(t,"flat_changed",P)),N&&Be(google.maps.event.addListener(t,"icon_changed",N)),k&&ze(google.maps.event.addListener(t,"position_changed",k)),D&&We(google.maps.event.addListener(t,"shape_changed",D)),O&&Xe(google.maps.event.addListener(t,"title_changed",O)),U&&Je(google.maps.event.addListener(t,"visible_changed",U)),F&&et(google.maps.event.addListener(t,"zindex_changed",F)),G(t),B&&B(t),function(){null!==K&&google.maps.event.removeListener(K),null!==Q&&google.maps.event.removeListener(Q),null!==Z&&google.maps.event.removeListener(Z),null!==te&&google.maps.event.removeListener(te),null!==ie&&google.maps.event.removeListener(ie),null!==ae&&google.maps.event.removeListener(ae),null!==ue&&google.maps.event.removeListener(ue),null!==pe&&google.maps.event.removeListener(pe),null!==ge&&google.maps.event.removeListener(ge),null!==we&&google.maps.event.removeListener(we),null!==Ae&&google.maps.event.removeListener(Ae),null!==Ce&&google.maps.event.removeListener(Ce),null!==Ie&&google.maps.event.removeListener(Ie),null!==De&&google.maps.event.removeListener(De),null!==Fe&&google.maps.event.removeListener(Fe),null!==Ve&&google.maps.event.removeListener(Ve),null!==qe&&google.maps.event.removeListener(qe),null!==Ye&&google.maps.event.removeListener(Ye),null!==$e&&google.maps.event.removeListener($e),j&&j(t),i?i.removeMarker(t,!!o):t&&t.setMap(null)}}),[]);var tt=(0,t.useMemo)((function(){return s?t.Children.map(s,(function(e){if(!(0,t.isValidElement)(e))return e;var n=e;return(0,t.cloneElement)(n,{anchor:H})})):null}),[s,H]);return(0,Ne.jsx)(Ne.Fragment,{children:tt})||null}));var XA=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t}return dA(n,e),n.prototype.componentDidMount=function(){var e=pA(pA(pA({},this.props.options||qA),this.props.clusterer?qA:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(e),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=AA({updaterMap:KA,eventMap:WA,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)},n.prototype.componentDidUpdate=function(e){this.marker&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:KA,eventMap:WA,prevProps:e,nextProps:this.props,instance:this.marker}))},n.prototype.componentWillUnmount=function(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),SA(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))},n.prototype.render=function(){var e=this,n=null;return this.props.children&&(n=t.Children.map(this.props.children,(function(n){if(!(0,t.isValidElement)(n))return n;var r=n;return(0,t.cloneElement)(r,{anchor:e.marker})}))),n||null},n.contextType=_A,n}(t.PureComponent),QA=function(){function e(t,n){t.getClusterer().extend(e,google.maps.OverlayView),this.cluster=t,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(t.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return e.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},e.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},e.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var t=this.cluster.getClusterer();if(google.maps.event.trigger(t,"click",this.cluster),google.maps.event.trigger(t,"clusterclick",this.cluster),t.getZoomOnClick()){var n=t.getMaxZoom(),r=this.cluster.getBounds(),i=t.getMap();null!==i&&"fitBounds"in i&&i.fitBounds(r),this.timeOut=window.setTimeout((function(){var e=t.getMap();if(null!==e){"fitBounds"in e&&e.fitBounds(r);var i=e.getZoom()||0;null!==n&&i>n&&e.setZoom(n+1)}}),100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},e.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},e.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},e.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),null===(e=this.getPanes())||void 0===e||e.overlayMouseTarget.appendChild(this.div);var t=this.getMap();null!==t&&(this.boundsChangedListener=google.maps.event.addListener(t,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),null!==this.boundsChangedListener&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),null!==this.timeOut&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},e.prototype.draw=function(){if(this.visible&&null!==this.div&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=null!==e?"".concat(e.y,"px"):"0",this.div.style.left=null!==e?"".concat(e.x,"px"):"0"}},e.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},e.prototype.show=function(){var e,t,n,r,i,o;if(this.div&&this.center){var s=null===this.sums||"undefined"===typeof this.sums.title||""===this.sums.title?this.cluster.getClusterer().getTitle():this.sums.title,a=this.backgroundPosition.split(" "),l=parseInt((null===(e=a[0])||void 0===e?void 0:e.replace(/^\s+|\s+$/g,""))||"0",10),c=parseInt((null===(t=a[1])||void 0===t?void 0:t.replace(/^\s+|\s+$/g,""))||"0",10),u=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(null!==u?"".concat(u.y,"px"):"0","; left: ").concat(null!==u?"".concat(u.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var h=document.createElement("img");h.alt=s,h.src=this.url,h.width=this.width,h.height=this.height,h.setAttribute("style","position: absolute; top: ".concat(c,"px; left: ").concat(l,"px")),this.cluster.getClusterer().enableRetinaIcons||(h.style.clip="rect(-".concat(c,"px, -").concat(l+this.width,"px, -").concat(c+this.height,", -").concat(l,")"));var d=document.createElement("div");d.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),(null===(n=this.sums)||void 0===n?void 0:n.text)&&(d.innerText="".concat(null===(r=this.sums)||void 0===r?void 0:r.text)),(null===(i=this.sums)||void 0===i?void 0:i.html)&&(d.innerHTML="".concat(null===(o=this.sums)||void 0===o?void 0:o.html)),this.div.innerHTML="",this.div.appendChild(h),this.div.appendChild(d),this.div.title=s,this.div.style.display=""}this.visible=!0},e.prototype.useStyle=function(e){this.sums=e;var t=this.cluster.getClusterer().getStyles(),n=t[Math.min(t.length-1,Math.max(0,e.index-1))];n&&(this.url=n.url,this.height=n.height,this.width=n.width,n.className&&(this.className="".concat(this.clusterClassName," ").concat(n.className)),this.anchorText=n.anchorText||[0,0],this.anchorIcon=n.anchorIcon||[this.height/2,this.width/2],this.textColor=n.textColor||"black",this.textSize=n.textSize||11,this.textDecoration=n.textDecoration||"none",this.fontWeight=n.fontWeight||"bold",this.fontStyle=n.fontStyle||"normal",this.fontFamily=n.fontFamily||"Arial,sans-serif",this.backgroundPosition=n.backgroundPosition||"0 0")},e.prototype.setCenter=function(e){this.center=e},e.prototype.getPosFromLatLng=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return null!==t&&(t.x-=this.anchorIcon[1],t.y-=this.anchorIcon[0]),t},e}(),YA=function(){function e(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new QA(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return e.prototype.getSize=function(){return this.markers.length},e.prototype.getMarkers=function(){return this.markers},e.prototype.getCenter=function(){return this.center},e.prototype.getMap=function(){return this.map},e.prototype.getClusterer=function(){return this.markerClusterer},e.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),t=0,n=this.getMarkers();t<n.length;t++){var r=n[t].getPosition();r&&e.extend(r)}return e},e.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},e.prototype.addMarker=function(e){var t,n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter&&(n=e.getPosition())){var r=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(r-1)+n.lat())/r,(this.center.lng()*(r-1)+n.lng())/r),this.calculateBounds()}}else(n=e.getPosition())&&(this.center=n,this.calculateBounds());e.isAdded=!0,this.markers.push(e);var i=this.markers.length,o=this.markerClusterer.getMaxZoom(),s=null===(t=this.map)||void 0===t?void 0:t.getZoom();if(null!==o&&"undefined"!==typeof s&&s>o)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var a=0,l=this.markers;a<l.length;a++){l[a].setMap(null)}else e.setMap(null);return!0},e.prototype.isMarkerInClusterBounds=function(e){if(null!==this.bounds){var t=e.getPosition();if(t)return this.bounds.contains(t)}return!1},e.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},e.prototype.updateIcon=function(){var e,t=this.markers.length,n=this.markerClusterer.getMaxZoom(),r=null===(e=this.map)||void 0===e?void 0:e.getZoom();null!==n&&"undefined"!==typeof r&&r>n||t<this.minClusterSize?this.clusterIcon.hide():(this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show())},e.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var t=0;t<this.markers.length;t++)if(e===this.markers[t])return!0;return!1},e}();function JA(e,t){var n=e.length,r=n.toString().length,i=Math.min(r,t);return{text:n.toString(),index:i,title:""}}var ZA=[53,56,66,78,90],$A=function(){function e(t,n,r){void 0===n&&(n=[]),void 0===r&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend=this.extend.bind(this),this.extend(e,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,void 0!==r.zoomOnClick&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,void 0!==r.averageCenter&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,void 0!==r.ignoreHidden&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,void 0!==r.enableRetinaIcons&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",this.imageExtension=r.imageExtension||"png",this.imageSizes=r.imageSizes||ZA,this.calculator=r.calculator||JA,this.batchSize=r.batchSize||2e3,this.batchSizeIE=r.batchSizeIE||500,this.clusterClass=r.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(t)}return e.prototype.onZoomChanged=function(){var e,t;this.resetViewport(!1),(null===(e=this.getMap())||void 0===e?void 0:e.getZoom())!==(this.get("minZoom")||0)&&(null===(t=this.getMap())||void 0===t?void 0:t.getZoom())!==this.get("maxZoom")||google.maps.event.trigger(this,"idle")},e.prototype.onIdle=function(){this.redraw()},e.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),null!==e&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},e.prototype.onRemove=function(){for(var e=0,t=this.markers;e<t.length;e++){var n=t[e];n.getMap()!==this.activeMap&&n.setMap(this.activeMap)}for(var r=0,i=this.clusters;r<i.length;r++){i[r].remove()}this.clusters=[];for(var o=0,s=this.listeners;o<s.length;o++){var a=s[o];google.maps.event.removeListener(a)}this.listeners=[],this.activeMap=null,this.ready=!1},e.prototype.draw=function(){},e.prototype.getMap=function(){return null},e.prototype.getPanes=function(){return null},e.prototype.getProjection=function(){return{fromContainerPixelToLatLng:function(){return null},fromDivPixelToLatLng:function(){return null},fromLatLngToContainerPixel:function(){return null},fromLatLngToDivPixel:function(){return null},getVisibleRegion:function(){return null},getWorldWidth:function(){return 0}}},e.prototype.setMap=function(){},e.prototype.addListener=function(){return{remove:function(){}}},e.prototype.bindTo=function(){},e.prototype.get=function(){},e.prototype.notify=function(){},e.prototype.set=function(){},e.prototype.setValues=function(){},e.prototype.unbind=function(){},e.prototype.unbindAll=function(){},e.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e]||0,width:this.imageSizes[e]||0})},e.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),t=new google.maps.LatLngBounds,n=0,r=e;n<r.length;n++){var i=r[n].getPosition();i&&t.extend(i)}var o=this.getMap();null!==o&&"fitBounds"in o&&o.fitBounds(t)},e.prototype.getGridSize=function(){return this.gridSize},e.prototype.setGridSize=function(e){this.gridSize=e},e.prototype.getMinimumClusterSize=function(){return this.minClusterSize},e.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.setMaxZoom=function(e){this.maxZoom=e},e.prototype.getStyles=function(){return this.styles},e.prototype.setStyles=function(e){this.styles=e},e.prototype.getTitle=function(){return this.title},e.prototype.setTitle=function(e){this.title=e},e.prototype.getZoomOnClick=function(){return this.zoomOnClick},e.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},e.prototype.getAverageCenter=function(){return this.averageCenter},e.prototype.setAverageCenter=function(e){this.averageCenter=e},e.prototype.getIgnoreHidden=function(){return this.ignoreHidden},e.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},e.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},e.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},e.prototype.getImageExtension=function(){return this.imageExtension},e.prototype.setImageExtension=function(e){this.imageExtension=e},e.prototype.getImagePath=function(){return this.imagePath},e.prototype.setImagePath=function(e){this.imagePath=e},e.prototype.getImageSizes=function(){return this.imageSizes},e.prototype.setImageSizes=function(e){this.imageSizes=e},e.prototype.getCalculator=function(){return this.calculator},e.prototype.setCalculator=function(e){this.calculator=e},e.prototype.getBatchSizeIE=function(){return this.batchSizeIE},e.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},e.prototype.getClusterClass=function(){return this.clusterClass},e.prototype.setClusterClass=function(e){this.clusterClass=e},e.prototype.getMarkers=function(){return this.markers},e.prototype.getTotalMarkers=function(){return this.markers.length},e.prototype.getClusters=function(){return this.clusters},e.prototype.getTotalClusters=function(){return this.clusters.length},e.prototype.addMarker=function(e,t){this.pushMarkerTo(e),t||this.redraw()},e.prototype.addMarkers=function(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=e[n];r&&this.pushMarkerTo(r)}t||this.redraw()},e.prototype.pushMarkerTo=function(e){var t=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",(function(){t.ready&&(e.isAdded=!1,t.repaint())})),e.isAdded=!1,this.markers.push(e)},e.prototype.removeMarker_=function(e){var t=-1;if(this.markers.indexOf)t=this.markers.indexOf(e);else for(var n=0;n<this.markers.length;n++)if(e===this.markers[n]){t=n;break}return-1!==t&&(e.setMap(null),this.markers.splice(t,1),!0)},e.prototype.removeMarker=function(e,t){var n=this.removeMarker_(e);return!t&&n&&this.repaint(),n},e.prototype.removeMarkers=function(e,t){for(var n=!1,r=0,i=e;r<i.length;r++){var o=i[r];n=n||this.removeMarker_(o)}return!t&&n&&this.repaint(),n},e.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},e.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout((function(){for(var t=0,n=e;t<n.length;t++){n[t].remove()}}),0)},e.prototype.getExtendedBounds=function(e){var t=this.getProjection(),n=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));null!==n&&(n.x+=this.gridSize,n.y-=this.gridSize);var r=t.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(null!==r&&(r.x-=this.gridSize,r.y+=this.gridSize),null!==n){var i=t.fromDivPixelToLatLng(n);null!==i&&e.extend(i)}if(null!==r){var o=t.fromDivPixelToLatLng(r);null!==o&&e.extend(o)}return e},e.prototype.redraw=function(){this.createClusters(0)},e.prototype.resetViewport=function(e){for(var t=0,n=this.clusters;t<n.length;t++){n[t].remove()}this.clusters=[];for(var r=0,i=this.markers;r<i.length;r++){var o=i[r];o.isAdded=!1,e&&o.setMap(null)}},e.prototype.distanceBetweenPoints=function(e,t){var n=(t.lat()-e.lat())*Math.PI/180,r=(t.lng()-e.lng())*Math.PI/180,i=Math.sin(n/2)*Math.sin(n/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(r/2)*Math.sin(r/2);return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371},e.prototype.isMarkerInBounds=function(e,t){var n=e.getPosition();return!!n&&t.contains(n)},e.prototype.addToClosestCluster=function(e){for(var t,n=4e4,r=null,i=0,o=this.clusters;i<o.length;i++){var s=(t=o[i]).getCenter(),a=e.getPosition();if(s&&a){var l=this.distanceBetweenPoints(s,a);l<n&&(n=l,r=t)}}r&&r.isMarkerInClusterBounds(e)?r.addMarker(e):((t=new YA(this)).addMarker(e),this.clusters.push(t))},e.prototype.createClusters=function(e){var t=this;if(this.ready){0===e&&(google.maps.event.trigger(this,"clusteringbegin",this),null!==this.timerRefStatic&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var n=this.getMap(),r=(null!==n&&"getBounds"in n?n.getBounds():null),i=((null===n||void 0===n?void 0:n.getZoom())||0)>3?new google.maps.LatLngBounds(null===r||void 0===r?void 0:r.getSouthWest(),null===r||void 0===r?void 0:r.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),o=this.getExtendedBounds(i),s=Math.min(e+this.batchSize,this.markers.length),a=e;a<s;a++){var l=this.markers[a];l&&!l.isAdded&&this.isMarkerInBounds(l,o)&&(!this.ignoreHidden||this.ignoreHidden&&l.getVisible())&&this.addToClosestCluster(l)}if(s<this.markers.length)this.timerRefStatic=window.setTimeout((function(){t.createClusters(s)}),0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var c=0,u=this.clusters;c<u.length;c++){u[c].updateIcon()}}}},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){var n=t;this.prototype[n]=e.prototype[n]}return this}.apply(e,[t])},e}(),eM={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},tM={averageCenter:function(e,t){e.setAverageCenter(t)},batchSizeIE:function(e,t){e.setBatchSizeIE(t)},calculator:function(e,t){e.setCalculator(t)},clusterClass:function(e,t){e.setClusterClass(t)},enableRetinaIcons:function(e,t){e.setEnableRetinaIcons(t)},gridSize:function(e,t){e.setGridSize(t)},ignoreHidden:function(e,t){e.setIgnoreHidden(t)},imageExtension:function(e,t){e.setImageExtension(t)},imagePath:function(e,t){e.setImagePath(t)},imageSizes:function(e,t){e.setImageSizes(t)},maxZoom:function(e,t){e.setMaxZoom(t)},minimumClusterSize:function(e,t){e.setMinimumClusterSize(t)},styles:function(e,t){e.setStyles(t)},title:function(e,t){e.setTitle(t)},zoomOnClick:function(e,t){e.setZoomOnClick(t)}},nM={};(0,t.memo)((function(e){var n=e.children,r=e.options,i=e.averageCenter,o=e.batchSizeIE,s=e.calculator,a=e.clusterClass,l=e.enableRetinaIcons,c=e.gridSize,u=e.ignoreHidden,h=e.imageExtension,d=e.imagePath,p=e.imageSizes,f=e.maxZoom,m=e.minimumClusterSize,g=e.styles,v=e.title,y=e.zoomOnClick,b=e.onClick,_=e.onClusteringBegin,x=e.onClusteringEnd,w=e.onMouseOver,E=e.onMouseOut,S=e.onLoad,A=e.onUnmount,M=(0,t.useState)(null),T=M[0],C=M[1],R=(0,t.useContext)(_A),L=(0,t.useState)(null),I=L[0],P=L[1],N=(0,t.useState)(null),k=N[0],D=N[1],O=(0,t.useState)(null),U=O[0],F=O[1],B=(0,t.useState)(null),j=B[0],V=B[1],z=(0,t.useState)(null),H=z[0],G=z[1];return(0,t.useEffect)((function(){T&&E&&(null!==j&&google.maps.event.removeListener(j),V(google.maps.event.addListener(T,eM.onMouseOut,E)))}),[E]),(0,t.useEffect)((function(){T&&w&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(T,eM.onMouseOver,w)))}),[w]),(0,t.useEffect)((function(){T&&b&&(null!==I&&google.maps.event.removeListener(I),P(google.maps.event.addListener(T,eM.onClick,b)))}),[b]),(0,t.useEffect)((function(){T&&_&&(null!==k&&google.maps.event.removeListener(k),D(google.maps.event.addListener(T,eM.onClusteringBegin,_)))}),[_]),(0,t.useEffect)((function(){T&&x&&(null!==U&&google.maps.event.removeListener(U),D(google.maps.event.addListener(T,eM.onClusteringEnd,x)))}),[x]),(0,t.useEffect)((function(){"undefined"!==typeof i&&null!==T&&tM.averageCenter(T,i)}),[T,i]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==T&&tM.batchSizeIE(T,o)}),[T,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==T&&tM.calculator(T,s)}),[T,s]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==T&&tM.clusterClass(T,a)}),[T,a]),(0,t.useEffect)((function(){"undefined"!==typeof l&&null!==T&&tM.enableRetinaIcons(T,l)}),[T,l]),(0,t.useEffect)((function(){"undefined"!==typeof c&&null!==T&&tM.gridSize(T,c)}),[T,c]),(0,t.useEffect)((function(){"undefined"!==typeof u&&null!==T&&tM.ignoreHidden(T,u)}),[T,u]),(0,t.useEffect)((function(){"undefined"!==typeof h&&null!==T&&tM.imageExtension(T,h)}),[T,h]),(0,t.useEffect)((function(){"undefined"!==typeof d&&null!==T&&tM.imagePath(T,d)}),[T,d]),(0,t.useEffect)((function(){"undefined"!==typeof p&&null!==T&&tM.imageSizes(T,p)}),[T,p]),(0,t.useEffect)((function(){"undefined"!==typeof f&&null!==T&&tM.maxZoom(T,f)}),[T,f]),(0,t.useEffect)((function(){"undefined"!==typeof m&&null!==T&&tM.minimumClusterSize(T,m)}),[T,m]),(0,t.useEffect)((function(){"undefined"!==typeof g&&null!==T&&tM.styles(T,g)}),[T,g]),(0,t.useEffect)((function(){"undefined"!==typeof v&&null!==T&&tM.title(T,v)}),[T,v]),(0,t.useEffect)((function(){"undefined"!==typeof y&&null!==T&&tM.zoomOnClick(T,y)}),[T,y]),(0,t.useEffect)((function(){if(R){var e=pA({},r||nM),t=new $A(R,[],e);return i&&tM.averageCenter(t,i),o&&tM.batchSizeIE(t,o),s&&tM.calculator(t,s),a&&tM.clusterClass(t,a),l&&tM.enableRetinaIcons(t,l),c&&tM.gridSize(t,c),u&&tM.ignoreHidden(t,u),h&&tM.imageExtension(t,h),d&&tM.imagePath(t,d),p&&tM.imageSizes(t,p),f&&tM.maxZoom(t,f),m&&tM.minimumClusterSize(t,m),g&&tM.styles(t,g),v&&tM.title(t,v),y&&tM.zoomOnClick(t,y),E&&V(google.maps.event.addListener(t,eM.onMouseOut,E)),w&&G(google.maps.event.addListener(t,eM.onMouseOver,w)),b&&P(google.maps.event.addListener(t,eM.onClick,b)),_&&D(google.maps.event.addListener(t,eM.onClusteringBegin,_)),x&&F(google.maps.event.addListener(t,eM.onClusteringEnd,x)),C(t),S&&S(t),function(){null!==j&&google.maps.event.removeListener(j),null!==H&&google.maps.event.removeListener(H),null!==I&&google.maps.event.removeListener(I),null!==k&&google.maps.event.removeListener(k),null!==U&&google.maps.event.removeListener(U),A&&A(t)}}}),[]),null!==T&&n(T)||null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={markerClusterer:null},t.setClustererCallback=function(){null!==t.state.markerClusterer&&t.props.onLoad&&t.props.onLoad(t.state.markerClusterer)},t}dA(t,e),t.prototype.componentDidMount=function(){if(this.context){var e=new $A(this.context,[],this.props.options);this.registeredEvents=AA({updaterMap:tM,eventMap:eM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{markerClusterer:e}}),this.setClustererCallback)}},t.prototype.componentDidUpdate=function(e){this.state.markerClusterer&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:tM,eventMap:eM,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))},t.prototype.componentWillUnmount=function(){null!==this.state.markerClusterer&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),SA(this.registeredEvents),this.state.markerClusterer.setMap(null))},t.prototype.render=function(){return null!==this.state.markerClusterer?this.props.children(this.state.markerClusterer):null},t.contextType=_A}(t.PureComponent);function rM(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}var iM=function(){function e(t){void 0===t&&(t={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(e,google.maps.OverlayView),this.content=t.content||"",this.disableAutoPan=t.disableAutoPan||!1,this.maxWidth=t.maxWidth||0,this.pixelOffset=t.pixelOffset||new google.maps.Size(0,0),this.position=t.position||new google.maps.LatLng(0,0),this.zIndex=t.zIndex||null,this.boxClass=t.boxClass||"infoBox",this.boxStyle=t.boxStyle||{},this.closeBoxMargin=t.closeBoxMargin||"2px",this.closeBoxURL=t.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===t.closeBoxURL&&(this.closeBoxURL=""),this.infoBoxClearance=t.infoBoxClearance||new google.maps.Size(1,1),"undefined"===typeof t.visible&&("undefined"===typeof t.isHidden?t.visible=!0:t.visible=!t.isHidden),this.isHidden=!t.visible,this.alignBottom=t.alignBottom||!1,this.pane=t.pane||"floatPane",this.enableEventPropagation=t.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return e.prototype.createInfoBoxDiv=function(){var e=this;if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),"string"===typeof this.content?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var t=this.getPanes();if(null!==t&&t[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(0!==this.maxWidth&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var n=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-n.left-n.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var r=0,i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"];r<i.length;r++){var o=i[r];this.eventListeners.push(google.maps.event.addListener(this.div,o,rM))}this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",(function(){e.div&&(e.div.style.cursor="default")})))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",(function(t){t.returnValue=!1,t.preventDefault&&t.preventDefault(),e.enableEventPropagation||rM(t)})),google.maps.event.trigger(this,"domready")}},e.prototype.getCloseBoxImg=function(){var e="";return""!==this.closeBoxURL&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},e.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&""!==this.closeBoxURL?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},e.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},e.prototype.getCloseClickHandler=function(){return this.closeClickHandler},e.prototype.panBox=function(e){if(this.div&&!e){var t=this.getMap();if(t instanceof google.maps.Map){var n=0,r=0,i=t.getBounds();i&&!i.contains(this.position)&&t.setCenter(this.position);var o=t.getDiv(),s=o.offsetWidth,a=o.offsetHeight,l=this.pixelOffset.width,c=this.pixelOffset.height,u=this.div.offsetWidth,h=this.div.offsetHeight,d=this.infoBoxClearance.width,p=this.infoBoxClearance.height,f=this.getProjection().fromLatLngToContainerPixel(this.position);null!==f&&(f.x<-l+d?n=f.x+l-d:f.x+u+l+d>s&&(n=f.x+u+l+d-s),this.alignBottom?f.y<-c+p+h?r=f.y+c-p-h:f.y+c+p>a&&(r=f.y+c+p-a):f.y<-c+p?r=f.y+c-p:f.y+h+c+p>a&&(r=f.y+h+c+p-a)),0===n&&0===r||t.panBy(n,r)}}},e.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.div.style[t]=e[t]);if(this.div.style.webkitTransform="translateZ(0)","undefined"!==typeof this.div.style.opacity&&""!==this.div.style.opacity){var n=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*n+')"',this.div.style.filter="alpha(opacity="+100*n+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",null!==this.zIndex&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},e.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var t=this.div.ownerDocument,n=t&&t.defaultView?t.defaultView.getComputedStyle(this.div,""):null;n&&(e.top=parseInt(n.borderTopWidth||"",10)||0,e.bottom=parseInt(n.borderBottomWidth||"",10)||0,e.left=parseInt(n.borderLeftWidth||"",10)||0,e.right=parseInt(n.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var r=this.div.currentStyle;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}return e},e.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},e.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection().fromLatLngToDivPixel(this.position);null!==e&&(this.div.style.left=e.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(e.y+this.pixelOffset.height)+"px":this.div.style.top=e.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},e.prototype.setOptions=function(e){void 0===e&&(e={}),"undefined"!==typeof e.boxClass&&(this.boxClass=e.boxClass,this.setBoxStyle()),"undefined"!==typeof e.boxStyle&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),"undefined"!==typeof e.content&&this.setContent(e.content),"undefined"!==typeof e.disableAutoPan&&(this.disableAutoPan=e.disableAutoPan),"undefined"!==typeof e.maxWidth&&(this.maxWidth=e.maxWidth),"undefined"!==typeof e.pixelOffset&&(this.pixelOffset=e.pixelOffset),"undefined"!==typeof e.alignBottom&&(this.alignBottom=e.alignBottom),"undefined"!==typeof e.position&&this.setPosition(e.position),"undefined"!==typeof e.zIndex&&this.setZIndex(e.zIndex),"undefined"!==typeof e.closeBoxMargin&&(this.closeBoxMargin=e.closeBoxMargin),"undefined"!==typeof e.closeBoxURL&&(this.closeBoxURL=e.closeBoxURL),"undefined"!==typeof e.infoBoxClearance&&(this.infoBoxClearance=e.infoBoxClearance),"undefined"!==typeof e.isHidden&&(this.isHidden=e.isHidden),"undefined"!==typeof e.visible&&(this.isHidden=!e.visible),"undefined"!==typeof e.enableEventPropagation&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},e.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),"string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px","string"===typeof e?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},e.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},e.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},e.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},e.prototype.getContent=function(){return this.content},e.prototype.getPosition=function(){return this.position},e.prototype.getZIndex=function(){return this.zIndex},e.prototype.getVisible=function(){var e=this.getMap();return"undefined"!==typeof e&&null!==e&&!this.isHidden},e.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},e.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},e.prototype.open=function(e,t){var n=this;t&&(this.position=t.getPosition(),this.moveListener=google.maps.event.addListener(t,"position_changed",(function(){var e=t.getPosition();n.setPosition(e)})),this.mapListener=google.maps.event.addListener(t,"map_changed",(function(){n.setMap(t.map)}))),this.setMap(e),this.div&&this.panBox()},e.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0,t=this.eventListeners;e<t.length;e++){var n=t[e];google.maps.event.removeListener(n)}this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},e.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)Object.prototype.hasOwnProperty.call(this,t)||(this.prototype[t]=e.prototype[t]);return this}.apply(e,[t])},e}(),oM={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},sM={options:function(e,t){e.setOptions(t)},position:function(e,t){t instanceof google.maps.LatLng?e.setPosition(t):e.setPosition(new google.maps.LatLng(t.lat,t.lng))},visible:function(e,t){e.setVisible(t)},zIndex:function(e,t){e.setZIndex(t)}},aM={};(0,t.memo)((function(e){var n=e.children,r=e.anchor,i=e.options,s=e.position,a=e.zIndex,l=e.onCloseClick,c=e.onDomReady,u=e.onContentChanged,h=e.onPositionChanged,d=e.onZindexChanged,p=e.onLoad,f=e.onUnmount,m=(0,t.useContext)(_A),g=(0,t.useState)(null),v=g[0],y=g[1],b=(0,t.useState)(null),_=b[0],x=b[1],w=(0,t.useState)(null),E=w[0],S=w[1],A=(0,t.useState)(null),M=A[0],T=A[1],C=(0,t.useState)(null),R=C[0],L=C[1],I=(0,t.useState)(null),P=I[0],N=I[1],k=(0,t.useRef)(null);return(0,t.useEffect)((function(){m&&null!==v&&(v.close(),r?v.open(m,r):v.getPosition()&&v.open(m))}),[m,v,r]),(0,t.useEffect)((function(){i&&null!==v&&v.setOptions(i)}),[v,i]),(0,t.useEffect)((function(){if(s&&null!==v){var e=s instanceof google.maps.LatLng?s:new google.maps.LatLng(s.lat,s.lng);v.setPosition(e)}}),[s]),(0,t.useEffect)((function(){"number"===typeof a&&null!==v&&v.setZIndex(a)}),[a]),(0,t.useEffect)((function(){v&&l&&(null!==_&&google.maps.event.removeListener(_),x(google.maps.event.addListener(v,"closeclick",l)))}),[l]),(0,t.useEffect)((function(){v&&c&&(null!==E&&google.maps.event.removeListener(E),S(google.maps.event.addListener(v,"domready",c)))}),[c]),(0,t.useEffect)((function(){v&&u&&(null!==M&&google.maps.event.removeListener(M),T(google.maps.event.addListener(v,"content_changed",u)))}),[u]),(0,t.useEffect)((function(){v&&h&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(v,"position_changed",h)))}),[h]),(0,t.useEffect)((function(){v&&d&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(v,"zindex_changed",d)))}),[d]),(0,t.useEffect)((function(){if(m){var e=i||aM,t=e.position,n=fA(e,["position"]),o=void 0;!t||t instanceof google.maps.LatLng||(o=new google.maps.LatLng(t.lat,t.lng));var s=new iM(pA(pA({},n),o?{position:o}:{}));k.current=document.createElement("div"),y(s),l&&x(google.maps.event.addListener(s,"closeclick",l)),c&&S(google.maps.event.addListener(s,"domready",c)),u&&T(google.maps.event.addListener(s,"content_changed",u)),h&&L(google.maps.event.addListener(s,"position_changed",h)),d&&N(google.maps.event.addListener(s,"zindex_changed",d)),s.setContent(k.current),r?s.open(m,r):s.getPosition()?s.open(m):bA(!1,"You must provide either an anchor or a position prop for <InfoBox>."),p&&p(s)}return function(){null!==v&&(_&&google.maps.event.removeListener(_),M&&google.maps.event.removeListener(M),E&&google.maps.event.removeListener(E),R&&google.maps.event.removeListener(R),P&&google.maps.event.removeListener(P),f&&f(v),v.close())}}),[]),k.current?(0,o.createPortal)(t.Children.only(n),k.current):null})),function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=null,t.state={infoBox:null},t.open=function(e,n){n?null!==t.context&&e.open(t.context,n):e.getPosition()?null!==t.context&&e.open(t.context):bA(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},t.setInfoBoxCallback=function(){null!==t.state.infoBox&&null!==t.containerElement&&(t.state.infoBox.setContent(t.containerElement),t.open(t.state.infoBox,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoBox))},t}dA(n,e),n.prototype.componentDidMount=function(){var e,t=this.props.options||{},n=t.position,r=fA(t,["position"]);!n||n instanceof google.maps.LatLng||(e=new google.maps.LatLng(n.lat,n.lng));var i=new iM(pA(pA({},r),e?{position:e}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=AA({updaterMap:sM,eventMap:oM,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)},n.prototype.componentDidUpdate=function(e){var t=this.state.infoBox;null!==t&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:sM,eventMap:oM,prevProps:e,nextProps:this.props,instance:t}))},n.prototype.componentWillUnmount=function(){var e=this.props.onUnmount,t=this.state.infoBox;null!==t&&(e&&e(t),SA(this.registeredEvents),t.close())},n.prototype.render=function(){return this.containerElement?(0,o.createPortal)(t.Children.only(this.props.children),this.containerElement):null},n.contextType=_A}(t.PureComponent);var lM=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!==i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!==i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!==i--;){var s=o[i];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n},cM=vA(lM);const uM=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hM{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,n]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v").concat(1,"."));const i=uM[15&n];if(!i)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[s]=new Uint32Array(e,4,1);return new hM(s,o,i,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=n,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const i=uM.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,s=e*this.IndexArrayType.BYTES_PER_ELEMENT,a=(8-s%8)%8;if(i<0)throw new Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+s+a),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+s+a,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+i]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=e,this.coords[this._pos++]=t,n}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return dM(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:i,coords:o,nodeSize:s}=this,a=[0,i.length-1,0],l=[];for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=s){for(let s=h;s<=u;s++){const a=o[2*s],c=o[2*s+1];a>=e&&a<=n&&c>=t&&c<=r&&l.push(i[s])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=n&&f>=t&&f<=r&&l.push(i[d]),(0===c?e<=p:t<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?n>=p:r>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return l}within(e,t,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:i,nodeSize:o}=this,s=[0,r.length-1,0],a=[],l=n*n;for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=o){for(let n=h;n<=u;n++)gM(i[2*n],i[2*n+1],e,t)<=l&&a.push(r[n]);continue}const d=h+u>>1,p=i[2*d],f=i[2*d+1];gM(p,f,e,t)<=l&&a.push(r[d]),(0===c?e-n<=p:t-n<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?e+n>=p:t+n>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return a}}function dM(e,t,n,r,i,o){if(i-r<=n)return;const s=r+i>>1;pM(e,t,s,r,i,o),dM(e,t,n,r,s-1,1-o),dM(e,t,n,s+1,i,1-o)}function pM(e,t,n,r,i,o){for(;i>r;){if(i-r>600){const s=i-r+1,a=n-r+1,l=Math.log(s),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(s-c)/s)*(a-s/2<0?-1:1);pM(e,t,n,Math.max(r,Math.floor(n-a*c/s+u)),Math.min(i,Math.floor(n+(s-a)*c/s+u)),o)}const s=t[2*n+o];let a=r,l=i;for(fM(e,t,r,n),t[2*i+o]>s&&fM(e,t,r,i);a<l;){for(fM(e,t,a,l),a++,l--;t[2*a+o]<s;)a++;for(;t[2*l+o]>s;)l--}t[2*r+o]===s?fM(e,t,r,l):(l++,fM(e,t,l,i)),l<=n&&(r=l+1),n<=l&&(i=l-1)}}function fM(e,t,n,r){mM(e,n,r),mM(t,2*n,2*r),mM(t,2*n+1,2*r+1)}function mM(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function gM(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}const vM={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},yM=Math.fround||(e=>t=>(e[0]=+t,e[0]))(new Float32Array(1)),bM=3,_M=5,xM=6;class wM{constructor(e){this.options=Object.assign(Object.create(vM),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:n,maxZoom:r}=this.options;t&&console.time("total time");const i="prepare ".concat(e.length," points");t&&console.time(i),this.points=e;const o=[];for(let a=0;a<e.length;a++){const t=e[a];if(!t.geometry)continue;const[n,r]=t.geometry.coordinates,i=yM(AM(n)),s=yM(MM(r));o.push(i,s,1/0,a,-1,1),this.options.reduce&&o.push(0)}let s=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(i);for(let a=r;a>=n;a--){const e=+Date.now();s=this.trees[a]=this._createTree(this._cluster(s,a)),t&&console.log("z%d: %d clusters in %dms",a,s.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let n=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let i=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)n=-180,i=180;else if(n>i){const e=this.getClusters([n,r,180,o],t),s=this.getClusters([-180,r,i,o],t);return e.concat(s)}const s=this.trees[this._limitZoom(t)],a=s.range(AM(n),MM(o),AM(i),MM(r)),l=s.data,c=[];for(const u of a){const e=this.stride*u;c.push(l[e+_M]>1?EM(l,e,this.clusterProps):this.points[l[e+bM]])}return c}getChildren(e){const t=this._getOriginId(e),n=this._getOriginZoom(e),r="No cluster with the specified id.",i=this.trees[n];if(!i)throw new Error(r);const o=i.data;if(t*this.stride>=o.length)throw new Error(r);const s=this.options.radius/(this.options.extent*Math.pow(2,n-1)),a=o[t*this.stride],l=o[t*this.stride+1],c=i.within(a,l,s),u=[];for(const h of c){const t=h*this.stride;o[t+4]===e&&u.push(o[t+_M]>1?EM(o,t,this.clusterProps):this.points[o[t+bM]])}if(0===u.length)throw new Error(r);return u}getLeaves(e,t,n){t=t||10,n=n||0;const r=[];return this._appendLeaves(r,e,t,n,0),r}getTile(e,t,n){const r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:s}=this.options,a=s/o,l=(n-a)/i,c=(n+1+a)/i,u={features:[]};return this._addTileFeatures(r.range((t-a)/i,l,(t+1+a)/i,c),r.data,t,n,i,u),0===t&&this._addTileFeatures(r.range(1-a/i,l,1,c),r.data,i,n,i,u),t===i-1&&this._addTileFeatures(r.range(0,l,a/i,c),r.data,-1,n,i,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const n=this.getChildren(e);if(t++,1!==n.length)break;e=n[0].properties.cluster_id}return t}_appendLeaves(e,t,n,r,i){const o=this.getChildren(t);for(const s of o){const t=s.properties;if(t&&t.cluster?i+t.point_count<=r?i+=t.point_count:i=this._appendLeaves(e,t.cluster_id,n,r,i):i<r?i++:e.push(s),e.length===n)break}return i}_createTree(e){const t=new hM(e.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<e.length;n+=this.stride)t.add(e[n],e[n+1]);return t.finish(),t.data=e,t}_addTileFeatures(e,t,n,r,i,o){for(const s of e){const e=s*this.stride,a=t[e+_M]>1;let l,c,u;if(a)l=SM(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const n=this.points[t[e+bM]];l=n.properties;const[r,i]=n.geometry.coordinates;c=AM(r),u=MM(i)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*i-n)),Math.round(this.options.extent*(u*i-r))]],tags:l};let d;d=a||this.options.generateId?t[e+bM]:this.points[t[e+bM]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:n,extent:r,reduce:i,minPoints:o}=this.options,s=n/(r*Math.pow(2,t)),a=e.data,l=[],c=this.stride;for(let u=0;u<a.length;u+=c){if(a[u+2]<=t)continue;a[u+2]=t;const n=a[u],r=a[u+1],h=e.within(a[u],a[u+1],s),d=a[u+_M];let p=d;for(const e of h){const n=e*c;a[n+2]>t&&(p+=a[n+_M])}if(p>d&&p>=o){let e,o=n*d,s=r*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const n of h){const r=n*c;if(a[r+2]<=t)continue;a[r+2]=t;const l=a[r+_M];o+=a[r]*l,s+=a[r+1]*l,a[r+4]=m,i&&(e||(e=this._map(a,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),i(e,this._map(a,r)))}a[u+4]=m,l.push(o/p,s/p,1/0,m,-1,p),i&&l.push(f)}else{for(let e=0;e<c;e++)l.push(a[u+e]);if(p>1)for(const e of h){const n=e*c;if(!(a[n+2]<=t)){a[n+2]=t;for(let e=0;e<c;e++)l.push(a[n+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,n){if(e[t+_M]>1){const r=this.clusterProps[e[t+xM]];return n?Object.assign({},r):r}const r=this.points[e[t+bM]].properties,i=this.options.map(r);return n&&i===r?Object.assign({},i):i}}function EM(e,t,n){return{type:"Feature",id:e[t+bM],properties:SM(e,t,n),geometry:{type:"Point",coordinates:[TM(e[t]),CM(e[t+1])]}}}function SM(e,t,n){const r=e[t+_M],i=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,o=e[t+xM],s=-1===o?{}:Object.assign({},n[o]);return Object.assign(s,{cluster:!0,cluster_id:e[t+bM],point_count:r,point_count_abbreviated:i})}function AM(e){return e/360+.5}function MM(e){const t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function TM(e){return 360*(e-.5)}function CM(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function RM(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}class LM{static isAdvancedMarkerAvailable(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}static isAdvancedMarker(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}static setMap(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}static getPosition(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(e.position.lat&&e.position.lng)return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}static getVisible(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}class IM{constructor(e){let{markers:t,position:n}=e;this.markers=t,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(0===this.markers.length&&!this._position)return;const e=new google.maps.LatLngBounds(this._position,this._position);for(const t of this.markers)e.extend(LM.getPosition(t));return e}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter((e=>LM.getVisible(e))).length}push(e){this.markers.push(e)}delete(){this.marker&&(LM.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}class PM{constructor(e){let{maxZoom:t=16}=e;this.maxZoom=t}noop(e){let{markers:t}=e;return NM(t)}}const NM=e=>e.map((e=>new IM({position:LM.getPosition(e),markers:[e]})));class kM extends PM{constructor(e){var{maxZoom:t,radius:n=60}=e,r=RM(e,["maxZoom","radius"]);super({maxZoom:t}),this.state={zoom:-1},this.superCluster=new wM(Object.assign({maxZoom:this.maxZoom,radius:n},r))}calculate(e){let t=!1;const n={zoom:e.map.getZoom()};if(!cM(e.markers,this.markers)){t=!0,this.markers=[...e.markers];const n=this.markers.map((e=>{const t=LM.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}}));this.superCluster.load(n)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!cM(this.state,n)),this.state=n,t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t}}cluster(e){let{map:t}=e;return this.superCluster.getClusters([-180,-90,180,90],Math.round(t.getZoom())).map((e=>this.transformCluster(e)))}transformCluster(e){let{geometry:{coordinates:[t,n]},properties:r}=e;if(r.cluster)return new IM({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map((e=>e.properties.marker)),position:{lat:n,lng:t}});const i=r.marker;return new IM({markers:[i],position:LM.getPosition(i)})}}class DM{constructor(e,t){this.markers={sum:e.length};const n=t.map((e=>e.count)),r=n.reduce(((e,t)=>e+t),0);this.clusters={count:t.length,markers:{mean:r/t.length,sum:r,min:Math.min(...n),max:Math.max(...n)}}}}class OM{render(e,t,n){let{count:r,position:i}=e;const o=r>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",s='<svg fill="'.concat(o,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(r,"</text>\n</svg>"),a="Cluster of ".concat(r," markers"),l=Number(google.maps.Marker.MAX_ZINDEX)+r;if(LM.isAdvancedMarkerAvailable(n)){const e=(new DOMParser).parseFromString(s,"image/svg+xml").documentElement;e.setAttribute("transform","translate(0 25)");const t={map:n,position:i,zIndex:l,title:a,content:e};return new google.maps.marker.AdvancedMarkerElement(t)}const c={position:i,zIndex:l,title:a,icon:{url:"data:image/svg+xml;base64,".concat(btoa(s)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(c)}}class UM{constructor(){!function(e,t){for(let n in t.prototype)e.prototype[n]=t.prototype[n]}(UM,google.maps.OverlayView)}}var FM;!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click"}(FM||(FM={}));const BM=(e,t,n)=>{n.fitBounds(t.bounds)};class jM extends UM{constructor(e){let{map:t,markers:n=[],algorithmOptions:r={},algorithm:i=new kM(r),renderer:o=new OM,onClusterClick:s=BM}=e;super(),this.markers=[...n],this.clusters=[],this.algorithm=i,this.renderer=o,this.onClusterClick=s,t&&this.setMap(t)}addMarker(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}addMarkers(e,t){e.forEach((e=>{this.addMarker(e,!0)})),t||this.render()}removeMarker(e,t){const n=this.markers.indexOf(e);return-1!==n&&(LM.setMap(e,null),this.markers.splice(n,1),t||this.render(),!0)}removeMarkers(e,t){let n=!1;return e.forEach((e=>{n=this.removeMarker(e,!0)||n})),n&&!t&&this.render(),n}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,FM.CLUSTERING_BEGIN,this);const{clusters:t,changed:n}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});if(n||void 0==n){const e=new Set;for(const r of t)1==r.markers.length&&e.add(r.markers[0]);const n=[];for(const t of this.clusters)null!=t.marker&&(1==t.markers.length?e.has(t.marker)||LM.setMap(t.marker,null):n.push(t.marker));this.clusters=t,this.renderClusters(),requestAnimationFrame((()=>n.forEach((e=>LM.setMap(e,null)))))}google.maps.event.trigger(this,FM.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach((e=>LM.setMap(e,null))),this.clusters.forEach((e=>e.delete())),this.clusters=[]}renderClusters(){const e=new DM(this.markers,this.clusters),t=this.getMap();this.clusters.forEach((n=>{1===n.markers.length?n.marker=n.markers[0]:(n.marker=this.renderer.render(n,e,t),n.markers.forEach((e=>LM.setMap(e,null))),this.onClusterClick&&n.marker.addListener("click",(e=>{google.maps.event.trigger(this,FM.CLUSTER_CLICK,n),this.onClusterClick(e,n,t)}))),LM.setMap(n.marker,t)}))}}function VM(e){var n=function(){bA(!!t.useContext,"useGoogleMap is React hook and requires React version 16.8+");var e=(0,t.useContext)(_A);return bA(!!e,"useGoogleMap needs a GoogleMap available up in the tree"),e}(),r=(0,t.useState)(null),i=r[0],o=r[1];return(0,t.useEffect)((function(){if(n&&null===i){var t=new jM(pA(pA({},e),{map:n}));o(t)}}),[n]),i}(0,t.memo)((function(e){var t=e.children,n=VM(e.options);return null!==n?t(n):null}));var zM={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},HM={options:function(e,t){e.setOptions(t)},position:function(e,t){e.setPosition(t)},zIndex:function(e,t){e.setZIndex(t)}};(0,t.memo)((function(e){var n=e.children,r=e.anchor,i=e.options,s=e.position,a=e.zIndex,l=e.onCloseClick,c=e.onDomReady,u=e.onContentChanged,h=e.onPositionChanged,d=e.onZindexChanged,p=e.onLoad,f=e.onUnmount,m=(0,t.useContext)(_A),g=(0,t.useState)(null),v=g[0],y=g[1],b=(0,t.useState)(null),_=b[0],x=b[1],w=(0,t.useState)(null),E=w[0],S=w[1],A=(0,t.useState)(null),M=A[0],T=A[1],C=(0,t.useState)(null),R=C[0],L=C[1],I=(0,t.useState)(null),P=I[0],N=I[1],k=(0,t.useRef)(null);return(0,t.useEffect)((function(){null!==v&&(v.close(),r?v.open(m,r):v.getPosition()&&v.open(m))}),[m,v,r]),(0,t.useEffect)((function(){i&&null!==v&&v.setOptions(i)}),[v,i]),(0,t.useEffect)((function(){s&&null!==v&&v.setPosition(s)}),[s]),(0,t.useEffect)((function(){"number"===typeof a&&null!==v&&v.setZIndex(a)}),[a]),(0,t.useEffect)((function(){v&&l&&(null!==_&&google.maps.event.removeListener(_),x(google.maps.event.addListener(v,"closeclick",l)))}),[l]),(0,t.useEffect)((function(){v&&c&&(null!==E&&google.maps.event.removeListener(E),S(google.maps.event.addListener(v,"domready",c)))}),[c]),(0,t.useEffect)((function(){v&&u&&(null!==M&&google.maps.event.removeListener(M),T(google.maps.event.addListener(v,"content_changed",u)))}),[u]),(0,t.useEffect)((function(){v&&h&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(v,"position_changed",h)))}),[h]),(0,t.useEffect)((function(){v&&d&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(v,"zindex_changed",d)))}),[d]),(0,t.useEffect)((function(){var e=new google.maps.InfoWindow(pA({},i||{}));return y(e),k.current=document.createElement("div"),l&&x(google.maps.event.addListener(e,"closeclick",l)),c&&S(google.maps.event.addListener(e,"domready",c)),u&&T(google.maps.event.addListener(e,"content_changed",u)),h&&L(google.maps.event.addListener(e,"position_changed",h)),d&&N(google.maps.event.addListener(e,"zindex_changed",d)),e.setContent(k.current),s&&e.setPosition(s),a&&e.setZIndex(a),r?e.open(m,r):e.getPosition()?e.open(m):bA(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),p&&p(e),function(){_&&google.maps.event.removeListener(_),M&&google.maps.event.removeListener(M),E&&google.maps.event.removeListener(E),R&&google.maps.event.removeListener(R),P&&google.maps.event.removeListener(P),f&&f(e),e.close()}}),[]),k.current?(0,o.createPortal)(t.Children.only(n),k.current):null})),function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.containerElement=null,t.state={infoWindow:null},t.open=function(e,n){n?e.open(t.context,n):e.getPosition()?e.open(t.context):bA(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},t.setInfoWindowCallback=function(){null!==t.state.infoWindow&&null!==t.containerElement&&(t.state.infoWindow.setContent(t.containerElement),t.open(t.state.infoWindow,t.props.anchor),t.props.onLoad&&t.props.onLoad(t.state.infoWindow))},t}dA(n,e),n.prototype.componentDidMount=function(){var e=new google.maps.InfoWindow(pA({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=AA({updaterMap:HM,eventMap:zM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{infoWindow:e}}),this.setInfoWindowCallback)},n.prototype.componentDidUpdate=function(e){null!==this.state.infoWindow&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:HM,eventMap:zM,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))},n.prototype.componentWillUnmount=function(){null!==this.state.infoWindow&&(SA(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())},n.prototype.render=function(){return this.containerElement?(0,o.createPortal)(t.Children.only(this.props.children),this.containerElement):null},n.contextType=_A}(t.PureComponent);var GM={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},WM={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},visible:function(e,t){e.setVisible(t)}},KM={};(0,t.memo)((function(e){var n=e.options,r=e.draggable,i=e.editable,o=e.visible,s=e.path,a=e.onDblClick,l=e.onDragEnd,c=e.onDragStart,u=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,p=e.onMouseOver,f=e.onMouseUp,m=e.onRightClick,g=e.onClick,v=e.onDrag,y=e.onLoad,b=e.onUnmount,_=(0,t.useContext)(_A),x=(0,t.useState)(null),w=x[0],E=x[1],S=(0,t.useState)(null),A=S[0],M=S[1],T=(0,t.useState)(null),C=T[0],R=T[1],L=(0,t.useState)(null),I=L[0],P=L[1],N=(0,t.useState)(null),k=N[0],D=N[1],O=(0,t.useState)(null),U=O[0],F=O[1],B=(0,t.useState)(null),j=B[0],V=B[1],z=(0,t.useState)(null),H=z[0],G=z[1],W=(0,t.useState)(null),K=W[0],q=W[1],X=(0,t.useState)(null),Q=X[0],Y=X[1],J=(0,t.useState)(null),Z=J[0],$=J[1],ee=(0,t.useState)(null),te=ee[0],ne=ee[1];return(0,t.useEffect)((function(){null!==w&&w.setMap(_)}),[_]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==w&&w.setOptions(n)}),[w,n]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==w&&w.setDraggable(r)}),[w,r]),(0,t.useEffect)((function(){"undefined"!==typeof i&&null!==w&&w.setEditable(i)}),[w,i]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==w&&w.setVisible(o)}),[w,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==w&&w.setPath(s)}),[w,s]),(0,t.useEffect)((function(){w&&a&&(null!==A&&google.maps.event.removeListener(A),M(google.maps.event.addListener(w,"dblclick",a)))}),[a]),(0,t.useEffect)((function(){w&&l&&(null!==C&&google.maps.event.removeListener(C),R(google.maps.event.addListener(w,"dragend",l)))}),[l]),(0,t.useEffect)((function(){w&&c&&(null!==I&&google.maps.event.removeListener(I),P(google.maps.event.addListener(w,"dragstart",c)))}),[c]),(0,t.useEffect)((function(){w&&u&&(null!==k&&google.maps.event.removeListener(k),D(google.maps.event.addListener(w,"mousedown",u)))}),[u]),(0,t.useEffect)((function(){w&&h&&(null!==U&&google.maps.event.removeListener(U),F(google.maps.event.addListener(w,"mousemove",h)))}),[h]),(0,t.useEffect)((function(){w&&d&&(null!==j&&google.maps.event.removeListener(j),V(google.maps.event.addListener(w,"mouseout",d)))}),[d]),(0,t.useEffect)((function(){w&&p&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(w,"mouseover",p)))}),[p]),(0,t.useEffect)((function(){w&&f&&(null!==K&&google.maps.event.removeListener(K),q(google.maps.event.addListener(w,"mouseup",f)))}),[f]),(0,t.useEffect)((function(){w&&m&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(w,"rightclick",m)))}),[m]),(0,t.useEffect)((function(){w&&g&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(w,"click",g)))}),[g]),(0,t.useEffect)((function(){w&&v&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(w,"drag",v)))}),[v]),(0,t.useEffect)((function(){var e=new google.maps.Polyline(pA(pA({},n||KM),{map:_}));return s&&e.setPath(s),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof r&&e.setDraggable(r),a&&M(google.maps.event.addListener(e,"dblclick",a)),l&&R(google.maps.event.addListener(e,"dragend",l)),c&&P(google.maps.event.addListener(e,"dragstart",c)),u&&D(google.maps.event.addListener(e,"mousedown",u)),h&&F(google.maps.event.addListener(e,"mousemove",h)),d&&V(google.maps.event.addListener(e,"mouseout",d)),p&&G(google.maps.event.addListener(e,"mouseover",p)),f&&q(google.maps.event.addListener(e,"mouseup",f)),m&&Y(google.maps.event.addListener(e,"rightclick",m)),g&&$(google.maps.event.addListener(e,"click",g)),v&&ne(google.maps.event.addListener(e,"drag",v)),E(e),y&&y(e),function(){null!==A&&google.maps.event.removeListener(A),null!==C&&google.maps.event.removeListener(C),null!==I&&google.maps.event.removeListener(I),null!==k&&google.maps.event.removeListener(k),null!==U&&google.maps.event.removeListener(U),null!==j&&google.maps.event.removeListener(j),null!==H&&google.maps.event.removeListener(H),null!==K&&google.maps.event.removeListener(K),null!==Q&&google.maps.event.removeListener(Q),null!==Z&&google.maps.event.removeListener(Z),b&&b(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={polyline:null},t.setPolylineCallback=function(){null!==t.state.polyline&&t.props.onLoad&&t.props.onLoad(t.state.polyline)},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Polyline(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:WM,eventMap:GM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polyline:e}}),this.setPolylineCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.polyline&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:WM,eventMap:GM,prevProps:e,nextProps:this.props,instance:this.state.polyline}))},t.prototype.componentWillUnmount=function(){null!==this.state.polyline&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),SA(this.registeredEvents),this.state.polyline.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var qM={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},XM={draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},path:function(e,t){e.setPath(t)},paths:function(e,t){e.setPaths(t)},visible:function(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var n=e.options,r=e.draggable,i=e.editable,o=e.visible,s=e.path,a=e.paths,l=e.onDblClick,c=e.onDragEnd,u=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,p=e.onMouseOut,f=e.onMouseOver,m=e.onMouseUp,g=e.onRightClick,v=e.onClick,y=e.onDrag,b=e.onLoad,_=e.onUnmount,x=e.onEdit,w=(0,t.useContext)(_A),E=(0,t.useState)(null),S=E[0],A=E[1],M=(0,t.useState)(null),T=M[0],C=M[1],R=(0,t.useState)(null),L=R[0],I=R[1],P=(0,t.useState)(null),N=P[0],k=P[1],D=(0,t.useState)(null),O=D[0],U=D[1],F=(0,t.useState)(null),B=F[0],j=F[1],V=(0,t.useState)(null),z=V[0],H=V[1],G=(0,t.useState)(null),W=G[0],K=G[1],q=(0,t.useState)(null),X=q[0],Q=q[1],Y=(0,t.useState)(null),J=Y[0],Z=Y[1],$=(0,t.useState)(null),ee=$[0],te=$[1],ne=(0,t.useState)(null),re=ne[0],ie=ne[1];return(0,t.useEffect)((function(){null!==S&&S.setMap(w)}),[w]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==S&&S.setOptions(n)}),[S,n]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==S&&S.setDraggable(r)}),[S,r]),(0,t.useEffect)((function(){"undefined"!==typeof i&&null!==S&&S.setEditable(i)}),[S,i]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==S&&S.setVisible(o)}),[S,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==S&&S.setPath(s)}),[S,s]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==S&&S.setPaths(a)}),[S,a]),(0,t.useEffect)((function(){S&&l&&(null!==T&&google.maps.event.removeListener(T),C(google.maps.event.addListener(S,"dblclick",l)))}),[l]),(0,t.useEffect)((function(){S&&(google.maps.event.addListener(S.getPath(),"insert_at",(function(){null===x||void 0===x||x(S)})),google.maps.event.addListener(S.getPath(),"set_at",(function(){null===x||void 0===x||x(S)})))}),[S,x]),(0,t.useEffect)((function(){S&&c&&(null!==L&&google.maps.event.removeListener(L),I(google.maps.event.addListener(S,"dragend",c)))}),[c]),(0,t.useEffect)((function(){S&&u&&(null!==N&&google.maps.event.removeListener(N),k(google.maps.event.addListener(S,"dragstart",u)))}),[u]),(0,t.useEffect)((function(){S&&h&&(null!==O&&google.maps.event.removeListener(O),U(google.maps.event.addListener(S,"mousedown",h)))}),[h]),(0,t.useEffect)((function(){S&&d&&(null!==B&&google.maps.event.removeListener(B),j(google.maps.event.addListener(S,"mousemove",d)))}),[d]),(0,t.useEffect)((function(){S&&p&&(null!==z&&google.maps.event.removeListener(z),H(google.maps.event.addListener(S,"mouseout",p)))}),[p]),(0,t.useEffect)((function(){S&&f&&(null!==W&&google.maps.event.removeListener(W),K(google.maps.event.addListener(S,"mouseover",f)))}),[f]),(0,t.useEffect)((function(){S&&m&&(null!==X&&google.maps.event.removeListener(X),Q(google.maps.event.addListener(S,"mouseup",m)))}),[m]),(0,t.useEffect)((function(){S&&g&&(null!==J&&google.maps.event.removeListener(J),Z(google.maps.event.addListener(S,"rightclick",g)))}),[g]),(0,t.useEffect)((function(){S&&v&&(null!==ee&&google.maps.event.removeListener(ee),te(google.maps.event.addListener(S,"click",v)))}),[v]),(0,t.useEffect)((function(){S&&y&&(null!==re&&google.maps.event.removeListener(re),ie(google.maps.event.addListener(S,"drag",y)))}),[y]),(0,t.useEffect)((function(){var e=new google.maps.Polygon(pA(pA({},n||{}),{map:w}));return s&&e.setPath(s),a&&e.setPaths(a),"undefined"!==typeof o&&e.setVisible(o),"undefined"!==typeof i&&e.setEditable(i),"undefined"!==typeof r&&e.setDraggable(r),l&&C(google.maps.event.addListener(e,"dblclick",l)),c&&I(google.maps.event.addListener(e,"dragend",c)),u&&k(google.maps.event.addListener(e,"dragstart",u)),h&&U(google.maps.event.addListener(e,"mousedown",h)),d&&j(google.maps.event.addListener(e,"mousemove",d)),p&&H(google.maps.event.addListener(e,"mouseout",p)),f&&K(google.maps.event.addListener(e,"mouseover",f)),m&&Q(google.maps.event.addListener(e,"mouseup",m)),g&&Z(google.maps.event.addListener(e,"rightclick",g)),v&&te(google.maps.event.addListener(e,"click",v)),y&&ie(google.maps.event.addListener(e,"drag",y)),A(e),b&&b(e),function(){null!==T&&google.maps.event.removeListener(T),null!==L&&google.maps.event.removeListener(L),null!==N&&google.maps.event.removeListener(N),null!==O&&google.maps.event.removeListener(O),null!==B&&google.maps.event.removeListener(B),null!==z&&google.maps.event.removeListener(z),null!==W&&google.maps.event.removeListener(W),null!==X&&google.maps.event.removeListener(X),null!==J&&google.maps.event.removeListener(J),null!==ee&&google.maps.event.removeListener(ee),_&&_(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={polygon:null},t.setPolygonCallback=function(){null!==t.state.polygon&&t.props.onLoad&&t.props.onLoad(t.state.polygon)},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Polygon(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:XM,eventMap:qM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{polygon:e}}),this.setPolygonCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.polygon&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:XM,eventMap:qM,prevProps:e,nextProps:this.props,instance:this.state.polygon}))},t.prototype.componentWillUnmount=function(){null!==this.state.polygon&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),SA(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var QM={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},YM={bounds:function(e,t){e.setBounds(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},visible:function(e,t){e.setVisible(t)}};(0,t.memo)((function(e){var n=e.options,r=e.bounds,i=e.draggable,o=e.editable,s=e.visible,a=e.onDblClick,l=e.onDragEnd,c=e.onDragStart,u=e.onMouseDown,h=e.onMouseMove,d=e.onMouseOut,p=e.onMouseOver,f=e.onMouseUp,m=e.onRightClick,g=e.onClick,v=e.onDrag,y=e.onBoundsChanged,b=e.onLoad,_=e.onUnmount,x=(0,t.useContext)(_A),w=(0,t.useState)(null),E=w[0],S=w[1],A=(0,t.useState)(null),M=A[0],T=A[1],C=(0,t.useState)(null),R=C[0],L=C[1],I=(0,t.useState)(null),P=I[0],N=I[1],k=(0,t.useState)(null),D=k[0],O=k[1],U=(0,t.useState)(null),F=U[0],B=U[1],j=(0,t.useState)(null),V=j[0],z=j[1],H=(0,t.useState)(null),G=H[0],W=H[1],K=(0,t.useState)(null),q=K[0],X=K[1],Q=(0,t.useState)(null),Y=Q[0],J=Q[1],Z=(0,t.useState)(null),$=Z[0],ee=Z[1],te=(0,t.useState)(null),ne=te[0],re=te[1],ie=(0,t.useState)(null),oe=ie[0],se=ie[1];return(0,t.useEffect)((function(){null!==E&&E.setMap(x)}),[x]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==E&&E.setOptions(n)}),[E,n]),(0,t.useEffect)((function(){"undefined"!==typeof i&&null!==E&&E.setDraggable(i)}),[E,i]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==E&&E.setEditable(o)}),[E,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==E&&E.setVisible(s)}),[E,s]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==E&&E.setBounds(r)}),[E,r]),(0,t.useEffect)((function(){E&&a&&(null!==M&&google.maps.event.removeListener(M),T(google.maps.event.addListener(E,"dblclick",a)))}),[a]),(0,t.useEffect)((function(){E&&l&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(E,"dragend",l)))}),[l]),(0,t.useEffect)((function(){E&&c&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(E,"dragstart",c)))}),[c]),(0,t.useEffect)((function(){E&&u&&(null!==D&&google.maps.event.removeListener(D),O(google.maps.event.addListener(E,"mousedown",u)))}),[u]),(0,t.useEffect)((function(){E&&h&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(E,"mousemove",h)))}),[h]),(0,t.useEffect)((function(){E&&d&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(E,"mouseout",d)))}),[d]),(0,t.useEffect)((function(){E&&p&&(null!==G&&google.maps.event.removeListener(G),W(google.maps.event.addListener(E,"mouseover",p)))}),[p]),(0,t.useEffect)((function(){E&&f&&(null!==q&&google.maps.event.removeListener(q),X(google.maps.event.addListener(E,"mouseup",f)))}),[f]),(0,t.useEffect)((function(){E&&m&&(null!==Y&&google.maps.event.removeListener(Y),J(google.maps.event.addListener(E,"rightclick",m)))}),[m]),(0,t.useEffect)((function(){E&&g&&(null!==$&&google.maps.event.removeListener($),ee(google.maps.event.addListener(E,"click",g)))}),[g]),(0,t.useEffect)((function(){E&&v&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(E,"drag",v)))}),[v]),(0,t.useEffect)((function(){E&&y&&(null!==oe&&google.maps.event.removeListener(oe),se(google.maps.event.addListener(E,"bounds_changed",y)))}),[y]),(0,t.useEffect)((function(){var e=new google.maps.Rectangle(pA(pA({},n||{}),{map:x}));return"undefined"!==typeof s&&e.setVisible(s),"undefined"!==typeof o&&e.setEditable(o),"undefined"!==typeof i&&e.setDraggable(i),"undefined"!==typeof r&&e.setBounds(r),a&&T(google.maps.event.addListener(e,"dblclick",a)),l&&L(google.maps.event.addListener(e,"dragend",l)),c&&N(google.maps.event.addListener(e,"dragstart",c)),u&&O(google.maps.event.addListener(e,"mousedown",u)),h&&B(google.maps.event.addListener(e,"mousemove",h)),d&&z(google.maps.event.addListener(e,"mouseout",d)),p&&W(google.maps.event.addListener(e,"mouseover",p)),f&&X(google.maps.event.addListener(e,"mouseup",f)),m&&J(google.maps.event.addListener(e,"rightclick",m)),g&&ee(google.maps.event.addListener(e,"click",g)),v&&re(google.maps.event.addListener(e,"drag",v)),y&&se(google.maps.event.addListener(e,"bounds_changed",y)),S(e),b&&b(e),function(){null!==M&&google.maps.event.removeListener(M),null!==R&&google.maps.event.removeListener(R),null!==P&&google.maps.event.removeListener(P),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==V&&google.maps.event.removeListener(V),null!==G&&google.maps.event.removeListener(G),null!==q&&google.maps.event.removeListener(q),null!==Y&&google.maps.event.removeListener(Y),null!==$&&google.maps.event.removeListener($),null!==ne&&google.maps.event.removeListener(ne),null!==oe&&google.maps.event.removeListener(oe),_&&_(e),e.setMap(null)}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={rectangle:null},t.setRectangleCallback=function(){null!==t.state.rectangle&&t.props.onLoad&&t.props.onLoad(t.state.rectangle)},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Rectangle(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:YM,eventMap:QM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{rectangle:e}}),this.setRectangleCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.rectangle&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:YM,eventMap:QM,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))},t.prototype.componentWillUnmount=function(){null!==this.state.rectangle&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),SA(this.registeredEvents),this.state.rectangle.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var JM={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},ZM={center:function(e,t){e.setCenter(t)},draggable:function(e,t){e.setDraggable(t)},editable:function(e,t){e.setEditable(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},radius:function(e,t){e.setRadius(t)},visible:function(e,t){e.setVisible(t)}},$M={};(0,t.memo)((function(e){var n=e.options,r=e.center,i=e.radius,o=e.draggable,s=e.editable,a=e.visible,l=e.onDblClick,c=e.onDragEnd,u=e.onDragStart,h=e.onMouseDown,d=e.onMouseMove,p=e.onMouseOut,f=e.onMouseOver,m=e.onMouseUp,g=e.onRightClick,v=e.onClick,y=e.onDrag,b=e.onCenterChanged,_=e.onRadiusChanged,x=e.onLoad,w=e.onUnmount,E=(0,t.useContext)(_A),S=(0,t.useState)(null),A=S[0],M=S[1],T=(0,t.useState)(null),C=T[0],R=T[1],L=(0,t.useState)(null),I=L[0],P=L[1],N=(0,t.useState)(null),k=N[0],D=N[1],O=(0,t.useState)(null),U=O[0],F=O[1],B=(0,t.useState)(null),j=B[0],V=B[1],z=(0,t.useState)(null),H=z[0],G=z[1],W=(0,t.useState)(null),K=W[0],q=W[1],X=(0,t.useState)(null),Q=X[0],Y=X[1],J=(0,t.useState)(null),Z=J[0],$=J[1],ee=(0,t.useState)(null),te=ee[0],ne=ee[1],re=(0,t.useState)(null),ie=re[0],oe=re[1],se=(0,t.useState)(null),ae=se[0],le=se[1],ce=(0,t.useState)(null),ue=ce[0],he=ce[1];return(0,t.useEffect)((function(){null!==A&&A.setMap(E)}),[E]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==A&&A.setOptions(n)}),[A,n]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==A&&A.setDraggable(o)}),[A,o]),(0,t.useEffect)((function(){"undefined"!==typeof s&&null!==A&&A.setEditable(s)}),[A,s]),(0,t.useEffect)((function(){"undefined"!==typeof a&&null!==A&&A.setVisible(a)}),[A,a]),(0,t.useEffect)((function(){"number"===typeof i&&null!==A&&A.setRadius(i)}),[A,i]),(0,t.useEffect)((function(){"undefined"!==typeof r&&null!==A&&A.setCenter(r)}),[A,r]),(0,t.useEffect)((function(){A&&l&&(null!==C&&google.maps.event.removeListener(C),R(google.maps.event.addListener(A,"dblclick",l)))}),[l]),(0,t.useEffect)((function(){A&&c&&(null!==I&&google.maps.event.removeListener(I),P(google.maps.event.addListener(A,"dragend",c)))}),[c]),(0,t.useEffect)((function(){A&&u&&(null!==k&&google.maps.event.removeListener(k),D(google.maps.event.addListener(A,"dragstart",u)))}),[u]),(0,t.useEffect)((function(){A&&h&&(null!==U&&google.maps.event.removeListener(U),F(google.maps.event.addListener(A,"mousedown",h)))}),[h]),(0,t.useEffect)((function(){A&&d&&(null!==j&&google.maps.event.removeListener(j),V(google.maps.event.addListener(A,"mousemove",d)))}),[d]),(0,t.useEffect)((function(){A&&p&&(null!==H&&google.maps.event.removeListener(H),G(google.maps.event.addListener(A,"mouseout",p)))}),[p]),(0,t.useEffect)((function(){A&&f&&(null!==K&&google.maps.event.removeListener(K),q(google.maps.event.addListener(A,"mouseover",f)))}),[f]),(0,t.useEffect)((function(){A&&m&&(null!==Q&&google.maps.event.removeListener(Q),Y(google.maps.event.addListener(A,"mouseup",m)))}),[m]),(0,t.useEffect)((function(){A&&g&&(null!==Z&&google.maps.event.removeListener(Z),$(google.maps.event.addListener(A,"rightclick",g)))}),[g]),(0,t.useEffect)((function(){A&&v&&(null!==te&&google.maps.event.removeListener(te),ne(google.maps.event.addListener(A,"click",v)))}),[v]),(0,t.useEffect)((function(){A&&y&&(null!==ie&&google.maps.event.removeListener(ie),oe(google.maps.event.addListener(A,"drag",y)))}),[y]),(0,t.useEffect)((function(){A&&b&&(null!==ae&&google.maps.event.removeListener(ae),le(google.maps.event.addListener(A,"center_changed",b)))}),[v]),(0,t.useEffect)((function(){A&&_&&(null!==ue&&google.maps.event.removeListener(ue),he(google.maps.event.addListener(A,"radius_changed",_)))}),[_]),(0,t.useEffect)((function(){var e=new google.maps.Circle(pA(pA({},n||$M),{map:E}));return"number"===typeof i&&e.setRadius(i),"undefined"!==typeof r&&e.setCenter(r),"number"===typeof i&&e.setRadius(i),"undefined"!==typeof a&&e.setVisible(a),"undefined"!==typeof s&&e.setEditable(s),"undefined"!==typeof o&&e.setDraggable(o),l&&R(google.maps.event.addListener(e,"dblclick",l)),c&&P(google.maps.event.addListener(e,"dragend",c)),u&&D(google.maps.event.addListener(e,"dragstart",u)),h&&F(google.maps.event.addListener(e,"mousedown",h)),d&&V(google.maps.event.addListener(e,"mousemove",d)),p&&G(google.maps.event.addListener(e,"mouseout",p)),f&&q(google.maps.event.addListener(e,"mouseover",f)),m&&Y(google.maps.event.addListener(e,"mouseup",m)),g&&$(google.maps.event.addListener(e,"rightclick",g)),v&&ne(google.maps.event.addListener(e,"click",v)),y&&oe(google.maps.event.addListener(e,"drag",y)),b&&le(google.maps.event.addListener(e,"center_changed",b)),_&&he(google.maps.event.addListener(e,"radius_changed",_)),M(e),x&&x(e),function(){null!==C&&google.maps.event.removeListener(C),null!==I&&google.maps.event.removeListener(I),null!==k&&google.maps.event.removeListener(k),null!==U&&google.maps.event.removeListener(U),null!==j&&google.maps.event.removeListener(j),null!==H&&google.maps.event.removeListener(H),null!==K&&google.maps.event.removeListener(K),null!==Q&&google.maps.event.removeListener(Q),null!==Z&&google.maps.event.removeListener(Z),null!==te&&google.maps.event.removeListener(te),null!==ae&&google.maps.event.removeListener(ae),null!==ue&&google.maps.event.removeListener(ue),w&&w(e),e.setMap(null)}}),[]),null}));var eT=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={circle:null},t.setCircleCallback=function(){null!==t.state.circle&&t.props.onLoad&&t.props.onLoad(t.state.circle)},t}return dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.Circle(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:ZM,eventMap:JM,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{circle:e}}),this.setCircleCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.circle&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:ZM,eventMap:JM,prevProps:e,nextProps:this.props,instance:this.state.circle}))},t.prototype.componentWillUnmount=function(){var e;null!==this.state.circle&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),SA(this.registeredEvents),null===(e=this.state.circle)||void 0===e||e.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A,t}(t.PureComponent),tT={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},nT={add:function(e,t){e.add(t)},addgeojson:function(e,t,n){e.addGeoJson(t,n)},contains:function(e,t){e.contains(t)},foreach:function(e,t){e.forEach(t)},loadgeojson:function(e,t,n,r){e.loadGeoJson(t,n,r)},overridestyle:function(e,t,n){e.overrideStyle(t,n)},remove:function(e,t){e.remove(t)},revertstyle:function(e,t){e.revertStyle(t)},controlposition:function(e,t){e.setControlPosition(t)},controls:function(e,t){e.setControls(t)},drawingmode:function(e,t){e.setDrawingMode(t)},map:function(e,t){e.setMap(t)},style:function(e,t){e.setStyle(t)},togeojson:function(e,t){e.toGeoJson(t)}};(0,t.memo)((function(e){var n=e.options,r=e.onClick,i=e.onDblClick,o=e.onMouseDown,s=e.onMouseMove,a=e.onMouseOut,l=e.onMouseOver,c=e.onMouseUp,u=e.onRightClick,h=e.onAddFeature,d=e.onRemoveFeature,p=e.onRemoveProperty,f=e.onSetGeometry,m=e.onSetProperty,g=e.onLoad,v=e.onUnmount,y=(0,t.useContext)(_A),b=(0,t.useState)(null),_=b[0],x=b[1],w=(0,t.useState)(null),E=w[0],S=w[1],A=(0,t.useState)(null),M=A[0],T=A[1],C=(0,t.useState)(null),R=C[0],L=C[1],I=(0,t.useState)(null),P=I[0],N=I[1],k=(0,t.useState)(null),D=k[0],O=k[1],U=(0,t.useState)(null),F=U[0],B=U[1],j=(0,t.useState)(null),V=j[0],z=j[1],H=(0,t.useState)(null),G=H[0],W=H[1],K=(0,t.useState)(null),q=K[0],X=K[1],Q=(0,t.useState)(null),Y=Q[0],J=Q[1],Z=(0,t.useState)(null),$=Z[0],ee=Z[1],te=(0,t.useState)(null),ne=te[0],re=te[1],ie=(0,t.useState)(null),oe=ie[0],se=ie[1];return(0,t.useEffect)((function(){null!==_&&_.setMap(y)}),[y]),(0,t.useEffect)((function(){_&&i&&(null!==E&&google.maps.event.removeListener(E),S(google.maps.event.addListener(_,"dblclick",i)))}),[i]),(0,t.useEffect)((function(){_&&o&&(null!==M&&google.maps.event.removeListener(M),T(google.maps.event.addListener(_,"mousedown",o)))}),[o]),(0,t.useEffect)((function(){_&&s&&(null!==R&&google.maps.event.removeListener(R),L(google.maps.event.addListener(_,"mousemove",s)))}),[s]),(0,t.useEffect)((function(){_&&a&&(null!==P&&google.maps.event.removeListener(P),N(google.maps.event.addListener(_,"mouseout",a)))}),[a]),(0,t.useEffect)((function(){_&&l&&(null!==D&&google.maps.event.removeListener(D),O(google.maps.event.addListener(_,"mouseover",l)))}),[l]),(0,t.useEffect)((function(){_&&c&&(null!==F&&google.maps.event.removeListener(F),B(google.maps.event.addListener(_,"mouseup",c)))}),[c]),(0,t.useEffect)((function(){_&&u&&(null!==V&&google.maps.event.removeListener(V),z(google.maps.event.addListener(_,"rightclick",u)))}),[u]),(0,t.useEffect)((function(){_&&r&&(null!==G&&google.maps.event.removeListener(G),W(google.maps.event.addListener(_,"click",r)))}),[r]),(0,t.useEffect)((function(){_&&h&&(null!==q&&google.maps.event.removeListener(q),X(google.maps.event.addListener(_,"addfeature",h)))}),[h]),(0,t.useEffect)((function(){_&&d&&(null!==Y&&google.maps.event.removeListener(Y),J(google.maps.event.addListener(_,"removefeature",d)))}),[d]),(0,t.useEffect)((function(){_&&p&&(null!==$&&google.maps.event.removeListener($),ee(google.maps.event.addListener(_,"removeproperty",p)))}),[p]),(0,t.useEffect)((function(){_&&f&&(null!==ne&&google.maps.event.removeListener(ne),re(google.maps.event.addListener(_,"setgeometry",f)))}),[f]),(0,t.useEffect)((function(){_&&m&&(null!==oe&&google.maps.event.removeListener(oe),se(google.maps.event.addListener(_,"setproperty",m)))}),[m]),(0,t.useEffect)((function(){if(null!==y){var e=new google.maps.Data(pA(pA({},n||{}),{map:y}));i&&S(google.maps.event.addListener(e,"dblclick",i)),o&&T(google.maps.event.addListener(e,"mousedown",o)),s&&L(google.maps.event.addListener(e,"mousemove",s)),a&&N(google.maps.event.addListener(e,"mouseout",a)),l&&O(google.maps.event.addListener(e,"mouseover",l)),c&&B(google.maps.event.addListener(e,"mouseup",c)),u&&z(google.maps.event.addListener(e,"rightclick",u)),r&&W(google.maps.event.addListener(e,"click",r)),h&&X(google.maps.event.addListener(e,"addfeature",h)),d&&J(google.maps.event.addListener(e,"removefeature",d)),p&&ee(google.maps.event.addListener(e,"removeproperty",p)),f&&re(google.maps.event.addListener(e,"setgeometry",f)),m&&se(google.maps.event.addListener(e,"setproperty",m)),x(e),g&&g(e)}return function(){_&&(null!==E&&google.maps.event.removeListener(E),null!==M&&google.maps.event.removeListener(M),null!==R&&google.maps.event.removeListener(R),null!==P&&google.maps.event.removeListener(P),null!==D&&google.maps.event.removeListener(D),null!==F&&google.maps.event.removeListener(F),null!==V&&google.maps.event.removeListener(V),null!==G&&google.maps.event.removeListener(G),null!==q&&google.maps.event.removeListener(q),null!==Y&&google.maps.event.removeListener(Y),null!==$&&google.maps.event.removeListener($),null!==ne&&google.maps.event.removeListener(ne),null!==oe&&google.maps.event.removeListener(oe),v&&v(_),_.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={data:null},t.setDataCallback=function(){null!==t.state.data&&t.props.onLoad&&t.props.onLoad(t.state.data)},t}dA(t,e),t.prototype.componentDidMount=function(){if(null!==this.context){var e=new google.maps.Data(pA(pA({},this.props.options||{}),{map:this.context}));this.registeredEvents=AA({updaterMap:nT,eventMap:tT,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{data:e}}),this.setDataCallback)}},t.prototype.componentDidUpdate=function(e){null!==this.state.data&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:nT,eventMap:tT,prevProps:e,nextProps:this.props,instance:this.state.data}))},t.prototype.componentWillUnmount=function(){null!==this.state.data&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),SA(this.registeredEvents),this.state.data&&this.state.data.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var rT={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},iT={options:function(e,t){e.setOptions(t)},url:function(e,t){e.setUrl(t)},zIndex:function(e,t){e.setZIndex(t)}};!function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={kmlLayer:null},t.setKmlLayerCallback=function(){null!==t.state.kmlLayer&&t.props.onLoad&&t.props.onLoad(t.state.kmlLayer)},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.KmlLayer(pA(pA({},this.props.options),{map:this.context}));this.registeredEvents=AA({updaterMap:iT,eventMap:rT,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{kmlLayer:e}}),this.setKmlLayerCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.kmlLayer&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:iT,eventMap:rT,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))},t.prototype.componentWillUnmount=function(){null!==this.state.kmlLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),SA(this.registeredEvents),this.state.kmlLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);function oT(e,t){return"function"===typeof t?t(e.offsetWidth,e.offsetHeight):{x:0,y:0}}function sT(e,t){return new t(e.lat,e.lng)}function aT(e,t){return new t(new google.maps.LatLng(e.ne.lat,e.ne.lng),new google.maps.LatLng(e.sw.lat,e.sw.lng))}function lT(e,t,n,r){return void 0!==n?function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n.getNorthEast()),i=e&&e.fromLatLngToDivPixel(n.getSouthWest());return r&&i?{left:"".concat(i.x+t.x,"px"),top:"".concat(r.y+t.y,"px"),width:"".concat(r.x-i.x-t.x,"px"),height:"".concat(i.y-r.y-t.y,"px")}:{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(n,google.maps.LatLngBounds,aT)):function(e,t,n){var r=e&&e.fromLatLngToDivPixel(n);if(r){var i=r.x,o=r.y;return{left:"".concat(i+t.x,"px"),top:"".concat(o+t.y,"px")}}return{left:"-9999px",top:"-9999px"}}(e,t,function(e,t,n){return e instanceof t?e:n(e,t)}(r,google.maps.LatLng,sT))}function cT(e){return e?(e instanceof google.maps.LatLng?e:new google.maps.LatLng(e.lat,e.lng))+"":""}function uT(e){return e?(e instanceof google.maps.LatLngBounds?e:new google.maps.LatLngBounds(new google.maps.LatLng(e.south,e.east),new google.maps.LatLng(e.north,e.west)))+"":""}(0,t.memo)((function(e){var n=e.position,r=e.bounds,i=e.mapPaneName,s=e.zIndex,a=e.onLoad,l=e.onUnmount,c=e.getPixelPositionOffset,u=e.children,h=(0,t.useContext)(_A),d=(0,t.useMemo)((function(){var e=document.createElement("div");return e.style.position="absolute",e}),[]),p=(0,t.useMemo)((function(){return function(e,t,n,r,i){var o=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.container=t,o.pane=n,o.position=r,o.bounds=i,o}return dA(t,e),t.prototype.onAdd=function(){var e,t=null===(e=this.getPanes())||void 0===e?void 0:e[this.pane];null===t||void 0===t||t.appendChild(this.container)},t.prototype.draw=function(){for(var e=lT(this.getProjection(),pA({},this.container?oT(this.container,i):{x:0,y:0}),this.bounds,this.position),t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],o=r[0],s=r[1];this.container.style[o]=s}},t.prototype.onRemove=function(){null!==this.container.parentNode&&this.container.parentNode.removeChild(this.container)},t}(google.maps.OverlayView);return new o(e,t,n,r)}(d,i,n,r,c)}),[d,i,n,r]);return(0,t.useEffect)((function(){return null===a||void 0===a||a(p),null===p||void 0===p||p.setMap(h),function(){null===l||void 0===l||l(p),null===p||void 0===p||p.setMap(null)}}),[h,p]),(0,t.useEffect)((function(){d.style.zIndex="".concat(s)}),[s,d]),o.createPortal(u,d)})),function(e){function n(n){var r=e.call(this,n)||this;r.state={paneEl:null,containerStyle:{position:"absolute"}},r.updatePane=function(){var e=r.props.mapPaneName,t=r.overlayView.getPanes();bA(!!e,"OverlayView requires props.mapPaneName but got %s",e),t?r.setState({paneEl:t[e]}):r.setState({paneEl:null})},r.onAdd=function(){var e,t;r.updatePane(),null===(t=(e=r.props).onLoad)||void 0===t||t.call(e,r.overlayView)},r.onPositionElement=function(){var e,t,n=lT(r.overlayView.getProjection(),pA({x:0,y:0},r.containerRef.current?oT(r.containerRef.current,r.props.getPixelPositionOffset):{}),r.props.bounds,r.props.position),i=r.state.containerStyle,o=i.left,s=i.top,a=i.width,l=i.height;t={left:o,top:s,width:a,height:l},((e=n).left!==t.left||e.top!==t.top||e.width!==t.height||e.height!==t.height)&&r.setState({containerStyle:{top:n.top||0,left:n.left||0,width:n.width||0,height:n.height||0,position:"absolute"}})},r.draw=function(){r.onPositionElement()},r.onRemove=function(){var e,t;r.setState((function(){return{paneEl:null}})),null===(t=(e=r.props).onUnmount)||void 0===t||t.call(e,r.overlayView)},r.containerRef=(0,t.createRef)();var i=new google.maps.OverlayView;return i.onAdd=r.onAdd,i.draw=r.draw,i.onRemove=r.onRemove,r.overlayView=i,r}dA(n,e),n.prototype.componentDidMount=function(){this.overlayView.setMap(this.context)},n.prototype.componentDidUpdate=function(e){var t=cT(e.position),n=cT(this.props.position),r=uT(e.bounds),i=uT(this.props.bounds);t===n&&r===i||this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()},n.prototype.componentWillUnmount=function(){this.overlayView.setMap(null)},n.prototype.render=function(){var e=this.state.paneEl;return e?o.createPortal((0,Ne.jsx)("div",{ref:this.containerRef,style:this.state.containerStyle,children:t.Children.only(this.props.children)}),e):null},n.FLOAT_PANE="floatPane",n.MAP_PANE="mapPane",n.MARKER_LAYER="markerLayer",n.OVERLAY_LAYER="overlayLayer",n.OVERLAY_MOUSE_TARGET="overlayMouseTarget",n.contextType=_A}(t.PureComponent);function hT(){}var dT={onDblClick:"dblclick",onClick:"click"},pT={opacity:function(e,t){e.setOpacity(t)}};(0,t.memo)((function(e){var n=e.url,r=e.bounds,i=e.options,o=e.visible,s=(0,t.useContext)(_A),a=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east)),l=(0,t.useMemo)((function(){return new google.maps.GroundOverlay(n,a,pA({},i))}),[]);return(0,t.useEffect)((function(){null!==l&&l.setMap(s)}),[s]),(0,t.useEffect)((function(){"undefined"!==typeof n&&null!==l&&(l.set("url",n),l.setMap(s))}),[l,n]),(0,t.useEffect)((function(){"undefined"!==typeof o&&null!==l&&l.setOpacity(o?1:0)}),[l,o]),(0,t.useEffect)((function(){var e=new google.maps.LatLngBounds(new google.maps.LatLng(r.south,r.west),new google.maps.LatLng(r.north,r.east));"undefined"!==typeof r&&null!==l&&(l.set("bounds",e),l.setMap(s))}),[l,r]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={groundOverlay:null},t.setGroundOverlayCallback=function(){null!==t.state.groundOverlay&&t.props.onLoad&&t.props.onLoad(t.state.groundOverlay)},t}dA(t,e),t.prototype.componentDidMount=function(){bA(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");var e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,pA(pA({},this.props.options),{map:this.context}));this.registeredEvents=AA({updaterMap:pT,eventMap:dT,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{groundOverlay:e}}),this.setGroundOverlayCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.groundOverlay&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:pT,eventMap:dT,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))},t.prototype.componentWillUnmount=function(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))},t.prototype.render=function(){return null},t.defaultProps={onLoad:hT},t.contextType=_A}(t.PureComponent);var fT={},mT={data:function(e,t){e.setData(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)}};(0,t.memo)((function(e){var n=e.data,r=e.onLoad,i=e.onUnmount,o=e.options,s=(0,t.useContext)(_A),a=(0,t.useState)(null),l=a[0],c=a[1];return(0,t.useEffect)((function(){google.maps.visualization||bA(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)}),[]),(0,t.useEffect)((function(){bA(!!n,"data property is required in HeatmapLayer %s",n)}),[n]),(0,t.useEffect)((function(){null!==l&&l.setMap(s)}),[s]),(0,t.useEffect)((function(){o&&null!==l&&l.setOptions(o)}),[l,o]),(0,t.useEffect)((function(){var e=new google.maps.visualization.HeatmapLayer(pA(pA({},o||{}),{data:n,map:s}));return c(e),r&&r(e),function(){null!==l&&(i&&i(l),l.setMap(null))}}),[]),null})),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={heatmapLayer:null},t.setHeatmapLayerCallback=function(){null!==t.state.heatmapLayer&&t.props.onLoad&&t.props.onLoad(t.state.heatmapLayer)},t}dA(t,e),t.prototype.componentDidMount=function(){bA(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),bA(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);var e=new google.maps.visualization.HeatmapLayer(pA(pA({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=AA({updaterMap:mT,eventMap:fT,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{heatmapLayer:e}}),this.setHeatmapLayerCallback)},t.prototype.componentDidUpdate=function(e){SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:mT,eventMap:fT,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})},t.prototype.componentWillUnmount=function(){null!==this.state.heatmapLayer&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),SA(this.registeredEvents),this.state.heatmapLayer.setMap(null))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent);var gT={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},vT={register:function(e,t,n){e.registerPanoProvider(t,n)},links:function(e,t){e.setLinks(t)},motionTracking:function(e,t){e.setMotionTracking(t)},options:function(e,t){e.setOptions(t)},pano:function(e,t){e.setPano(t)},position:function(e,t){e.setPosition(t)},pov:function(e,t){e.setPov(t)},visible:function(e,t){e.setVisible(t)},zoom:function(e,t){e.setZoom(t)}},yT=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={streetViewPanorama:null},t.setStreetViewPanoramaCallback=function(){null!==t.state.streetViewPanorama&&t.props.onLoad&&t.props.onLoad(t.state.streetViewPanorama)},t}dA(t,e),t.prototype.componentDidMount=function(){var e,t,n=null!==(t=null===(e=this.context)||void 0===e?void 0:e.getStreetView())&&void 0!==t?t:null;this.registeredEvents=AA({updaterMap:vT,eventMap:gT,prevProps:{},nextProps:this.props,instance:n}),this.setState((function(){return{streetViewPanorama:n}}),this.setStreetViewPanoramaCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.streetViewPanorama&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:vT,eventMap:gT,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))},t.prototype.componentWillUnmount=function(){null!==this.state.streetViewPanorama&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),SA(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={streetViewService:null},t.setStreetViewServiceCallback=function(){null!==t.state.streetViewService&&t.props.onLoad&&t.props.onLoad(t.state.streetViewService)},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.StreetViewService;this.setState((function(){return{streetViewService:e}}),this.setStreetViewServiceCallback)},t.prototype.componentWillUnmount=function(){null!==this.state.streetViewService&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)},t.prototype.render=function(){return null},t.contextType=_A}(t.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={directionsService:null},t.setDirectionsServiceCallback=function(){null!==t.state.directionsService&&t.props.onLoad&&t.props.onLoad(t.state.directionsService)},t}dA(t,e),t.prototype.componentDidMount=function(){bA(!!this.props.options,"DirectionsService expected options object as parameter, but got %s",this.props.options);var e=new google.maps.DirectionsService;this.setState((function(){return{directionsService:e}}),this.setDirectionsServiceCallback)},t.prototype.componentDidUpdate=function(){null!==this.state.directionsService&&this.state.directionsService.route(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){null!==this.state.directionsService&&this.props.onUnmount&&this.props.onUnmount(this.state.directionsService)},t.prototype.render=function(){return null}}(t.PureComponent),{onDirectionsChanged:"directions_changed"}),bT={directions:function(e,t){e.setDirections(t)},map:function(e,t){e.setMap(t)},options:function(e,t){e.setOptions(t)},panel:function(e,t){e.setPanel(t)},routeIndex:function(e,t){e.setRouteIndex(t)}},_T=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.registeredEvents=[],t.state={directionsRenderer:null},t.setDirectionsRendererCallback=function(){null!==t.state.directionsRenderer&&(t.state.directionsRenderer.setMap(t.context),t.props.onLoad&&t.props.onLoad(t.state.directionsRenderer))},t}dA(t,e),t.prototype.componentDidMount=function(){var e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=AA({updaterMap:bT,eventMap:yT,prevProps:{},nextProps:this.props,instance:e}),this.setState((function(){return{directionsRenderer:e}}),this.setDirectionsRendererCallback)},t.prototype.componentDidUpdate=function(e){null!==this.state.directionsRenderer&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:bT,eventMap:yT,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))},t.prototype.componentWillUnmount=function(){null!==this.state.directionsRenderer&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),SA(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))},t.prototype.render=function(){return(0,Ne.jsx)(Ne.Fragment,{})},t.contextType=_A}(t.PureComponent),function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={distanceMatrixService:null},t.setDistanceMatrixServiceCallback=function(){null!==t.state.distanceMatrixService&&t.props.onLoad&&t.props.onLoad(t.state.distanceMatrixService)},t}dA(t,e),t.prototype.componentDidMount=function(){bA(!!this.props.options,"DistanceMatrixService expected options object as parameter, but go %s",this.props.options);var e=new google.maps.DistanceMatrixService;this.setState((function(){return{distanceMatrixService:e}}),this.setDistanceMatrixServiceCallback)},t.prototype.componentDidUpdate=function(){null!==this.state.distanceMatrixService&&this.state.distanceMatrixService.getDistanceMatrix(this.props.options,this.props.callback)},t.prototype.componentWillUnmount=function(){null!==this.state.distanceMatrixService&&this.props.onUnmount&&this.props.onUnmount(this.state.distanceMatrixService)},t.prototype.render=function(){return null}}(t.PureComponent),{onPlacesChanged:"places_changed"}),xT={bounds:function(e,t){e.setBounds(t)}},wT=(function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=(0,t.createRef)(),n.state={searchBox:null},n.setSearchBoxCallback=function(){null!==n.state.searchBox&&n.props.onLoad&&n.props.onLoad(n.state.searchBox)},n}dA(n,e),n.prototype.componentDidMount=function(){if(bA(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),null!==this.containerElement&&null!==this.containerElement.current){var e=this.containerElement.current.querySelector("input");if(null!==e){var t=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=AA({updaterMap:xT,eventMap:_T,prevProps:{},nextProps:this.props,instance:t}),this.setState((function(){return{searchBox:t}}),this.setSearchBoxCallback)}}},n.prototype.componentDidUpdate=function(e){null!==this.state.searchBox&&(SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:xT,eventMap:_T,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))},n.prototype.componentWillUnmount=function(){null!==this.state.searchBox&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),SA(this.registeredEvents))},n.prototype.render=function(){return(0,Ne.jsx)("div",{ref:this.containerElement,children:t.Children.only(this.props.children)})},n.contextType=_A}(t.PureComponent),{onPlaceChanged:"place_changed"}),ET={bounds:function(e,t){e.setBounds(t)},restrictions:function(e,t){e.setComponentRestrictions(t)},fields:function(e,t){e.setFields(t)},options:function(e,t){e.setOptions(t)},types:function(e,t){e.setTypes(t)}};!function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.registeredEvents=[],n.containerElement=(0,t.createRef)(),n.state={autocomplete:null},n.setAutocompleteCallback=function(){null!==n.state.autocomplete&&n.props.onLoad&&n.props.onLoad(n.state.autocomplete)},n}dA(n,e),n.prototype.componentDidMount=function(){var e;bA(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);var t=null===(e=this.containerElement.current)||void 0===e?void 0:e.querySelector("input");if(t){var n=new google.maps.places.Autocomplete(t,this.props.options);this.registeredEvents=AA({updaterMap:ET,eventMap:wT,prevProps:{},nextProps:this.props,instance:n}),this.setState((function(){return{autocomplete:n}}),this.setAutocompleteCallback)}},n.prototype.componentDidUpdate=function(e){SA(this.registeredEvents),this.registeredEvents=AA({updaterMap:ET,eventMap:wT,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})},n.prototype.componentWillUnmount=function(){null!==this.state.autocomplete&&SA(this.registeredEvents)},n.prototype.render=function(){return(0,Ne.jsx)("div",{ref:this.containerElement,className:this.props.className,children:t.Children.only(this.props.children)})},n.defaultProps={className:""},n.contextType=_A}(t.PureComponent);const ST=["places"];function AT(e){let{title:t,inputComponent:n,helpButtonComponent:r}=e;return(0,Ne.jsx)("div",{children:(0,Ne.jsxs)("div",{className:"flex py-6",children:[(0,Ne.jsxs)("div",{className:"w-40 flex pl-3",children:[(0,Ne.jsx)("div",{className:"mx-2",children:(0,Ne.jsxs)("div",{className:"text-lg font-semibold",children:[t," "]})}),r]}),n]})})}function MT(e){let{init:n,materials:r,changeMaterial:i}=e;const[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(n);return(0,Ne.jsx)("div",{children:(0,Ne.jsx)("button",{onClick:()=>s(!0),children:(0,Ne.jsx)("div",{className:"flex",children:o?r.map(((e,t)=>(0,Ne.jsx)("div",{className:"pr-3",children:(0,Ne.jsx)("div",{onClick:()=>{return l(t=e),void i(t.Type);var t},className:"shadow rounded border border-gray-300 text-gray-900 text-sm p-2 cursor-pointer transform transition-transform duration-200\n                                    \n                                   ".concat(a.Type===e.Type?"bg-blue-200":"bg-gray-50"),children:(0,Ne.jsxs)("div",{className:"relative group",children:[(0,Ne.jsx)("div",{className:"w-96 absolute rounded-sm hidden bg-white border border-gray-300 p-2 mt-8 group-hover:block z-10",children:(0,Ne.jsx)("p",{className:"text-left text-sm",children:e.Description})}),e.Type]})},t)}))):(0,Ne.jsxs)("div",{className:"flex",children:[(0,Ne.jsx)("div",{className:"pr-3",children:(0,Ne.jsx)("div",{className:"shadow rounded p-2 cursor-pointer bg-blue-200 border border-gray-300 text-gray-900 text-sm",children:a.Type})}),(0,Ne.jsxs)("div",{className:"pr-3 flex shadow rounded p-2 cursor-pointer bg-gray-50 border border-gray-300 text-gray-900 text-sm",children:[(0,Ne.jsx)("div",{className:"cursor-pointer text-sm",children:"More Material Options"}),(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"pt-1 pl-1 h-5",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})})]})]})})})})}function TT(e){let{printJob:n,changePrintJob:r}=e;const[i,o]=(0,t.useState)(!1),[s,a]=(0,t.useState)([]),[l,c]=(0,t.useState)(n.quantity);(0,t.useEffect)((()=>{!async function(){a(await r_(e_))}()}),[]);const[u,h]=(0,t.useState)(0),[d,p]=(0,t.useState)({lat:48.4284,lng:-123.3656}),[f,m]=(0,t.useState)(0),[g,v]=(0,t.useState)(null),y=(0,t.useRef)(null),[b,_]=(0,t.useState)(null);return(0,Ne.jsx)("div",{children:(0,Ne.jsxs)("div",{className:"p-5",children:[(0,Ne.jsx)("div",{className:"my-4",children:(0,Ne.jsxs)("h2",{className:"text-3xl font-semibold text-gray-800",children:[" ","Print Parameters"," "]})}),(0,Ne.jsxs)("div",{className:"grid  grid-cols-2 gap-2",children:[(0,Ne.jsx)("div",{className:"bg-white p-4",children:(0,Ne.jsxs)("div",{className:"flex-col",children:[(0,Ne.jsx)(AT,{title:"Job Name",inputComponent:(0,Ne.jsx)(mm,{type:"text",value:n.jobName,onChange:e=>r("jobName",e.target.value),width:30,maxLength:l_})}),(0,Ne.jsx)(AT,{title:"Quantity",inputComponent:(0,Ne.jsx)(mm,{type:"number",min:"1",max:"999",value:n.quantity,onChange:e=>{const t="0"===e.target.value?1:e.target.value;r("quantity",t)},onKeyDown:e=>{/[0-9]/.test(e.key)||8===e.keyCode?e.target.value.length>=3&&8!==e.keyCode&&e.preventDefault():e.preventDefault()},onBlur:e=>{(""===e.target.value||Number(e.target.value)<1)&&c(1)}})}),(0,Ne.jsx)(AT,{title:"Color",inputComponent:(0,Ne.jsx)(pm,{label:"color",options:["No Preference","Red","Blue","Green","Purple","Orange","Yellow","Brown","Gray","Black","White"],initValue:n.color,onChange:e=>r("color",e)})}),(0,Ne.jsx)(AT,{title:"Material",inputComponent:(0,Ne.jsx)(MT,{init:{Type:n.material},materials:s,changeMaterial:e=>r("material",e)}),helpButtonComponent:(0,Ne.jsx)(fm,{helpText:"The material used in your print. The plastic option allows the printer to decide, but other options are available."})}),(0,Ne.jsx)(AT,{title:"Comment",inputComponent:(0,Ne.jsx)(a_,{value:n.comment,onChange:e=>r("comment",e.target.value)}),helpButtonComponent:(0,Ne.jsx)(fm,{helpText:"Enter any additional print details or specifications you want to communicate to the printer."})}),(0,Ne.jsxs)("div",{className:"p-5",children:[(0,Ne.jsx)("button",{onClick:()=>o(!i),children:(0,Ne.jsxs)("div",{className:"flex",children:[(0,Ne.jsx)("div",{className:"pr-3 text-lg font-semibold",children:"Advanced Options"}),i?(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:(0,Ne.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"})}):(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:(0,Ne.jsx)("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})})]})}),i?(0,Ne.jsx)("div",{className:"p-5",children:(0,Ne.jsxs)("div",{className:"rounded-lg bg-slate-50",children:[(0,Ne.jsx)(AT,{title:"Complete By",inputComponent:(0,Ne.jsx)(mm,{type:"date",value:n.completionDate,onChange:e=>r("completionDate",e.target.value)}),helpButtonComponent:(0,Ne.jsx)(fm,{helpText:"The date by which you want your print. You can leave it blank if there is no time constraint."})}),(0,Ne.jsx)(AT,{title:"Infill Density",inputComponent:(0,Ne.jsx)(pm,{options:Array.from({length:21},((e,t)=>(5*t).toString()+"%")),initValue:n.infill,onChange:e=>r("infill",e)}),helpButtonComponent:(0,Ne.jsx)(fm,{helpText:"The density of the internal structure of your print. A higher density is stronger but more expensive."})}),(0,Ne.jsx)(AT,{title:"Layer Height",inputComponent:(0,Ne.jsx)(pm,{options:["0.1 mm","0.2 mm","0.3 mm"],initValue:n.layerHeight,onChange:e=>r("layerHeight",e)}),helpButtonComponent:(0,Ne.jsx)(fm,{helpText:"The height of each print layer. Lower values produce a higher resolution print."})})]})}):(0,Ne.jsx)("div",{})]})]})}),(0,Ne.jsx)("div",{className:"bg-white p-4",children:(0,Ne.jsx)(FA,{googleMapsApiKey:"AIzaSyBeu0giaCGz9vMeTn1HBRtTRlWQuVZwpZs",libraries:ST,children:(0,Ne.jsxs)("div",{className:"grid  grid-cols-2 gap-2",children:[(0,Ne.jsx)("div",{className:"mt-2 text-lg font-semibold",children:(0,Ne.jsxs)("div",{className:"mt-20",children:[(0,Ne.jsx)("h1",{children:"Location"}),(0,Ne.jsx)(lA,{selectProps:{search_value:g,onChange:e=>{v(e),uA(e.value.place_id).then((e=>cA(e[0]))).then((e=>{let{lat:t,lng:n}=e;p({lat:t,lng:n}),(e=>{r("latitude",e)})(t),(e=>{r("longitude",e)})(n)}))}}}),(0,Ne.jsx)("br",{}),(0,Ne.jsx)("h1",{children:"Radius of travel (km)"}),(0,Ne.jsx)(mm,{type:"Distance",min:"0",value:f,onChange:e=>{isNaN(e.target.value)||(m(Number(e.target.value)),_(Number(e.target.value)),(e=>{r("radius",e)})(Number(e.target.value)),h(1))}})]})}),(0,Ne.jsx)("div",{className:"mt-2 text-lg font-semibold",children:(0,Ne.jsxs)(CA,{onLoad:e=>{y.current=e},mapContainerStyle:{height:"500px",width:"100%"},center:d,zoom:13,options:{disableDefaultUI:!0},children:[(0,Ne.jsx)(XA,{position:d},"marker-".concat(d.lat,"-").concat(d.lng)),(0,Ne.jsx)(eT,{center:d,radius:1e3*f,options:{fillColor:"rgba(0, 128, 128, 0.5)",strokeColor:"#FFFFFF",strokeOpacity:.8,strokeWeight:2}},u)]})})]})})})]})]})})}const CT="162",RT=0,LT=1,IT=2,PT=0,NT=1,kT=2,DT=3,OT=1,UT=2,FT=3,BT=0,jT=1,VT=100,zT=0,HT=1,GT=2,WT=0,KT=1,qT=2,XT=3,QT=4,YT=5,JT=6,ZT=7,$T=301,eC=302,tC=303,nC=304,rC=306,iC=1e3,oC=1001,sC=1002,aC=1003,lC=1004,cC=1005,uC=1006,hC=1007,dC=1008,pC=1009,fC=1012,mC=1013,gC=1014,vC=1015,yC=1016,bC=1020,_C=1023,xC=1026,wC=1027,EC=33776,SC=33777,AC=33778,MC=33779,TC=36492,CC=2300,RC=2301,LC=2302,IC=2400,PC=2401,NC=2402,kC="",DC="srgb",OC="srgb-linear",UC="display-p3",FC="display-p3-linear",BC="linear",jC="srgb",VC="rec709",zC="p3",HC=7680,GC=35044,WC="300 es",KC=1035,qC=2e3,XC=2001;class QC{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const YC=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];const JC=Math.PI/180,ZC=180/Math.PI;function $C(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(YC[255&e]+YC[e>>8&255]+YC[e>>16&255]+YC[e>>24&255]+"-"+YC[255&t]+YC[t>>8&255]+"-"+YC[t>>16&15|64]+YC[t>>24&255]+"-"+YC[63&n|128]+YC[n>>8&255]+"-"+YC[n>>16&255]+YC[n>>24&255]+YC[255&r]+YC[r>>8&255]+YC[r>>16&255]+YC[r>>24&255]).toLowerCase()}function eR(e,t,n){return Math.max(t,Math.min(n,e))}function tR(e,t){return(e%t+t)%t}function nR(e,t,n){return(1-n)*e+n*t}function rR(e){return 0===(e&e-1)&&0!==e}function iR(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function oR(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function sR(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const aR=JC;class lR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;lR.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(eR(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class cR{constructor(e,t,n,r,i,o,s,a,l){cR.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,s,a,l)}set(e,t,n,r,i,o,s,a,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=s,c[3]=t,c[4]=i,c[5]=a,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[3],a=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*f+s*v+a*_,i[3]=o*m+s*y+a*x,i[6]=o*g+s*b+a*w,i[1]=l*f+c*v+u*_,i[4]=l*m+c*y+u*x,i[7]=l*g+c*b+u*w,i[2]=h*f+d*v+p*_,i[5]=h*m+d*y+p*x,i[8]=h*g+d*b+p*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8];return t*o*c-t*s*l-n*i*c+n*s*a+r*i*l-r*o*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=c*o-s*l,h=s*a-c*i,d=l*i-o*a,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*l-c*n)*f,e[2]=(s*n-r*o)*f,e[3]=h*f,e[4]=(c*t-r*a)*f,e[5]=(r*i-s*t)*f,e[6]=d*f,e[7]=(n*a-l*t)*f,e[8]=(o*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,s){const a=Math.cos(i),l=Math.sin(i);return this.set(n*a,n*l,-n*(a*o+l*s)+o+e,-r*l,r*a,-r*(-l*o+a*s)+s+t,0,0,1),this}scale(e,t){return this.premultiply(uR.makeScale(e,t)),this}rotate(e){return this.premultiply(uR.makeRotation(-e)),this}translate(e,t){return this.premultiply(uR.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const uR=new cR;function hR(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function dR(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function pR(){const e=dR("canvas");return e.style.display="block",e}const fR={};function mR(e){e in fR||(fR[e]=!0,console.warn(e))}const gR=(new cR).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),vR=(new cR).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),yR={[OC]:{transfer:BC,primaries:VC,toReference:e=>e,fromReference:e=>e},[DC]:{transfer:jC,primaries:VC,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[FC]:{transfer:BC,primaries:zC,toReference:e=>e.applyMatrix3(vR),fromReference:e=>e.applyMatrix3(gR)},[UC]:{transfer:jC,primaries:zC,toReference:e=>e.convertSRGBToLinear().applyMatrix3(vR),fromReference:e=>e.applyMatrix3(gR).convertLinearToSRGB()}},bR=new Set([OC,FC]),_R={enabled:!0,_workingColorSpace:OC,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!bR.has(e))throw new Error('Unsupported working color space, "'.concat(e,'".'));this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=yR[t].toReference;return(0,yR[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return yR[e].primaries},getTransfer:function(e){return e===kC?BC:yR[e].transfer}};function xR(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function wR(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let ER;class SR{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===ER&&(ER=dR("canvas")),ER.width=e.width,ER.height=e.height;const n=ER.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=ER}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=dR("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*xR(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*xR(t[e]/255)):t[e]=xR(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let AR=0;class MR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:AR++}),this.uuid=$C(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(TR(r[t].image)):e.push(TR(r[t]))}else e=TR(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function TR(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?SR.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let CR=0;class RR extends QC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:RR.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RR.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oC,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:oC,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:uC,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:dC,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_C,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:pC,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:RR.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:kC;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:CR++}),this.uuid=$C(),this.name="",this.source=new MR(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=s,this.internalFormat=null,this.type=a,this.offset=new lR(0,0),this.repeat=new lR(1,1),this.center=new lR(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new cR,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(300!==this.mapping)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case iC:e.x=e.x-Math.floor(e.x);break;case oC:e.x=e.x<0?0:1;break;case sC:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case iC:e.y=e.y-Math.floor(e.y);break;case oC:e.y=e.y<0?0:1;break;case sC:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}RR.DEFAULT_IMAGE=null,RR.DEFAULT_MAPPING=300,RR.DEFAULT_ANISOTROPY=1;class LR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;LR.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,s=.1,a=e.elements,l=a[0],c=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<s&&Math.abs(u+f)<s&&Math.abs(p+m)<s&&Math.abs(l+d+g-3)<s)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,a=(d+1)/2,v=(g+1)/2,y=(c+h)/4,b=(u+f)/4,_=(p+m)/4;return e>a&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=b/n):a>v?a<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=_/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=b/i,r=_/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-p)/v,this.y=(u-f)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class IR extends QC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new LR(0,0,e,t),this.scissorTest=!1,this.viewport=new LR(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:uC,depthBuffer:!0,stencilBuffer:!1,depthTexture:null,samples:0,count:1},n);const i=new RR(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let s=0;s<o;s++)this.textures[s]=i.clone(),this.textures[s].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new MR(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class PR extends IR{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class NR extends RR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=aC,this.minFilter=aC,this.wrapR=oC,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class kR extends RR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=aC,this.minFilter=aC,this.wrapR=oC,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class DR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,s){let a=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],p=i[o+2],f=i[o+3];if(0===s)return e[t+0]=a,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===s)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||l!==d||c!==p){let e=1-s;const t=a*h+l*d+c*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,s=Math.sin(s*o)/i}const i=s*n;if(a=a*e+h*i,l=l*e+d*i,c=c*e+p*i,u=u*e+f*i,e===1-s){const e=1/Math.sqrt(a*a+l*l+c*c+u*u);a*=e,l*=e,c*=e,u*=e}}e[t]=a,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const s=n[r],a=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],p=i[o+3];return e[t]=s*p+c*u+a*d-l*h,e[t+1]=a*p+c*h+l*u-s*d,e[t+2]=l*p+c*d+s*h-a*u,e[t+3]=c*p-s*u-a*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,i=e._z,o=e._order,s=Math.cos,a=Math.sin,l=s(n/2),c=s(r/2),u=s(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],s=t[5],a=t[9],l=t[2],c=t[6],u=t[10],h=n+s+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-a)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>s&&n>u){const e=2*Math.sqrt(1+n-s-u);this._w=(c-a)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(s>u){const e=2*Math.sqrt(1+s-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(a+c)/e}else{const e=2*Math.sqrt(1+u-n-s);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(a+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(eR(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,s=t._x,a=t._y,l=t._z,c=t._w;return this._x=n*c+o*s+r*l-i*a,this._y=r*c+o*a+i*s-n*l,this._z=i*c+o*l+n*a-r*s,this._w=o*c-n*s-r*a-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let s=o*e._w+n*e._x+r*e._y+i*e._z;if(s<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,s=-s):this.copy(e),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const a=1-s*s;if(a<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(a),c=Math.atan2(l,s),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class OR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;OR.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FR.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FR.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,s=e.z,a=e.w,l=2*(o*r-s*n),c=2*(s*t-i*r),u=2*(i*n-o*t);return this.x=t+a*l+o*u-s*c,this.y=n+a*c+s*l-i*u,this.z=r+a*u+i*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,s=t.y,a=t.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return UR.copy(this).projectOnVector(e),this.sub(UR)}reflect(e){return this.sub(UR.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(eR(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const UR=new OR,FR=new DR;class BR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OR(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new OR(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(VR.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(VR.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=VR.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,VR):VR.fromBufferAttribute(r,t),VR.applyMatrix4(e.matrixWorld),this.expandByPoint(VR);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),zR.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),zR.copy(n.boundingBox)),zR.applyMatrix4(e.matrixWorld),this.union(zR)}const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,VR),VR.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(QR),YR.subVectors(this.max,QR),HR.subVectors(e.a,QR),GR.subVectors(e.b,QR),WR.subVectors(e.c,QR),KR.subVectors(GR,HR),qR.subVectors(WR,GR),XR.subVectors(HR,WR);let t=[0,-KR.z,KR.y,0,-qR.z,qR.y,0,-XR.z,XR.y,KR.z,0,-KR.x,qR.z,0,-qR.x,XR.z,0,-XR.x,-KR.y,KR.x,0,-qR.y,qR.x,0,-XR.y,XR.x,0];return!!$R(t,HR,GR,WR,YR)&&(t=[1,0,0,0,1,0,0,0,1],!!$R(t,HR,GR,WR,YR)&&(JR.crossVectors(KR,qR),t=[JR.x,JR.y,JR.z],$R(t,HR,GR,WR,YR)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,VR).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(VR).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(jR[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),jR[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),jR[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),jR[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),jR[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),jR[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),jR[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),jR[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(jR)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const jR=[new OR,new OR,new OR,new OR,new OR,new OR,new OR,new OR],VR=new OR,zR=new BR,HR=new OR,GR=new OR,WR=new OR,KR=new OR,qR=new OR,XR=new OR,QR=new OR,YR=new OR,JR=new OR,ZR=new OR;function $R(e,t,n,r,i){for(let o=0,s=e.length-3;o<=s;o+=3){ZR.fromArray(e,o);const s=i.x*Math.abs(ZR.x)+i.y*Math.abs(ZR.y)+i.z*Math.abs(ZR.z),a=t.dot(ZR),l=n.dot(ZR),c=r.dot(ZR);if(Math.max(-Math.max(a,l,c),Math.min(a,l,c))>s)return!1}return!0}const eL=new BR,tL=new OR,nL=new OR;class rL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):eL.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;tL.subVectors(e,this.center);const t=tL.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(tL,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(nL.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(tL.copy(e.center).add(nL)),this.expandByPoint(tL.copy(e.center).sub(nL))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const iL=new OR,oL=new OR,sL=new OR,aL=new OR,lL=new OR,cL=new OR,uL=new OR;class hL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new OR(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,iL)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=iL.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(iL.copy(this.origin).addScaledVector(this.direction,t),iL.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){oL.copy(e).add(t).multiplyScalar(.5),sL.copy(t).sub(e).normalize(),aL.copy(this.origin).sub(oL);const i=.5*e.distanceTo(t),o=-this.direction.dot(sL),s=aL.dot(this.direction),a=-aL.dot(sL),l=aL.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*a-s,h=o*s-a,p=i*c,u>=0)if(h>=-p)if(h<=p){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*s)+h*(o*u+h+2*a)+l}else h=i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h=-i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;else h<=-p?(u=Math.max(0,-(-o*i+s)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l):h<=p?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+l):(u=Math.max(0,-(o*i+s)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+s)),d=-u*u+h*(h+2*a)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(oL).addScaledVector(sL,h),d}intersectSphere(e,t){iL.subVectors(e.center,this.origin);const n=iL.dot(this.direction),r=iL.dot(iL)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),s=n-o,a=n+o;return a<0?null:s<0?this.at(a,t):this.at(s,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,s,a;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(s=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(s=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||s>r?null:((s>n||n!==n)&&(n=s),(a<r||r!==r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,iL)}intersectTriangle(e,t,n,r,i){lL.subVectors(t,e),cL.subVectors(n,e),uL.crossVectors(lL,cL);let o,s=this.direction.dot(uL);if(s>0){if(r)return null;o=1}else{if(!(s<0))return null;o=-1,s=-s}aL.subVectors(this.origin,e);const a=o*this.direction.dot(cL.crossVectors(aL,cL));if(a<0)return null;const l=o*this.direction.dot(lL.cross(aL));if(l<0)return null;if(a+l>s)return null;const c=-o*aL.dot(uL);return c<0?null:this.at(c/s,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class dL{constructor(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m){dL.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m)}set(e,t,n,r,i,o,s,a,l,c,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=s,g[13]=a,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new dL).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/pL.setFromMatrixColumn(e,0).length(),i=1/pL.setFromMatrixColumn(e,1).length(),o=1/pL.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=-a*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-s*a,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*a}else if("YXZ"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e+i*s,t[4]=r*s-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-s,t[2]=n*s-r,t[6]=i+e*s,t[10]=o*a}else if("ZXY"===e.order){const e=a*c,n=a*u,r=l*c,i=l*u;t[0]=e-i*s,t[4]=-o*u,t[8]=r+n*s,t[1]=n+r*s,t[5]=o*c,t[9]=i-e*s,t[2]=-o*l,t[6]=s,t[10]=o*a}else if("ZYX"===e.order){const e=o*c,n=o*u,r=s*c,i=s*u;t[0]=a*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=a*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=s*a,t[10]=o*a}else if("YZX"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-s*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*a,n=o*l,r=s*a,i=s*l;t[0]=a*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=s*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(mL,e,gL)}lookAt(e,t,n){const r=this.elements;return bL.subVectors(e,t),0===bL.lengthSq()&&(bL.z=1),bL.normalize(),vL.crossVectors(n,bL),0===vL.lengthSq()&&(1===Math.abs(n.z)?bL.x+=1e-4:bL.z+=1e-4,bL.normalize(),vL.crossVectors(n,bL)),vL.normalize(),yL.crossVectors(bL,vL),r[0]=vL.x,r[4]=yL.x,r[8]=bL.x,r[1]=vL.y,r[5]=yL.y,r[9]=bL.y,r[2]=vL.z,r[6]=yL.z,r[10]=bL.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],s=n[4],a=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],v=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],E=r[8],S=r[12],A=r[1],M=r[5],T=r[9],C=r[13],R=r[2],L=r[6],I=r[10],P=r[14],N=r[3],k=r[7],D=r[11],O=r[15];return i[0]=o*x+s*A+a*R+l*N,i[4]=o*w+s*M+a*L+l*k,i[8]=o*E+s*T+a*I+l*D,i[12]=o*S+s*C+a*P+l*O,i[1]=c*x+u*A+h*R+d*N,i[5]=c*w+u*M+h*L+d*k,i[9]=c*E+u*T+h*I+d*D,i[13]=c*S+u*C+h*P+d*O,i[2]=p*x+f*A+m*R+g*N,i[6]=p*w+f*M+m*L+g*k,i[10]=p*E+f*T+m*I+g*D,i[14]=p*S+f*C+m*P+g*O,i[3]=v*x+y*A+b*R+_*N,i[7]=v*w+y*M+b*L+_*k,i[11]=v*E+y*T+b*I+_*D,i[15]=v*S+y*C+b*P+_*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],s=e[5],a=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*a*u-r*l*u-i*s*h+n*l*h+r*s*d-n*a*d)+e[7]*(+t*a*d-t*l*h+i*o*h-r*o*d+r*l*c-i*a*c)+e[11]*(+t*l*u-t*s*d-i*o*u+n*o*d+i*s*c-n*l*c)+e[15]*(-r*s*c-t*a*u+t*s*h+r*o*u-n*o*h+n*a*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],s=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],v=u*m*l-f*h*l+f*a*d-s*m*d-u*a*g+s*h*g,y=p*h*l-c*m*l-p*a*d+o*m*d+c*a*g-o*h*g,b=c*f*l-p*u*l+p*s*d-o*f*d-c*s*g+o*u*g,_=p*u*a-c*f*a-p*s*h+o*f*h+c*s*m-o*u*m,x=t*v+n*y+r*b+i*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return e[0]=v*w,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*w,e[2]=(s*m*i-f*a*i+f*r*l-n*m*l-s*r*g+n*a*g)*w,e[3]=(u*a*i-s*h*i-u*r*l+n*h*l+s*r*d-n*a*d)*w,e[4]=y*w,e[5]=(c*m*i-p*h*i+p*r*d-t*m*d-c*r*g+t*h*g)*w,e[6]=(p*a*i-o*m*i-p*r*l+t*m*l+o*r*g-t*a*g)*w,e[7]=(o*h*i-c*a*i+c*r*l-t*h*l-o*r*d+t*a*d)*w,e[8]=b*w,e[9]=(p*u*i-c*f*i-p*n*d+t*f*d+c*n*g-t*u*g)*w,e[10]=(o*f*i-p*s*i+p*n*l-t*f*l-o*n*g+t*s*g)*w,e[11]=(c*s*i-o*u*i-c*n*l+t*u*l+o*n*d-t*s*d)*w,e[12]=_*w,e[13]=(c*f*r-p*u*r+p*n*h-t*f*h-c*n*m+t*u*m)*w,e[14]=(p*s*r-o*f*r-p*n*a+t*f*a+o*n*m-t*s*m)*w,e[15]=(o*u*r-c*s*r+c*n*a-t*u*a-o*n*h+t*s*h)*w,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,s=e.y,a=e.z,l=i*o,c=i*s;return this.set(l*o+n,l*s-r*a,l*a+r*s,0,l*s+r*a,c*s+n,c*a-r*o,0,l*a-r*s,c*a+r*o,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,s=t._z,a=t._w,l=i+i,c=o+o,u=s+s,h=i*l,d=i*c,p=i*u,f=o*c,m=o*u,g=s*u,v=a*l,y=a*c,b=a*u,_=n.x,x=n.y,w=n.z;return r[0]=(1-(f+g))*_,r[1]=(d+b)*_,r[2]=(p-y)*_,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(h+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(m-v)*w,r[10]=(1-(h+f))*w,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=pL.set(r[0],r[1],r[2]).length();const o=pL.set(r[4],r[5],r[6]).length(),s=pL.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],fL.copy(this);const a=1/i,l=1/o,c=1/s;return fL.elements[0]*=a,fL.elements[1]*=a,fL.elements[2]*=a,fL.elements[4]*=l,fL.elements[5]*=l,fL.elements[6]*=l,fL.elements[8]*=c,fL.elements[9]*=c,fL.elements[10]*=c,t.setFromRotationMatrix(fL),n.x=i,n.y=o,n.z=s,this}makePerspective(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qC;const a=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r);let d,p;if(s===qC)d=-(o+i)/(o-i),p=-2*o*i/(o-i);else{if(s!==XC)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+s);d=-o/(o-i),p=-o*i/(o-i)}return a[0]=l,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=c,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:qC;const a=this.elements,l=1/(t-e),c=1/(n-r),u=1/(o-i),h=(t+e)*l,d=(n+r)*c;let p,f;if(s===qC)p=(o+i)*u,f=-2*u;else{if(s!==XC)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+s);p=i*u,f=-1*u}return a[0]=2*l,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*c,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=f,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const pL=new OR,fL=new dL,mL=new OR(0,0,0),gL=new OR(1,1,1),vL=new OR,yL=new OR,bL=new OR,_L=new dL,xL=new DR;class wL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wL.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],o=r[4],s=r[8],a=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(eR(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-eR(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,d),this._z=Math.atan2(a,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(eR(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-eR(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(eR(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(s,d));break;case"XZY":this._z=Math.asin(-eR(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(s,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return _L.makeRotationFromQuaternion(e),this.setFromRotationMatrix(_L,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return xL.setFromEuler(this),this.setFromQuaternion(xL,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}wL.DEFAULT_ORDER="XYZ";class EL{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let SL=0;const AL=new OR,ML=new DR,TL=new dL,CL=new OR,RL=new OR,LL=new OR,IL=new DR,PL=new OR(1,0,0),NL=new OR(0,1,0),kL=new OR(0,0,1),DL={type:"added"},OL={type:"removed"},UL={type:"childadded",child:null},FL={type:"childremoved",child:null};class BL extends QC{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:SL++}),this.uuid=$C(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=BL.DEFAULT_UP.clone();const e=new OR,t=new wL,n=new DR,r=new OR(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new dL},normalMatrix:{value:new cR}}),this.matrix=new dL,this.matrixWorld=new dL,this.matrixAutoUpdate=BL.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=BL.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new EL,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return ML.setFromAxisAngle(e,t),this.quaternion.multiply(ML),this}rotateOnWorldAxis(e,t){return ML.setFromAxisAngle(e,t),this.quaternion.premultiply(ML),this}rotateX(e){return this.rotateOnAxis(PL,e)}rotateY(e){return this.rotateOnAxis(NL,e)}rotateZ(e){return this.rotateOnAxis(kL,e)}translateOnAxis(e,t){return AL.copy(e).applyQuaternion(this.quaternion),this.position.add(AL.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(PL,e)}translateY(e){return this.translateOnAxis(NL,e)}translateZ(e){return this.translateOnAxis(kL,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(TL.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?CL.copy(e):CL.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),RL.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?TL.lookAt(RL,CL,this.up):TL.lookAt(CL,RL,this.up),this.quaternion.setFromRotationMatrix(TL),r&&(TL.extractRotation(r.matrixWorld),ML.setFromRotationMatrix(TL),this.quaternion.premultiply(ML.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(DL),UL.child=e,this.dispatchEvent(UL),UL.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(OL),FL.child=e,this.dispatchEvent(FL),FL.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),TL.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),TL.multiply(e.parent.matrixWorld)),e.applyMatrix4(TL),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(RL,e,LL),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(RL,IL,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),s=o(e.images),a=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),s.length>0&&(n.images=s),a.length>0&&(n.shapes=a),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}BL.DEFAULT_UP=new OR(0,1,0),BL.DEFAULT_MATRIX_AUTO_UPDATE=!0,BL.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const jL=new OR,VL=new OR,zL=new OR,HL=new OR,GL=new OR,WL=new OR,KL=new OR,qL=new OR,XL=new OR,QL=new OR;class YL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OR,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new OR,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new OR;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),jL.subVectors(e,t),r.cross(jL);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){jL.subVectors(r,t),VL.subVectors(n,t),zL.subVectors(e,t);const o=jL.dot(jL),s=jL.dot(VL),a=jL.dot(zL),l=VL.dot(VL),c=VL.dot(zL),u=o*l-s*s;if(0===u)return i.set(0,0,0),null;const h=1/u,d=(l*a-s*c)*h,p=(o*c-s*a)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,HL)&&(HL.x>=0&&HL.y>=0&&HL.x+HL.y<=1)}static getInterpolation(e,t,n,r,i,o,s,a){return null===this.getBarycoord(e,t,n,r,HL)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(i,HL.x),a.addScaledVector(o,HL.y),a.addScaledVector(s,HL.z),a)}static isFrontFacing(e,t,n,r){return jL.subVectors(n,t),VL.subVectors(e,t),jL.cross(VL).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return jL.subVectors(this.c,this.b),VL.subVectors(this.a,this.b),.5*jL.cross(VL).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return YL.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return YL.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return YL.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return YL.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return YL.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,s;GL.subVectors(r,n),WL.subVectors(i,n),qL.subVectors(e,n);const a=GL.dot(qL),l=WL.dot(qL);if(a<=0&&l<=0)return t.copy(n);XL.subVectors(e,r);const c=GL.dot(XL),u=WL.dot(XL);if(c>=0&&u<=c)return t.copy(r);const h=a*u-c*l;if(h<=0&&a>=0&&c<=0)return o=a/(a-c),t.copy(n).addScaledVector(GL,o);QL.subVectors(e,i);const d=GL.dot(QL),p=WL.dot(QL);if(p>=0&&d<=p)return t.copy(i);const f=d*l-a*p;if(f<=0&&l>=0&&p<=0)return s=l/(l-p),t.copy(n).addScaledVector(WL,s);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return KL.subVectors(i,r),s=(u-c)/(u-c+(d-p)),t.copy(r).addScaledVector(KL,s);const g=1/(m+f+h);return o=f*g,s=h*g,t.copy(n).addScaledVector(GL,o).addScaledVector(WL,s)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const JL={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ZL={h:0,s:0,l:0},$L={h:0,s:0,l:0};function eI(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class tI{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DC;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,_R.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_R.workingColorSpace;return this.r=e,this.g=t,this.b=n,_R.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:_R.workingColorSpace;if(e=tR(e,1),t=eR(t,0,1),n=eR(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=eI(i,r,e+1/3),this.g=eI(i,r,e),this.b=eI(i,r,e-1/3)}return _R.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DC;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=t[1],s=t[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(s))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DC;const n=JL[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=xR(e.r),this.g=xR(e.g),this.b=xR(e.b),this}copyLinearToSRGB(e){return this.r=wR(e.r),this.g=wR(e.g),this.b=wR(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DC;return _R.fromWorkingColorSpace(nI.copy(this),e),65536*Math.round(eR(255*nI.r,0,255))+256*Math.round(eR(255*nI.g,0,255))+Math.round(eR(255*nI.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DC;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_R.workingColorSpace;_R.fromWorkingColorSpace(nI.copy(this),t);const n=nI.r,r=nI.g,i=nI.b,o=Math.max(n,r,i),s=Math.min(n,r,i);let a,l;const c=(s+o)/2;if(s===o)a=0,l=0;else{const e=o-s;switch(l=c<=.5?e/(o+s):e/(2-o-s),o){case n:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-n)/e+2;break;case i:a=(n-r)/e+4}a/=6}return e.h=a,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_R.workingColorSpace;return _R.fromWorkingColorSpace(nI.copy(this),t),e.r=nI.r,e.g=nI.g,e.b=nI.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DC;_R.fromWorkingColorSpace(nI.copy(this),e);const t=nI.r,n=nI.g,r=nI.b;return e!==DC?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(r.toFixed(3),")"):"rgb(".concat(Math.round(255*t),",").concat(Math.round(255*n),",").concat(Math.round(255*r),")")}offsetHSL(e,t,n){return this.getHSL(ZL),this.setHSL(ZL.h+e,ZL.s+t,ZL.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(ZL),e.getHSL($L);const n=nR(ZL.h,$L.h,t),r=nR(ZL.s,$L.s,t),i=nR(ZL.l,$L.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const nI=new tI;tI.NAMES=JL;let rI=0;class iI extends QC{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:rI++}),this.uuid=$C(),this.name="",this.type="Material",this.blending=1,this.side=BT,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=VT,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new tI(0,0,0),this.blendAlpha=0,this.depthFunc=3,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=HC,this.stencilZFail=HC,this.stencilZPass=HC,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: parameter '".concat(t,"' has value of undefined."));continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn("THREE.Material: '".concat(t,"' is not a property of THREE.").concat(this.type,"."))}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),this.side!==BT&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),204!==this.blendSrc&&(n.blendSrc=this.blendSrc),205!==this.blendDst&&(n.blendDst=this.blendDst),this.blendEquation!==VT&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),3!==this.depthFunc&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==HC&&(n.stencilFail=this.stencilFail),this.stencilZFail!==HC&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==HC&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class oI extends iI{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new tI(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wL,this.combine=zT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const sI=new OR,aI=new lR;class lI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=GC,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=vC,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return mR("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)aI.fromBufferAttribute(this,t),aI.applyMatrix3(e),this.setXY(t,aI.x,aI.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)sI.fromBufferAttribute(this,t),sI.applyMatrix3(e),this.setXYZ(t,sI.x,sI.y,sI.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)sI.fromBufferAttribute(this,t),sI.applyMatrix4(e),this.setXYZ(t,sI.x,sI.y,sI.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)sI.fromBufferAttribute(this,t),sI.applyNormalMatrix(e),this.setXYZ(t,sI.x,sI.y,sI.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)sI.fromBufferAttribute(this,t),sI.transformDirection(e),this.setXYZ(t,sI.x,sI.y,sI.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=oR(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=sR(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=oR(t,this.array)),t}setX(e,t){return this.normalized&&(t=sR(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=oR(t,this.array)),t}setY(e,t){return this.normalized&&(t=sR(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=oR(t,this.array)),t}setZ(e,t){return this.normalized&&(t=sR(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=oR(t,this.array)),t}setW(e,t){return this.normalized&&(t=sR(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=sR(t,this.array),n=sR(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=sR(t,this.array),n=sR(n,this.array),r=sR(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=sR(t,this.array),n=sR(n,this.array),r=sR(r,this.array),i=sR(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==GC&&(e.usage=this.usage),e}}class cI extends lI{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class uI extends lI{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class hI extends lI{constructor(e,t,n){super(new Float32Array(e),t,n)}}let dI=0;const pI=new dL,fI=new BL,mI=new OR,gI=new BR,vI=new BR,yI=new OR;class bI extends QC{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dI++}),this.uuid=$C(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(hR(e)?uI:cI)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new cR).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return pI.makeRotationFromQuaternion(e),this.applyMatrix4(pI),this}rotateX(e){return pI.makeRotationX(e),this.applyMatrix4(pI),this}rotateY(e){return pI.makeRotationY(e),this.applyMatrix4(pI),this}rotateZ(e){return pI.makeRotationZ(e),this.applyMatrix4(pI),this}translate(e,t,n){return pI.makeTranslation(e,t,n),this.applyMatrix4(pI),this}scale(e,t,n){return pI.makeScale(e,t,n),this.applyMatrix4(pI),this}lookAt(e){return fI.lookAt(e),fI.updateMatrix(),this.applyMatrix4(fI.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(mI).negate(),this.translate(mI.x,mI.y,mI.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new hI(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new BR);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new OR(-1/0,-1/0,-1/0),new OR(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];gI.setFromBufferAttribute(e),this.morphTargetsRelative?(yI.addVectors(this.boundingBox.min,gI.min),this.boundingBox.expandByPoint(yI),yI.addVectors(this.boundingBox.max,gI.max),this.boundingBox.expandByPoint(yI)):(this.boundingBox.expandByPoint(gI.min),this.boundingBox.expandByPoint(gI.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new rL);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new OR,1/0);if(e){const n=this.boundingSphere.center;if(gI.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];vI.setFromBufferAttribute(n),this.morphTargetsRelative?(yI.addVectors(gI.min,vI.min),gI.expandByPoint(yI),yI.addVectors(gI.max,vI.max),gI.expandByPoint(yI)):(gI.expandByPoint(vI.min),gI.expandByPoint(vI.max))}gI.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)yI.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(yI));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],s=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)yI.fromBufferAttribute(o,t),s&&(mI.fromBufferAttribute(e,t),yI.add(mI)),r=Math.max(r,n.distanceToSquared(yI))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new lI(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),s=[],a=[];for(let E=0;E<n.count;E++)s[E]=new OR,a[E]=new OR;const l=new OR,c=new OR,u=new OR,h=new lR,d=new lR,p=new lR,f=new OR,m=new OR;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),c.sub(l),u.sub(l),d.sub(h),p.sub(h);const o=1/(d.x*p.y-p.x*d.y);isFinite(o)&&(f.copy(c).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(o),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-p.x).multiplyScalar(o),s[e].add(f),s[t].add(f),s[r].add(f),a[e].add(m),a[t].add(m),a[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let E=0,S=v.length;E<S;++E){const t=v[E],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const y=new OR,b=new OR,_=new OR,x=new OR;function w(e){_.fromBufferAttribute(r,e),x.copy(_);const t=s[e];y.copy(t),y.sub(_.multiplyScalar(_.dot(t))).normalize(),b.crossVectors(x,t);const n=b.dot(a[e])<0?-1:1;o.setXYZW(e,y.x,y.y,y.z,n)}for(let E=0,S=v.length;E<S;++E){const t=v[E],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)w(e.getX(r+0)),w(e.getX(r+1)),w(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new lI(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new OR,i=new OR,o=new OR,s=new OR,a=new OR,l=new OR,c=new OR,u=new OR;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),o.fromBufferAttribute(t,f),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),s.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),s.add(c),a.add(c),l.add(c),n.setXYZ(d,s.x,s.y,s.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)yI.fromBufferAttribute(e,t),yI.normalize(),e.setXYZ(t,yI.x,yI.y,yI.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let s=0,a=0;for(let l=0,c=t.length;l<c;l++){s=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[a++]=n[s++]}return new lI(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new bI,n=this.index.array,r=this.attributes;for(const s in r){const i=e(r[s],n);t.setAttribute(s,i)}const i=this.morphAttributes;for(const s in i){const r=[],o=i[s];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[s]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let s=0,a=o.length;s<a;s++){const e=o[s];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const a in n){const t=n[a];e.data.attributes[a]=t.toJSON(e.data)}const r={};let i=!1;for(const a in this.morphAttributes){const t=this.morphAttributes[a],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[a]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const s=this.boundingSphere;return null!==s&&(e.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const s=e.boundingBox;null!==s&&(this.boundingBox=s.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _I=new dL,xI=new hL,wI=new rL,EI=new OR,SI=new OR,AI=new OR,MI=new OR,TI=new OR,CI=new OR,RI=new lR,LI=new lR,II=new lR,PI=new OR,NI=new OR,kI=new OR,DI=new OR,OI=new OR;class UI extends BL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bI,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new oI;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const s=this.morphTargetInfluences;if(i&&s){CI.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=s[n],a=i[n];0!==r&&(TI.fromBufferAttribute(a,e),o?CI.addScaledVector(TI,r):CI.addScaledVector(TI.sub(t),r))}t.add(CI)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),wI.copy(n.boundingSphere),wI.applyMatrix4(i),xI.copy(e.ray).recast(e.near),!1===wI.containsPoint(xI.origin)){if(null===xI.intersectSphere(wI,EI))return;if(xI.origin.distanceToSquared(EI)>(e.far-e.near)**2)return}_I.copy(i).invert(),xI.copy(e.ray).applyMatrix4(_I),null!==n.boundingBox&&!1===xI.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,xI)}}_computeIntersections(e,t,n){let r;const i=this.geometry,o=this.material,s=i.index,a=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==s)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const i=h[p],a=o[i.materialIndex];for(let o=Math.max(i.start,d.start),h=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));o<h;o+=3){r=FI(this,a,e,n,l,c,u,s.getX(o),s.getX(o+1),s.getX(o+2)),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);i<a;i+=3){r=FI(this,o,e,n,l,c,u,s.getX(i),s.getX(i+1),s.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==a)if(Array.isArray(o))for(let p=0,f=h.length;p<f;p++){const i=h[p],s=o[i.materialIndex];for(let o=Math.max(i.start,d.start),h=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));o<h;o+=3){r=FI(this,s,e,n,l,c,u,o,o+1,o+2),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);i<s;i+=3){r=FI(this,o,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function FI(e,t,n,r,i,o,s,a,l,c){e.getVertexPosition(a,SI),e.getVertexPosition(l,AI),e.getVertexPosition(c,MI);const u=function(e,t,n,r,i,o,s,a){let l;if(l=t.side===jT?r.intersectTriangle(s,o,i,!0,a):r.intersectTriangle(i,o,s,t.side===BT,a),null===l)return null;OI.copy(a),OI.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(OI);return c<n.near||c>n.far?null:{distance:c,point:OI.clone(),object:e}}(e,t,n,r,SI,AI,MI,DI);if(u){i&&(RI.fromBufferAttribute(i,a),LI.fromBufferAttribute(i,l),II.fromBufferAttribute(i,c),u.uv=YL.getInterpolation(DI,SI,AI,MI,RI,LI,II,new lR)),o&&(RI.fromBufferAttribute(o,a),LI.fromBufferAttribute(o,l),II.fromBufferAttribute(o,c),u.uv1=YL.getInterpolation(DI,SI,AI,MI,RI,LI,II,new lR)),s&&(PI.fromBufferAttribute(s,a),NI.fromBufferAttribute(s,l),kI.fromBufferAttribute(s,c),u.normal=YL.getInterpolation(DI,SI,AI,MI,PI,NI,kI,new OR),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a:a,b:l,c:c,normal:new OR,materialIndex:0};YL.getNormal(SI,AI,MI,e.normal),u.face=e}return u}class BI extends bI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const s=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const a=[],l=[],c=[],u=[];let h=0,d=0;function p(e,t,n,r,i,o,p,f,m,g,v){const y=o/m,b=p/g,_=o/2,x=p/2,w=f/2,E=m+1,S=g+1;let A=0,M=0;const T=new OR;for(let s=0;s<S;s++){const o=s*b-x;for(let a=0;a<E;a++){const h=a*y-_;T[e]=h*r,T[t]=o*i,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=f>0?1:-1,c.push(T.x,T.y,T.z),u.push(a/m),u.push(1-s/g),A+=1}}for(let s=0;s<g;s++)for(let e=0;e<m;e++){const t=h+e+E*s,n=h+e+E*(s+1),r=h+(e+1)+E*(s+1),i=h+(e+1)+E*s;a.push(t,n,i),a.push(n,r,i),M+=6}s.addGroup(d,M,v),d+=M,h+=A}p("z","y","x",-1,-1,n,t,e,o,i,0),p("z","y","x",1,-1,n,t,-e,o,i,1),p("x","z","y",1,1,e,n,t,r,o,2),p("x","z","y",1,-1,e,n,-t,r,o,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new hI(l,3)),this.setAttribute("normal",new hI(c,3)),this.setAttribute("uv",new hI(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new BI(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function jI(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function VI(e){const t={};for(let n=0;n<e.length;n++){const r=jI(e[n]);for(const e in r)t[e]=r[e]}return t}function zI(e){return null===e.getRenderTarget()?e.outputColorSpace:_R.workingColorSpace}const HI={clone:jI,merge:VI};class GI extends iI{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1,clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=jI(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class WI extends BL{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new dL,this.projectionMatrix=new dL,this.projectionMatrixInverse=new dL,this.coordinateSystem=qC}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const KI=new OR,qI=new lR,XI=new lR;class QI extends WI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*ZC*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*JC*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*ZC*Math.atan(Math.tan(.5*JC*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){KI.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(KI.x,KI.y).multiplyScalar(-e/KI.z),KI.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(KI.x,KI.y).multiplyScalar(-e/KI.z)}getViewSize(e,t){return this.getViewBounds(e,qI,XI),t.subVectors(XI,qI)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*JC*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/s,r*=o.width/e,n*=o.height/s}const s=this.filmOffset;0!==s&&(i+=e*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const YI=-90;class JI extends BL{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new QI(YI,1,e,t);r.layers=this.layers,this.add(r);const i=new QI(YI,1,e,t);i.layers=this.layers,this.add(i);const o=new QI(YI,1,e,t);o.layers=this.layers,this.add(o);const s=new QI(YI,1,e,t);s.layers=this.layers,this.add(s);const a=new QI(YI,1,e,t);a.layers=this.layers,this.add(a);const l=new QI(YI,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,o,s,a]=t;for(const l of t)this.remove(l);if(e===qC)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),s.up.set(0,1,0),s.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==XC)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),s.up.set(0,-1,0),s.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,o,s,a,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,s),e.setRenderTarget(n,3,r),e.render(t,a),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class ZI extends RR{constructor(e,t,n,r,i,o,s,a,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:$T,n,r,i,o,s,a,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class $I extends PR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new ZI(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:uC}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",i="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",o=new BI(5,5,5),s=new GI({name:"CubemapFromEquirect",uniforms:jI(n),vertexShader:r,fragmentShader:i,side:jT,blending:0});s.uniforms.tEquirect.value=t;const a=new UI(o,s),l=t.minFilter;t.minFilter===dC&&(t.minFilter=uC);return new JI(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}const eP=new OR,tP=new OR,nP=new cR;class rP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new OR(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=eP.subVectors(n,t).cross(tP.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(eP),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||nP.getNormalMatrix(e),r=this.coplanarPoint(eP).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const iP=new rL,oP=new OR;class sP{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new rP,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new rP,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new rP,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new rP,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new rP,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new rP;this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const s=this.planes;return s[0].copy(e),s[1].copy(t),s[2].copy(n),s[3].copy(r),s[4].copy(i),s[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qC;const n=this.planes,r=e.elements,i=r[0],o=r[1],s=r[2],a=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(n[0].setComponents(a-i,h-l,m-d,b-g).normalize(),n[1].setComponents(a+i,h+l,m+d,b+g).normalize(),n[2].setComponents(a+o,h+c,m+p,b+v).normalize(),n[3].setComponents(a-o,h-c,m-p,b-v).normalize(),n[4].setComponents(a-s,h-u,m-f,b-y).normalize(),t===qC)n[5].setComponents(a+s,h+u,m+f,b+y).normalize();else{if(t!==XC)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(s,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),iP.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),iP.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(iP)}intersectsSprite(e){return iP.center.set(0,0,0),iP.radius=.7071067811865476,iP.applyMatrix4(e.matrixWorld),this.intersectsSphere(iP)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(oP.x=r.normal.x>0?e.max.x:e.min.x,oP.y=r.normal.y>0?e.max.y:e.min.y,oP.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(oP)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function aP(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function lP(e,t){const n=t.isWebGL2,r=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),r.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=r.get(t);n&&(e.deleteBuffer(n.buffer),r.delete(t))},update:function(t,i){if(t.isGLBufferAttribute){const e=r.get(t);return void((!e||e.version<t.version)&&r.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const o=r.get(t);if(void 0===o)r.set(t,function(t,r){const i=t.array,o=t.usage,s=i.byteLength,a=e.createBuffer();let l;if(e.bindBuffer(r,a),e.bufferData(r,i,o),t.onUploadCallback(),i instanceof Float32Array)l=e.FLOAT;else if(i instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");l=e.HALF_FLOAT}else l=e.UNSIGNED_SHORT;else if(i instanceof Int16Array)l=e.SHORT;else if(i instanceof Uint32Array)l=e.UNSIGNED_INT;else if(i instanceof Int32Array)l=e.INT;else if(i instanceof Int8Array)l=e.BYTE;else if(i instanceof Uint8Array)l=e.UNSIGNED_BYTE;else{if(!(i instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+i);l=e.UNSIGNED_BYTE}return{buffer:a,type:l,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version,size:s}}(t,i));else if(o.version<t.version){if(o.size!==t.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,r,i){const o=r.array,s=r._updateRange,a=r.updateRanges;if(e.bindBuffer(i,t),-1===s.count&&0===a.length&&e.bufferSubData(i,0,o),0!==a.length){for(let t=0,r=a.length;t<r;t++){const r=a[t];n?e.bufferSubData(i,r.start*o.BYTES_PER_ELEMENT,o,r.start,r.count):e.bufferSubData(i,r.start*o.BYTES_PER_ELEMENT,o.subarray(r.start,r.start+r.count))}r.clearUpdateRanges()}-1!==s.count&&(n?e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o,s.offset,s.count):e.bufferSubData(i,s.offset*o.BYTES_PER_ELEMENT,o.subarray(s.offset,s.offset+s.count)),s.count=-1),r.onUploadCallback()}(o.buffer,t,i),o.version=t.version}}}}class cP extends bI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,s=Math.floor(n),a=Math.floor(r),l=s+1,c=a+1,u=e/s,h=t/a,d=[],p=[],f=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*u-i;p.push(n,-e,0),f.push(0,0,1),m.push(t/s),m.push(1-g/a)}}for(let g=0;g<a;g++)for(let e=0;e<s;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new hI(p,3)),this.setAttribute("normal",new hI(f,3)),this.setAttribute("uv",new hI(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cP(e.width,e.height,e.widthSegments,e.heightSegments)}}const uP={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[MORPHTARGETS_COUNT];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t#endif\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\t#ifndef USE_INSTANCING_MORPH\n\t\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\t#endif\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tfloat startCompression = 0.8 - 0.04;\n\tfloat desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min(color.r, min(color.g, color.b));\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max(color.r, max(color.g, color.b));\n\tif (peak < startCompression) return color;\n\tfloat d = 1. - startCompression;\n\tfloat newPeak = 1. - d * d / (peak + d - startCompression);\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / (desaturation * (peak - newPeak) + 1.);\n\treturn mix(color, vec3(1, 1, 1), g);\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},hP={common:{diffuse:{value:new tI(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new cR},alphaMap:{value:null},alphaMapTransform:{value:new cR},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new cR}},envmap:{envMap:{value:null},envMapRotation:{value:new cR},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new cR}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new cR}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new cR},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new cR},normalScale:{value:new lR(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new cR},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new cR}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new cR}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new cR}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new tI(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new tI(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new cR},alphaTest:{value:0},uvTransform:{value:new cR}},sprite:{diffuse:{value:new tI(16777215)},opacity:{value:1},center:{value:new lR(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new cR},alphaMap:{value:null},alphaMapTransform:{value:new cR},alphaTest:{value:0}}},dP={basic:{uniforms:VI([hP.common,hP.specularmap,hP.envmap,hP.aomap,hP.lightmap,hP.fog]),vertexShader:uP.meshbasic_vert,fragmentShader:uP.meshbasic_frag},lambert:{uniforms:VI([hP.common,hP.specularmap,hP.envmap,hP.aomap,hP.lightmap,hP.emissivemap,hP.bumpmap,hP.normalmap,hP.displacementmap,hP.fog,hP.lights,{emissive:{value:new tI(0)}}]),vertexShader:uP.meshlambert_vert,fragmentShader:uP.meshlambert_frag},phong:{uniforms:VI([hP.common,hP.specularmap,hP.envmap,hP.aomap,hP.lightmap,hP.emissivemap,hP.bumpmap,hP.normalmap,hP.displacementmap,hP.fog,hP.lights,{emissive:{value:new tI(0)},specular:{value:new tI(1118481)},shininess:{value:30}}]),vertexShader:uP.meshphong_vert,fragmentShader:uP.meshphong_frag},standard:{uniforms:VI([hP.common,hP.envmap,hP.aomap,hP.lightmap,hP.emissivemap,hP.bumpmap,hP.normalmap,hP.displacementmap,hP.roughnessmap,hP.metalnessmap,hP.fog,hP.lights,{emissive:{value:new tI(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:uP.meshphysical_vert,fragmentShader:uP.meshphysical_frag},toon:{uniforms:VI([hP.common,hP.aomap,hP.lightmap,hP.emissivemap,hP.bumpmap,hP.normalmap,hP.displacementmap,hP.gradientmap,hP.fog,hP.lights,{emissive:{value:new tI(0)}}]),vertexShader:uP.meshtoon_vert,fragmentShader:uP.meshtoon_frag},matcap:{uniforms:VI([hP.common,hP.bumpmap,hP.normalmap,hP.displacementmap,hP.fog,{matcap:{value:null}}]),vertexShader:uP.meshmatcap_vert,fragmentShader:uP.meshmatcap_frag},points:{uniforms:VI([hP.points,hP.fog]),vertexShader:uP.points_vert,fragmentShader:uP.points_frag},dashed:{uniforms:VI([hP.common,hP.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:uP.linedashed_vert,fragmentShader:uP.linedashed_frag},depth:{uniforms:VI([hP.common,hP.displacementmap]),vertexShader:uP.depth_vert,fragmentShader:uP.depth_frag},normal:{uniforms:VI([hP.common,hP.bumpmap,hP.normalmap,hP.displacementmap,{opacity:{value:1}}]),vertexShader:uP.meshnormal_vert,fragmentShader:uP.meshnormal_frag},sprite:{uniforms:VI([hP.sprite,hP.fog]),vertexShader:uP.sprite_vert,fragmentShader:uP.sprite_frag},background:{uniforms:{uvTransform:{value:new cR},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:uP.background_vert,fragmentShader:uP.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new cR}},vertexShader:uP.backgroundCube_vert,fragmentShader:uP.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:uP.cube_vert,fragmentShader:uP.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:uP.equirect_vert,fragmentShader:uP.equirect_frag},distanceRGBA:{uniforms:VI([hP.common,hP.displacementmap,{referencePosition:{value:new OR},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:uP.distanceRGBA_vert,fragmentShader:uP.distanceRGBA_frag},shadow:{uniforms:VI([hP.lights,hP.fog,{color:{value:new tI(0)},opacity:{value:1}}]),vertexShader:uP.shadow_vert,fragmentShader:uP.shadow_frag}};dP.physical={uniforms:VI([dP.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new cR},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new cR},clearcoatNormalScale:{value:new lR(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new cR},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new cR},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new cR},sheen:{value:0},sheenColor:{value:new tI(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new cR},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new cR},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new cR},transmissionSamplerSize:{value:new lR},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new cR},attenuationDistance:{value:0},attenuationColor:{value:new tI(0)},specularColor:{value:new tI(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new cR},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new cR},anisotropyVector:{value:new lR},anisotropyMap:{value:null},anisotropyMapTransform:{value:new cR}}]),vertexShader:uP.meshphysical_vert,fragmentShader:uP.meshphysical_frag};const pP={r:0,b:0,g:0},fP=new wL,mP=new dL;function gP(e,t,n,r,i,o,s){const a=new tI(0);let l,c,u=!0===o?0:1,h=null,d=0,p=null;function f(t,n){t.getRGB(pP,zI(e)),r.buffers.color.setClear(pP.r,pP.g,pP.b,n,s)}return{getClearColor:function(){return a},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;a.set(e),u=t,f(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,f(a,u)},render:function(o,m){let g=!1,v=!0===m.isScene?m.background:null;if(v&&v.isTexture){v=(m.backgroundBlurriness>0?n:t).get(v)}null===v?f(a,u):v&&v.isColor&&(f(v,1),g=!0);const y=e.xr.getEnvironmentBlendMode();"additive"===y?r.buffers.color.setClear(0,0,0,1,s):"alpha-blend"===y&&r.buffers.color.setClear(0,0,0,0,s),(e.autoClear||g)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),v&&(v.isCubeTexture||v.mapping===rC)?(void 0===c&&(c=new UI(new BI(1,1,1),new GI({name:"BackgroundCubeMaterial",uniforms:jI(dP.backgroundCube.uniforms),vertexShader:dP.backgroundCube.vertexShader,fragmentShader:dP.backgroundCube.fragmentShader,side:jT,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),fP.copy(m.backgroundRotation),fP.x*=-1,fP.y*=-1,fP.z*=-1,v.isCubeTexture&&!1===v.isRenderTargetTexture&&(fP.y*=-1,fP.z*=-1),c.material.uniforms.envMap.value=v,c.material.uniforms.flipEnvMap.value=v.isCubeTexture&&!1===v.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=m.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(mP.makeRotationFromEuler(fP)),c.material.toneMapped=_R.getTransfer(v.colorSpace)!==jC,h===v&&d===v.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),c.layers.enableAll(),o.unshift(c,c.geometry,c.material,0,0,null)):v&&v.isTexture&&(void 0===l&&(l=new UI(new cP(2,2),new GI({name:"BackgroundMaterial",uniforms:jI(dP.background.uniforms),vertexShader:dP.background.vertexShader,fragmentShader:dP.background.fragmentShader,side:BT,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=v,l.material.uniforms.backgroundIntensity.value=m.backgroundIntensity,l.material.toneMapped=_R.getTransfer(v.colorSpace)!==jC,!0===v.matrixAutoUpdate&&v.updateMatrix(),l.material.uniforms.uvTransform.value.copy(v.matrix),h===v&&d===v.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=v,d=v.version,p=e.toneMapping),l.layers.enableAll(),o.unshift(l,l.geometry,l.material,0,0,null))}}}function vP(e,t,n,r){const i=e.getParameter(e.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:t.get("OES_vertex_array_object"),s=r.isWebGL2||null!==o,a={},l=p(null);let c=l,u=!1;function h(t){return r.isWebGL2?e.bindVertexArray(t):o.bindVertexArrayOES(t)}function d(t){return r.isWebGL2?e.deleteVertexArray(t):o.deleteVertexArrayOES(t)}function p(e){const t=[],n=[],r=[];for(let o=0;o<i;o++)t[o]=0,n[o]=0,r[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:r,object:e,attributes:{},index:null}}function f(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,i){const o=c.newAttributes,s=c.enabledAttributes,a=c.attributeDivisors;if(o[n]=1,0===s[n]&&(e.enableVertexAttribArray(n),s[n]=1),a[n]!==i){(r.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),a[n]=i}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function y(t,n,r,i,o,s,a){!0===a?e.vertexAttribIPointer(t,n,r,o,s):e.vertexAttribPointer(t,n,r,i,o,s)}function b(){_(),u=!0,c!==l&&(c=l,h(c.object))}function _(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(i,l,d,b,_){let x=!1;if(s){const t=function(t,n,i){const s=!0===i.wireframe;let l=a[t.id];void 0===l&&(l={},a[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[s];void 0===u&&(u=p(r.isWebGL2?e.createVertexArray():o.createVertexArrayOES()),c[s]=u);return u}(b,d,l);c!==t&&(c=t,h(c.object)),x=function(e,t,n,r){const i=c.attributes,o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){if(a[l].location>=0){const t=i[l];let n=o[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return c.attributesNum!==s||c.index!==r}(i,b,d,_),x&&function(e,t,n,r){const i={},o=t.attributes;let s=0;const a=n.getAttributes();for(const l in a){if(a[l].location>=0){let t=o[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[l]=n,s++}}c.attributes=i,c.attributesNum=s,c.index=r}(i,b,d,_)}else{const e=!0===l.wireframe;c.geometry===b.id&&c.program===d.id&&c.wireframe===e||(c.geometry=b.id,c.program=d.id,c.wireframe=e,x=!0)}null!==_&&n.update(_,e.ELEMENT_ARRAY_BUFFER),(x||u)&&(u=!1,function(i,o,s,a){if(!1===r.isWebGL2&&(i.isInstancedMesh||a.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;f();const l=a.attributes,c=s.getAttributes(),u=o.defaultAttributeValues;for(const t in c){const o=c[t];if(o.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&i.instanceMatrix&&(s=i.instanceMatrix),"instanceColor"===t&&i.instanceColor&&(s=i.instanceColor)),void 0!==s){const t=s.normalized,l=s.itemSize,c=n.get(s);if(void 0===c)continue;const u=c.buffer,h=c.type,d=c.bytesPerElement,p=!0===r.isWebGL2&&(h===e.INT||h===e.UNSIGNED_INT||s.gpuType===mC);if(s.isInterleavedBufferAttribute){const n=s.data,r=n.stride,c=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<o.locationSize;e++)g(o.location+e,n.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<o.locationSize;e++)m(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<o.locationSize;e++)y(o.location+e,l/o.locationSize,h,t,r*d,(c+l/o.locationSize*e)*d,p)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<o.locationSize;e++)g(o.location+e,s.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===a._maxInstanceCount&&(a._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<o.locationSize;e++)m(o.location+e);e.bindBuffer(e.ARRAY_BUFFER,u);for(let e=0;e<o.locationSize;e++)y(o.location+e,l/o.locationSize,h,t,l*d,l/o.locationSize*e*d,p)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(o.location,n);break;case 3:e.vertexAttrib3fv(o.location,n);break;case 4:e.vertexAttrib4fv(o.location,n);break;default:e.vertexAttrib1fv(o.location,n)}}}}v()}(i,l,d,b),null!==_&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.get(_).buffer))},reset:b,resetDefaultState:_,dispose:function(){b();for(const e in a){const t=a[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete a[e]}},releaseStatesOfGeometry:function(e){if(void 0===a[e.id])return;const t=a[e.id];for(const n in t){const e=t[n];for(const t in e)d(e[t].object),delete e[t];delete t[n]}delete a[e.id]},releaseStatesOfProgram:function(e){for(const t in a){const n=a[t];if(void 0===n[e.id])continue;const r=n[e.id];for(const e in r)d(r[e].object),delete r[e];delete n[e.id]}},initAttributes:f,enableAttribute:m,disableUnusedAttributes:v}}function yP(e,t,n,r){const i=r.isWebGL2;let o;this.setMode=function(e){o=e},this.render=function(t,r){e.drawArrays(o,t,r),n.update(r,o,1)},this.renderInstances=function(r,s,a){if(0===a)return;let l,c;if(i)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,r,s,a),n.update(s,o,a)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const s=t.get("WEBGL_multi_draw");if(null===s)for(let t=0;t<i;t++)this.render(e[t],r[t]);else{s.multiDrawArraysWEBGL(o,e,0,r,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,o,1)}}}function bP(e,t,n){let r;function i(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o="undefined"!==typeof WebGL2RenderingContext&&"WebGL2RenderingContext"===e.constructor.name;let s=void 0!==n.precision?n.precision:"highp";const a=i(s);a!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",a,"instead."),s=a);const l=o||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),h=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=e.getParameter(e.MAX_TEXTURE_SIZE),p=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),f=e.getParameter(e.MAX_VERTEX_ATTRIBS),m=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),g=e.getParameter(e.MAX_VARYING_VECTORS),v=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),y=h>0,b=o||t.has("OES_texture_float");return{isWebGL2:o,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");r=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:i,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:o?e.getParameter(e.MAX_SAMPLES):0}}function _P(e){const t=this;let n=null,r=0,i=!1,o=!1;const s=new rP,a=new cR,l={value:null,needsUpdate:!1};function c(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)s.copy(e[n]).applyMatrix4(i,a),s.normal.toArray(c,l),c[l+3]=s.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(s,a,u){const h=s.clippingPlanes,d=s.clipIntersection,p=s.clipShadows,f=e.get(s);if(!i||null===h||0===h.length||o&&!p)o?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=o?0:r,t=4*e;let i=f.clippingState||null;l.value=i,i=c(h,a,t,u);for(let r=0;r!==t;++r)i[r]=n[r];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function xP(e){let t=new WeakMap;function n(e,t){return t===tC?e.mapping=$T:t===nC&&(e.mapping=eC),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===tC||o===nC){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const s=new $I(o.height);return s.fromEquirectangularTexture(e,i),t.set(i,s),i.addEventListener("dispose",r),n(s.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class wP extends WI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,s=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,s-=t*this.view.offsetY,a=s-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,s,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const EP=[.125,.215,.35,.446,.526,.582],SP=20,AP=new wP,MP=new tI;let TP=null,CP=0,RP=0;const LP=(1+Math.sqrt(5))/2,IP=1/LP,PP=[new OR(1,1,1),new OR(-1,1,1),new OR(1,1,-1),new OR(-1,1,-1),new OR(0,LP,IP),new OR(0,LP,-IP),new OR(IP,0,LP),new OR(-IP,0,LP),new OR(LP,IP,0),new OR(-LP,IP,0)];class NP{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;TP=this._renderer.getRenderTarget(),CP=this._renderer.getActiveCubeFace(),RP=this._renderer.getActiveMipmapLevel(),this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=UP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=OP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(TP,CP,RP),e.scissorTest=!1,DP(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===$T||e.mapping===eC?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TP=this._renderer.getRenderTarget(),CP=this._renderer.getActiveCubeFace(),RP=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:uC,minFilter:uC,generateMipmaps:!1,type:yC,format:_C,colorSpace:OC,depthBuffer:!1},r=kP(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=kP(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+EP.length;for(let s=0;s<o;s++){const o=Math.pow(2,i);n.push(o);let a=1/o;s>e-4?a=EP[s-e+4-1]:0===s&&(a=0),r.push(a);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,p=6,f=3,m=2,g=1,v=new Float32Array(f*p*d),y=new Float32Array(m*p*d),b=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];b.set(i,g*p*e)}const _=new bI;_.setAttribute("position",new lI(v,f)),_.setAttribute("uv",new lI(y,m)),_.setAttribute("faceIndex",new lI(b,g)),t.push(_),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(SP),i=new OR(0,1,0),o=new GI({name:"SphericalGaussianBlur",defines:{n:SP,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1});return o}(r,e,t)}return r}_compileMaterial(e){const t=new UI(this._lodPlanes[0],e);this._renderer.compile(t,AP)}_sceneToCubeUV(e,t,n,r){const i=new QI(90,1,t,n),o=[1,-1,1,1,1,1],s=[1,1,1,-1,-1,-1],a=this._renderer,l=a.autoClear,c=a.toneMapping;a.getClearColor(MP),a.toneMapping=WT,a.autoClear=!1;const u=new oI({name:"PMREM.Background",side:jT,depthWrite:!1,depthTest:!1}),h=new UI(new BI,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(MP),d=!0);for(let f=0;f<6;f++){const t=f%3;0===t?(i.up.set(0,o[f],0),i.lookAt(s[f],0,0)):1===t?(i.up.set(0,0,o[f]),i.lookAt(0,s[f],0)):(i.up.set(0,o[f],0),i.lookAt(0,0,s[f]));const n=this._cubeSize;DP(r,t*n,f>2?n:0,n,n),a.setRenderTarget(r),d&&a.render(h,i),a.render(e,i)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=c,a.autoClear=l,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===$T||e.mapping===eC;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=UP()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=OP());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new UI(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const s=this._cubeSize;DP(t,0,0,3*s,2*s),n.setRenderTarget(t),n.render(o,AP)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const t=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),n=PP[(r-1)%PP.length];this._blur(e,r-1,r,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,s){const a=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new UI(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):SP;f>SP&&console.warn("sigmaRadians, ".concat(i,", is too large and will clip, as it requested ").concat(f," samples when the maximum is set to ").concat(SP));const m=[];let g=0;for(let b=0;b<SP;++b){const e=b/p,t=Math.exp(-e*e/2);m.push(t),0===b?g+=t:b<f&&(g+=2*t)}for(let b=0;b<m.length;b++)m[b]=m[b]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===o,s&&(u.poleAxis.value=s);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[r];DP(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(c,AP)}}function kP(e,t,n){const r=new PR(e,t,n);return r.texture.mapping=rC,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function DP(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function OP(){return new GI({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function UP(){return new GI({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function FP(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,s=o===tC||o===nC,a=o===$T||o===eC;if(s||a){if(i.isRenderTargetTexture&&!0===i.needsPMREMUpdate){i.needsPMREMUpdate=!1;let r=t.get(i);return null===n&&(n=new NP(e)),r=s?n.fromEquirectangular(i,r):n.fromCubemap(i,r),t.set(i,r),r.texture}if(t.has(i))return t.get(i).texture;{const o=i.image;if(s&&o&&o.height>0||a&&o&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(o)){null===n&&(n=new NP(e));const o=s?n.fromEquirectangular(i):n.fromCubemap(i);return t.set(i,o),i.addEventListener("dispose",r),o.texture}return null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function BP(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?(n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance")):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function jP(e,t,n,r){const i={},o=new WeakMap;function s(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const n in a.attributes)t.remove(a.attributes[n]);for(const n in a.morphAttributes){const e=a.morphAttributes[n];for(let n=0,r=e.length;n<r;n++)t.remove(e[n])}a.removeEventListener("dispose",s),delete i[a.id];const l=o.get(a);l&&(t.remove(l),o.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let s=0;if(null!==r){const e=r.array;s=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{if(void 0===i)return;{const e=i.array;s=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const a=new(hR(n)?uI:cI)(n,1);a.version=s;const l=o.get(e);l&&t.remove(l),o.set(e,a)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",s),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const o in r)t.update(r[o],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return o.get(e)}}}function VP(e,t,n,r){const i=r.isWebGL2;let o,s,a;this.setMode=function(e){o=e},this.setIndex=function(e){s=e.type,a=e.bytesPerElement},this.render=function(t,r){e.drawElements(o,r,s,t*a),n.update(r,o,1)},this.renderInstances=function(r,l,c){if(0===c)return;let u,h;if(i)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,s,r*a,c),n.update(l,o,c)},this.renderMultiDraw=function(e,r,i){if(0===i)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<i;t++)this.render(e[t]/a,r[t]);else{l.multiDrawElementsWEBGL(o,r,0,s,e,0,i);let t=0;for(let e=0;e<i;e++)t+=r[e];n.update(t,o,1)}}}function zP(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function HP(e,t){return e[0]-t[0]}function GP(e,t){return Math.abs(t[1])-Math.abs(e[1])}function WP(e,t,n){const r={},i=new Float32Array(8),o=new WeakMap,s=new LR,a=[];for(let l=0;l<8;l++)a[l]=[l,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,p=void 0!==d?d.length:0;let f=o.get(c);if(void 0===f||f.count!==p){void 0!==f&&f.texture.dispose();const m=void 0!==c.morphAttributes.position,g=void 0!==c.morphAttributes.normal,v=void 0!==c.morphAttributes.color,y=c.morphAttributes.position||[],b=c.morphAttributes.normal||[],_=c.morphAttributes.color||[];let x=0;!0===m&&(x=1),!0===g&&(x=2),!0===v&&(x=3);let w=c.attributes.position.count*x,E=1;w>t.maxTextureSize&&(E=Math.ceil(w/t.maxTextureSize),w=t.maxTextureSize);const S=new Float32Array(w*E*4*p),A=new NR(S,w,E,p);A.type=vC,A.needsUpdate=!0;const M=4*x;for(let C=0;C<p;C++){const R=y[C],L=b[C],I=_[C],P=w*E*4*C;for(let N=0;N<R.count;N++){const k=N*M;!0===m&&(s.fromBufferAttribute(R,N),S[P+k+0]=s.x,S[P+k+1]=s.y,S[P+k+2]=s.z,S[P+k+3]=0),!0===g&&(s.fromBufferAttribute(L,N),S[P+k+4]=s.x,S[P+k+5]=s.y,S[P+k+6]=s.z,S[P+k+7]=0),!0===v&&(s.fromBufferAttribute(I,N),S[P+k+8]=s.x,S[P+k+9]=s.y,S[P+k+10]=s.z,S[P+k+11]=4===I.itemSize?s.w:1)}}function T(){A.dispose(),o.delete(c),c.removeEventListener("dispose",T)}f={count:p,texture:A,size:new lR(w,E)},o.set(c,f),c.addEventListener("dispose",T)}if(!0===l.isInstancedMesh&&null!==l.morphTexture)u.getUniforms().setValue(e,"morphTexture",l.morphTexture,n);else{let D=0;for(let U=0;U<h.length;U++)D+=h[U];const O=c.morphTargetsRelative?1:1-D;u.getUniforms().setValue(e,"morphTargetBaseInfluence",O),u.getUniforms().setValue(e,"morphTargetInfluences",h)}u.getUniforms().setValue(e,"morphTargetsTexture",f.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",f.size)}else{const F=void 0===h?0:h.length;let B=r[c.id];if(void 0===B||B.length!==F){B=[];for(let G=0;G<F;G++)B[G]=[G,0];r[c.id]=B}for(let W=0;W<F;W++){const K=B[W];K[0]=W,K[1]=h[W]}B.sort(GP);for(let q=0;q<8;q++)q<F&&B[q][1]?(a[q][0]=B[q][0],a[q][1]=B[q][1]):(a[q][0]=Number.MAX_SAFE_INTEGER,a[q][1]=0);a.sort(HP);const j=c.morphAttributes.position,V=c.morphAttributes.normal;let z=0;for(let X=0;X<8;X++){const Q=a[X],Y=Q[0],J=Q[1];Y!==Number.MAX_SAFE_INTEGER&&J?(j&&c.getAttribute("morphTarget"+X)!==j[Y]&&c.setAttribute("morphTarget"+X,j[Y]),V&&c.getAttribute("morphNormal"+X)!==V[Y]&&c.setAttribute("morphNormal"+X,V[Y]),i[X]=J,z+=J):(j&&!0===c.hasAttribute("morphTarget"+X)&&c.deleteAttribute("morphTarget"+X),V&&!0===c.hasAttribute("morphNormal"+X)&&c.deleteAttribute("morphNormal"+X),i[X]=0)}const H=c.morphTargetsRelative?1:1-z;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",i)}}}}function KP(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(s){const a=r.render.frame,l=s.geometry,c=t.get(s,l);if(i.get(c)!==a&&(t.update(c),i.set(c,a)),s.isInstancedMesh&&(!1===s.hasEventListener("dispose",o)&&s.addEventListener("dispose",o),i.get(s)!==a&&(n.update(s.instanceMatrix,e.ARRAY_BUFFER),null!==s.instanceColor&&n.update(s.instanceColor,e.ARRAY_BUFFER),i.set(s,a))),s.isSkinnedMesh){const e=s.skeleton;i.get(e)!==a&&(e.update(),i.set(e,a))}return c},dispose:function(){i=new WeakMap}}}class qP extends RR{constructor(e,t,n,r,i,o,s,a,l,c){if((c=void 0!==c?c:xC)!==xC&&c!==wC)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===xC&&(n=gC),void 0===n&&c===wC&&(n=bC),super(null,r,i,o,s,a,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==s?s:aC,this.minFilter=void 0!==a?a:aC,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const XP=new RR,QP=new qP(1,1);QP.compareFunction=515;const YP=new NR,JP=new kR,ZP=new ZI,$P=[],eN=[],tN=new Float32Array(16),nN=new Float32Array(9),rN=new Float32Array(4);function iN(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=$P[i];if(void 0===o&&(o=new Float32Array(i),$P[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function oN(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function sN(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function aN(e,t){let n=eN[t];void 0===n&&(n=new Int32Array(t),eN[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function lN(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function cN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(oN(n,t))return;e.uniform2fv(this.addr,t),sN(n,t)}}function uN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(oN(n,t))return;e.uniform3fv(this.addr,t),sN(n,t)}}function hN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(oN(n,t))return;e.uniform4fv(this.addr,t),sN(n,t)}}function dN(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(oN(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),sN(n,t)}else{if(oN(n,r))return;rN.set(r),e.uniformMatrix2fv(this.addr,!1,rN),sN(n,r)}}function pN(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(oN(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),sN(n,t)}else{if(oN(n,r))return;nN.set(r),e.uniformMatrix3fv(this.addr,!1,nN),sN(n,r)}}function fN(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(oN(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),sN(n,t)}else{if(oN(n,r))return;tN.set(r),e.uniformMatrix4fv(this.addr,!1,tN),sN(n,r)}}function mN(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function gN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(oN(n,t))return;e.uniform2iv(this.addr,t),sN(n,t)}}function vN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(oN(n,t))return;e.uniform3iv(this.addr,t),sN(n,t)}}function yN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(oN(n,t))return;e.uniform4iv(this.addr,t),sN(n,t)}}function bN(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function _N(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(oN(n,t))return;e.uniform2uiv(this.addr,t),sN(n,t)}}function xN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(oN(n,t))return;e.uniform3uiv(this.addr,t),sN(n,t)}}function wN(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(oN(n,t))return;e.uniform4uiv(this.addr,t),sN(n,t)}}function EN(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);const o=this.type===e.SAMPLER_2D_SHADOW?QP:XP;n.setTexture2D(t||o,i)}function SN(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||JP,i)}function AN(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||ZP,i)}function MN(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||YP,i)}function TN(e,t){e.uniform1fv(this.addr,t)}function CN(e,t){const n=iN(t,this.size,2);e.uniform2fv(this.addr,n)}function RN(e,t){const n=iN(t,this.size,3);e.uniform3fv(this.addr,n)}function LN(e,t){const n=iN(t,this.size,4);e.uniform4fv(this.addr,n)}function IN(e,t){const n=iN(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function PN(e,t){const n=iN(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function NN(e,t){const n=iN(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function kN(e,t){e.uniform1iv(this.addr,t)}function DN(e,t){e.uniform2iv(this.addr,t)}function ON(e,t){e.uniform3iv(this.addr,t)}function UN(e,t){e.uniform4iv(this.addr,t)}function FN(e,t){e.uniform1uiv(this.addr,t)}function BN(e,t){e.uniform2uiv(this.addr,t)}function jN(e,t){e.uniform3uiv(this.addr,t)}function VN(e,t){e.uniform4uiv(this.addr,t)}function zN(e,t,n){const r=this.cache,i=t.length,o=aN(n,i);oN(r,o)||(e.uniform1iv(this.addr,o),sN(r,o));for(let s=0;s!==i;++s)n.setTexture2D(t[s]||XP,o[s])}function HN(e,t,n){const r=this.cache,i=t.length,o=aN(n,i);oN(r,o)||(e.uniform1iv(this.addr,o),sN(r,o));for(let s=0;s!==i;++s)n.setTexture3D(t[s]||JP,o[s])}function GN(e,t,n){const r=this.cache,i=t.length,o=aN(n,i);oN(r,o)||(e.uniform1iv(this.addr,o),sN(r,o));for(let s=0;s!==i;++s)n.setTextureCube(t[s]||ZP,o[s])}function WN(e,t,n){const r=this.cache,i=t.length,o=aN(n,i);oN(r,o)||(e.uniform1iv(this.addr,o),sN(r,o));for(let s=0;s!==i;++s)n.setTexture2DArray(t[s]||YP,o[s])}class KN{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return lN;case 35664:return cN;case 35665:return uN;case 35666:return hN;case 35674:return dN;case 35675:return pN;case 35676:return fN;case 5124:case 35670:return mN;case 35667:case 35671:return gN;case 35668:case 35672:return vN;case 35669:case 35673:return yN;case 5125:return bN;case 36294:return _N;case 36295:return xN;case 36296:return wN;case 35678:case 36198:case 36298:case 36306:case 35682:return EN;case 35679:case 36299:case 36307:return SN;case 35680:case 36300:case 36308:case 36293:return AN;case 36289:case 36303:case 36311:case 36292:return MN}}(t.type)}}class qN{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return TN;case 35664:return CN;case 35665:return RN;case 35666:return LN;case 35674:return IN;case 35675:return PN;case 35676:return NN;case 5124:case 35670:return kN;case 35667:case 35671:return DN;case 35668:case 35672:return ON;case 35669:case 35673:return UN;case 5125:return FN;case 36294:return BN;case 36295:return jN;case 36296:return VN;case 35678:case 36198:case 36298:case 36306:case 35682:return zN;case 35679:case 36299:case 36307:return HN;case 35680:case 36300:case 36308:case 36293:return GN;case 36289:case 36303:case 36311:case 36292:return WN}}(t.type)}}class XN{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const QN=/(\w+)(\])?(\[|\.)?/g;function YN(e,t){e.seq.push(t),e.map[t.id]=t}function JN(e,t,n){const r=e.name,i=r.length;for(QN.lastIndex=0;;){const o=QN.exec(r),s=QN.lastIndex;let a=o[1];const l="]"===o[2],c=o[3];if(l&&(a|=0),void 0===c||"["===c&&s+2===i){YN(n,void 0===c?new KN(a,e,t):new qN(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new XN(a),YN(n,e)),n=e}}}class ZN{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);JN(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function $N(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}const ek=37297;let tk=0;function nk(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let s=i;s<o;s++){const e=s+1;r.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[s]))}return r.join("\n")}(e.getShaderSource(t),r)}return i}function rk(e,t){const n=function(e){const t=_R.getPrimaries(_R.workingColorSpace),n=_R.getPrimaries(e);let r;switch(t===n?r="":t===zC&&n===VC?r="LinearDisplayP3ToLinearSRGB":t===VC&&n===zC&&(r="LinearSRGBToLinearDisplayP3"),e){case OC:case FC:return[r,"LinearTransferOETF"];case DC:case UC:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}(t);return"vec4 ".concat(e,"( vec4 value ) { return ").concat(n[0],"( ").concat(n[1],"( value ) ); }")}function ik(e,t){let n;switch(t){case KT:n="Linear";break;case qT:n="Reinhard";break;case XT:n="OptimizedCineon";break;case QT:n="ACESFilmic";break;case JT:n="AgX";break;case ZT:n="Neutral";break;case YT:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ok(e){return""!==e}function sk(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function ak(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const lk=/^[ \t]*#include +<([\w\d./]+)>/gm;function ck(e){return e.replace(lk,hk)}const uk=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function hk(e,t){let n=uP[t];if(void 0===n){const e=uk.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=uP[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return ck(n)}const dk=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function pk(e){return e.replace(dk,fk)}function fk(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function mk(e){let t="precision ".concat(e.precision," float;\n\tprecision ").concat(e.precision," int;\n\tprecision ").concat(e.precision," sampler2D;\n\tprecision ").concat(e.precision," samplerCube;\n\t");return e.isWebGL2&&(t+="precision ".concat(e.precision," sampler3D;\n\t\tprecision ").concat(e.precision," sampler2DArray;\n\t\tprecision ").concat(e.precision," sampler2DShadow;\n\t\tprecision ").concat(e.precision," samplerCubeShadow;\n\t\tprecision ").concat(e.precision," sampler2DArrayShadow;\n\t\tprecision ").concat(e.precision," isampler2D;\n\t\tprecision ").concat(e.precision," isampler3D;\n\t\tprecision ").concat(e.precision," isamplerCube;\n\t\tprecision ").concat(e.precision," isampler2DArray;\n\t\tprecision ").concat(e.precision," usampler2D;\n\t\tprecision ").concat(e.precision," usampler3D;\n\t\tprecision ").concat(e.precision," usamplerCube;\n\t\tprecision ").concat(e.precision," usampler2DArray;\n\t\t")),"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function gk(e,t,n,r){const i=e.getContext(),o=n.defines;let s=n.vertexShader,a=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===OT?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===UT?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===FT&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case $T:case eC:t="ENVMAP_TYPE_CUBE";break;case rC:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===eC&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case zT:t="ENVMAP_BLENDING_MULTIPLY";break;case HT:t="ENVMAP_BLENDING_MIX";break;case GT:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),p=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.normalMapTangentSpace||e.clearcoatNormalMap||e.flatShading||e.alphaToCoverage||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ok).join("\n")}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ok).join("\n")}(n),m=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),g=i.createProgram();let v,y,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(ok).join("\n"),v.length>0&&(v+="\n"),y=[p,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m].filter(ok).join("\n"),y.length>0&&(y+="\n")):(v=[mk(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ok).join("\n"),y=[p,mk(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,m,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==WT?"#define TONE_MAPPING":"",n.toneMapping!==WT?uP.tonemapping_pars_fragment:"",n.toneMapping!==WT?ik("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",uP.colorspace_pars_fragment,rk("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ok).join("\n")),s=ck(s),s=sk(s,n),s=ak(s,n),a=ck(a),a=sk(a,n),a=ak(a,n),s=pk(s),a=pk(a),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",v=[f,"precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,y=["precision mediump sampler2DArray;","#define varying in",n.glslVersion===WC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===WC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+y);const _=b+v+s,x=b+y+a,w=$N(i,i.VERTEX_SHADER,_),E=$N(i,i.FRAGMENT_SHADER,x);function S(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(g).trim(),r=i.getShaderInfoLog(w).trim(),o=i.getShaderInfoLog(E).trim();let s=!0,a=!0;if(!1===i.getProgramParameter(g,i.LINK_STATUS))if(s=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,g,w,E);else{const e=nk(i,w,"vertex"),r=nk(i,E,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(g,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(a=!1);a&&(t.diagnostics={runnable:s,programLog:n,vertexShader:{log:r,prefix:v},fragmentShader:{log:o,prefix:y}})}i.deleteShader(w),i.deleteShader(E),A=new ZN(i,g),M=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let s=1;r.type===e.FLOAT_MAT2&&(s=2),r.type===e.FLOAT_MAT3&&(s=3),r.type===e.FLOAT_MAT4&&(s=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:s}}return n}(i,g)}let A,M;i.attachShader(g,w),i.attachShader(g,E),void 0!==n.index0AttributeName?i.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(g,0,"position"),i.linkProgram(g),this.getUniforms=function(){return void 0===A&&S(this),A},this.getAttributes=function(){return void 0===M&&S(this),M};let T=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===T&&(T=i.getProgramParameter(g,ek)),T},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(g),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=tk++,this.cacheKey=t,this.usedTimes=1,this.program=g,this.vertexShader=w,this.fragmentShader=E,this}let vk=0;class yk{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new bk(e),t.set(e,n)),n}}class bk{constructor(e){this.id=vk++,this.code=e,this.usedTimes=0}}function _k(e,t,n,r,i,o,s){const a=new EL,l=new yk,c=new Set,u=[],h=i.isWebGL2,d=i.logarithmicDepthBuffer,p=i.vertexTextures;let f=i.precision;const m={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(e){return c.add(e),0===e?"uv":"uv".concat(e)}return{getParameters:function(o,a,u,v,y){const b=v.fog,_=y.geometry,x=o.isMeshStandardMaterial?v.environment:null,w=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),E=w&&w.mapping===rC?w.image.height:null,S=m[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const A=_.morphAttributes.position||_.morphAttributes.normal||_.morphAttributes.color,M=void 0!==A?A.length:0;let T,C,R,L,I=0;if(void 0!==_.morphAttributes.position&&(I=1),void 0!==_.morphAttributes.normal&&(I=2),void 0!==_.morphAttributes.color&&(I=3),S){const e=dP[S];T=e.vertexShader,C=e.fragmentShader}else T=o.vertexShader,C=o.fragmentShader,l.update(o),R=l.getVertexShaderID(o),L=l.getFragmentShaderID(o);const P=e.getRenderTarget(),N=!0===y.isInstancedMesh,k=!0===y.isBatchedMesh,D=!!o.map,O=!!o.matcap,U=!!w,F=!!o.aoMap,B=!!o.lightMap,j=!!o.bumpMap,V=!!o.normalMap,z=!!o.displacementMap,H=!!o.emissiveMap,G=!!o.metalnessMap,W=!!o.roughnessMap,K=o.anisotropy>0,q=o.clearcoat>0,X=o.iridescence>0,Q=o.sheen>0,Y=o.transmission>0,J=K&&!!o.anisotropyMap,Z=q&&!!o.clearcoatMap,$=q&&!!o.clearcoatNormalMap,ee=q&&!!o.clearcoatRoughnessMap,te=X&&!!o.iridescenceMap,ne=X&&!!o.iridescenceThicknessMap,re=Q&&!!o.sheenColorMap,ie=Q&&!!o.sheenRoughnessMap,oe=!!o.specularMap,se=!!o.specularColorMap,ae=!!o.specularIntensityMap,le=Y&&!!o.transmissionMap,ce=Y&&!!o.thicknessMap,ue=!!o.gradientMap,he=!!o.alphaMap,de=o.alphaTest>0,pe=!!o.alphaHash,fe=!!o.extensions;let me=WT;o.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(me=e.toneMapping));const ge={isWebGL2:h,shaderID:S,shaderType:o.type,shaderName:o.name,vertexShader:T,fragmentShader:C,defines:o.defines,customVertexShaderID:R,customFragmentShaderID:L,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:k,instancing:N,instancingColor:N&&null!==y.instanceColor,instancingMorph:N&&null!==y.morphTexture,supportsVertexTextures:p,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:OC,alphaToCoverage:!!o.alphaToCoverage,map:D,matcap:O,envMap:U,envMapMode:U&&w.mapping,envMapCubeUVHeight:E,aoMap:F,lightMap:B,bumpMap:j,normalMap:V,displacementMap:p&&z,emissiveMap:H,normalMapObjectSpace:V&&1===o.normalMapType,normalMapTangentSpace:V&&0===o.normalMapType,metalnessMap:G,roughnessMap:W,anisotropy:K,anisotropyMap:J,clearcoat:q,clearcoatMap:Z,clearcoatNormalMap:$,clearcoatRoughnessMap:ee,iridescence:X,iridescenceMap:te,iridescenceThicknessMap:ne,sheen:Q,sheenColorMap:re,sheenRoughnessMap:ie,specularMap:oe,specularColorMap:se,specularIntensityMap:ae,transmission:Y,transmissionMap:le,thicknessMap:ce,gradientMap:ue,opaque:!1===o.transparent&&1===o.blending&&!1===o.alphaToCoverage,alphaMap:he,alphaTest:de,alphaHash:pe,combine:o.combine,mapUv:D&&g(o.map.channel),aoMapUv:F&&g(o.aoMap.channel),lightMapUv:B&&g(o.lightMap.channel),bumpMapUv:j&&g(o.bumpMap.channel),normalMapUv:V&&g(o.normalMap.channel),displacementMapUv:z&&g(o.displacementMap.channel),emissiveMapUv:H&&g(o.emissiveMap.channel),metalnessMapUv:G&&g(o.metalnessMap.channel),roughnessMapUv:W&&g(o.roughnessMap.channel),anisotropyMapUv:J&&g(o.anisotropyMap.channel),clearcoatMapUv:Z&&g(o.clearcoatMap.channel),clearcoatNormalMapUv:$&&g(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ee&&g(o.clearcoatRoughnessMap.channel),iridescenceMapUv:te&&g(o.iridescenceMap.channel),iridescenceThicknessMapUv:ne&&g(o.iridescenceThicknessMap.channel),sheenColorMapUv:re&&g(o.sheenColorMap.channel),sheenRoughnessMapUv:ie&&g(o.sheenRoughnessMap.channel),specularMapUv:oe&&g(o.specularMap.channel),specularColorMapUv:se&&g(o.specularColorMap.channel),specularIntensityMapUv:ae&&g(o.specularIntensityMap.channel),transmissionMapUv:le&&g(o.transmissionMap.channel),thicknessMapUv:ce&&g(o.thicknessMap.channel),alphaMapUv:he&&g(o.alphaMap.channel),vertexTangents:!!_.attributes.tangent&&(V||K),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!_.attributes.color&&4===_.attributes.color.itemSize,pointsUvs:!0===y.isPoints&&!!_.attributes.uv&&(D||he),fog:!!b,useFog:!0===o.fog,fogExp2:!!b&&b.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:d,skinning:!0===y.isSkinnedMesh,morphTargets:void 0!==_.morphAttributes.position,morphNormals:void 0!==_.morphAttributes.normal,morphColors:void 0!==_.morphAttributes.color,morphTargetsCount:M,morphTextureStride:I,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:me,useLegacyLights:e._useLegacyLights,decodeVideoTexture:D&&!0===o.map.isVideoTexture&&_R.getTransfer(o.map.colorSpace)===jC,premultipliedAlpha:o.premultipliedAlpha,doubleSided:2===o.side,flipSided:o.side===jT,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionDerivatives:fe&&!0===o.extensions.derivatives,extensionFragDepth:fe&&!0===o.extensions.fragDepth,extensionDrawBuffers:fe&&!0===o.extensions.drawBuffers,extensionShaderTextureLOD:fe&&!0===o.extensions.shaderTextureLOD,extensionClipCullDistance:fe&&!0===o.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:fe&&!0===o.extensions.multiDraw&&r.has("WEBGL_multi_draw"),rendererExtensionFragDepth:h||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:h||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:h||r.has("EXT_shader_texture_lod"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return ge.vertexUv1s=c.has(1),ge.vertexUv2s=c.has(2),ge.vertexUv3s=c.has(3),c.clear(),ge},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.isWebGL2&&a.enable(0);t.supportsVertexTextures&&a.enable(1);t.instancing&&a.enable(2);t.instancingColor&&a.enable(3);t.instancingMorph&&a.enable(4);t.matcap&&a.enable(5);t.envMap&&a.enable(6);t.normalMapObjectSpace&&a.enable(7);t.normalMapTangentSpace&&a.enable(8);t.clearcoat&&a.enable(9);t.iridescence&&a.enable(10);t.alphaTest&&a.enable(11);t.vertexColors&&a.enable(12);t.vertexAlphas&&a.enable(13);t.vertexUv1s&&a.enable(14);t.vertexUv2s&&a.enable(15);t.vertexUv3s&&a.enable(16);t.vertexTangents&&a.enable(17);t.anisotropy&&a.enable(18);t.alphaHash&&a.enable(19);t.batching&&a.enable(20);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.useLegacyLights&&a.enable(10);t.doubleSided&&a.enable(11);t.flipSided&&a.enable(12);t.useDepthPacking&&a.enable(13);t.dithering&&a.enable(14);t.transmission&&a.enable(15);t.sheen&&a.enable(16);t.opaque&&a.enable(17);t.pointsUvs&&a.enable(18);t.decodeVideoTexture&&a.enable(19);t.alphaToCoverage&&a.enable(20);e.push(a.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=m[e.type];let n;if(t){const e=dP[t];n=HI.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=u.length;e<i;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new gk(e,n,t,o),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function xk(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function wk(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Ek(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Sk(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,s,a){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:s,group:a},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=s,l.group=a),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,s,a,l,c){const u=o(e,t,s,a,l,c);s.transmission>0?r.push(u):!0===s.transparent?i.push(u):n.push(u)},unshift:function(e,t,s,a,l,c){const u=o(e,t,s,a,l,c);s.transmission>0?r.unshift(u):!0===s.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||wk),r.length>1&&r.sort(t||Ek),i.length>1&&i.sort(t||Ek)}}}function Ak(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Sk,e.set(t,[i])):n>=r.length?(i=new Sk,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Mk(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new OR,color:new tI};break;case"SpotLight":n={position:new OR,direction:new OR,color:new tI,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new OR,color:new tI,distance:0,decay:0};break;case"HemisphereLight":n={direction:new OR,skyColor:new tI,groundColor:new tI};break;case"RectAreaLight":n={color:new tI,position:new OR,halfWidth:new OR,halfHeight:new OR}}return e[t.id]=n,n}}}let Tk=0;function Ck(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Rk(e,t){const n=new Mk,r=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lR};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new lR,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)i.probe.push(new OR);const o=new OR,s=new dL,a=new dL;return{setup:function(o,s){let a=0,l=0,c=0;for(let e=0;e<9;e++)i.probe[e].set(0,0,0);let u=0,h=0,d=0,p=0,f=0,m=0,g=0,v=0,y=0,b=0,_=0;o.sort(Ck);const x=!0===s?Math.PI:1;for(let e=0,t=o.length;e<t;e++){const t=o[e],s=t.color,w=t.intensity,E=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)a+=s.r*w*x,l+=s.g*w*x,c+=s.b*w*x;else if(t.isLightProbe){for(let e=0;e<9;e++)i.probe[e].addScaledVector(t.sh.coefficients[e],w);_++}else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,i.directionalShadow[u]=n,i.directionalShadowMap[u]=S,i.directionalShadowMatrix[u]=t.shadow.matrix,m++}i.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(s).multiplyScalar(w*x),e.distance=E,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,i.spot[d]=e;const o=t.shadow;if(t.map&&(i.spotLightMap[y]=t.map,y++,o.updateMatrices(t),t.castShadow&&b++),i.spotLightMatrix[d]=o.matrix,t.castShadow){const e=r.get(t);e.shadowBias=o.bias,e.shadowNormalBias=o.normalBias,e.shadowRadius=o.radius,e.shadowMapSize=o.mapSize,i.spotShadow[d]=e,i.spotShadowMap[d]=S,v++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(s).multiplyScalar(w),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),i.rectArea[p]=e,p++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*x),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=r.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,i.pointShadow[h]=n,i.pointShadowMap[h]=S,i.pointShadowMatrix[h]=t.shadow.matrix,g++}i.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(w*x),e.groundColor.copy(t.groundColor).multiplyScalar(w*x),i.hemi[f]=e,f++}}p>0&&(t.isWebGL2?!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=hP.LTC_FLOAT_1,i.rectAreaLTC2=hP.LTC_FLOAT_2):(i.rectAreaLTC1=hP.LTC_HALF_1,i.rectAreaLTC2=hP.LTC_HALF_2):!0===e.has("OES_texture_float_linear")?(i.rectAreaLTC1=hP.LTC_FLOAT_1,i.rectAreaLTC2=hP.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(i.rectAreaLTC1=hP.LTC_HALF_1,i.rectAreaLTC2=hP.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=a,i.ambient[1]=l,i.ambient[2]=c;const w=i.hash;w.directionalLength===u&&w.pointLength===h&&w.spotLength===d&&w.rectAreaLength===p&&w.hemiLength===f&&w.numDirectionalShadows===m&&w.numPointShadows===g&&w.numSpotShadows===v&&w.numSpotMaps===y&&w.numLightProbes===_||(i.directional.length=u,i.spot.length=d,i.rectArea.length=p,i.point.length=h,i.hemi.length=f,i.directionalShadow.length=m,i.directionalShadowMap.length=m,i.pointShadow.length=g,i.pointShadowMap.length=g,i.spotShadow.length=v,i.spotShadowMap.length=v,i.directionalShadowMatrix.length=m,i.pointShadowMatrix.length=g,i.spotLightMatrix.length=v+y-b,i.spotLightMap.length=y,i.numSpotLightShadowsWithMaps=b,i.numLightProbes=_,w.directionalLength=u,w.pointLength=h,w.spotLength=d,w.rectAreaLength=p,w.hemiLength=f,w.numDirectionalShadows=m,w.numPointShadows=g,w.numSpotShadows=v,w.numSpotMaps=y,w.numLightProbes=_,i.version=Tk++)},setupView:function(e,t){let n=0,r=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,p=e.length;d<p;d++){const t=e[d];if(t.isDirectionalLight){const e=i.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=i.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),o.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(o),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=i.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),s.copy(t.matrixWorld),s.premultiply(h),a.extractRotation(s),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=i.point[r];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),r++}else if(t.isHemisphereLight){const e=i.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:i}}function Lk(e,t){const n=new Rk(e,t),r=[],i=[];return{init:function(){r.length=0,i.length=0},state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:function(e){n.setup(r,e)},setupLightsView:function(e){n.setupView(r,e)},pushLight:function(e){r.push(e)},pushShadow:function(e){i.push(e)}}}function Ik(e,t){let n=new WeakMap;return{get:function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const o=n.get(r);let s;return void 0===o?(s=new Lk(e,t),n.set(r,[s])):i>=o.length?(s=new Lk(e,t),o.push(s)):s=o[i],s},dispose:function(){n=new WeakMap}}}class Pk extends iI{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Nk extends iI{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function kk(e,t,n){let r=new sP;const i=new lR,o=new lR,s=new LR,a=new Pk({depthPacking:3201}),l=new Nk,c={},u=n.maxTextureSize,h={[BT]:jT,[jT]:BT,2:2},d=new GI({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new lR},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),p=d.clone();p.defines.HORIZONTAL_PASS=1;const f=new bI;f.setAttribute("position",new lI(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new UI(f,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=OT;let v=this.type;function y(n,r){const o=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,p.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,p.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new PR(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,d,m,null),p.uniforms.shadow_pass.value=n.mapPass.texture,p.uniforms.resolution.value=n.mapSize,p.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,p,m,null)}function b(t,n,r,i){let o=null;const s=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==s)o=s;else if(o=!0===r.isPointLight?l:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i,n.addEventListener("dispose",x)),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===FT?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=r}return o}function _(n,i,o,s,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===FT)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=b(n,h,s,a);n.onBeforeShadow(e,n,i,o,r,t,u),e.renderBufferDirect(o,null,r,t,n,u),n.onAfterShadow(e,n,i,o,r,t,u)}}}else if(l.visible){const t=b(n,l,s,a);n.onBeforeShadow(e,n,i,o,r,t,null),e.renderBufferDirect(o,null,r,t,n,null),n.onAfterShadow(e,n,i,o,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)_(l[e],i,o,s,a)}function x(e){e.target.removeEventListener("dispose",x);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,a){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(0),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const p=v!==FT&&this.type===FT,f=v===FT&&this.type!==FT;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/h.x),i.x=o.x*h.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/h.y),i.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map||!0===p||!0===f){const e=this.type!==FT?{minFilter:aC,magFilter:aC}:{};null!==c.map&&c.map.dispose(),c.map=new PR(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);s.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(s),c.updateMatrices(l,e),r=c.getFrustum(),_(n,a,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===FT&&y(c,a),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function Dk(e,t,n){const r=n.isWebGL2;const i=new function(){let t=!1;const n=new LR;let r=null;const i=new LR(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,s,a){!0===a&&(t*=s,r*=s,o*=s),n.set(t,r,o,s),!1===i.equals(n)&&(e.clearColor(t,r,o,s),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?z(e.DEPTH_TEST):H(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:default:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},s=new function(){let t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null;return{setTest:function(n){t||(n?z(e.STENCIL_TEST):H(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,s){r===t&&i===n&&o===s||(e.stencilFunc(t,n,s),r=t,i=n,o=s)},setOp:function(t,n,r){s===t&&a===n&&l===r||(e.stencilOp(t,n,r),s=t,a=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,s=null,a=null,l=null,c=null}}},a=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,y=null,b=null,_=null,x=null,w=new tI(0,0,0),E=0,S=!1,A=null,M=null,T=null,C=null,R=null;const L=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,P=0;const N=e.getParameter(e.VERSION);-1!==N.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(N)[1]),I=P>=1):-1!==N.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(N)[1]),I=P>=2);let k=null,D={};const O=e.getParameter(e.SCISSOR_BOX),U=e.getParameter(e.VIEWPORT),F=(new LR).fromArray(O),B=(new LR).fromArray(U);function j(t,n,i,o){const s=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let l=0;l<i;l++)!r||t!==e.TEXTURE_3D&&t!==e.TEXTURE_2D_ARRAY?e.texImage2D(n+l,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage3D(n,0,e.RGBA,1,1,o,0,e.RGBA,e.UNSIGNED_BYTE,s);return a}const V={};function z(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function H(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}V[e.TEXTURE_2D]=j(e.TEXTURE_2D,e.TEXTURE_2D,1),V[e.TEXTURE_CUBE_MAP]=j(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(V[e.TEXTURE_2D_ARRAY]=j(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),V[e.TEXTURE_3D]=j(e.TEXTURE_3D,e.TEXTURE_3D,1,1)),i.setClear(0,0,0,1),o.setClear(1),s.setClear(0),z(e.DEPTH_TEST),o.setFunc(3),q(!1),X(1),z(e.CULL_FACE),K(0);const G={[VT]:e.FUNC_ADD,101:e.FUNC_SUBTRACT,102:e.FUNC_REVERSE_SUBTRACT};if(r)G[103]=e.MIN,G[104]=e.MAX;else{const e=t.get("EXT_blend_minmax");null!==e&&(G[103]=e.MIN_EXT,G[104]=e.MAX_EXT)}const W={200:e.ZERO,201:e.ONE,202:e.SRC_COLOR,204:e.SRC_ALPHA,210:e.SRC_ALPHA_SATURATE,208:e.DST_COLOR,206:e.DST_ALPHA,203:e.ONE_MINUS_SRC_COLOR,205:e.ONE_MINUS_SRC_ALPHA,209:e.ONE_MINUS_DST_COLOR,207:e.ONE_MINUS_DST_ALPHA,211:e.CONSTANT_COLOR,212:e.ONE_MINUS_CONSTANT_COLOR,213:e.CONSTANT_ALPHA,214:e.ONE_MINUS_CONSTANT_ALPHA};function K(t,n,r,i,o,s,a,l,c,u){if(0!==t){if(!1===f&&(z(e.BLEND),f=!0),5===t)o=o||n,s=s||r,a=a||i,n===g&&o===b||(e.blendEquationSeparate(G[n],G[o]),g=n,b=o),r===v&&i===y&&s===_&&a===x||(e.blendFuncSeparate(W[r],W[i],W[s],W[a]),v=r,y=i,_=s,x=a),!1!==l.equals(w)&&c===E||(e.blendColor(l.r,l.g,l.b,c),w.copy(l),E=c),m=t,S=!1;else if(t!==m||u!==S){if(g===VT&&b===VT||(e.blendEquation(e.FUNC_ADD),g=VT,b=VT),u)switch(t){case 1:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.ONE,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case 1:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case 2:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case 3:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case 4:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,_=null,x=null,w.set(0,0,0),E=0,m=t,S=u}}else!0===f&&(H(e.BLEND),f=!1)}function q(t){A!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),A=t)}function X(t){0!==t?(z(e.CULL_FACE),t!==M&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):H(e.CULL_FACE),M=t}function Q(t,n,r){t?(z(e.POLYGON_OFFSET_FILL),C===n&&R===r||(e.polygonOffset(n,r),C=n,R=r)):H(e.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:o,stencil:s},enable:z,disable:H,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,r&&(t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n)),!0)},drawBuffers:function(r,i){let o=d,s=!1;if(r){o=h.get(i),void 0===o&&(o=[],h.set(i,o));const t=r.textures;if(o.length!==t.length||o[0]!==e.COLOR_ATTACHMENT0){for(let n=0,r=t.length;n<r;n++)o[n]=e.COLOR_ATTACHMENT0+n;o.length=t.length,s=!0}}else o[0]!==e.BACK&&(o[0]=e.BACK,s=!0);if(s)if(n.isWebGL2)e.drawBuffers(o);else{if(!0!==t.has("WEBGL_draw_buffers"))throw new Error("THREE.WebGLState: Usage of gl.drawBuffers() require WebGL2 or WEBGL_draw_buffers extension");t.get("WEBGL_draw_buffers").drawBuffersWEBGL(o)}},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:K,setMaterial:function(t,n){2===t.side?H(e.CULL_FACE):z(e.CULL_FACE);let r=t.side===jT;n&&(r=!r),q(r),1===t.blending&&!1===t.transparent?K(0):K(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.blendColor,t.blendAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);const a=t.stencilWrite;s.setTest(a),a&&(s.setMask(t.stencilWriteMask),s.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),s.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Q(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?z(e.SAMPLE_ALPHA_TO_COVERAGE):H(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:X,setLineWidth:function(t){t!==T&&(I&&e.lineWidth(t),T=t)},setPolygonOffset:Q,setScissorTest:function(t){t?z(e.SCISSOR_TEST):H(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+L-1),k!==t&&(e.activeTexture(t),k=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===k?e.TEXTURE0+L-1:k);let i=D[r];void 0===i&&(i={type:void 0,texture:void 0},D[r]=i),i.type===t&&i.texture===n||(k!==r&&(e.activeTexture(r),k=r),e.bindTexture(t,n||V[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=D[k];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},updateUBOMapping:function(t,n){let r=l.get(n);void 0===r&&(r=new WeakMap,l.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=l.get(n).get(t);a.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),a.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===F.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),F.copy(t))},viewport:function(t){!1===B.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),B.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),!0===r&&(e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},k=null,D={},u={},h=new WeakMap,d=[],p=null,f=!1,m=null,g=null,v=null,y=null,b=null,_=null,x=null,w=new tI(0,0,0),E=0,S=!1,A=null,M=null,T=null,C=null,R=null,F.set(0,0,e.canvas.width,e.canvas.height),B.set(0,0,e.canvas.width,e.canvas.height),i.reset(),o.reset(),s.reset()}}}function Ok(e,t,n,r,i,o,s){const a=i.isWebGL2,l=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),u=new lR,h=new WeakMap;let d;const p=new WeakMap;let f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(V){}function m(e,t){return f?new OffscreenCanvas(e,t):dR("canvas")}function g(e,t,n,r){let i=1;const o=j(e);if((o.width>r||o.height>r)&&(i=r/Math.max(o.width,o.height)),i<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const r=t?iR:Math.floor,s=r(i*o.width),a=r(i*o.height);void 0===d&&(d=m(s,a));const l=n?m(s,a):d;l.width=s,l.height=a;return l.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+o.width+"x"+o.height+") to ("+s+"x"+a+")."),l}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+o.width+"x"+o.height+")."),e}return e}function v(e){const t=j(e);return rR(t.width)&&rR(t.height)}function y(e,t){return e.generateMipmaps&&t&&e.minFilter!==aC&&e.minFilter!==uC}function b(t){e.generateMipmap(t)}function _(n,r,i,o){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===a)return r;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=r;if(r===e.RED&&(i===e.FLOAT&&(l=e.R32F),i===e.HALF_FLOAT&&(l=e.R16F),i===e.UNSIGNED_BYTE&&(l=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(l=e.R8UI),i===e.UNSIGNED_SHORT&&(l=e.R16UI),i===e.UNSIGNED_INT&&(l=e.R32UI),i===e.BYTE&&(l=e.R8I),i===e.SHORT&&(l=e.R16I),i===e.INT&&(l=e.R32I)),r===e.RG&&(i===e.FLOAT&&(l=e.RG32F),i===e.HALF_FLOAT&&(l=e.RG16F),i===e.UNSIGNED_BYTE&&(l=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(l=e.RG8UI),i===e.UNSIGNED_SHORT&&(l=e.RG16UI),i===e.UNSIGNED_INT&&(l=e.RG32UI),i===e.BYTE&&(l=e.RG8I),i===e.SHORT&&(l=e.RG16I),i===e.INT&&(l=e.RG32I)),r===e.RGBA){const t=s?BC:_R.getTransfer(o);i===e.FLOAT&&(l=e.RGBA32F),i===e.HALF_FLOAT&&(l=e.RGBA16F),i===e.UNSIGNED_BYTE&&(l=t===jC?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(l=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(l=e.RGB5_A1)}return l!==e.R16F&&l!==e.R32F&&l!==e.RG16F&&l!==e.RG32F&&l!==e.RGBA16F&&l!==e.RGBA32F||t.get("EXT_color_buffer_float"),l}function x(e,t,n){return!0===y(e,n)||e.isFramebufferTexture&&e.minFilter!==aC&&e.minFilter!==uC?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function w(t){return t===aC||t===lC||t===cC?e.NEAREST:e.LINEAR}function E(e){const t=e.target;t.removeEventListener("dispose",E),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=p.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&A(e),0===Object.keys(i).length&&p.delete(n)}r.remove(e)}(t),t.isVideoTexture&&h.delete(t)}function S(t){const n=t.target;n.removeEventListener("dispose",S),function(t){const n=r.get(t);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let o=0,a=i.length;o<a;o++){const t=r.get(i[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),s.memory.textures--),r.remove(i[o])}r.remove(t)}(n)}function A(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete p.get(i)[n.__cacheKey],s.memory.textures--}let M=0;function T(t,i){const o=r.get(t);if(t.isVideoTexture&&function(e){const t=s.render.frame;h.get(e)!==t&&(h.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void N(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}const C={[iC]:e.REPEAT,[oC]:e.CLAMP_TO_EDGE,[sC]:e.MIRRORED_REPEAT},R={[aC]:e.NEAREST,[lC]:e.NEAREST_MIPMAP_NEAREST,[cC]:e.NEAREST_MIPMAP_LINEAR,[uC]:e.LINEAR,[hC]:e.LINEAR_MIPMAP_NEAREST,[dC]:e.LINEAR_MIPMAP_LINEAR},L={512:e.NEVER,519:e.ALWAYS,513:e.LESS,515:e.LEQUAL,514:e.EQUAL,518:e.GEQUAL,516:e.GREATER,517:e.NOTEQUAL};function I(n,o,s){if(o.type!==vC||!1!==t.has("OES_texture_float_linear")||o.magFilter!==uC&&o.magFilter!==hC&&o.magFilter!==cC&&o.magFilter!==dC&&o.minFilter!==uC&&o.minFilter!==hC&&o.minFilter!==cC&&o.minFilter!==dC||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),s?(e.texParameteri(n,e.TEXTURE_WRAP_S,C[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,C[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,R[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,R[o.minFilter])):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,e.CLAMP_TO_EDGE),o.wrapS===oC&&o.wrapT===oC||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,e.TEXTURE_MAG_FILTER,w(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,w(o.minFilter)),o.minFilter!==aC&&o.minFilter!==uC&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,L[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===aC)return;if(o.minFilter!==cC&&o.minFilter!==dC)return;if(o.type===vC&&!1===t.has("OES_texture_float_linear"))return;if(!1===a&&o.type===yC&&!1===t.has("OES_texture_half_float_linear"))return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){const s=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy}}}function P(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E));const i=n.source;let o=p.get(i);void 0===o&&(o={},p.set(i,o));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(a!==t.__cacheKey){void 0===o[a]&&(o[a]={texture:e.createTexture(),usedTimes:0},s.memory.textures++,r=!0),o[a].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&A(n)),t.__cacheKey=a,t.__webglTexture=o[a].texture}return r}function N(t,s,l){let c=e.TEXTURE_2D;(s.isDataArrayTexture||s.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),s.isData3DTexture&&(c=e.TEXTURE_3D);const u=P(t,s),h=s.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+l);const d=r.get(h);if(h.version!==d.__version||!0===u){n.activeTexture(e.TEXTURE0+l);const t=_R.getPrimaries(_R.workingColorSpace),r=s.colorSpace===kC?null:_R.getPrimaries(s.colorSpace),p=s.colorSpace===kC||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);const f=function(e){return!a&&(e.wrapS!==oC||e.wrapT!==oC||e.minFilter!==aC&&e.minFilter!==uC)}(s)&&!1===v(s.image);let m=g(s.image,f,!1,i.maxTextureSize);m=B(s,m);const w=v(m)||a,E=o.convert(s.format,s.colorSpace);let S,A=o.convert(s.type),M=_(s.internalFormat,E,A,s.colorSpace,s.isVideoTexture);I(c,s,w);const T=s.mipmaps,C=a&&!0!==s.isVideoTexture&&36196!==M,R=void 0===d.__version||!0===u,L=h.dataReady,P=x(s,m,w);if(s.isDepthTexture)M=e.DEPTH_COMPONENT,a?M=s.type===vC?e.DEPTH_COMPONENT32F:s.type===gC?e.DEPTH_COMPONENT24:s.type===bC?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT16:s.type===vC&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),s.format===xC&&M===e.DEPTH_COMPONENT&&s.type!==fC&&s.type!==gC&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),s.type=gC,A=o.convert(s.type)),s.format===wC&&M===e.DEPTH_COMPONENT&&(M=e.DEPTH_STENCIL,s.type!==bC&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),s.type=bC,A=o.convert(s.type))),R&&(C?n.texStorage2D(e.TEXTURE_2D,1,M,m.width,m.height):n.texImage2D(e.TEXTURE_2D,0,M,m.width,m.height,0,E,A,null));else if(s.isDataTexture)if(T.length>0&&w){C&&R&&n.texStorage2D(e.TEXTURE_2D,P,M,T[0].width,T[0].height);for(let t=0,r=T.length;t<r;t++)S=T[t],C?L&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,A,S.data):n.texImage2D(e.TEXTURE_2D,t,M,S.width,S.height,0,E,A,S.data);s.generateMipmaps=!1}else C?(R&&n.texStorage2D(e.TEXTURE_2D,P,M,m.width,m.height),L&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,m.width,m.height,E,A,m.data)):n.texImage2D(e.TEXTURE_2D,0,M,m.width,m.height,0,E,A,m.data);else if(s.isCompressedTexture)if(s.isCompressedArrayTexture){C&&R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,M,T[0].width,T[0].height,m.depth);for(let t=0,r=T.length;t<r;t++)S=T[t],s.format!==_C?null!==E?C?L&&n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,m.depth,E,S.data,0,0):n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,M,S.width,S.height,m.depth,0,S.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?L&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,S.width,S.height,m.depth,E,A,S.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,M,S.width,S.height,m.depth,0,E,A,S.data)}else{C&&R&&n.texStorage2D(e.TEXTURE_2D,P,M,T[0].width,T[0].height);for(let t=0,r=T.length;t<r;t++)S=T[t],s.format!==_C?null!==E?C?L&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,S.data):n.compressedTexImage2D(e.TEXTURE_2D,t,M,S.width,S.height,0,S.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?L&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,S.width,S.height,E,A,S.data):n.texImage2D(e.TEXTURE_2D,t,M,S.width,S.height,0,E,A,S.data)}else if(s.isDataArrayTexture)C?(R&&n.texStorage3D(e.TEXTURE_2D_ARRAY,P,M,m.width,m.height,m.depth),L&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,E,A,m.data)):n.texImage3D(e.TEXTURE_2D_ARRAY,0,M,m.width,m.height,m.depth,0,E,A,m.data);else if(s.isData3DTexture)C?(R&&n.texStorage3D(e.TEXTURE_3D,P,M,m.width,m.height,m.depth),L&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,E,A,m.data)):n.texImage3D(e.TEXTURE_3D,0,M,m.width,m.height,m.depth,0,E,A,m.data);else if(s.isFramebufferTexture){if(R)if(C)n.texStorage2D(e.TEXTURE_2D,P,M,m.width,m.height);else{let t=m.width,r=m.height;for(let i=0;i<P;i++)n.texImage2D(e.TEXTURE_2D,i,M,t,r,0,E,A,null),t>>=1,r>>=1}}else if(T.length>0&&w){if(C&&R){const t=j(T[0]);n.texStorage2D(e.TEXTURE_2D,P,M,t.width,t.height)}for(let t=0,r=T.length;t<r;t++)S=T[t],C?L&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,E,A,S):n.texImage2D(e.TEXTURE_2D,t,M,E,A,S);s.generateMipmaps=!1}else if(C){if(R){const t=j(m);n.texStorage2D(e.TEXTURE_2D,P,M,t.width,t.height)}L&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,E,A,m)}else n.texImage2D(e.TEXTURE_2D,0,M,E,A,m);y(s,w)&&b(c),d.__version=h.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}function k(t,i,s,a,c,u){const h=o.convert(s.format,s.colorSpace),d=o.convert(s.type),p=_(s.internalFormat,h,d,s.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,p,t,r,i.depth,0,h,d,null):n.texImage2D(c,u,p,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),F(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,a,c,r.get(s).__webglTexture,0,U(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,a,c,r.get(s).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer){let i=!0===a?e.DEPTH_COMPONENT24:e.DEPTH_COMPONENT16;if(r||F(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===vC?i=e.DEPTH_COMPONENT32F:t.type===gC&&(i=e.DEPTH_COMPONENT24));const r=U(n);F(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,r,i,n.width,n.height):e.renderbufferStorageMultisample(e.RENDERBUFFER,r,i,n.width,n.height)}else e.renderbufferStorage(e.RENDERBUFFER,i,n.width,n.height);e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)}else if(n.depthBuffer&&n.stencilBuffer){const i=U(n);r&&!1===F(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):F(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,i,e.DEPTH24_STENCIL8,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const s=t[i],a=o.convert(s.format,s.colorSpace),c=o.convert(s.type),u=_(s.internalFormat,a,c,s.colorSpace),h=U(n);r&&!1===F(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):F(n)?l.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,s=U(i);if(i.depthTexture.format===xC)F(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==wC)throw new Error("Unknown depthTexture format");F(i)?l.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,s):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}function U(e){return Math.min(i.maxSamples,e.samples)}function F(e){const n=r.get(e);return a&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function B(e,n){const r=e.colorSpace,i=e.format,o=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===KC||r!==OC&&r!==kC&&(_R.getTransfer(r)===jC?!1===a?!0===t.has("EXT_sRGB")&&i===_C?(e.format=KC,e.minFilter=uC,e.generateMipmaps=!1):n=SR.sRGBToLinear(n):i===_C&&o===pC||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",r)),n}function j(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(u.width=e.naturalWidth||e.width,u.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(u.width=e.displayWidth,u.height=e.displayHeight):(u.width=e.width,u.height=e.height),u}this.allocateTextureUnit=function(){const e=M;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),M+=1,e},this.resetTextureUnits=function(){M=0},this.setTexture2D=T,this.setTexture2DArray=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?N(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?N(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,s){const l=r.get(t);t.version>0&&l.__version!==t.version?function(t,s,l){if(6!==s.image.length)return;const c=P(t,s),u=s.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+l);const h=r.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+l);const t=_R.getPrimaries(_R.workingColorSpace),r=s.colorSpace===kC?null:_R.getPrimaries(s.colorSpace),d=s.colorSpace===kC||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,s.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,s.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);const p=s.isCompressedTexture||s.image[0].isCompressedTexture,f=s.image[0]&&s.image[0].isDataTexture,m=[];for(let e=0;e<6;e++)m[e]=p||f?f?s.image[e].image:s.image[e]:g(s.image[e],!1,!0,i.maxCubemapSize),m[e]=B(s,m[e]);const w=m[0],E=v(w)||a,S=o.convert(s.format,s.colorSpace),A=o.convert(s.type),M=_(s.internalFormat,S,A,s.colorSpace),T=a&&!0!==s.isVideoTexture,C=void 0===h.__version||!0===c,R=u.dataReady;let L,P=x(s,w,E);if(I(e.TEXTURE_CUBE_MAP,s,E),p){T&&C&&n.texStorage2D(e.TEXTURE_CUBE_MAP,P,M,w.width,w.height);for(let t=0;t<6;t++){L=m[t].mipmaps;for(let r=0;r<L.length;r++){const i=L[r];s.format!==_C?null!==S?T?R&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,S,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,M,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):T?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,S,A,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,M,i.width,i.height,0,S,A,i.data)}}}else{if(L=s.mipmaps,T&&C){L.length>0&&P++;const t=j(m[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,P,M,t.width,t.height)}for(let t=0;t<6;t++)if(f){T?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,m[t].width,m[t].height,S,A,m[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,M,m[t].width,m[t].height,0,S,A,m[t].data);for(let r=0;r<L.length;r++){const i=L[r].image[t].image;T?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,S,A,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,M,i.width,i.height,0,S,A,i.data)}}else{T?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,S,A,m[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,M,S,A,m[t]);for(let r=0;r<L.length;r++){const i=L[r];T?R&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,S,A,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,M,S,A,i.image[t])}}}y(s,E)&&b(e.TEXTURE_CUBE_MAP),h.__version=u.version,s.onUpdate&&s.onUpdate(s)}t.__version=s.version}(l,t,s):n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture,e.TEXTURE0+s)},this.rebindTextures=function(t,n,i){const o=r.get(t);void 0!==n&&k(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){const l=t.texture,c=r.get(t),u=r.get(l);t.addEventListener("dispose",S);const h=t.textures,d=!0===t.isWebGLCubeRenderTarget,p=h.length>1,f=v(t)||a;if(p||(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,s.memory.textures++),d){c.__webglFramebuffer=[];for(let t=0;t<6;t++)if(a&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer[t]=[];for(let n=0;n<l.mipmaps.length;n++)c.__webglFramebuffer[t][n]=e.createFramebuffer()}else c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(a&&l.mipmaps&&l.mipmaps.length>0){c.__webglFramebuffer=[];for(let t=0;t<l.mipmaps.length;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else c.__webglFramebuffer=e.createFramebuffer();if(p)if(i.drawBuffers)for(let t=0,n=h.length;t<n;t++){const n=r.get(h[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),s.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&t.samples>0&&!1===F(t)){c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,c.__webglMultisampledFramebuffer);for(let n=0;n<h.length;n++){const r=h[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,c.__webglColorRenderbuffer[n]);const i=o.convert(r.format,r.colorSpace),s=o.convert(r.type),a=_(r.internalFormat,i,s,r.colorSpace,!0===t.isXRRenderTarget),l=U(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,l,a,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),D(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(d){n.bindTexture(e.TEXTURE_CUBE_MAP,u.__webglTexture),I(e.TEXTURE_CUBE_MAP,l,f);for(let n=0;n<6;n++)if(a&&l.mipmaps&&l.mipmaps.length>0)for(let r=0;r<l.mipmaps.length;r++)k(c.__webglFramebuffer[n][r],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else k(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);y(l,f)&&b(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(p){for(let i=0,o=h.length;i<o;i++){const o=h[i],s=r.get(o);n.bindTexture(e.TEXTURE_2D,s.__webglTexture),I(e.TEXTURE_2D,o,f),k(c.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),y(o,f)&&b(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(a?r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(r,u.__webglTexture),I(r,l,f),a&&l.mipmaps&&l.mipmaps.length>0)for(let n=0;n<l.mipmaps.length;n++)k(c.__webglFramebuffer[n],t,l,e.COLOR_ATTACHMENT0,r,n);else k(c.__webglFramebuffer,t,l,e.COLOR_ATTACHMENT0,r,0);y(l,f)&&b(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){const i=v(t)||a,o=t.textures;for(let s=0,a=o.length;s<a;s++){const a=o[s];if(y(a,i)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),b(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(a&&t.samples>0&&!1===F(t)){const i=t.textures,o=t.width,s=t.height;let a=e.COLOR_BUFFER_BIT;const l=[],u=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,h=r.get(t),d=i.length>1;if(d)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,h.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglFramebuffer);for(let n=0;n<i.length;n++){l.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&l.push(u);const p=void 0!==h.__ignoreDepthValues&&h.__ignoreDepthValues;if(!1===p&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),d&&e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,h.__webglColorRenderbuffer[n]),!0===p&&(e.invalidateFramebuffer(e.READ_FRAMEBUFFER,[u]),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[u])),d){const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,s,0,0,o,s,a,e.NEAREST),c&&e.invalidateFramebuffer(e.READ_FRAMEBUFFER,l)}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),d)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,h.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,h.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,h.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,h.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=k,this.useMultisampledRTT=F}function Uk(e,t,n){const r=n.isWebGL2;return{convert:function(n){let i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kC;const s=_R.getTransfer(o);if(n===pC)return e.UNSIGNED_BYTE;if(1017===n)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===n)return e.UNSIGNED_SHORT_5_5_5_1;if(1010===n)return e.BYTE;if(1011===n)return e.SHORT;if(n===fC)return e.UNSIGNED_SHORT;if(n===mC)return e.INT;if(n===gC)return e.UNSIGNED_INT;if(n===vC)return e.FLOAT;if(n===yC)return r?e.HALF_FLOAT:(i=t.get("OES_texture_half_float"),null!==i?i.HALF_FLOAT_OES:null);if(1021===n)return e.ALPHA;if(n===_C)return e.RGBA;if(1024===n)return e.LUMINANCE;if(1025===n)return e.LUMINANCE_ALPHA;if(n===xC)return e.DEPTH_COMPONENT;if(n===wC)return e.DEPTH_STENCIL;if(n===KC)return i=t.get("EXT_sRGB"),null!==i?i.SRGB_ALPHA_EXT:null;if(1028===n)return e.RED;if(1029===n)return e.RED_INTEGER;if(1030===n)return e.RG;if(1031===n)return e.RG_INTEGER;if(1033===n)return e.RGBA_INTEGER;if(n===EC||n===SC||n===AC||n===MC)if(s===jC){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===EC)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===SC)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===AC)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===MC)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===EC)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===SC)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===AC)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===MC)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(35840===n||35841===n||35842===n||35843===n){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(35840===n)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===n)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===n)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===n)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===n)return i=t.get("WEBGL_compressed_texture_etc1"),null!==i?i.COMPRESSED_RGB_ETC1_WEBGL:null;if(37492===n||37496===n){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(37492===n)return s===jC?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(37496===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(37808===n||37809===n||37810===n||37811===n||37812===n||37813===n||37814===n||37815===n||37816===n||37817===n||37818===n||37819===n||37820===n||37821===n){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(37808===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(37809===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(37810===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(37811===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(37812===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(37813===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(37814===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(37815===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(37816===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(37817===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(37818===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(37819===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(37820===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(37821===n)return s===jC?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===TC||36494===n||36495===n){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===TC)return s===jC?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(36494===n)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(36495===n)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(36283===n||36284===n||36285===n||36286===n){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===TC)return i.COMPRESSED_RED_RGTC1_EXT;if(36284===n)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(36285===n)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(36286===n)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===bC?r?e.UNSIGNED_INT_24_8:(i=t.get("WEBGL_depth_texture"),null!==i?i.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class Fk extends QI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class Bk extends BL{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jk={type:"move"};class Vk{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Bk,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Bk,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new OR,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new OR),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Bk,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new OR,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new OR),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const s=this._targetRay,a=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),r=this._getHandJoint(l,o);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],s=r.position.distanceTo(i.position),a=.02,c=.005;l.inputState.pinching&&s>a+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&s<=a-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==s&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,r.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(r.linearVelocity)):s.hasLinearVelocity=!1,r.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(r.angularVelocity)):s.hasAngularVelocity=!1,this.dispatchEvent(jk)))}return null!==s&&(s.visible=null!==r),null!==a&&(a.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Bk;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class zk{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new RR;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}render(e,t){if(null!==this.texture){if(null===this.mesh){const e=t.cameras[0].viewport,n=new GI({extensions:{fragDepth:!0},vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepthEXT = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new UI(new cP(20,20),n)}e.render(this.mesh,t)}}reset(){this.texture=null,this.mesh=null}}class Hk extends QC{constructor(e,t){super();const n=this;let r=null,i=1,o=null,s="local-floor",a=1,l=null,c=null,u=null,h=null,d=null,p=null;const f=new zk,m=t.getContextAttributes();let g=null,v=null;const y=[],b=[],_=new lR;let x=null;const w=new QI;w.layers.enable(1),w.viewport=new LR;const E=new QI;E.layers.enable(2),E.viewport=new LR;const S=[w,E],A=new Fk;A.layers.enable(1),A.layers.enable(2);let M=null,T=null;function C(e){const t=b.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function R(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",R),r.removeEventListener("inputsourceschange",L);for(let e=0;e<y.length;e++){const t=b[e];null!==t&&(b[e]=null,y[e].disconnect(t))}M=null,T=null,f.reset(),e.setRenderTarget(g),d=null,h=null,u=null,r=null,v=null,D.stop(),n.isPresenting=!1,e.setPixelRatio(x),e.setSize(_.width,_.height,!1),n.dispatchEvent({type:"sessionend"})}function L(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=b.indexOf(n);r>=0&&(b[r]=null,y[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=b.indexOf(n);if(-1===r){for(let e=0;e<y.length;e++){if(e>=b.length){b.push(n),r=e;break}if(null===b[e]){b[e]=n,r=e;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Vk,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Vk,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Vk,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){s=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",R),r.addEventListener("inputsourceschange",L),!0!==m.xrCompatible&&await t.makeXRCompatible(),x=e.getPixelRatio(),e.getSize(_),void 0===r.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==r.renderState.layers||m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new PR(d.framebufferWidth,d.framebufferHeight,{format:_C,type:pC,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,o=null,s=null;m.depth&&(s=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?wC:xC,o=m.stencil?bC:gC);const a={colorFormat:t.RGBA8,depthFormat:s,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(a),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new PR(h.textureWidth,h.textureHeight,{format:_C,type:pC,depthTexture:new qP(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0});e.properties.get(v).__ignoreDepthValues=h.ignoreDepthValues}v.isXRRenderTarget=!0,this.setFoveation(a),l=null,o=await r.requestReferenceSpace(s),D.setContext(r),D.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const I=new OR,P=new OR;function N(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;null!==f.texture&&(e.near=f.depthNear,e.far=f.depthFar),A.near=E.near=w.near=e.near,A.far=E.far=w.far=e.far,M===A.near&&T===A.far||(r.updateRenderState({depthNear:A.near,depthFar:A.far}),M=A.near,T=A.far,w.near=M,w.far=T,E.near=M,E.far=T,w.updateProjectionMatrix(),E.updateProjectionMatrix(),e.updateProjectionMatrix());const t=e.parent,n=A.cameras;N(A,t);for(let r=0;r<n.length;r++)N(n[r],t);2===n.length?function(e,t,n){I.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=I.distanceTo(P),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,s=i[14]/(i[10]-1),a=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=s*u,p=s*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=s+f,v=a+f,y=d-m,b=p+(r-m),_=l*a/v*g,x=c*a/v*g;e.projectionMatrix.makePerspective(y,b,_,x,g,v),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(A,w,E):A.projectionMatrix.copy(w.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*ZC*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,A,t)},this.getCamera=function(){return A},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(e){a=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture};let k=null;const D=new aP;D.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||o),p=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==A.cameras.length&&(A.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=u.getViewSubImage(h,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let s=S[r];void 0===s&&(s=new QI,s.layers.enable(r),s.viewport=new LR,S[r]=s),s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.quaternion,s.scale),s.projectionMatrix.fromArray(i.projectionMatrix),s.projectionMatrixInverse.copy(s.projectionMatrix).invert(),s.viewport.set(o.x,o.y,o.width,o.height),0===r&&(A.matrix.copy(s.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),!0===n&&A.cameras.push(s)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&f.init(e,n,r.renderState)}}for(let e=0;e<y.length;e++){const t=b[e],n=y[e];null!==t&&void 0!==n&&n.update(t,i,l||o)}f.render(e,A),k&&k(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null})),this.setAnimationLoop=function(e){k=e},this.dispose=function(){}}}const Gk=new wL,Wk=new dL;function Kk(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(r,i){r.opacity.value=i.opacity,i.color&&r.diffuse.value.copy(i.color),i.emissive&&r.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(r.map.value=i.map,n(i.map,r.mapTransform)),i.alphaMap&&(r.alphaMap.value=i.alphaMap,n(i.alphaMap,r.alphaMapTransform)),i.bumpMap&&(r.bumpMap.value=i.bumpMap,n(i.bumpMap,r.bumpMapTransform),r.bumpScale.value=i.bumpScale,i.side===jT&&(r.bumpScale.value*=-1)),i.normalMap&&(r.normalMap.value=i.normalMap,n(i.normalMap,r.normalMapTransform),r.normalScale.value.copy(i.normalScale),i.side===jT&&r.normalScale.value.negate()),i.displacementMap&&(r.displacementMap.value=i.displacementMap,n(i.displacementMap,r.displacementMapTransform),r.displacementScale.value=i.displacementScale,r.displacementBias.value=i.displacementBias),i.emissiveMap&&(r.emissiveMap.value=i.emissiveMap,n(i.emissiveMap,r.emissiveMapTransform)),i.specularMap&&(r.specularMap.value=i.specularMap,n(i.specularMap,r.specularMapTransform)),i.alphaTest>0&&(r.alphaTest.value=i.alphaTest);const o=t.get(i),s=o.envMap,a=o.envMapRotation;if(s&&(r.envMap.value=s,Gk.copy(a),Gk.x*=-1,Gk.y*=-1,Gk.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(Gk.y*=-1,Gk.z*=-1),r.envMapRotation.value.setFromMatrix4(Wk.makeRotationFromEuler(Gk)),r.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,r.reflectivity.value=i.reflectivity,r.ior.value=i.ior,r.refractionRatio.value=i.refractionRatio),i.lightMap){r.lightMap.value=i.lightMap;const t=!0===e._useLegacyLights?Math.PI:1;r.lightMapIntensity.value=i.lightMapIntensity*t,n(i.lightMap,r.lightMapTransform)}i.aoMap&&(r.aoMap.value=i.aoMap,r.aoMapIntensity.value=i.aoMapIntensity,n(i.aoMap,r.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,zI(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,o,s,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,r){e.metalness.value=r.metalness,r.metalnessMap&&(e.metalnessMap.value=r.metalnessMap,n(r.metalnessMap,e.metalnessMapTransform));e.roughness.value=r.roughness,r.roughnessMap&&(e.roughnessMap.value=r.roughnessMap,n(r.roughnessMap,e.roughnessMapTransform));const i=t.get(r).envMap;i&&(e.envMapIntensity.value=r.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===jT&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,a)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,o,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function qk(e,t,n,r){let i={},o={},s=[];const a=n.isWebGL2?e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(e,t,n,r){const i=e.value,o=t+"_"+n;if(void 0===r[o])return r[o]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const e=r[o];if("number"===typeof i||"boolean"===typeof i){if(e!==i)return r[o]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=s.indexOf(n.__bindingPointIndex);s.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let o=0,s=t.length;o<s;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,i=e.length;t<i;t++){const i=e[t],o=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=o.length;e<t;e++){const t=c(o[e]),s=n%r;0!==s&&r-s<t.boundary&&(n+=r-s),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===s.indexOf(e))return s.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const p=h.program;r.updateUBOMapping(n,p);const f=t.render.frame;o[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,s=r.length;i<s;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,o)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let o=0;o<n.length;o++){const s=n[o],a=c(s);"number"===typeof s||"boolean"===typeof s?(r.__data[0]=s,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):s.isMatrix3?(r.__data[0]=s.elements[0],r.__data[1]=s.elements[1],r.__data[2]=s.elements[2],r.__data[3]=0,r.__data[4]=s.elements[3],r.__data[5]=s.elements[4],r.__data[6]=s.elements[5],r.__data[7]=0,r.__data[8]=s.elements[6],r.__data[9]=s.elements[7],r.__data[10]=s.elements[8],r.__data[11]=0):(s.toArray(r.__data,i),i+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);s=[],i={},o={}}}}class Xk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=pR(),context:n=null,depth:r=!0,stencil:i=!0,alpha:o=!1,antialias:s=!1,premultipliedAlpha:a=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let h;this.isWebGLRenderer=!0,h=null!==n?n.getContextAttributes().alpha:o;const d=new Uint32Array(4),p=new Int32Array(4);let f=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=DC,this._useLegacyLights=!1,this.toneMapping=WT,this.toneMappingExposure=1;const y=this;let b=!1,_=0,x=0,w=null,E=-1,S=null;const A=new LR,M=new LR;let T=null;const C=new tI(0);let R=0,L=t.width,I=t.height,P=1,N=null,k=null;const D=new LR(0,0,L,I),O=new LR(0,0,L,I);let U=!1;const F=new sP;let B=!1,j=!1,V=null;const z=new dL,H=new lR,G=new OR,W={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function K(){return null===w?P:1}let q,X,Q,Y,J,Z,$,ee,te,ne,re,ie,oe,se,ae,le,ce,ue,he,de,pe,fe,me,ge,ve=n;function ye(e,n){for(let r=0;r<e.length;r++){const i=e[r],o=t.getContext(i,n);if(null!==o)return o}return null}try{const e={alpha:!0,depth:r,stencil:i,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(CT)),t.addEventListener("webglcontextlost",xe,!1),t.addEventListener("webglcontextrestored",we,!1),t.addEventListener("webglcontextcreationerror",Ee,!1),null===ve){const t=["webgl2","webgl","experimental-webgl"];if(!0===y.isWebGL1Renderer&&t.shift(),ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}"undefined"!==typeof WebGLRenderingContext&&ve instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),void 0===ve.getShaderPrecisionFormat&&(ve.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ue){throw console.error("THREE.WebGLRenderer: "+Ue.message),Ue}function be(){q=new BP(ve),X=new bP(ve,q,e),q.init(X),fe=new Uk(ve,q,X),Q=new Dk(ve,q,X),Y=new zP(ve),J=new xk,Z=new Ok(ve,q,Q,J,X,fe,Y),$=new xP(y),ee=new FP(y),te=new lP(ve,X),me=new vP(ve,q,te,X),ne=new jP(ve,te,Y,me),re=new KP(ve,ne,te,Y),he=new WP(ve,X,Z),le=new _P(J),ie=new _k(y,$,ee,q,X,me,le),oe=new Kk(y,J),se=new Ak,ae=new Ik(q,X),ue=new gP(y,$,ee,Q,re,h,a),ce=new kk(y,re,X),ge=new qk(ve,Y,X,Q),de=new yP(ve,q,Y,X),pe=new VP(ve,q,Y,X),Y.programs=ie.programs,y.capabilities=X,y.extensions=q,y.properties=J,y.renderLists=se,y.shadowMap=ce,y.state=Q,y.info=Y}be();const _e=new Hk(y,ve);function xe(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),b=!0}function we(){console.log("THREE.WebGLRenderer: Context Restored."),b=!1;const e=Y.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;be(),Y.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function Ee(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Se(e){const t=e.target;t.removeEventListener("dispose",Se),function(e){(function(e){const t=J.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),J.remove(e)}(t)}function Ae(e,t,n){!0===e.transparent&&2===e.side&&!1===e.forceSinglePass?(e.side=jT,e.needsUpdate=!0,ke(e,t,n),e.side=BT,e.needsUpdate=!0,ke(e,t,n),e.side=2):ke(e,t,n)}this.xr=_e,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return P},this.setPixelRatio=function(e){void 0!==e&&(P=e,this.setSize(L,I,!1))},this.getSize=function(e){return e.set(L,I)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];_e.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=e,I=n,t.width=Math.floor(e*P),t.height=Math.floor(n*P),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(L*P,I*P).floor()},this.setDrawingBufferSize=function(e,n,r){L=e,I=n,P=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(A)},this.getViewport=function(e){return e.copy(D)},this.setViewport=function(e,t,n,r){e.isVector4?D.set(e.x,e.y,e.z,e.w):D.set(e,t,n,r),Q.viewport(A.copy(D).multiplyScalar(P).round())},this.getScissor=function(e){return e.copy(O)},this.setScissor=function(e,t,n,r){e.isVector4?O.set(e.x,e.y,e.z,e.w):O.set(e,t,n,r),Q.scissor(M.copy(O).multiplyScalar(P).round())},this.getScissorTest=function(){return U},this.setScissorTest=function(e){Q.setScissorTest(U=e)},this.setOpaqueSort=function(e){N=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==w){const t=w.texture.format;e=1033===t||1031===t||1029===t}if(e){const e=w.texture.type,t=e===pC||e===gC||e===fC||e===bC||1017===e||1018===e,n=ue.getClearColor(),r=ue.getClearAlpha(),i=n.r,o=n.g,s=n.b;t?(d[0]=i,d[1]=o,d[2]=s,d[3]=r,ve.clearBufferuiv(ve.COLOR,0,d)):(p[0]=i,p[1]=o,p[2]=s,p[3]=r,ve.clearBufferiv(ve.COLOR,0,p))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xe,!1),t.removeEventListener("webglcontextrestored",we,!1),t.removeEventListener("webglcontextcreationerror",Ee,!1),se.dispose(),ae.dispose(),J.dispose(),$.dispose(),ee.dispose(),re.dispose(),me.dispose(),ge.dispose(),ie.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",Te),_e.removeEventListener("sessionend",Ce),V&&(V.dispose(),V=null),Re.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=W);const s=i.isMesh&&i.matrixWorld.determinant()<0,a=function(e,t,n,r,i){!0!==t.isScene&&(t=W);Z.resetTextureUnits();const o=t.fog,s=r.isMeshStandardMaterial?t.environment:null,a=null===w?y.outputColorSpace:!0===w.isXRRenderTarget?w.texture.colorSpace:OC,l=(r.isMeshStandardMaterial?ee:$).get(r.envMap||s),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=WT;r.toneMapped&&(null!==w&&!0!==w.isXRRenderTarget||(f=y.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,b=J.get(r),_=m.state.lights;if(!0===B&&(!0===j||e!==S)){const t=e===S&&r.id===E;le.setState(r,e,t)}let x=!1;r.version===b.__version?b.needsLights&&b.lightsStateVersion!==_.state.version||b.outputColorSpace!==a||i.isBatchedMesh&&!1===b.batching?x=!0:i.isBatchedMesh||!0!==b.batching?i.isInstancedMesh&&!1===b.instancing?x=!0:i.isInstancedMesh||!0!==b.instancing?i.isSkinnedMesh&&!1===b.skinning?x=!0:i.isSkinnedMesh||!0!==b.skinning?i.isInstancedMesh&&!0===b.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===b.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===b.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===b.instancingMorph&&null!==i.morphTexture||b.envMap!==l||!0===r.fog&&b.fog!==o?x=!0:void 0===b.numClippingPlanes||b.numClippingPlanes===le.numPlanes&&b.numIntersection===le.numIntersection?(b.vertexAlphas!==c||b.vertexTangents!==u||b.morphTargets!==h||b.morphNormals!==d||b.morphColors!==p||b.toneMapping!==f||!0===X.isWebGL2&&b.morphTargetsCount!==v)&&(x=!0):x=!0:x=!0:x=!0:x=!0:(x=!0,b.__version=r.version);let A=b.currentProgram;!0===x&&(A=ke(r,t,i));let M=!1,T=!1,C=!1;const R=A.getUniforms(),L=b.uniforms;Q.useProgram(A.program)&&(M=!0,T=!0,C=!0);r.id!==E&&(E=r.id,T=!0);if(M||S!==e){R.setValue(ve,"projectionMatrix",e.projectionMatrix),R.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=R.map.cameraPosition;void 0!==t&&t.setValue(ve,G.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&R.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&R.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),S!==e&&(S=e,T=!0,C=!0)}if(i.isSkinnedMesh){R.setOptional(ve,i,"bindMatrix"),R.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(X.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),R.setValue(ve,"boneTexture",e.boneTexture,Z)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}i.isBatchedMesh&&(R.setOptional(ve,i,"batchingTexture"),R.setValue(ve,"batchingTexture",i._matricesTexture,Z));const N=n.morphAttributes;(void 0!==N.position||void 0!==N.normal||void 0!==N.color&&!0===X.isWebGL2)&&he.update(i,n,A);(T||b.receiveShadow!==i.receiveShadow)&&(b.receiveShadow=i.receiveShadow,R.setValue(ve,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(L.envMap.value=l,L.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);T&&(R.setValue(ve,"toneMappingExposure",y.toneMappingExposure),b.needsLights&&(D=C,(k=L).ambientLightColor.needsUpdate=D,k.lightProbe.needsUpdate=D,k.directionalLights.needsUpdate=D,k.directionalLightShadows.needsUpdate=D,k.pointLights.needsUpdate=D,k.pointLightShadows.needsUpdate=D,k.spotLights.needsUpdate=D,k.spotLightShadows.needsUpdate=D,k.rectAreaLights.needsUpdate=D,k.hemisphereLights.needsUpdate=D),o&&!0===r.fog&&oe.refreshFogUniforms(L,o),oe.refreshMaterialUniforms(L,r,P,I,V),ZN.upload(ve,De(b),L,Z));var k,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ZN.upload(ve,De(b),L,Z),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&R.setValue(ve,"center",i.center);if(R.setValue(ve,"modelViewMatrix",i.modelViewMatrix),R.setValue(ve,"normalMatrix",i.normalMatrix),R.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(X.isWebGL2){const n=e[t];ge.update(n,A),ge.bind(n,A)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return A}(e,t,n,r,i);Q.setMaterial(r,s);let l=n.index,c=1;if(!0===r.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,p=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),p=Math.min(p,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let g;me.setup(i,r,a,n,l);let v=de;if(null!==l&&(g=te.get(l),v=pe,v.setIndex(g)),i.isMesh)!0===r.wireframe?(Q.setLineWidth(r.wireframeLinewidth*K()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Q.setLineWidth(e*K()),i.isLineSegments?v.setMode(ve.LINES):i.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else i.isPoints?v.setMode(ve.POINTS):i.isSprite&&v.setMode(ve.TRIANGLES);if(i.isBatchedMesh)v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)v.renderInstances(d,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,f,t)}else v.render(d,f)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),m=ae.get(n),m.init(),v.push(m),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights(y._useLegacyLights);const r=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const o=t[i];Ae(o,n,e),r.add(o)}else Ae(t,n,e),r.add(t)})),v.pop(),m=null,r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){J.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Me=null;function Te(){Re.stop()}function Ce(){Re.start()}const Re=new aP;function Le(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||F.intersectsSprite(e)){r&&G.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=re.update(e),i=e.material;i.visible&&f.push(e,t,i,n,G.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||F.intersectsObject(e))){const t=re.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),G.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),G.copy(t.boundingSphere.center)),G.applyMatrix4(e.matrixWorld).applyMatrix4(z)),Array.isArray(i)){const r=t.groups;for(let o=0,s=r.length;o<s;o++){const s=r[o],a=i[s.materialIndex];a&&a.visible&&f.push(e,t,a,n,G.z,s)}}else i.visible&&f.push(e,t,i,n,G.z,null)}const i=e.children;for(let o=0,s=i.length;o<s;o++)Le(i[o],t,n,r)}function Ie(e,t,n,r){const i=e.opaque,o=e.transmissive,s=e.transparent;m.setupLightsView(n),!0===B&&le.setGlobalState(y.clippingPlanes,n),o.length>0&&function(e,t,n,r){const i=!0===n.isScene?n.overrideMaterial:null;if(null!==i)return;const o=X.isWebGL2;null===V&&(V=new PR(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")?yC:pC,minFilter:dC,samples:o?4:0}));y.getDrawingBufferSize(H),o?V.setSize(H.x,H.y):V.setSize(iR(H.x),iR(H.y));const s=y.getRenderTarget();y.setRenderTarget(V),y.getClearColor(C),R=y.getClearAlpha(),R<1&&y.setClearColor(16777215,.5);y.clear();const a=y.toneMapping;y.toneMapping=WT,Pe(e,n,r),Z.updateMultisampleRenderTarget(V),Z.updateRenderTargetMipmap(V);let l=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c],i=e.object,o=e.geometry,s=e.material,a=e.group;if(2===s.side&&i.layers.test(r.layers)){const e=s.side;s.side=jT,s.needsUpdate=!0,Ne(i,n,r,o,s,a),s.side=e,s.needsUpdate=!0,l=!0}}!0===l&&(Z.updateMultisampleRenderTarget(V),Z.updateRenderTargetMipmap(V));y.setRenderTarget(s),y.setClearColor(C,R),y.toneMapping=a}(i,o,t,n),r&&Q.viewport(A.copy(r)),i.length>0&&Pe(i,t,n),o.length>0&&Pe(o,t,n),s.length>0&&Pe(s,t,n),Q.buffers.depth.setTest(!0),Q.buffers.depth.setMask(!0),Q.buffers.color.setMask(!0),Q.setPolygonOffset(!1)}function Pe(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],s=o.object,a=o.geometry,l=null===r?o.material:r,c=o.group;s.layers.test(n.layers)&&Ne(s,t,n,a,l,c)}}function Ne(e,t,n,r,i,o){e.onBeforeRender(y,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(y,t,n,r,e,o),!0===i.transparent&&2===i.side&&!1===i.forceSinglePass?(i.side=jT,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,o),i.side=BT,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,o),i.side=2):y.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(y,t,n,r,i,o)}function ke(e,t,n){!0!==t.isScene&&(t=W);const r=J.get(e),i=m.state.lights,o=m.state.shadowsArray,s=i.state.version,a=ie.getParameters(e,i.state,o,t,n),l=ie.getProgramCacheKey(a);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:$).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Se),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===s)return Oe(e,a),u}else a.uniforms=ie.getUniforms(e),e.onBuild(n,a,y),e.onBeforeCompile(a,y),u=ie.acquireProgram(a,l),c.set(l,u),r.uniforms=a.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=le.uniform),Oe(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=s,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function De(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=ZN.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Oe(e,t){const n=J.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Re.setAnimationLoop((function(e){Me&&Me(e)})),"undefined"!==typeof self&&Re.setContext(self),this.setAnimationLoop=function(e){Me=e,_e.setAnimationLoop(e),null===e?Re.stop():Re.start()},_e.addEventListener("sessionstart",Te),_e.addEventListener("sessionend",Ce),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===b)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===_e.enabled&&!0===_e.isPresenting&&(!0===_e.cameraAutoUpdate&&_e.updateCamera(t),t=_e.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,w),m=ae.get(e,v.length),m.init(),v.push(m),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(z),j=this.localClippingEnabled,B=le.init(this.clippingPlanes,j),f=se.get(e,g.length),f.init(),g.push(f),Le(e,t,0,y.sortObjects),f.finish(),!0===y.sortObjects&&f.sort(N,k),this.info.render.frame++,!0===B&&le.beginShadows();const n=m.state.shadowsArray;if(ce.render(n,e,t),!0===B&&le.endShadows(),!0===this.info.autoReset&&this.info.reset(),!1!==_e.enabled&&!1!==_e.isPresenting&&!1!==_e.hasDepthSensing()||ue.render(f,e),m.setupLights(y._useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,r=n.length;t<r;t++){const r=n[t];Ie(f,e,r,r.viewport)}}else Ie(f,e,t);null!==w&&(Z.updateMultisampleRenderTarget(w),Z.updateRenderTargetMipmap(w)),!0===e.isScene&&e.onAfterRender(y,e,t),me.resetDefaultState(),E=-1,S=null,v.pop(),m=v.length>0?v[v.length-1]:null,g.pop(),f=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return _},this.getActiveMipmapLevel=function(){return x},this.getRenderTarget=function(){return w},this.setRenderTargetTextures=function(e,t,n){J.get(e.texture).__webglTexture=t,J.get(e.depthTexture).__webglTexture=n;const r=J.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=J.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;w=e,_=t,x=n;let r=!0,i=null,o=!1,s=!1;if(e){const a=J.get(e);void 0!==a.__useDefaultFramebuffer?(Q.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1):void 0===a.__webglFramebuffer?Z.setupRenderTarget(e):a.__hasExternalTextures&&Z.rebindTextures(e,J.get(e.texture).__webglTexture,J.get(e.depthTexture).__webglTexture);const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(s=!0);const c=J.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],o=!0):i=X.isWebGL2&&e.samples>0&&!1===Z.useMultisampledRTT(e)?J.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,A.copy(e.viewport),M.copy(e.scissor),T=e.scissorTest}else A.copy(D).multiplyScalar(P).floor(),M.copy(O).multiplyScalar(P).floor(),T=U;if(Q.bindFramebuffer(ve.FRAMEBUFFER,i)&&X.drawBuffers&&r&&Q.drawBuffers(e,i),Q.viewport(A),Q.scissor(M),Q.setScissorTest(T),o){const r=J.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(s){const r=J.get(e.texture),i=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}E=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,s){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=J.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==s&&(a=a[s]),a){Q.bindFramebuffer(ve.FRAMEBUFFER,a);try{const s=e.texture,a=s.format,l=s.type;if(a!==_C&&fe.convert(a)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===yC&&(q.has("EXT_color_buffer_half_float")||X.isWebGL2&&q.has("EXT_color_buffer_float"));if(l!==pC&&fe.convert(l)!==ve.getParameter(ve.IMPLEMENTATION_COLOR_READ_TYPE)&&(l!==vC||!(X.isWebGL2||q.has("OES_texture_float")||q.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,fe.convert(a),fe.convert(l),o)}finally{const e=null!==w?J.get(w).__webglFramebuffer:null;Q.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.pow(2,-n),i=Math.floor(t.image.width*r),o=Math.floor(t.image.height*r);Z.setTexture2D(t,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,e.x,e.y,i,o),Q.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const i=t.image.width,o=t.image.height,s=fe.convert(n.format),a=fe.convert(n.type);Z.setTexture2D(n,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,n.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,n.unpackAlignment),t.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,i,o,s,a,t.image.data):t.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,s,t.mipmaps[0].data):ve.texSubImage2D(ve.TEXTURE_2D,r,e.x,e.y,s,a,t.image),0===r&&n.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),Q.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(y.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const o=Math.round(e.max.x-e.min.x),s=Math.round(e.max.y-e.min.y),a=e.max.z-e.min.z+1,l=fe.convert(r.format),c=fe.convert(r.type);let u;if(r.isData3DTexture)Z.setTexture3D(r,0),u=ve.TEXTURE_3D;else{if(!r.isDataArrayTexture&&!r.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(r,0),u=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,r.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,r.unpackAlignment);const h=ve.getParameter(ve.UNPACK_ROW_LENGTH),d=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),p=ve.getParameter(ve.UNPACK_SKIP_PIXELS),f=ve.getParameter(ve.UNPACK_SKIP_ROWS),m=ve.getParameter(ve.UNPACK_SKIP_IMAGES),g=n.isCompressedTexture?n.mipmaps[i]:n.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,g.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,g.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,e.min.x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,e.min.y),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,e.min.z),n.isDataTexture||n.isData3DTexture?ve.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,g.data):r.isCompressedArrayTexture?ve.compressedTexSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,g.data):ve.texSubImage3D(u,i,t.x,t.y,t.z,o,s,a,l,c,g),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,h),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,d),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,p),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,f),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,m),0===i&&r.generateMipmaps&&ve.generateMipmap(u),Q.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),Q.unbindTexture()},this.resetState=function(){_=0,x=0,w=null,Q.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qC}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===UC?"display-p3":"srgb",t.unpackColorSpace=_R.workingColorSpace===FC?"display-p3":"srgb"}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}(class extends Xk{}).prototype.isWebGL1Renderer=!0;class Qk extends BL{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new wL,this.environmentRotation=new wL,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Yk extends iI{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new tI(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Jk=new OR,Zk=new OR,$k=new dL,eD=new hL,tD=new rL;class nD extends BL{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bI,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yk;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)Jk.fromBufferAttribute(t,e-1),Zk.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=Jk.distanceTo(Zk);e.setAttribute("lineDistance",new hI(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),tD.copy(n.boundingSphere),tD.applyMatrix4(r),tD.radius+=i,!1===e.ray.intersectsSphere(tD))return;$k.copy(r).invert(),eD.copy(e.ray).applyMatrix4($k);const s=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=s*s,l=new OR,c=new OR,u=new OR,h=new OR,d=this.isLineSegments?2:1,p=n.index,f=n.attributes.position;if(null!==p){for(let n=Math.max(0,o.start),r=Math.min(p.count,o.start+o.count)-1;n<r;n+=d){const r=p.getX(n),i=p.getX(n+1);l.fromBufferAttribute(f,r),c.fromBufferAttribute(f,i);if(eD.distanceSqToSegment(l,c,h,u)>a)continue;h.applyMatrix4(this.matrixWorld);const o=e.ray.origin.distanceTo(h);o<e.near||o>e.far||t.push({distance:o,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,o.start),r=Math.min(f.count,o.start+o.count)-1;n<r;n+=d){l.fromBufferAttribute(f,n),c.fromBufferAttribute(f,n+1);if(eD.distanceSqToSegment(l,c,h,u)>a)continue;h.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(h);r<e.near||r>e.far||t.push({distance:r,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const rD=new OR,iD=new OR;class oD extends nD{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)rD.fromBufferAttribute(t,e),iD.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+rD.distanceTo(iD);e.setAttribute("lineDistance",new hI(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class sD extends iI{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new tI(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new tI(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=0,this.normalScale=new lR(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new wL,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aD extends sD{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new lR(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return eR(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new tI(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new tI(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new tI(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}function lD(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function cD(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}class uD{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const s=t[1];e<s&&(n=2,i=s);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class hD extends uD{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:IC,endingEnd:IC}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,s=r[i],a=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case PC:i=e,s=2*t-n;break;case NC:i=r.length-2,s=t+r[i]-r[i+1];break;default:i=e,s=n}if(void 0===a)switch(this.getSettings_().endingEnd){case PC:o=e,a=2*n-t;break;case NC:o=1,a=n+r[1]-r[0];break;default:o=e-1,a=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(a-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,v=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let _=0;_!==s;++_)i[_]=g*o[c+_]+v*o[l+_]+y*o[a+_]+b*o[u+_];return i}}class dD extends uD{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=e*s,l=a-s,c=(n-t)/(r-t),u=1-c;for(let h=0;h!==s;++h)i[h]=o[l+h]*u+o[a+h]*c;return i}}class pD extends uD{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class fD{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=lD(t,this.TimeBufferType),this.values=lD(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:lD(e.times,Array),values:lD(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new pD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dD(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new hD(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case CC:t=this.InterpolantFactoryMethodDiscrete;break;case RC:t=this.InterpolantFactoryMethodLinear;break;case LC:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return CC;case this.InterpolantFactoryMethodLinear:return RC;case this.InterpolantFactoryMethodSmooth:return LC}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=n.slice(i,o),this.values=this.values.slice(i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let s=0;s!==i;s++){const t=n[s];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,s,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,s,t,o),e=!1;break}o=t}if(void 0!==r&&cD(r))for(let s=0,a=r.length;s!==a;++s){const t=r[s];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,s,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===LC,i=e.length-1;let o=1;for(let s=1;s<i;++s){let i=!1;const a=e[s];if(a!==e[s+1]&&(1!==s||a!==e[0]))if(r)i=!0;else{const e=s*n,r=e-n,o=e+n;for(let s=0;s!==n;++s){const n=t[e+s];if(n!==t[r+s]||n!==t[o+s]){i=!0;break}}}if(i){if(s!==o){e[o]=e[s];const r=s*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,s=0;s!==n;++s)t[r+s]=t[e+s];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}fD.prototype.TimeBufferType=Float32Array,fD.prototype.ValueBufferType=Float32Array,fD.prototype.DefaultInterpolation=RC;class mD extends fD{}mD.prototype.ValueTypeName="bool",mD.prototype.ValueBufferType=Array,mD.prototype.DefaultInterpolation=CC,mD.prototype.InterpolantFactoryMethodLinear=void 0,mD.prototype.InterpolantFactoryMethodSmooth=void 0;class gD extends fD{}gD.prototype.ValueTypeName="color";class vD extends fD{}vD.prototype.ValueTypeName="number";class yD extends uD{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,s=this.valueSize,a=(n-t)/(r-t);let l=e*s;for(let c=l+s;l!==c;l+=4)DR.slerpFlat(i,0,o,l-s,o,l,a);return i}}class bD extends fD{InterpolantFactoryMethodLinear(e){return new yD(this.times,this.values,this.getValueSize(),e)}}bD.prototype.ValueTypeName="quaternion",bD.prototype.DefaultInterpolation=RC,bD.prototype.InterpolantFactoryMethodSmooth=void 0;class _D extends fD{}_D.prototype.ValueTypeName="string",_D.prototype.ValueBufferType=Array,_D.prototype.DefaultInterpolation=CC,_D.prototype.InterpolantFactoryMethodLinear=void 0,_D.prototype.InterpolantFactoryMethodSmooth=void 0;class xD extends fD{}xD.prototype.ValueTypeName="vector";const wD={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class ED{constructor(e,t,n){const r=this;let i,o=!1,s=0,a=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===o&&void 0!==r.onStart&&r.onStart(e,s,a),o=!0},this.itemEnd=function(e){s++,void 0!==r.onProgress&&r.onProgress(e,s,a),s===a&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const SD=new ED;class AD{constructor(e){this.manager=void 0!==e?e:SD,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}AD.DEFAULT_MATERIAL_NAME="__DEFAULT";const MD={};class TD extends Error{constructor(e,t){super(e),this.response=t}}class CD extends AD{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=wD.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==MD[e])return void MD[e].push({onLoad:t,onProgress:n,onError:r});MD[e]=[],MD[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),s=this.mimeType,a=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=MD[e],r=t.body.getReader(),i=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),o=i?parseInt(i):0,s=0!==o;let a=0;const l=new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:i,value:l}=r;if(i)e.close();else{a+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:s,loaded:a,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}))}()}});return new Response(l)}throw new TD('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,s)));case"json":return e.json();default:if(void 0===s)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(s),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{wD.add(e,t);const n=MD[e];delete MD[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=MD[e];if(void 0===n)throw this.manager.itemError(e),t;delete MD[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class RD extends BL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new tI(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}const LD=new dL,ID=new OR,PD=new OR;class ND{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new lR(512,512),this.map=null,this.mapPass=null,this.matrix=new dL,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sP,this._frameExtents=new lR(1,1),this._viewportCount=1,this._viewports=[new LR(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;ID.setFromMatrixPosition(e.matrixWorld),t.position.copy(ID),PD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(PD),t.updateMatrixWorld(),LD.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(LD),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(LD)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class kD extends ND{constructor(){super(new QI(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*ZC*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class DD extends RD{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(BL.DEFAULT_UP),this.updateMatrix(),this.target=new BL,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new kD}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class OD extends RD{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}const UD="\\[\\]\\.:\\/",FD=new RegExp("["+UD+"]","g"),BD="[^"+UD+"]",jD="[^"+UD.replace("\\.","")+"]",VD=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",BD)+/(WCOD+)?/.source.replace("WCOD",jD)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",BD)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",BD)+"$"),zD=["material","materials","bones","map"];class HD{constructor(e,t,n){this.path=t,this.parsedPath=n||HD.parseTrackName(t),this.node=HD.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new HD.Composite(e,t,n):new HD(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(FD,"")}static parseTrackName(e){const t=VD.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==zD.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=HD.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let s=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?s=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(s=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(a=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][s]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}HD.Composite=class{constructor(e,t,n){const r=n||HD.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},HD.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},HD.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},HD.prototype.GetterByBindingType=[HD.prototype._getValue_direct,HD.prototype._getValue_array,HD.prototype._getValue_arrayElement,HD.prototype._getValue_toArray],HD.prototype.SetterByBindingTypeAndVersioning=[[HD.prototype._setValue_direct,HD.prototype._setValue_direct_setNeedsUpdate,HD.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[HD.prototype._setValue_array,HD.prototype._setValue_array_setNeedsUpdate,HD.prototype._setValue_array_setMatrixWorldNeedsUpdate],[HD.prototype._setValue_arrayElement,HD.prototype._setValue_arrayElement_setNeedsUpdate,HD.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[HD.prototype._setValue_fromArray,HD.prototype._setValue_fromArray_setNeedsUpdate,HD.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);class GD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(eR(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class WD extends oD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new bI;n.setAttribute("position",new hI(t,3)),n.setAttribute("color",new hI([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Yk({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new tI,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:CT}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=CT);var KD=n(173),qD=n.n(KD),XD=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function QD(e,t){var n=function(e){var t=e.name;if(t&&-1!==t.lastIndexOf(".")&&!e.type){var n=t.split(".").pop().toLowerCase(),r=XD.get(n);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}(e);if("string"!==typeof n.path){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:"string"===typeof t?t:"string"===typeof r&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}var YD=[".DS_Store","Thumbs.db"];function JD(e){return"object"===typeof e&&null!==e}function ZD(e){return nO(e.target.files).map((function(e){return QD(e)}))}function $D(e){return vm(this,void 0,void 0,(function(){return ym(this,(function(t){switch(t.label){case 0:return[4,Promise.all(e.map((function(e){return e.getFile()})))];case 1:return[2,t.sent().map((function(e){return QD(e)}))]}}))}))}function eO(e,t){return vm(this,void 0,void 0,(function(){var n;return ym(this,(function(r){switch(r.label){case 0:return e.items?(n=nO(e.items).filter((function(e){return"file"===e.kind})),"drop"!==t?[2,n]:[4,Promise.all(n.map(rO))]):[3,2];case 1:return[2,tO(iO(r.sent()))];case 2:return[2,tO(nO(e.files).map((function(e){return QD(e)})))]}}))}))}function tO(e){return e.filter((function(e){return-1===YD.indexOf(e.name)}))}function nO(e){if(null===e)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function rO(e){if("function"!==typeof e.webkitGetAsEntry)return oO(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?aO(t):oO(e)}function iO(e){return e.reduce((function(e,t){return _m(_m([],bm(e),!1),bm(Array.isArray(t)?iO(t):[t]),!1)}),[])}function oO(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=QD(t);return Promise.resolve(n)}function sO(e){return vm(this,void 0,void 0,(function(){return ym(this,(function(t){return[2,e.isDirectory?aO(e):lO(e)]}))}))}function aO(e){var t=e.createReader();return new Promise((function(e,n){var r=[];!function i(){var o=this;t.readEntries((function(t){return vm(o,void 0,void 0,(function(){var o,s,a;return ym(this,(function(l){switch(l.label){case 0:if(t.length)return[3,5];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return o=l.sent(),e(o),[3,4];case 3:return s=l.sent(),n(s),[3,4];case 4:return[3,6];case 5:a=Promise.all(t.map(sO)),r.push(a),i(),l.label=6;case 6:return[2]}}))}))}),(function(e){n(e)}))}()}))}function lO(e){return vm(this,void 0,void 0,(function(){return ym(this,(function(t){return[2,new Promise((function(t,n){e.file((function(n){var r=QD(n,e.fullPath);t(r)}),(function(e){n(e)}))}))]}))}))}var cO=n(628);function uO(e){return function(e){if(Array.isArray(e))return gO(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||mO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function dO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hO(Object(n),!0).forEach((function(t){pO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||mO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mO(e,t){if(e){if("string"===typeof e)return gO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gO(e,t):void 0}}function gO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vO="file-invalid-type",yO="file-too-large",bO="file-too-small",_O="too-many-files",xO=function(e){e=Array.isArray(e)&&1===e.length?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:vO,message:"File type must be ".concat(t)}},wO=function(e){return{code:yO,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},EO=function(e){return{code:bO,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},SO={code:_O,message:"Too many files"};function AO(e,t){var n="application/x-moz-file"===e.type||(0,cO.A)(e,t);return[n,n?null:xO(t)]}function MO(e,t,n){if(TO(e.size))if(TO(t)&&TO(n)){if(e.size>n)return[!1,wO(n)];if(e.size<t)return[!1,EO(t)]}else{if(TO(t)&&e.size<t)return[!1,EO(t)];if(TO(n)&&e.size>n)return[!1,wO(n)]}return[!0,null]}function TO(e){return void 0!==e&&null!==e}function CO(e){return"function"===typeof e.isPropagationStopped?e.isPropagationStopped():"undefined"!==typeof e.cancelBubble&&e.cancelBubble}function RO(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function LO(e){e.preventDefault()}function IO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t.some((function(t){return!CO(e)&&t&&t.apply(void 0,[e].concat(r)),CO(e)}))}}function PO(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||/\w+\/[-+.\w]+/g.test(e)}function NO(e){return/^.*\.[\w]+$/.test(e)}var kO=["children"],DO=["open"],OO=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],UO=["refKey","onChange","onClick"];function FO(e){return function(e){if(Array.isArray(e))return VO(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||jO(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BO(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(l){a=!0,i=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||jO(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jO(e,t){if(e){if("string"===typeof e)return VO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VO(e,t):void 0}}function VO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function HO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zO(Object(n),!0).forEach((function(t){GO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function GO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WO(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var KO=(0,t.forwardRef)((function(e,n){var r=e.children,i=QO(WO(e,kO)),o=i.open,s=WO(i,DO);return(0,t.useImperativeHandle)(n,(function(){return{open:o}}),[o]),t.createElement(t.Fragment,null,r(HO(HO({},s),{},{open:o})))}));KO.displayName="Dropzone";var qO={disabled:!1,getFilesFromEvent:function(e){return vm(this,void 0,void 0,(function(){return ym(this,(function(t){return JD(e)&&JD(e.dataTransfer)?[2,eO(e.dataTransfer,e.type)]:function(e){return JD(e)&&JD(e.target)}(e)?[2,ZD(e)]:Array.isArray(e)&&e.every((function(e){return"getFile"in e&&"function"===typeof e.getFile}))?[2,$D(e)]:[2,[]]}))}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};KO.defaultProps=qO,KO.propTypes={children:qD().func,accept:qD().objectOf(qD().arrayOf(qD().string)),multiple:qD().bool,preventDropOnDocument:qD().bool,noClick:qD().bool,noKeyboard:qD().bool,noDrag:qD().bool,noDragEventsBubbling:qD().bool,minSize:qD().number,maxSize:qD().number,maxFiles:qD().number,disabled:qD().bool,getFilesFromEvent:qD().func,onFileDialogCancel:qD().func,onFileDialogOpen:qD().func,useFsAccessApi:qD().bool,autoFocus:qD().bool,onDragEnter:qD().func,onDragLeave:qD().func,onDragOver:qD().func,onDrop:qD().func,onDropAccepted:qD().func,onDropRejected:qD().func,onError:qD().func,validator:qD().func};var XO={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function QO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=HO(HO({},qO),e),r=n.accept,i=n.disabled,o=n.getFilesFromEvent,s=n.maxSize,a=n.minSize,l=n.multiple,c=n.maxFiles,u=n.onDragEnter,h=n.onDragLeave,d=n.onDragOver,p=n.onDrop,f=n.onDropAccepted,m=n.onDropRejected,g=n.onFileDialogCancel,v=n.onFileDialogOpen,y=n.useFsAccessApi,b=n.autoFocus,_=n.preventDropOnDocument,x=n.noClick,w=n.noKeyboard,E=n.noDrag,S=n.noDragEventsBubbling,A=n.onError,M=n.validator,T=(0,t.useMemo)((function(){return function(e){if(TO(e))return Object.entries(e).reduce((function(e,t){var n=fO(t,2),r=n[0],i=n[1];return[].concat(uO(e),[r],uO(i))}),[]).filter((function(e){return PO(e)||NO(e)})).join(",")}(r)}),[r]),C=(0,t.useMemo)((function(){return function(e){return TO(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=fO(e,2),n=t[0],r=t[1],i=!0;return PO(n)||(console.warn('Skipped "'.concat(n,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),i=!1),Array.isArray(r)&&r.every(NO)||(console.warn('Skipped "'.concat(n,'" because an invalid file extension was provided.')),i=!1),i})).reduce((function(e,t){var n=fO(t,2),r=n[0],i=n[1];return dO(dO({},e),{},pO({},r,i))}),{})}]:e}(r)}),[r]),R=(0,t.useMemo)((function(){return"function"===typeof v?v:JO}),[v]),L=(0,t.useMemo)((function(){return"function"===typeof g?g:JO}),[g]),I=(0,t.useRef)(null),P=(0,t.useRef)(null),N=BO((0,t.useReducer)(YO,XO),2),k=N[0],D=N[1],O=k.isFocused,U=k.isFileDialogActive,F=(0,t.useRef)("undefined"!==typeof window&&window.isSecureContext&&y&&"showOpenFilePicker"in window),B=function(){!F.current&&U&&setTimeout((function(){P.current&&(P.current.files.length||(D({type:"closeDialog"}),L()))}),300)};(0,t.useEffect)((function(){return window.addEventListener("focus",B,!1),function(){window.removeEventListener("focus",B,!1)}}),[P,U,L,F]);var j=(0,t.useRef)([]),V=function(e){I.current&&I.current.contains(e.target)||(e.preventDefault(),j.current=[])};(0,t.useEffect)((function(){return _&&(document.addEventListener("dragover",LO,!1),document.addEventListener("drop",V,!1)),function(){_&&(document.removeEventListener("dragover",LO),document.removeEventListener("drop",V))}}),[I,_]),(0,t.useEffect)((function(){return!i&&b&&I.current&&I.current.focus(),function(){}}),[I,b,i]);var z=(0,t.useCallback)((function(e){A?A(e):console.error(e)}),[A]),H=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),j.current=[].concat(FO(j.current),[e.target]),RO(e)&&Promise.resolve(o(e)).then((function(t){if(!CO(e)||S){var n=t.length,r=n>0&&function(e){var t=e.files,n=e.accept,r=e.minSize,i=e.maxSize,o=e.multiple,s=e.maxFiles,a=e.validator;return!(!o&&t.length>1||o&&s>=1&&t.length>s)&&t.every((function(e){var t=fO(AO(e,n),1)[0],o=fO(MO(e,r,i),1)[0],s=a?a(e):null;return t&&o&&!s}))}({files:t,accept:T,minSize:a,maxSize:s,multiple:l,maxFiles:c,validator:M});D({isDragAccept:r,isDragReject:n>0&&!r,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return z(e)}))}),[o,u,z,S,T,a,s,l,c,M]),G=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=RO(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(n){}return t&&d&&d(e),!1}),[d,S]),W=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e);var t=j.current.filter((function(e){return I.current&&I.current.contains(e)})),n=t.indexOf(e.target);-1!==n&&t.splice(n,1),j.current=t,t.length>0||(D({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),RO(e)&&h&&h(e))}),[I,h,S]),K=(0,t.useCallback)((function(e,t){var n=[],r=[];e.forEach((function(e){var t=BO(AO(e,T),2),i=t[0],o=t[1],l=BO(MO(e,a,s),2),c=l[0],u=l[1],h=M?M(e):null;if(i&&c&&!h)n.push(e);else{var d=[o,u];h&&(d=d.concat(h)),r.push({file:e,errors:d.filter((function(e){return e}))})}})),(!l&&n.length>1||l&&c>=1&&n.length>c)&&(n.forEach((function(e){r.push({file:e,errors:[SO]})})),n.splice(0)),D({acceptedFiles:n,fileRejections:r,type:"setFiles"}),p&&p(n,r,t),r.length>0&&m&&m(r,t),n.length>0&&f&&f(n,t)}),[D,l,T,a,s,c,p,f,m,M]),q=(0,t.useCallback)((function(e){e.preventDefault(),e.persist(),ne(e),j.current=[],RO(e)&&Promise.resolve(o(e)).then((function(t){CO(e)&&!S||K(t,e)})).catch((function(e){return z(e)})),D({type:"reset"})}),[o,K,z,S]),X=(0,t.useCallback)((function(){if(F.current){D({type:"openDialog"}),R();var e={multiple:l,types:C};window.showOpenFilePicker(e).then((function(e){return o(e)})).then((function(e){K(e,null),D({type:"closeDialog"})})).catch((function(e){!function(e){return e instanceof DOMException&&("AbortError"===e.name||e.code===e.ABORT_ERR)}(e)?!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?z(e):(F.current=!1,P.current?(P.current.value=null,P.current.click()):z(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):(L(e),D({type:"closeDialog"}))}))}else P.current&&(D({type:"openDialog"}),R(),P.current.value=null,P.current.click())}),[D,R,L,y,K,z,C,l]),Q=(0,t.useCallback)((function(e){I.current&&I.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),X()))}),[I,X]),Y=(0,t.useCallback)((function(){D({type:"focus"})}),[]),J=(0,t.useCallback)((function(){D({type:"blur"})}),[]),Z=(0,t.useCallback)((function(){x||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?X():setTimeout(X,0))}),[x,X]),$=function(e){return i?null:e},ee=function(e){return w?null:$(e)},te=function(e){return E?null:$(e)},ne=function(e){S&&e.stopPropagation()},re=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.role,o=e.onKeyDown,s=e.onFocus,a=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,h=e.onDragLeave,d=e.onDrop,p=WO(e,OO);return HO(HO(GO({onKeyDown:ee(IO(o,Q)),onFocus:ee(IO(s,Y)),onBlur:ee(IO(a,J)),onClick:$(IO(l,Z)),onDragEnter:te(IO(c,H)),onDragOver:te(IO(u,G)),onDragLeave:te(IO(h,W)),onDrop:te(IO(d,q)),role:"string"===typeof r&&""!==r?r:"presentation"},n,I),i||w?{}:{tabIndex:0}),p)}}),[I,Q,Y,J,Z,H,G,W,q,w,E,i]),ie=(0,t.useCallback)((function(e){e.stopPropagation()}),[]),oe=(0,t.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,n=void 0===t?"ref":t,r=e.onChange,i=e.onClick,o=WO(e,UO);return HO(HO({},GO({accept:T,multiple:l,type:"file",style:{display:"none"},onChange:$(IO(r,q)),onClick:$(IO(i,ie)),tabIndex:-1},n,P)),o)}}),[P,r,l,q,i]);return HO(HO({},k),{},{isFocused:O&&!i,getRootProps:re,getInputProps:oe,rootRef:I,inputRef:P,open:$(X)})}function YO(e,t){switch(t.type){case"focus":return HO(HO({},e),{},{isFocused:!0});case"blur":return HO(HO({},e),{},{isFocused:!1});case"openDialog":return HO(HO({},XO),{},{isFileDialogActive:!0});case"closeDialog":return HO(HO({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return HO(HO({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return HO(HO({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return HO({},XO);default:return e}}function JO(){}class ZO extends AD{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new CD(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(n))}catch(rA){r?r(rA):console.error(rA),i.manager.itemError(e)}}),n,r)}parse(e){function t(e,t,n){for(let r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r))return!1;return!0}const n=function(e){if("string"===typeof e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){const n=new DataView(e);if(84+50*n.getUint32(80,!0)===n.byteLength)return!0;const r=[115,111,108,105,100];for(let i=0;i<5;i++)if(t(r,n,i))return!1;return!0}(n)?function(e){const t=new DataView(e),n=t.getUint32(80,!0);let r,i,o,s,a,l,c,u,h=!1;for(let g=0;g<70;g++)1129270351==t.getUint32(g,!1)&&82==t.getUint8(g+4)&&61==t.getUint8(g+5)&&(h=!0,s=new Float32Array(3*n*3),a=t.getUint8(g+6)/255,l=t.getUint8(g+7)/255,c=t.getUint8(g+8)/255,u=t.getUint8(g+9)/255);const d=new bI,p=new Float32Array(3*n*3),f=new Float32Array(3*n*3),m=new tI;for(let g=0;g<n;g++){const e=84+50*g,n=t.getFloat32(e,!0),u=t.getFloat32(e+4,!0),d=t.getFloat32(e+8,!0);if(h){const n=t.getUint16(e+48,!0);0===(32768&n)?(r=(31&n)/31,i=(n>>5&31)/31,o=(n>>10&31)/31):(r=a,i=l,o=c)}for(let a=1;a<=3;a++){const l=e+12*a,c=3*g*3+3*(a-1);p[c]=t.getFloat32(l,!0),p[c+1]=t.getFloat32(l+4,!0),p[c+2]=t.getFloat32(l+8,!0),f[c]=n,f[c+1]=u,f[c+2]=d,h&&(m.set(r,i,o).convertSRGBToLinear(),s[c]=m.r,s[c+1]=m.g,s[c+2]=m.b)}}return d.setAttribute("position",new lI(p,3)),d.setAttribute("normal",new lI(f,3)),h&&(d.setAttribute("color",new lI(s,3)),d.hasColors=!0,d.alpha=u),d}(n):function(e){const t=new bI,n=/solid([\s\S]*?)endsolid/g,r=/facet([\s\S]*?)endfacet/g,i=/solid\s(.+)/;let o=0;const s=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,a=new RegExp("vertex"+s+s+s,"g"),l=new RegExp("normal"+s+s+s,"g"),c=[],u=[],h=[],d=new OR;let p,f=0,m=0,g=0;for(;null!==(p=n.exec(e));){m=g;const e=p[0],n=null!==(p=i.exec(e))?p[1]:"";for(h.push(n);null!==(p=r.exec(e));){let e=0,t=0;const n=p[0];for(;null!==(p=l.exec(n));)d.x=parseFloat(p[1]),d.y=parseFloat(p[2]),d.z=parseFloat(p[3]),t++;for(;null!==(p=a.exec(n));)c.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),u.push(d.x,d.y,d.z),e++,g++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+o),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+o),o++}const s=m,v=g-m;t.userData.groupNames=h,t.addGroup(s,v,f),f++}return t.setAttribute("position",new hI(c,3)),t.setAttribute("normal",new hI(u,3)),t}("string"!==typeof(r=e)?(new TextDecoder).decode(r):r);var r}}const $O={type:"change"},eU={type:"start"},tU={type:"end"},nU=new hL,rU=new rP,iU=Math.cos(70*aR);class oU extends QC{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new OR,this.cursor=new OR,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:RT,MIDDLE:LT,RIGHT:IT},this.touches={ONE:PT,TWO:kT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return s.phi},this.getAzimuthalAngle=function(){return s.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Q),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",Q),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent($O),n.update(),i=r.NONE},this.update=function(){const t=new OR,u=(new DR).setFromUnitVectors(e.up,new OR(0,1,0)),h=u.clone().invert(),d=new OR,p=new DR,f=new OR,m=2*Math.PI;return function(){let g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const v=n.object.position;t.copy(v).sub(n.target),t.applyQuaternion(u),s.setFromVector3(t),n.autoRotate&&i===r.NONE&&M(function(e){return null!==e?2*Math.PI/60*n.autoRotateSpeed*e:2*Math.PI/60/60*n.autoRotateSpeed}(g)),n.enableDamping?(s.theta+=a.theta*n.dampingFactor,s.phi+=a.phi*n.dampingFactor):(s.theta+=a.theta,s.phi+=a.phi);let y=n.minAzimuthAngle,w=n.maxAzimuthAngle;isFinite(y)&&isFinite(w)&&(y<-Math.PI?y+=m:y>Math.PI&&(y-=m),w<-Math.PI?w+=m:w>Math.PI&&(w-=m),s.theta=y<=w?Math.max(y,Math.min(w,s.theta)):s.theta>(y+w)/2?Math.max(y,s.theta):Math.min(w,s.theta)),s.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,s.phi)),s.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(c,n.dampingFactor):n.target.add(c),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor);let E=!1;if(n.zoomToCursor&&x||n.object.isOrthographicCamera)s.radius=k(s.radius);else{const e=s.radius;s.radius=k(s.radius*l),E=e!=s.radius}if(t.setFromSpherical(s),t.applyQuaternion(h),v.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(a.theta*=1-n.dampingFactor,a.phi*=1-n.dampingFactor,c.multiplyScalar(1-n.dampingFactor)):(a.set(0,0,0),c.set(0,0,0)),n.zoomToCursor&&x){let r=null;if(n.object.isPerspectiveCamera){const e=t.length();r=k(e*l);const i=e-r;n.object.position.addScaledVector(b,i),n.object.updateMatrixWorld(),E=!!i}else if(n.object.isOrthographicCamera){const e=new OR(_.x,_.y,0);e.unproject(n.object);const i=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),n.object.updateProjectionMatrix(),E=i!==n.object.zoom;const o=new OR(_.x,_.y,0);o.unproject(n.object),n.object.position.sub(o).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(nU.origin.copy(n.object.position),nU.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(nU.direction))<iU?e.lookAt(n.target):(rU.setFromNormalAndCoplanarPoint(n.object.up,n.target),nU.intersectPlane(rU,n.target))))}else if(n.object.isOrthographicCamera){const e=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/l)),e!==n.object.zoom&&(n.object.updateProjectionMatrix(),E=!0)}return l=1,x=!1,!!(E||d.distanceToSquared(n.object.position)>o||8*(1-p.dot(n.object.quaternion))>o||f.distanceToSquared(n.target)>o)&&(n.dispatchEvent($O),d.copy(n.object.position),p.copy(n.object.quaternion),f.copy(n.target),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",J),n.domElement.removeEventListener("pointerdown",H),n.domElement.removeEventListener("pointercancel",W),n.domElement.removeEventListener("wheel",K),n.domElement.removeEventListener("pointermove",G),n.domElement.removeEventListener("pointerup",W);n.domElement.getRootNode().removeEventListener("keydown",q,{capture:!0}),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",Q),n._domElementKeyEvents=null)};const n=this,r={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let i=r.NONE;const o=1e-6,s=new GD,a=new GD;let l=1;const c=new OR,u=new lR,h=new lR,d=new lR,p=new lR,f=new lR,m=new lR,g=new lR,v=new lR,y=new lR,b=new OR,_=new lR;let x=!1;const w=[],E={};let S=!1;function A(e){const t=Math.abs(.01*e);return Math.pow(.95,n.zoomSpeed*t)}function M(e){a.theta-=e}function T(e){a.phi-=e}const C=function(){const e=new OR;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),c.add(e)}}(),R=function(){const e=new OR;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),c.add(e)}}(),L=function(){const e=new OR;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let s=e.length();s*=Math.tan(n.object.fov/2*Math.PI/180),C(2*t*s/i.clientHeight,n.object.matrix),R(2*r*s/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(C(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),R(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function I(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function P(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?l*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function N(e,t){if(!n.zoomToCursor)return;x=!0;const r=n.domElement.getBoundingClientRect(),i=e-r.left,o=t-r.top,s=r.width,a=r.height;_.x=i/s*2-1,_.y=-o/a*2+1,b.set(_.x,_.y,1).unproject(n.object).sub(n.object.position).normalize()}function k(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function D(e){u.set(e.clientX,e.clientY)}function O(e){p.set(e.clientX,e.clientY)}function U(e){if(1===w.length)u.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);u.set(n,r)}}function F(e){if(1===w.length)p.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);p.set(n,r)}}function B(e){const t=$(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);g.set(0,i)}function j(e){if(1==w.length)h.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);h.set(n,r)}d.subVectors(h,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*d.x/t.clientHeight),T(2*Math.PI*d.y/t.clientHeight),u.copy(h)}function V(e){if(1===w.length)f.set(e.pageX,e.pageY);else{const t=$(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);f.set(n,r)}m.subVectors(f,p).multiplyScalar(n.panSpeed),L(m.x,m.y),p.copy(f)}function z(e){const t=$(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);v.set(0,o),y.set(0,Math.pow(v.y/g.y,n.zoomSpeed)),I(y.y),g.copy(v);N(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}function H(e){!1!==n.enabled&&(0===w.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",G),n.domElement.addEventListener("pointerup",W)),function(e){for(let t=0;t<w.length;t++)if(w[t]==e.pointerId)return!0;return!1}(e)||(function(e){w.push(e.pointerId)}(e),"touch"===e.pointerType?Y(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case LT:if(!1===n.enableZoom)return;!function(e){N(e.clientX,e.clientX),g.set(e.clientX,e.clientY)}(e),i=r.DOLLY;break;case RT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;O(e),i=r.PAN}else{if(!1===n.enableRotate)return;D(e),i=r.ROTATE}break;case IT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;D(e),i=r.ROTATE}else{if(!1===n.enablePan)return;O(e),i=r.PAN}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(eU)}(e)))}function G(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(Z(e),i){case r.TOUCH_ROTATE:if(!1===n.enableRotate)return;j(e),n.update();break;case r.TOUCH_PAN:if(!1===n.enablePan)return;V(e),n.update();break;case r.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&z(e),n.enablePan&&V(e)}(e),n.update();break;case r.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&z(e),n.enableRotate&&j(e)}(e),n.update();break;default:i=r.NONE}}(e):function(e){switch(i){case r.ROTATE:if(!1===n.enableRotate)return;!function(e){h.set(e.clientX,e.clientY),d.subVectors(h,u).multiplyScalar(n.rotateSpeed);const t=n.domElement;M(2*Math.PI*d.x/t.clientHeight),T(2*Math.PI*d.y/t.clientHeight),u.copy(h),n.update()}(e);break;case r.DOLLY:if(!1===n.enableZoom)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g),y.y>0?I(A(y.y)):y.y<0&&P(A(y.y)),g.copy(v),n.update()}(e);break;case r.PAN:if(!1===n.enablePan)return;!function(e){f.set(e.clientX,e.clientY),m.subVectors(f,p).multiplyScalar(n.panSpeed),L(m.x,m.y),p.copy(f),n.update()}(e)}}(e))}function W(e){switch(function(e){delete E[e.pointerId];for(let t=0;t<w.length;t++)if(w[t]==e.pointerId)return void w.splice(t,1)}(e),w.length){case 0:n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",G),n.domElement.removeEventListener("pointerup",W),n.dispatchEvent(tU),i=r.NONE;break;case 1:const t=w[0],o=E[t];Y({pointerId:t,pageX:o.x,pageY:o.y})}}function K(e){!1!==n.enabled&&!1!==n.enableZoom&&i===r.NONE&&(e.preventDefault(),n.dispatchEvent(eU),function(e){N(e.clientX,e.clientY),e.deltaY<0?P(A(e.deltaY)):e.deltaY>0&&I(A(e.deltaY)),n.update()}(function(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}e.ctrlKey&&!S&&(n.deltaY*=10);return n}(e)),n.dispatchEvent(tU))}function q(e){if("Control"===e.key){S=!0;n.domElement.getRootNode().addEventListener("keyup",X,{passive:!0,capture:!0})}}function X(e){if("Control"===e.key){S=!1;n.domElement.getRootNode().removeEventListener("keyup",X,{passive:!0,capture:!0})}}function Q(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?T(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?T(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?M(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?M(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):L(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function Y(e){switch(Z(e),w.length){case 1:switch(n.touches.ONE){case PT:if(!1===n.enableRotate)return;U(e),i=r.TOUCH_ROTATE;break;case NT:if(!1===n.enablePan)return;F(e),i=r.TOUCH_PAN;break;default:i=r.NONE}break;case 2:switch(n.touches.TWO){case kT:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&B(e),n.enablePan&&F(e)}(e),i=r.TOUCH_DOLLY_PAN;break;case DT:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&B(e),n.enableRotate&&U(e)}(e),i=r.TOUCH_DOLLY_ROTATE;break;default:i=r.NONE}break;default:i=r.NONE}i!==r.NONE&&n.dispatchEvent(eU)}function J(e){!1!==n.enabled&&e.preventDefault()}function Z(e){let t=E[e.pointerId];void 0===t&&(t=new lR,E[e.pointerId]=t),t.set(e.pageX,e.pageY)}function $(e){const t=e.pointerId===w[0]?w[1]:w[0];return E[t]}n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",H),n.domElement.addEventListener("pointercancel",W),n.domElement.addEventListener("wheel",K,{passive:!1});n.domElement.getRootNode().addEventListener("keydown",q,{passive:!0,capture:!0}),this.update()}}const sU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEGElEQVR4nO1ZW4gcRRQtE43vRxQlokbxiS9EQVFUFkVwYNedOqctiCa4EHEh6If+5MfIBEVQUeLjQz/0R0FRUBQUBRGJQUEJhohLEERMND4Ivt2ZubWakuq9k0w2s5memZ7MtOyBgqbr3lvndlXfunXLmAUsoJgQ8nYBVpgiQ4ArBPg3Nm/tVaaICMYcIuQmT4bYhPwkvjNFgwAr1YGfYkufgZWmSAhjY0d5YHtKPklWC3lnOjPA92HVqqNNUSDAQ0r881CpLIpNyM90hh40RUC1XD5DyOnUkSS5vvHeW3uNkLsFqNbK5bPMsMOTr+lsvNyi7xXte9UMMzx5beOrV8kz5/ZPA6cL8HfqjLUjZhgRKpVFntys4bYyn5wA61VmS3BusRk2eHJSCX53oMgUnDvSA9+mP761d5lhQiiVjhPgR90r2qYjkiS3aQT7OZTLJ5hhgQBPdLp7C/CROv64GQbUnDtXyHqaTwFXZtWTJLlc8zBfd+6C/rLMAAHe0ZD6vOkQHnhBZ/JtM0jMACVdHn8E55bN7Q/OLQmjo0vT5tySFv3Lom60EW2ZQSBMTh7mgW0aqda2kvHAA43sNz63lCHXav+2aLPvxFuQvE9Jfh1KpcPb7Blx1ta3kokz5cmv1Jl7+058zuAnCvBLHLwOjM8nl8WRiLq1Zf1XfgvOndw34vsRJJ/TgT84oFxGR1T2PbX5bO6EWw6YJBcLOSPAP1IuX5qXI3XnLoqhOLULXJY78RbkPtQv93QG2cyOqPwzantTX4/FdeBWHejXYO1JeTsSRkeXCrkr/ffIJDfi+wwyMXGEB77R6HJ3Fp1OHYnw5D06xvZ4ZDZ5w5PrdICprPG+G0eCc4s9+YXq3W/yxLRzpwnwV7oDkzdn1evGkYgZ4EZdwtNV55abvOCBl5TQm53odetIhCff0hXwoskDHrhaj69St/b8g+VIzdpz0qya3O2tvc7kUC38VKf5kU71e3EkQoBHVX9zPEqbbiFJMtGoFgbnjj/YjoTx8WOF/EH17+hUf9aIc8d4cmejWthTpJtt67qxIUmyWvV3Rk6dGyAf7nVaY5jecx7pMkUPTdWZyKkj5Rp5tgC19EdrqhYOCn5vlVLq5HnZFck35qsWDgq+UaUkX8+kMEPekNdm1BR14s/6WC+2qs4tb9SUI8f26QGwtV21MCuE3NB00bOhZ3vQKAh8GUZGDp1X0JNrdOAdeSRseTsS4r0LuUNtrmmbQud1eRmvD2bIm2JrVdTuBgKs0A+zK3LeX4B8Sp34eNjv+gTYqFyf3Kejbu2FeszsqFo4KEijSjl75L5kbwf5brfVwkHBN6qUwPvpizp5i665PwNwqikIAnCKAL+n4djasejZVFM+VMwGTO0p7xe5CbBx0CtkAf9b/AcdAm2s+N4kaAAAAABJRU5ErkJggg==";function aU(e){let{printJob:n,updateFile:r,updateThumbnail:i}=e;const[o,s]=(0,t.useState)(!1),a=(0,t.useRef)(null),[l,c]=(0,t.useState)(null),u=new Qk;u.add(new WD(5));const h=new OD(16777215,.1),d=new DD(16777215);d.position.set(3,3,3),d.intensity=35,u.add(h),u.add(d);const p=new QI(75,1,.1,1e3);p.position.z=1.2,p.position.y=.5,p.position.x=.5;const f=new Xk;f.setClearColor(14540253,1);const m=new oU(p,f.domElement);m.enableDamping=!0;const g=new ZO,v=new aD({color:14478837});function y(){m.update(),f.render(l,p),window.requestAnimationFrame(y)}function b(){let e=document.getElementById("canvas-rect").getBoundingClientRect();f.setSize(e.width,e.height),p.aspect=e.width/e.height,p.updateProjectionMatrix()}function _(){null!==n.file&&b()}function x(e){g.load(URL.createObjectURL(e),(function(e){var t=(new BR).setFromObject(new UI(e)),n=new OR;t.getSize(n);var r=1/Math.max(n.x,n.y,n.z);e.scale(r,r,r),u.add(new UI(e,v)),c(u)}),(e=>{}),(e=>{console.log(e)}))}(0,t.useEffect)((()=>{if(null!==l)return null!==a.current&&l.children.length>3?(f.setSize(800,600),p.aspect=800/600,p.updateProjectionMatrix(),window.addEventListener("resize",_,!1),b(),a.current.appendChild(f.domElement),y(),function(){const e=200;f.setSize(e,e),p.aspect=1,p.updateProjectionMatrix(),f.render(l,p);const t=f.domElement.toDataURL("image/png");i(t),b()}(),()=>{window.removeEventListener("resize",_,!1),null!==a.current&&a.current.hasChildNodes()&&(a.current.removeChild(f.domElement),r(null))}):void 0;null!==n.file&&x(n.file)}),[l]);const{getRootProps:w,getInputProps:E,open:S}=QO({accept:{"model/stl":[".stl"]},noClick:!0,noKeyboard:!0,multiple:!1,onDrop:e=>{if(0===e.length)return void s(!0);const t=e[0];"stl"===t.name.split(".").pop().toLocaleLowerCase()?(r(t),x(t),s(!1)):s(!0)}});return(0,Ne.jsx)(Ne.Fragment,{children:null===n.file?(0,Ne.jsxs)("div",{className:"flex flex-col h-full",children:[(0,Ne.jsx)("p",{className:"text-4xl font-bold mt-3",children:"Upload an STL file"}),(0,Ne.jsx)("div",{className:"flex flex-col mt-4 grow",children:(0,Ne.jsxs)("div",{...w(),className:"h-full border-dashed border-2 border-gray-400 p-4 flex text-center justify-center items-center rounded",style:{backgroundColor:"#f7f7f7"},children:[(0,Ne.jsx)("input",{...E()}),(0,Ne.jsxs)("div",{className:"text-3xl",children:[(0,Ne.jsxs)("p",{children:["Drag and drop",(0,Ne.jsx)("br",{}),"or"]}),(0,Ne.jsx)("span",{onClick:S,className:"text-3xl text-blue-500 cursor-pointer underline",children:"Browse files"})]})]})}),o&&(0,Ne.jsxs)("div",{className:"flex items-center pt-3",children:[(0,Ne.jsx)("img",{src:sU,className:"w-6 h-6"}),(0,Ne.jsx)("p",{className:"font-bold pl-2",children:"We currently only accept single .stl files"})]})]}):(0,Ne.jsxs)("div",{className:"flex flex-col h-full",children:[(0,Ne.jsxs)("div",{className:"flex w-full items-center mt-3 justify-between",children:[(0,Ne.jsxs)("p",{className:"text-4xl font-bold",children:["Selected: ",(A=n.file.name,M=35,A.length<=M?A:A.substring(0,M)+"...")]}),(0,Ne.jsx)("p",{onClick:()=>function(){for(;u.children.length>0;)u.remove(u.children[0]);c(u)}(),className:"text-4xl text-blue-500 cursor-pointer underline",children:"Change File"})]}),(0,Ne.jsx)("div",{className:"flex flex-col items-center justify-center full-without-title mt-4 grow",id:"canvas-rect",children:(0,Ne.jsx)("div",{className:"rounded",ref:a})})]})});var A,M}const lU=t.createContext();function cU(){return(0,t.useContext)(lU)}function uU(e){let{children:n}=e;const[r,i]=(0,t.useState)(null),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!0);async function c(e){e?(i({...e}),s(!0)):(i(null),s(!1)),l(!1)}(0,t.useEffect)((()=>function(e,t,n,r){return at(e).onAuthStateChanged(t,n,r)}(n_,c)),[]);const u={currUser:r,userLoggedIn:o,loading:a};return(0,Ne.jsx)(lU.Provider,{value:u,children:!a&&n})}const hU=["January","February","March","April","May","June","July","August","September","October","November","December"];function dU(){const e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(t,"/").concat(n,"/").concat(r)}function pU(e){const[t,n,r]=e.split("/"),i=hU[parseInt(n)-1];return"".concat(i," ").concat(t,", ").concat(r)}function fU(){const e=$(),n=cU(),[r,i]=(0,t.useState)({thumbnail:null,jobName:"",file:null,quantity:1,material:"Plastic",color:"No Preference",completionDate:"",comment:"",infill:"25%",layerHeight:"0.2 mm",radius:0,latitude:0,longitude:0}),o=(e,t)=>{console.log(e,t),i((n=>({...n,[e]:t})))};return(0,Ne.jsxs)("div",{children:[!n.userLoggedIn&&(0,Ne.jsx)(fe,{to:"/login",replace:!0}),(0,Ne.jsxs)(hm,{submitText:"Submit Job",showNext:null!==r.file,validDetails:null!==r.email&&null!==r.name,handleSubmit:()=>{const t={CustomerUid:n.currUser.uid,PrinterUid:null,BidderUid:[],FileName:r.file.name,JobName:r.jobName,Quantity:""===r.quantity?"1":r.quantity,Material:r.material,Color:r.color,CompletionDate:r.completionDate,Comment:r.comment,Infill:r.infill,LayerHeight:r.layerHeight,History:{Submitted:dU(),Accepted:null,Printed:null,Exchanged:null},UploadedFile:!1,AcceptedBid:null,Complete:!1,Radius:r.radius,Latitude:r.latitude,Longitude:r.longitude};(async function(e,t){return await om(Jp(e,"Jobs"),t)})(e_,t).then((t=>{const n=t.id;(async function(e,t){var n=Jb(t_,"images/".concat(t,".png"));const r=await fetch(e);Qb(n,await r.blob())})(r.thumbnail,n).then((()=>{(async function(e,t,n){Qb(Jb(t_,"print-files/".concat(t+"_"+n,".stl")),e)})(r.file,r.jobName,n).then((()=>{im(Zp(e_,"Jobs/".concat(n)),{UploadedFile:!0})})).catch((e=>{console.error("Error uploading stl file: ",e)})),e("/Orders/".concat(n))})).catch((e=>{console.error("Error uploading thumbnail: ",e)}))})).catch((e=>{console.error("Error uploading job data: ",e)}))},children:[(0,Ne.jsx)(dm,{title:"Upload",children:(0,Ne.jsx)(aU,{printJob:r,updateFile:e=>(e=>{o("file",e),o("jobName",null!==e?e.name.replace(/\.stl$/i,"").substring(0,100):"")})(e),updateThumbnail:e=>o("thumbnail",e)})}),(0,Ne.jsx)(dm,{title:"Configure",children:(0,Ne.jsx)(TT,{printJob:r,changePrintJob:o})})]})]})}var mU=function(){return mU=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},mU.apply(this,arguments)};function gU(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}"function"===typeof SuppressedError&&SuppressedError;var vU=function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")},yU={k:1e3,m:1e6,b:1e9},bU=function(e){var t=e.value,n=e.groupSeparator,r=void 0===n?",":n,i=e.decimalSeparator,o=void 0===i?".":i,s=e.allowDecimals,a=void 0===s||s,l=e.decimalsLimit,c=void 0===l?2:l,u=e.allowNegativeValue,h=void 0===u||u,d=e.disableAbbreviations,p=void 0!==d&&d,f=e.prefix,m=void 0===f?"":f,g=e.transformRawValue,v=(void 0===g?function(e){return e}:g)(t);if("-"===v)return v;var y=p?[]:["k","m","b"],b=new RegExp("((^|\\D)-\\d)|(-".concat(vU(m),")")).test(v),_=RegExp("(\\d+)-?".concat(vU(m))).exec(t)||[],x=_[0],w=_[1],E=function(e,t){void 0===t&&(t=",");var n=new RegExp(vU(t),"g");return e.replace(n,"")}(m?x?v.replace(x,"").concat(w):v.replace(m,""):v,r),S=function(e,t){var n=vU(t.join("")),r=new RegExp("[^\\d".concat(n,"]"),"gi");return e.replace(r,"")}(E,gU([r,o],y,!0)),A=S;if(!p){if(y.some((function(e){return e===S.toLowerCase().replace(o,"")})))return"";var M=function(e,t){void 0===t&&(t=".");var n=new RegExp("(\\d+(".concat(vU(t),"\\d*)?)([kmb])$"),"i"),r=e.match(n);if(r){var i=r[1],o=r[3],s=yU[o.toLowerCase()];return Number(i.replace(t,"."))*s}}(S,o);M&&(A=String(M))}var T=b&&h?"-":"";if(o&&A.includes(o)){var C=S.split(o),R=C[0],L=C[1],I=c&&L?L.slice(0,c):L,P=a?"".concat(o).concat(I):"";return"".concat(T).concat(R).concat(P)}return"".concat(T).concat(A)},_U=function(e,t){var n=t.groupSeparator,r=void 0===n?",":n,i=t.decimalSeparator,o=void 0===i?".":i,s=new RegExp("\\d([^".concat(vU(r)).concat(vU(o),"0-9]+)")),a=e.match(s);return a?a[1]:void 0},xU=function(e){var t=e.value,n=e.decimalSeparator,r=e.intlConfig,i=e.decimalScale,o=e.prefix,s=void 0===o?"":o,a=e.suffix,l=void 0===a?"":a;if(""===t||void 0===t)return"";if("-"===t)return"-";var c=new RegExp("^\\d?-".concat(s?"".concat(vU(s),"?"):"","\\d")).test(t),u="."!==n?wU(t,n,c):t;n&&"-"!==n&&u.startsWith(n)&&(u="0"+u);var h={minimumFractionDigits:i||0,maximumFractionDigits:20},d=(r?new Intl.NumberFormat(r.locale,r.currency?mU(mU({},h),{style:"currency",currency:r.currency}):h):new Intl.NumberFormat(void 0,h)).formatToParts(Number(u)),p=EU(d,e),f=_U(p,mU({},e)),m=t.slice(-1)===n?n:"",g=(u.match(RegExp("\\d+\\.(\\d+)"))||[])[1];return void 0===i&&g&&n&&(p=p.includes(n)?p.replace(RegExp("(\\d+)(".concat(vU(n),")(\\d+)"),"g"),"$1$2".concat(g)):f&&!l?p.replace(f,"".concat(n).concat(g).concat(f)):"".concat(p).concat(n).concat(g)),l&&m?"".concat(p).concat(m).concat(l):f&&m?p.replace(f,"".concat(m).concat(f)):f&&l?p.replace(f,"".concat(m).concat(l)):[p,m,l].join("")},wU=function(e,t,n){var r=e;return t&&"."!==t&&(r=r.replace(RegExp(vU(t),"g"),"."),n&&"-"===t&&(r="-".concat(r.slice(1)))),r},EU=function(e,t){var n=t.prefix,r=t.groupSeparator,i=t.decimalSeparator,o=t.decimalScale,s=t.disableGroupSeparators,a=void 0!==s&&s;return e.reduce((function(e,t,s){var l=t.type,c=t.value;return 0===s&&n?"minusSign"===l?[c,n]:"currency"===l?gU(gU([],e,!0),[n],!1):[n,c]:"currency"===l?n?e:gU(gU([],e,!0),[c],!1):"group"===l?a?e:gU(gU([],e,!0),[void 0!==r?r:c],!1):"decimal"===l?void 0!==o&&0===o?e:gU(gU([],e,!0),[void 0!==i?i:c],!1):gU(gU([],e,!0),"fraction"===l?[void 0!==o?c.slice(0,o):c]:[c],!1)}),[""]).join("")},SU={currencySymbol:"",groupSeparator:"",decimalSeparator:"",prefix:"",suffix:""},AU=function(e){return RegExp(/\d/,"gi").test(e)},MU=(0,t.forwardRef)((function(e,n){var r=e.allowDecimals,i=void 0===r||r,o=e.allowNegativeValue,s=void 0===o||o,a=e.id,l=e.name,c=e.className,u=e.customInput,h=e.decimalsLimit,d=e.defaultValue,p=e.disabled,f=void 0!==p&&p,m=e.maxLength,g=e.value,v=e.onValueChange,y=e.fixedDecimalLength,b=e.placeholder,_=e.decimalScale,x=e.prefix,w=e.suffix,E=e.intlConfig,S=e.step,A=e.min,M=e.max,T=e.disableGroupSeparators,C=void 0!==T&&T,R=e.disableAbbreviations,L=void 0!==R&&R,I=e.decimalSeparator,P=e.groupSeparator,N=e.onChange,k=e.onFocus,D=e.onBlur,O=e.onKeyDown,U=e.onKeyUp,F=e.transformRawValue,B=e.formatValueOnBlur,j=void 0===B||B,V=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(e,["allowDecimals","allowNegativeValue","id","name","className","customInput","decimalsLimit","defaultValue","disabled","maxLength","value","onValueChange","fixedDecimalLength","placeholder","decimalScale","prefix","suffix","intlConfig","step","min","max","disableGroupSeparators","disableAbbreviations","decimalSeparator","groupSeparator","onChange","onFocus","onBlur","onKeyDown","onKeyUp","transformRawValue","formatValueOnBlur"]);if(I&&AU(I))throw new Error("decimalSeparator cannot be a number");if(P&&AU(P))throw new Error("groupSeparator cannot be a number");var z=(0,t.useMemo)((function(){return function(e){var t=e||{},n=t.locale,r=t.currency;return(n?new Intl.NumberFormat(n,r?{currency:r,style:"currency"}:void 0):new Intl.NumberFormat).formatToParts(1000.1).reduce((function(e,t,n){return"currency"===t.type?mU(mU({},e),0===n?{currencySymbol:t.value,prefix:t.value}:{currencySymbol:t.value,suffix:t.value}):"group"===t.type?mU(mU({},e),{groupSeparator:t.value}):"decimal"===t.type?mU(mU({},e),{decimalSeparator:t.value}):e}),SU)}(E)}),[E]),H=I||z.decimalSeparator||"",G=P||z.groupSeparator||"";if(H&&G&&H===G&&!1===C)throw new Error("decimalSeparator cannot be the same as groupSeparator");var W={decimalSeparator:H,groupSeparator:G,disableGroupSeparators:C,intlConfig:E,prefix:x||z.prefix,suffix:w},K={decimalSeparator:H,groupSeparator:G,allowDecimals:i,decimalsLimit:h||y||2,allowNegativeValue:s,disableAbbreviations:L,prefix:x||z.prefix,transformRawValue:F},q=(0,t.useState)((function(){return null!=d?xU(mU(mU({},W),{decimalScale:_,value:String(d)})):null!=g?xU(mU(mU({},W),{decimalScale:_,value:String(g)})):""})),X=q[0],Q=q[1],Y=(0,t.useState)(!1),J=Y[0],Z=Y[1],$=(0,t.useState)(0),ee=$[0],te=$[1],ne=(0,t.useState)(0),re=ne[0],ie=ne[1],oe=(0,t.useState)(null),se=oe[0],ae=oe[1],le=(0,t.useRef)(null);(0,t.useImperativeHandle)(n,(function(){return le.current}));var ce=function(e,t){Z(!0);var n=function(e){var t=e.selectionStart,n=e.value,r=e.lastKeyStroke,i=e.stateValue,o=e.groupSeparator,s=t,a=n;if(i&&s){var l=n.split("");return"Backspace"===r&&i[s]===o&&(l.splice(s-1,1),s-=1),"Delete"===r&&i[s]===o&&(l.splice(s,1),s+=1),{modifiedValue:a=l.join(""),cursorPosition:s}}return{modifiedValue:a,cursorPosition:t}}({selectionStart:t,value:e,lastKeyStroke:se,stateValue:X,groupSeparator:G}),r=n.modifiedValue,i=n.cursorPosition,o=bU(mU({value:r},K));if(!(m&&o.replace(/-/g,"").length>m)){if(""===o||"-"===o||o===H)return v&&v(void 0,l,{float:null,formatted:"",value:""}),Q(o),void te(1);var s=H?o.replace(H,"."):o,a=parseFloat(s),c=xU(mU({value:o},W));if(null!=i){var u=i+(c.length-e.length);u=u<=0?x?x.length:0:u,te(u),ie(re+1)}if(Q(c),v)v(o,l,{float:a,formatted:c,value:o})}};(0,t.useEffect)((function(){null==g&&null==d&&Q("")}),[d,g]),(0,t.useEffect)((function(){J&&"-"!==X&&le.current&&document.activeElement===le.current&&le.current.setSelectionRange(ee,ee)}),[X,ee,le,J,re]);var ue=mU({type:"text",inputMode:"decimal",id:a,name:l,className:c,onChange:function(e){var t=e.target,n=t.value,r=t.selectionStart;ce(n,r),N&&N(e)},onBlur:function(e){var t=e.target.value,n=bU(mU({value:t},K));if("-"===n||n===H||!n)return Q(""),void(D&&D(e));var r=function(e,t,n){if(void 0!==n&&e.length>1){if(0===n)return e.replace(t,"");if(e.includes(t)){var r=e.split(t),i=r[0];if((a=r[1]).length===n)return e;if(a.length>n)return"".concat(i).concat(t).concat(a.slice(0,n))}var o=e.length>n?new RegExp("(\\d+)(\\d{".concat(n,"})")):new RegExp("(\\d)(\\d+)"),s=e.match(o);if(s){i=s[1];var a=s[2];return"".concat(i).concat(t).concat(a)}}return e}(n,H,y),i=function(e,t,n){if(void 0===t&&(t="."),void 0===n||""===e||void 0===e)return e;if(!e.match(/\d/g))return"";var r=e.split(t),i=r[0],o=r[1];if(0===n)return i;var s=o||"";if(s.length<n)for(;s.length<n;)s+="0";else s=s.slice(0,n);return"".concat(i).concat(t).concat(s)}(r,H,void 0!==_?_:y),o=parseFloat(i.replace(H,".")),s=xU(mU(mU({},W),{value:i}));v&&j&&v(i,l,{float:o,formatted:s,value:i}),Q(s),D&&D(e)},onFocus:function(e){return k&&k(e),X?X.length:0},onKeyDown:function(e){var t=e.key;if(ae(t),S&&("ArrowUp"===t||"ArrowDown"===t)){e.preventDefault(),te(X.length);var n=parseFloat(null!=g?String(g).replace(H,"."):bU(mU({value:X},K)))||0,r="ArrowUp"===t?n+S:n-S;if(void 0!==A&&r<Number(A))return;if(void 0!==M&&r>Number(M))return;var i=String(S).includes(".")?Number(String(S).split(".")[1].length):void 0;ce(String(i?r.toFixed(i):r).replace(".",H))}O&&O(e)},onKeyUp:function(e){var t=e.key,n=e.currentTarget.selectionStart;if("ArrowUp"!==t&&"ArrowDown"!==t&&"-"!==X){var r=_U(X,{groupSeparator:G,decimalSeparator:H});if(r&&n&&n>X.length-r.length&&le.current){var i=X.length-r.length;le.current.setSelectionRange(i,i)}}U&&U(e)},placeholder:b,disabled:f,value:null==g||"-"===X||H&&X===H?X:xU(mU(mU({},W),{decimalScale:J?void 0:_,value:String(g)})),ref:le},V);if(u){var he=u;return t.createElement(he,mU({},ue))}return t.createElement("input",mU({},ue))}));function TU(e,t){(async function(e){const t=Bf(Jp(e_,"Jobs/".concat(e,"/BidHistory")),Vf("Active","==",!0),Gf("Timestamp","desc")),n=await rm(t),r=[];return n.docs.forEach((e=>{const t=e.data(),n={id:e.id,uid:t.PrinterUid,amount:Number(t.Amount).toFixed(2),timestamp:t.Timestamp};r.push(n)})),r})(e).then((e=>{if(e.length>0){const n=e.map((e=>e.amount)),r={high:Math.max(...n).toFixed(2),low:Math.min(...n).toFixed(2),count:n.length,history:[]};t(r)}}))}function CU(e){let{jobId:n,statsReloadTrigger:r}=e;const[i,o]=(0,t.useState)(!1),[s,a]=(0,t.useState)(null),l=e=>{a(e),o(!0)};return(0,t.useEffect)((()=>{TU(n,l)}),[n,r]),(0,Ne.jsx)("div",{children:i?(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{className:"m-2 flex gap-3",children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Current Bid Count:"}),(0,Ne.jsx)("div",{className:"text-lg text-blue-500 font-semibold px-3",children:s.count})]}),(0,Ne.jsxs)("div",{className:"m-2 flex gap-3",children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Current Bid Range:"}),(0,Ne.jsx)("div",{className:"text-lg text-blue-500 font-semibold px-3",children:1===s.count?(0,Ne.jsxs)("div",{children:["$",s.low]}):(0,Ne.jsxs)("div",{children:["$",s.low," - $",s.high," CAD"]})})]})]}):(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Be the first to bid!"})})}function RU(e){let{jobId:n,callback:r}=e;const[i,o]=(0,t.useState)(null),s=cU().currUser.uid;return(0,Ne.jsx)("div",{children:(0,Ne.jsxs)("div",{className:"border border-2 mt-2 p-3 rounded-md",children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"My Bid:"}),(0,Ne.jsxs)("div",{className:"m-2 flex gap-2",children:[(0,Ne.jsx)("div",{className:"border border-2 py-2 px-4 rounded-md",children:(0,Ne.jsxs)("div",{className:"flex gap-1",children:[(0,Ne.jsx)(MU,{placeholder:"Enter your bid",allowNegativeValue:!1,value:i,prefix:"$ ",step:1,onValueChange:e=>{o(e)}}),(0,Ne.jsx)("div",{children:"CAD"})]})}),(0,Ne.jsx)("div",{className:" bg-brand-blue border border-brand-blue text-white font-bold py-2 px-4 rounded-md",children:(0,Ne.jsx)("button",{className:"",onClick:()=>{if(null!==i){const e=Number(i).toFixed(2),t={PrinterUid:s,Amount:e,Timestamp:aa.now(),Active:!0};r(t)}},children:"Place Bid"})})]}),(0,Ne.jsx)(CU,{jobId:n})]})})}function LU(e){let{bid:t,onAccept:n}=e;const r=t.uid,i=t.amount;return(0,Ne.jsxs)("div",{className:"border border-2 mt-2 p-3 rounded-md",children:[(0,Ne.jsxs)("div",{className:"text-lg font-semibold",children:["User ",r.substring(0,10),"..."]}),(0,Ne.jsxs)("div",{className:"m-2 flex gap-2 justify-between",children:[(0,Ne.jsxs)("div",{className:"py-2 px-4 text-lg font-semibold",children:["Bid: $",i," CAD"]}),(0,Ne.jsx)("div",{className:" bg-brand-blue border border-brand-blue text-white font-bold py-2 px-4 rounded-md",children:(0,Ne.jsx)("button",{className:"",onClick:()=>{n()},children:"Accept Bid"})})]})]})}function IU(e){let{jobId:n,history:r,onUpdate:i}=e;const[o,s]=(0,t.useState)([]),a=e=>{const t=[];e.docs.forEach((e=>{const n=e.data(),r={id:e.id,uid:n.PrinterUid,amount:n.Amount,timestamp:n.Timestamp};t.push(r)})),s(t)};(0,t.useEffect)((()=>{const e=i_(n,a);return()=>{e()}}),[n]);const l=(e,t)=>{let o=r;o.Accepted=(()=>{const e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(t,"/").concat(n,"/").concat(r)})(),o_(n,{AcceptedBid:e,PrinterUid:t,History:o}),i()};return(0,Ne.jsx)("div",{children:o.map(((e,t)=>(0,Ne.jsx)("div",{children:(0,Ne.jsx)(LU,{bid:e,onAccept:()=>{l(e.id,e.uid)}})},t)))})}function PU(e){let{jobId:n}=e;const[r,i]=(0,t.useState)(null),[o,s]=(0,t.useState)(null),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!0),h=$(),d=cU().currUser.uid,p=e=>{e.docs.forEach((e=>{const t=e.data(),n={id:e.id,uid:t.PrinterUid,amount:t.Amount,timestamp:t.Timestamp};t.Active&&(i(n),u(!1))}))};(0,t.useEffect)((()=>{const e=i_(n,p,d);return()=>{e()}}),[n,d]);return(0,Ne.jsx)("div",{children:!1===c?(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{className:"border border-2 rounded-md mt-2 p-3",children:[(0,Ne.jsxs)("div",{className:"flex justify-between",children:[(0,Ne.jsxs)("div",{className:"flex gap-3",children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"My Bid:"}),(0,Ne.jsxs)("div",{className:"text-lg text-blue-500 font-semibold ",children:["$",r.amount," CAD"]})]}),(0,Ne.jsx)("div",{className:"mr-3",children:(0,Ne.jsx)("button",{className:"text-blue-500 text-sm hover:underline focus:outline-none",onClick:()=>{l(!a)},children:a?"Cancel":"Edit Bid"})})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{children:a?(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsxs)("div",{className:"m-2 flex gap-2 justify-between mr-4 ",children:[(0,Ne.jsx)("div",{className:"border border-2 py-2 px-4 rounded-md",children:(0,Ne.jsxs)("div",{className:"flex gap-1",children:[(0,Ne.jsx)(MU,{placeholder:"Update your bid",allowNegativeValue:!1,value:o,prefix:"$ ",step:1,onValueChange:e=>{s(e)}}),(0,Ne.jsx)("div",{children:"CAD"})]})}),(0,Ne.jsx)("div",{className:" bg-brand-blue border border-brand-blue text-white font-bold py-2 px-4 rounded-md",children:(0,Ne.jsx)("button",{className:"",onClick:()=>(async e=>{if(void 0===e||null===e)return;e=Number(e).toFixed(2);const t={PrinterUid:d,Amount:e,Timestamp:aa.now(),Active:!1},i=Jp(e_,"Jobs/".concat(n,"/BidHistory")),o=Zp(e_,"Jobs/".concat(n,"/BidHistory/").concat(r.id)),a=await om(i,t);im(o,{Active:!1}).then(im(a,{Active:!0})),l(!1),s(null)})(o),children:"Update Bid"})})]})}):(0,Ne.jsx)(Ne.Fragment,{})}),(0,Ne.jsx)("div",{children:a?(0,Ne.jsx)("div",{className:"m-2 flex gap-2 justify-end mr-4",children:(0,Ne.jsx)("div",{className:" bg-brand-red border border-brand-red text-white font-bold py-2 px-4 rounded-md",children:(0,Ne.jsx)("button",{className:"",onClick:()=>(()=>{const e=Zp(e_,"Jobs/".concat(n,"/BidHistory/").concat(r.id));o_(n,{BidderUid:um(d)}),im(e,{Active:!1}).then((()=>h("/jobs")))})(),children:"Delete Bid"})})}):(0,Ne.jsx)(Ne.Fragment,{})})]})]}),(0,Ne.jsx)(CU,{jobId:n,statsReloadTrigger:r})]}):(0,Ne.jsx)(Ne.Fragment,{})})}function NU(e){let{job:n,isSelected:r,onSelectJob:i,onUnselectJob:o,img:s,showBidStats:a=!1}=e;const[l,c]=(0,t.useState)(null);return(0,t.useEffect)((()=>{a&&TU(n.doc,c)}),[]),(0,Ne.jsxs)("div",{onClick:()=>{r?o():i(n)},className:"border-[1px] border-gray-300 bg-white rounded overflow-hidden flex w-full hover:cursor-pointer hover:bg-gray-200 ".concat(r?"fg-brand-blue brand-blue-accent":""),style:{height:r?"auto":"fit-content"},children:[(0,Ne.jsx)("div",{className:"md:flex-shrink-0",children:(0,Ne.jsx)("div",{className:"h-48 w-full object-cover md:w-48",children:s?(0,Ne.jsx)("img",{src:s,alt:n.fileName}):(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"gray",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"})})})}),(0,Ne.jsxs)("div",{className:"pl-5 pt-5 text-gray-600",children:[(0,Ne.jsx)("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:n.jobName}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold mt-2",children:"Material: "}),(0,Ne.jsx)("span",{className:"font-normal",children:n.material})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Infill: "}),(0,Ne.jsx)("span",{className:"font-normal",children:n.infill})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Color: "}),(0,Ne.jsx)("span",{className:"font-normal",children:n.color})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Quantity: "}),(0,Ne.jsx)("span",{className:"font-normal",children:n.quantity})]}),a?(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Lowest Bid: "}),null!==l?(0,Ne.jsxs)("span",{className:"font-normal",children:["$",l.low," CAD"]}):(0,Ne.jsx)("span",{className:"font-normal",children:"N/A"})]}):(0,Ne.jsx)(Ne.Fragment,{children:" "})]})]})}function kU(e){let{ImgComponent:t,ContentComponent:n,onSelectJob:r}=e;return(0,Ne.jsxs)("div",{onClick:()=>{r()},className:"border-[1px] border-gray-300 bg-white rounded overflow-hidden flex w-full hover:cursor-pointer hover:bg-gray-200  }",style:{height:"fit-content"},children:[(0,Ne.jsx)(t,{}),(0,Ne.jsx)(n,{})]})}function DU(e){let{job:n,isPrinter:r,onSelectJob:i}=e;return(0,Ne.jsx)(kU,{ImgComponent:function(){return(0,Ne.jsx)("div",{className:"md:flex-shrink-0",children:(0,Ne.jsx)("div",{className:"h-48 w-full object-cover md:w-48",children:n.thumbnail?(0,Ne.jsx)("img",{src:n.thumbnail,alt:n.fileName}):(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"gray",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"})})})})},ContentComponent:function(){const[e,i]=(0,t.useState)(null),[o,s]=(0,t.useState)([]),a=cU().currUser.uid,l=e=>{e.docs.forEach((e=>{const t=e.data(),n={id:e.id,uid:t.PrinterUid,amount:t.Amount,timestamp:t.Timestamp};t.Active&&s(n)}))};return(0,t.useEffect)((()=>{const e=i_(n.id,l,a);return TU(n.id,i),()=>{e()}}),[a]),(0,Ne.jsxs)("div",{className:"pl-5 pt-5 text-gray-600",children:[(0,Ne.jsx)("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:n.jobName}),r?(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold mt-2",children:"Your Bid: "}),null!==o?(0,Ne.jsxs)("span",{className:"font-normal",children:["$",o.amount]}):(0,Ne.jsx)("span",{className:"font-normal",children:"$"})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold mt-2",children:"Lowest Bid: "}),null!==e?(0,Ne.jsxs)("span",{className:"font-normal",children:["$",e.low]}):(0,Ne.jsx)("span",{className:"font-normal",children:"$"})]})]}):(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold mt-2",children:"Bid Count: "}),null!==e?(0,Ne.jsx)("span",{className:"font-normal",children:e.count}):(0,Ne.jsx)("span",{className:"font-normal",children:"0"})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold mt-2",children:"Bid Range: "}),null!==e?(0,Ne.jsx)(Ne.Fragment,{children:1===e.count?(0,Ne.jsxs)("span",{className:"font-normal",children:["$",e.low," CAD"]}):(0,Ne.jsxs)("span",{className:"font-normal",children:["$",e.low," - $",e.high," CAD"]})}):(0,Ne.jsx)("span",{className:"font-normal",children:"N/A"})]})]})]})},onSelectJob:i})}function OU(e){let{jobs:t,filters:n,selectedJob:r,onSelectJob:i,onUnselectJob:o}=e;return(0,Ne.jsx)("div",{className:"",children:(0,Ne.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-4",children:t.map(((e,t)=>{if((n.materials.includes(e.material)||"Plastic"==e.material)&&(n.colors.includes(e.color)||"No Preference"==e.color)&&function(e,t,n,r){const i=e=>e*(Math.PI/180),o=i(n-e),s=i(r-t),a=Math.sin(o/2)*Math.sin(o/2)+Math.cos(i(e))*Math.cos(i(n))*Math.sin(s/2)*Math.sin(s/2);return 2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))*6371}(n.latitude,n.longitude,e.lat,e.lng)<=n.radius+e.radius)return(0,Ne.jsx)(NU,{job:e,isSelected:r===e,onSelectJob:i,onUnselectJob:o,img:e.thumbnail,showBidStats:!0},"jobcard-"+t)}))})})}MU.displayName="CurrencyInput";const UU=["places"];function FU(){const[e,n]=(0,t.useState)({lat:48.4284,lng:-123.3656}),[r,i]=(0,t.useState)(50),[o,s]=(0,t.useState)(null),[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)([]),[h,d]=(0,t.useState)(null),[p,f]=(0,t.useState)([]),[m,g]=(0,t.useState)({materials:c,colors:a,radius:r,latitude:e.lat,longitude:e.lng,bid_order:0}),v=cU(),y=v.currUser.uid,b=$();(0,t.useEffect)((()=>{!async function(){const e=await async function(e){const t=Jp(e,"Colors");return(await rm(t)).docs.map((e=>e.data().Color))}(e_);l(e),g((t=>({...t,colors:e})))}()}),[]),(0,t.useEffect)((()=>{!async function(){u(await r_(e_))}()}),[]),(0,t.useEffect)((()=>{const e=sm(Bf(Jp(e_,"Jobs"),Vf("PrinterUid","==",null),Vf("UploadedFile","==",!0)),(async e=>{try{const t=[];await Promise.all(e.docs.map((async e=>{const n=e.data();if(void 0===n.BidderUid||n.BidderUid.includes(y))console.log("Not parsing: ",e);else{let i=null;try{i=await s_(e.id)}catch(r){console.error("Error fetching thumbnail: ",r),i=null}t.push({jobName:n.JobName,thumbnail:i,doc:e.id,infill:n.Infill,material:n.Material,distance:n.Radius,file:n.File,name:n.Name,email:n.Email,color:n.Color,layerHeight:n.LayerHeight,quantity:n.Quantity,comment:n.Comment,completionDate:n.CompletionDate,bidHistory:n.BidHistory,history:n.History,radius:n.Radius,lat:n.Latitude,lng:n.Longitude})}}))),f(t)}catch(t){console.error("Error fetching data:",t)}}));return()=>{e()}}),[y]);const _=(e,t)=>{let n=[...m[e]];n.includes(t)?n.splice(n.indexOf(t),1):n.push(t),g({...m,[e]:n})},x=(e,t)=>m[e].includes(t);return(0,Ne.jsxs)("div",{children:[!v.userLoggedIn&&(0,Ne.jsx)(fe,{to:"/login",replace:!0}),(0,Ne.jsxs)(hm,{showSubmit:!1,showNext:null!==h,validDetails:!0,children:[(0,Ne.jsx)(dm,{title:"Select Job",children:(0,Ne.jsxs)("div",{className:"flex h-full",children:[(0,Ne.jsxs)("div",{className:"md:flex flex-col w-[250px] border border-gray-300 rounded p-3",children:[(0,Ne.jsx)("h2",{className:"text-2xl font-bold",children:"Job Filters"}),(0,Ne.jsxs)("div",{className:"mt-3",children:[(0,Ne.jsx)("h3",{children:"Material Type:"}),(0,Ne.jsx)("input",{type:"checkbox",id:"material1",name:"material1",value:"PLA",defaultChecked:x("materials","PLA"),onChange:()=>_("materials","PLA")}),(0,Ne.jsx)("label",{htmlFor:"material1",children:" PLA"}),(0,Ne.jsx)("br",{}),(0,Ne.jsx)("input",{type:"checkbox",id:"material2",name:"material2",value:"ABS",defaultChecked:x("materials","ABS"),onChange:()=>_("materials","ABS")}),(0,Ne.jsx)("label",{htmlFor:"material2",children:" ABS"}),(0,Ne.jsx)("br",{}),(0,Ne.jsx)("input",{type:"checkbox",id:"material3",name:"material3",value:"PETG",defaultChecked:x("materials","PETG"),onChange:()=>_("materials","PETG")}),(0,Ne.jsx)("label",{htmlFor:"material3",children:" PETG"}),(0,Ne.jsx)("br",{})]}),(0,Ne.jsxs)("div",{className:"mt-3",children:[(0,Ne.jsx)("h3",{children:"Colors:"}),(0,Ne.jsx)("div",{children:a.map(((e,n)=>(0,Ne.jsxs)(t.Fragment,{children:[(0,Ne.jsx)("input",{type:"checkbox",id:"color".concat(n),name:"color".concat(n),defaultChecked:x("colors",e),onChange:()=>_("colors",e)}),(0,Ne.jsxs)("label",{htmlFor:"color".concat(n),children:[" ",e]}),(0,Ne.jsx)("br",{})]},e)))})]}),(0,Ne.jsxs)("div",{className:"mt-3",children:[(0,Ne.jsx)("h3",{children:"Sort Bid:"}),(0,Ne.jsx)(pm,{label:"Bid",options:["Lowest to highest","Highest to lowest"],padding:1})]}),(0,Ne.jsxs)("div",{className:"mt-3",children:[(0,Ne.jsx)("h1",{children:"Location:"}),(0,Ne.jsx)(FA,{googleMapsApiKey:"AIzaSyBeu0giaCGz9vMeTn1HBRtTRlWQuVZwpZs",libraries:UU,children:(0,Ne.jsx)(lA,{selectProps:{search_value:o,onChange:e=>{s(e),uA(e.value.place_id).then((e=>cA(e[0]))).then((e=>{let{lat:t,lng:r}=e;n({lat:t,lng:r}),g({...m,latitude:t,longitude:r})}))}}})}),(0,Ne.jsxs)("div",{className:"mt-3",children:[(0,Ne.jsx)("h1",{children:"Radius of travel: (km)"}),(0,Ne.jsx)(mm,{type:"Distance",min:"0",value:r,onChange:e=>{isNaN(e.target.value)||(i(Number(e.target.value)),g({...m,radius:Number(e.target.value)}))}})]})]})]}),(0,Ne.jsx)("div",{className:"grow p-3 pt-0 overflow-y-scroll",children:(0,Ne.jsx)(OU,{jobs:p,filters:m,onSelectJob:e=>{d(e)},onUnselectJob:()=>{d(null)},selectedJob:h})})]})}),(0,Ne.jsx)(dm,{title:"Confirm",children:h&&(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Ne.jsx)("img",{className:"h-96 w-full object-cover md:w-96",src:h.thumbnail,alt:h.fileName}),(0,Ne.jsxs)("div",{className:"ml-5",children:[(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"File Name:"})," ",h.fileName]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Infill:"})," ",h.infill]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Material:"})," ",h.material]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Color:"})," ",h.color]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Layer Height:"})," ",h.layerHeight]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Quantity:"})," ",h.quantity]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Completion Date:"})," ",""!==h.completionDate?h.completionDate:"None"]}),(0,Ne.jsx)("br",{}),(0,Ne.jsxs)("p",{children:[(0,Ne.jsx)("strong",{children:"Comment:"})," ",""!==h.comment?h.comment:"None"]})]})]}),(0,Ne.jsx)("div",{className:"flex",children:(0,Ne.jsx)(RU,{jobId:h.doc,callback:async e=>{const t=h.doc,n=v.currUser.uid;await async function(e,t){return om(Jp(e_,"Jobs/".concat(e,"/BidHistory")),t)}(t,e),o_(t,{BidderUid:cm(n)}).then((()=>{b("/Jobs/".concat(h.doc))}))}})})]})})]})]})}const BU="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAAAAAAAD/4QAuRXhpZgAATU0AKgAAAAgAAkAAAAMAAAABADgAAEABAAEAAAABAAAAAAAAAAD/2wBDAAoHBwkHBgoJCAkLCwoMDxkQDw4ODx4WFxIZJCAmJSMgIyIoLTkwKCo2KyIjMkQyNjs9QEBAJjBGS0U+Sjk/QD3/2wBDAQsLCw8NDx0QEB09KSMpPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT3/wAARCAFtAdoDASIAAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3ODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWmp6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEAAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSExBhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElKU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3uLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD2JmIJ5pNzetD9TSUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9aNzetJRQAu5vWjc3rSUUALub1o3N60lFAC7m9akqKpaAI36mkpX6mkoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAopHdUBLEKB1JOKzrjW7WDIVjIw7LQBpUVzsviKZ/9TGqD1PNVJNVvJOs7Aeg4oA62kyPUfnXFm4lfrK5/E0nmyf32/OgZ2vXpS1xQmlHSRx9Calj1G6j+7O4+pzQB2FFczFr91HjeFce4xWhD4ggkwJkaM+vUUCNaiooriKYbo3Vh7GpaACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKlqKpaAI36mkpX6mkoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKrXl7FZR7pDyeijqaALBKoCzEADkk8YrIvdejjylsN7dNx6Csq91Ka9c7jtj7KDVSkMluLye6OZpGb2zgCoqKKACiiigAooooAKKKKACiiigB0crxOGjdlYdwcVrWevumFul3L03DgiseigDs4biK5QPC4ZfbtUtcXb3MttIHhcqe/vXRadq0d5hHwkvp6/SmI0qKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACpaiqWgCN+ppKV+ppKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKq396ljAXPLnhV9aAG6jqKWMfZpWHyrXLTXElzIZJWLMf0omme4kMkjEsxyfamUhhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUAkEEEgg5BHUUUUAdBpWr+biC5ID9FY9//r1sVw9dFo+p/aAIJj+9UcE/xf8A16YjWooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqWoqloAjfqaSlfqaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAI5JFijaRzhVGSa5O+vGvbkyN90cKvoK0tfvckWqHgcvj+VYtIYUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUqO0bh1JDKcgjtSUUAdbp16t7bB+jrww9Kt1yemXpsroMT+7bhhXVgggEdDyKYhaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqWoqloAjfqaSlfqaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKiuJlt4HlboozUtYviG42QxwA8sdxoAw5ZGlkaRjlmOTTaKKQwooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAK6bRLr7RZhGOXiO0+4rmav6LceTfqpPyyDaaAOpooopiCiiigAooooAKKKKACiiigAooooAKKKKACiiigAqWoqloAjfqaSlfqaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAK5TV5vO1CT0X5RXUudiFvQVxcjmSR3PViSaAG0UUUhhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUqOUcMOoORSUUAdpDIJYY5B0ZQakrP0WTzNNjz1XINaFMQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFS1FUtAEb9TSUr9TSUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAFe+fZZTN6ITXH11up/8g2b/drkqQwooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigDofDz5tZF/uvxWvWJ4cJ8uYdsg1t0xBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVLUVS0ARv1NJSv1NJQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAVNTBOmz/7ua5Kuyuk8y0lT+8pFcbSGFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAbvhwfuZj7gVt1leH02WDN/ebNatMQUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFS1FUtAEb9TSUr9TSUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFACEZBHqMVxlzH5VzInoxArtK5jXofKvy4HEgzQBnUUUUhhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUU+3iM08cY6swFAHVaZF5Wnwr6jd+dW6RAEAUdFGBS0xBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVLUVS0ARv1NJSv1NJQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFZmuW3nWPmAfNEc/hWnSOgcFWGQwwRQBxFFT31s1ndPEegOVPqKgpDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigArW8P23mXLTkfKgwPrWSASwAGSTgD1rrtOtRZ2aR/xYy31oAtUUUUxBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVLUVS0ARv1NJSv1NJQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFAGZrVj9pg81B+8jGeO4rmq7aub1jTjbTGaMfunPOP4TQMzaKKKQBRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFT2Vm97OI16dWb0FAF/Q7HzZvtDj5EPy57n/61dFUUMK28KxoMKowKlpiCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKlqKpaAI36mkpX6mkoAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqOWNZozG4BVhgg1JRQByepac1jN3MTfdaqddpLEk0ZjkUMrDBBrmdR0qSycsuXiJ4buPrSGUaKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiprWzlvJAkK59WPQUANt7eS5mEca5Y/kK6qxsUsYAi4Lnlm9aLGwisY9q8ufvMe9WqYgooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAqWoqloAjfqaSlfqaSgAooooAKKKKACiiigAooooAKKKKACiiigAooooAKQkAEk4A6k1BdXsVkm6ZuT0UdTXOX2qzXpK5KRdlB6/WgDWvdcihykA8x+mewpmm615z+VdEK5Pyt0Brn6KQzuKQgOpBAIPBB71z+m600OIrklo+gbqRW/HIsiB42DKeQRzTEYt/oOd0lp9Sh/pWI8bRuVdSrDqCK7eq9zZQXgxMgJ7MOCKAOPorWutAljy1uwkX+6eDWXJDJCcSIyn3GKQxtFFFABRRRQAUUUUAFFFADOcKCSewGaACir9totzcYLDy09WratNJtrXB275B/E3NAGRY6LLc4ebMcXv1NdDb28VtGI4VCqPTvUtNpiHVQ1HUksY8DDSsOF9PrUGo60lvmK3IeXoW6gVz0kjSuXdizMcknvQBtWmvnIW6Xgn7yjpWzFKkyB42DKehBri6mtryazcNC5Hqp6GkM7Kis6w1aK8wjfJJ/dJ6/StGmIKKKKACiiigAooooAKKKKACiiigAooooAKKKKACpaiqWgCN+ppKV+ppKACiiigAooooAKKKKACiiigAooooAKKKKACszUtXSzzHDh5v0Wq+q6xszBbH5v4nHb6VhEkkknJPJJoGOlmkmkLyMWY9SabRRSAKKKKACrFnfzWT5jbKd1PQ1XooA6my1a3vMKT5cn9096v1w9XrXV7m1wu7zEH8Lc0AdVTZI0kGHVWHuM1nW2vW0uBJmJvfkVfjlSUAo6sD0wc0xFKXRLOXJCFD/ALJxVSTw4P8AlnP+DCtyigDnH8O3I6PGf0pn9gXf+z+ddNRQBzQ8P3R6sg+pqaPw4/8Ay0nUf7ozW/RQBlxaBbR4LlpD7nFXorWG3GI4lX6CpqQkDkkAe5xQAtFUbjVrW3yDJvYfwpzWVda9NLlYAIl9epoA27m9gs0zM4B7KOSawL7WJbrKR5ji6YB5NZ7u0hLOxZj1JNJSGFFFFABRRRQAAkEEHBHQitnTdbKYiujlegf0+tY1FAHbgggEEEHkEd6WuX03VnsyI5CWhJ6ddtdNHIsqB0YMrDIIpiHUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAVLUVS0ARv1NJSv1NJQAUUUUAFFFFABRRRQAUUUUAFFFFABWFq+rdbe2b2Zh/KpdY1PygbeA/vCMMw7f8A165+kMKKKKACiiigAooooAKKKKACiiigAp0cjxHKOyn2OKbRQBdi1i8iwPM3AdmGatx+I5R9+FT9DiseigDeHiOM/egYfQ5p3/CRQ/8APJ65+igDoD4jh7QsfxxUL+I2/ggA+pzWLRQBoSa9eSfdKp9BVOW5mm/1krN7E1HRQAUUUUAFFFFABRRRQAUUUUAFFFFABV7TNTayfa2WiY8r6VRooA7aORZUDoQysMgjvTq5jSdSNnII5CTEx/75rpgQVBByCMgjvTELRRRQAUUUUAFFFFABRRRQAUUUUAFS1FUtAEb9TSUr9TSUAFFFFABRRRQAUUUUAFFFFABWfqt+LKDCn964wo9PerdxMttC0rnCqM/WuRurl7qdpXPLHgelAERLOSzEkk5JPeiiikMKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACtrRNSxi1mbj+Bj/ACrFoBIIIOCDkEdqAO4oqhpV8L22AY/vUGG9/er9MQUUUUAFFFFABRRRQAUUUUAFS1FUtAEb9TSUr9TSUAFFFFABRRRQAUUUUAFFFU9TvBZ2bMD+8b5VoAyNcvvOn8hD+7jPOO5/+tWVQSSST1PJopDCiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKAJ7G6azuVlHTOGHqK6+ORZY1dTlWGQa4mt3QL3INs55Xlc0AbdFFFMQUUUUAFFFFABRRRQAVLUVS0ARv1NJSv1NJQAUUUUAFFFFABRRRQAVy2sXX2m8Kg/JH8o9639RufstlJJn5iML9a5Hk5J6nk0hhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAU+3ma3nSVeqnP1plFAHaQyrNCki/dYZFSVi+H7nfC9ux5U5X6VtUxBRRRQAUUUUAFFFFABUtRVLQBG/U0lK/U0lABRRRQAUUUUAFFFISACT0AyaAMDxDcb5o4AeFG41j1LeTG4upJD/E3FRUhhRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAFFFFABRRRQAUUUUAWNOuPs17G/bODXXVxNddps32iwic9cYP4UAWqKKKYgooooAKKKKACpaiqWgCN+ppKV+ppKACiiigAooooAKqanN5OnzN3IwPxq3WP4hlxBFH/AHmyfwoA5+iiikMKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigAooooAKKKKACiiigArd8OTZjlhJ+6dwFYVaGhy+XqSjs4KmgDqKKKKYgooooAKKKKACpaiqWgCN+ppKV+ppKACiiigAooooAKwNchnmukEcMjoq9VUmt+igDjfsN1/z7Tf98Gj7Ddf8+03/AHwa7KigZxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DR9huv+fab/AL4NdlRQBxv2G6/59pv++DU1ra3UV1E/2eYBWBJ2GusooEFFFFABRRRQAUUUUAFS1FUtAEb9TSU/aDz7UmwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2inbBRsFADaKdsFGwUANop2wUbBQA2paZsFBY5NAH/9k=",jU="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAfCAYAAADwbH0HAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGoSURBVHgBvZbNbYMwFIANIVISKVKOgZNz65ER2g3aCZpOkjBB1QlQJ2g7ASuwQXMCbkVCgooD9L2IRg4xYIPhkxDYPPvjWfhnRkZku91SwzDIL1B/p5MRQKFpmp6u69+r1erHsix3A7AxGlEMSjVN8+CibH1Zln6WZQ8xgGWlGTdJEaizl8ul+1+eEUW0SRn53Xq9pkmSfCkZahEpS1EUu8FDLStF4E+ngzLuI0UGZcyTwnMs0NSJoujUS4xzEiQftUyd+Xy+g7vf0tQJguB4/kjSQwrTAjO1eR1SSjd5nnvwaDdJEamMeVJYGN7ZDnF9gLqrdlB+Y2MQ4YybpGEY7mVipMSqpYjQUC8Wi1eVUsQgHcC0cWGX2TNVn/UOYQfCNVhYiuiSUj9N05d6DNwe2Zguaau4QXrZ1tpiiACaaikb04bOkR7Glt6IK+mRqTpxpIeh0isxTwq7CE9aj3mSlSJamxR3ka4PY2OkxNDhPXToTSlF6j9XPIWUK55CitwsmXiyqB6fx5LyxBRP/5w4pVJEZHdSLhURjyJFzvMYzkmU9zKuICPwB0YuXd02jfzbAAAAAElFTkSuQmCC";function VU(e){let{review:t}=e;return(0,Ne.jsxs)("div",{className:"flex flex-col p-4 border-2 border-brand-blue rounded-lg mb-4",children:[(0,Ne.jsxs)("div",{className:"flex items-center",children:[(()=>{let e=t.averageRating,n=[];for(let t=0;t<5;t++)e>=1?n.push((0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"black",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"black",width:"35",height:"35",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2l3.09 6.26L22 9.27l-5 4.73L18.18 22 12 18.27 5.82 22 8 14 2 9.27l6.91-1.01L12 2z"})},t)):e>=.5?n.push((0,Ne.jsx)("div",{className:"flex",children:(0,Ne.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"35",height:"35",children:[(0,Ne.jsx)("defs",{children:(0,Ne.jsx)("clipPath",{id:"half",children:(0,Ne.jsx)("rect",{x:"0",y:"0",width:"12",height:"24"})})}),(0,Ne.jsx)("path",{fill:"none",stroke:"gray",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2l3.09 6.26L22 9.27l-5 4.73L18.18 22 12 18.27 5.82 22 8 14 2 9.27l6.91-1.01L12 2z"}),(0,Ne.jsx)("path",{fill:"black",clipPath:"url(#half)",strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2l3.09 6.26L22 9.27l-5 4.73L18.18 22 12 18.27 5.82 22 8 14 2 9.27l6.91-1.01L12 2z"})]})})):n.push((0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"gray",width:"35",height:"35",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2l3.09 6.26L22 9.27l-5 4.73L18.18 22 12 18.27 5.82 22 8 14 2 9.27l6.91-1.01L12 2z"})})),e--;return n})(),(0,Ne.jsx)("p",{className:"ml-2",children:pU(t.date)})]}),t.comment&&(0,Ne.jsx)("p",{className:"mt-2",children:t.comment})]})}function zU(){const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(BU),[c,u]=(0,t.useState)([]),h=(0,t.useRef)(),d=cU();(0,t.useEffect)((()=>{(async()=>{const e=await async function(e,t){const n=Bf(Jp(e,"Ratings"),Vf("targetUserUid","==",t));return(await rm(n)).docs.map((e=>e.data()))}(e_,d.currUser.uid);u(e)})()}),[]);return(0,Ne.jsxs)("div",{className:"flex mt-10 ml-10",children:[(0,Ne.jsxs)("div",{className:"w-32 h-32 overflow-hidden relative",children:[(0,Ne.jsx)("img",{className:"w-32 h-32 rounded-full object-cover",src:a,alt:"Profile"}),(0,Ne.jsxs)("button",{onClick:()=>{h.current.click()},className:"absolute bottom-0 left-0 bg-gray-400 pl-2 pr-2 z-10 flex items-center rounded-full",children:[(0,Ne.jsx)("img",{src:jU,alt:"Edit",className:"mr-1 w-4 h-4"}),"Edit"]}),(0,Ne.jsx)("input",{ref:h,type:"file",accept:".png, .jpg, .jpeg",style:{display:"none"},onChange:e=>{if(e.target.files.length>0){const t=new FileReader;t.onloadend=()=>{l(t.result)},t.readAsDataURL(e.target.files[0])}}})]}),(0,Ne.jsxs)("div",{className:"w-1/2 ml-10",children:[(0,Ne.jsx)("h2",{className:"mb-2 mt-5",children:"First Name"}),(0,Ne.jsx)(mm,{type:"text",value:e,placeholder:"First Name",onChange:e=>n(e.target.value)}),(0,Ne.jsx)("h2",{className:"mb-2 mt-5",children:"Last Name"}),(0,Ne.jsx)(mm,{type:"text",value:r,placeholder:"Last Name",onChange:e=>i(e.target.value)}),(0,Ne.jsx)("h2",{className:"mb-2 mt-5",children:"Email"}),(0,Ne.jsx)(mm,{type:"email",value:o,placeholder:"Email",onChange:e=>s(e.target.value)})]}),(0,Ne.jsxs)("div",{className:"border-2 border-gray-300 p-2 rounded",children:[(0,Ne.jsx)("p",{className:"text-2xl font-bold",children:"Reviews"}),c.map((e=>(0,Ne.jsx)(VU,{review:e})))]})]})}function HU(e){let{isPrinter:n=!1}=e;const[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)([]),c=$(),u=cU().currUser.uid,[h,d]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{d(!0);const e=Jp(e_,"Jobs"),t=Bf(e,n?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>Xf("or",e))),zf._create("or",t)}(Vf("PrinterUid","==",u),function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach((e=>Xf("and",e))),zf._create("and",t)}(Vf("PrinterUid","==",null),Vf("BidderUid","array-contains",u))):Vf("CustomerUid","==",u)),r=sm(t,(async e=>{try{const t=[],n=[],r=[];await Promise.all(e.docs.map((async e=>{const i=e.data();let o=null;try{o=await s_(e.id)}catch(c){console.error("Error fetching thumbnail: ",c),o=null}const s=void 0===i.AcceptedBid||i.AcceptedBid,a=void 0===i.Complete||i.Complete,l={thumbnail:o,id:e.id,quantity:i.Quantity,infill:i.Infill,material:i.Material,distance:i.Radius,fileName:i.FileName,color:i.Color,jobName:i.JobName};a?r.push(l):s?n.push(l):t.push(l)}))),i(t),s(n),l(r),d(!1)}catch(t){console.error("Error fetching data:",t)}}));return()=>{r()}}),[n,u]),(0,Ne.jsx)("div",{children:h?(0,Ne.jsx)(Ne.Fragment,{}):(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("div",{className:"text-xl font-extrabold p-6",children:n?(0,Ne.jsx)(Ne.Fragment,{children:"Bid Jobs"}):(0,Ne.jsx)(Ne.Fragment,{children:"Listed Orders"})}),(0,Ne.jsx)("div",{className:"grid grid-cols-1 gap-4",children:r.map((e=>(0,Ne.jsx)(DU,{job:e,isPrinter:n,onSelectJob:()=>c("/".concat(n?"jobs":"orders","/").concat(e.id))})))}),(0,Ne.jsx)("div",{className:"text-xl font-extrabold p-6",children:n?(0,Ne.jsx)(Ne.Fragment,{children:"Current Jobs"}):(0,Ne.jsx)(Ne.Fragment,{children:"Accepted Orders"})}),(0,Ne.jsx)("div",{className:"grid grid-cols-1 gap-4",children:o.map((e=>(0,Ne.jsx)(NU,{job:e,onSelectJob:e=>c("/".concat(n?"jobs":"orders","/").concat(e.id)),img:e.thumbnail})))}),(0,Ne.jsx)("div",{className:"text-xl font-extrabold p-6",children:n?(0,Ne.jsx)(Ne.Fragment,{children:"Complete Jobs"}):(0,Ne.jsx)(Ne.Fragment,{children:"Complete Orders"})}),(0,Ne.jsx)("div",{className:"grid grid-cols-1 gap-4",children:a.map((e=>(0,Ne.jsx)(NU,{job:e,onSelectJob:e=>c("/".concat(n?"jobs":"orders","/").concat(e.id)),img:e.thumbnail})))})]})})}function GU(e){let{job:t,isSelected:n,onSelectJob:r,onUnselectJob:i,file:o,img:s}=e;return(0,Ne.jsxs)("div",{onClick:()=>{n?i():r(t)},className:"border-[1px] border-gray-300 bg-white rounded overflow-hidden grid grid-cols-3 w-full hover:cursor-pointer ".concat(n?"fg-brand-blue brand-blue-accent":""),style:{height:n?"auto":"fit-content"},children:[(0,Ne.jsx)("div",{className:"col-span-1",children:(0,Ne.jsx)("div",{className:"h-full w-full object-cover",children:s?(0,Ne.jsx)("img",{src:s,alt:t.fileName}):(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"gray",children:(0,Ne.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 18.364A9 9 0 0 0 5.636 5.636m12.728 12.728A9 9 0 0 1 5.636 5.636m12.728 12.728L5.636 5.636"})})})}),(0,Ne.jsxs)("div",{className:"col-span-2 pl-5 pt-5 text-gray-600 w-full",children:[(0,Ne.jsx)("div",{className:"uppercase tracking-wide text-sm text-indigo-500 font-semibold",children:t.jobName}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold mt-2",children:"Material: "}),(0,Ne.jsx)("span",{className:"font-normal",children:t.material})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Infill: "}),(0,Ne.jsx)("span",{className:"font-normal",children:t.infill})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Color: "}),(0,Ne.jsx)("span",{className:"font-normal",children:t.color})]}),(0,Ne.jsxs)("p",{className:"mt-2",children:[(0,Ne.jsx)("span",{className:"font-semibold",children:"Quantity: "}),(0,Ne.jsx)("span",{className:"font-normal",children:t.quantity})]}),(0,Ne.jsx)("a",{href:o,download:!0,className:"bg-brand-blue hover:brand-blue-accent text-white font-bold py-2 px-4 w-[95%] mt-2 mb-2 inline-block text-center rounded",children:"Download file"})]})]})}function WU(e,t,n,r){let i=[];for(let o=0;o<5;o++){let s="none",a="none",l="gray";o<Math.floor(e)||o<Math.floor(n)?(s="black",a="black",l="black"):(o<e||o<n)&&(s="black",l="black"),i.push((0,Ne.jsxs)("div",{style:{display:"flex"},children:[(0,Ne.jsx)("div",{onMouseEnter:()=>t(o+.5),onMouseLeave:()=>t(null),onClick:()=>r(o+.5),children:(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 24",strokeWidth:1.5,stroke:l,width:"17.5",height:"35",children:(0,Ne.jsx)("path",{fill:s,strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2l3.09 6.26L22 9.27l-5 4.73L18.18 22 12 18.27 5.82 22 8 14 2 9.27l6.91-1.01L12 2z"})})}),(0,Ne.jsx)("div",{onMouseEnter:()=>t(o+1),onMouseLeave:()=>t(null),onClick:()=>r(o+1),children:(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"12 0 12 24",strokeWidth:1.5,stroke:l,width:"17.5",height:"35",children:(0,Ne.jsx)("path",{fill:a,strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2l3.09 6.26L22 9.27l-5 4.73L18.18 22 12 18.27 5.82 22 8 14 2 9.27l6.91-1.01L12 2z"})})})]},o))}return i}function KU(e){let{onClose:n,isModalVisible:r,isCustomer:i,targetUserUid:o}=e;const[s,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(""),[d,p]=(0,t.useState)(null),[f,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(null),[y,b]=(0,t.useState)(null),[_,x]=(0,t.useState)(null),[w,E]=(0,t.useState)(null);t.useEffect((()=>{c(i&&s&&null!==y&&null!==_&&null!==w||!i&&s&&null!==_&&null!==w)}),[s,y,_,w]);const S=()=>{const e=A(),t=dU();let r,s;i?(r=(e+y+_+w)/4,s={targetUserUid:o,averageRating:r,printQualityRating:y,communicationRating:_,exchangeRating:w,comment:u,date:t}):(r=(e+_+w)/3,s={targetUserUid:o,averageRating:r,communicationRating:_,exchangeRating:w,comment:u,date:t}),async function(e,t){await om(Jp(e,"Ratings"),t)}(e_,s),n()},A=()=>{switch(s){case"Good":return 5;case"Neutral":return 3;case"Bad":return 1;default:return null}};return r&&(0,Ne.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 z-50 flex items-center justify-center",children:(0,Ne.jsxs)("div",{className:"bg-white p-4 rounded-lg w-[600px] mx-auto",children:[(0,Ne.jsx)("p",{className:"font-semibold text-2xl text-center",children:"Rate your experience with Jasper for Boat.stl"}),(0,Ne.jsx)("hr",{className:"border w-4/5 mx-auto my-4"}),(0,Ne.jsxs)("div",{className:"flex items-center",children:[(0,Ne.jsx)("p",{className:"text-2xl mr-4",children:"Overall:"}),["Good","Neutral","Bad"].map((e=>(0,Ne.jsx)("p",{className:"text-2xl mr-5 cursor-pointer border-2 px-2 rounded ".concat(s===e?"border-blue-500":"border-transparent"),onClick:()=>a(e),children:e},e)))]}),i&&(0,Ne.jsxs)("div",{className:"flex items-center mt-10",children:[(0,Ne.jsx)("div",{className:"w-1/3 text-2xl",children:"Print Quality:"}),(0,Ne.jsx)("div",{className:"w-2/3 flex",children:WU(d,p,y,b)})]}),(0,Ne.jsxs)("div",{className:"flex items-center mt-10",children:[(0,Ne.jsx)("div",{className:"w-1/3 text-2xl",children:"Communication:"}),(0,Ne.jsx)("div",{className:"w-2/3 flex",children:WU(f,m,_,x)})]}),(0,Ne.jsxs)("div",{className:"flex items-center mt-10",children:[(0,Ne.jsx)("div",{className:"w-1/3 text-2xl",children:"Exchange:"}),(0,Ne.jsx)("div",{className:"w-2/3 flex",children:WU(g,v,w,E)})]}),(0,Ne.jsxs)("div",{className:"mt-10",children:[(0,Ne.jsx)("div",{className:"text-2xl mb-5",children:"Comment:"}),(0,Ne.jsx)(a_,{value:u,onChange:e=>h(e.target.value)})]}),(0,Ne.jsx)("button",{className:"float-right mt-4 p-2 px-4 rounded text-white ".concat(l?"bg-brand-blue":"bg-gray-300"),onClick:()=>S(),disabled:!l,children:"Submit"})]})})}function qU(e){let{jobId:n}=e;const[r,i]=(0,t.useState)([]),[o,s]=(0,t.useState)(""),a=cU(),l=async()=>{const e={text:o,timestamp:Date.now(),author:a.currUser.uid,username:"Jasper"};s(""),await om(Jp(e_,"Chats/".concat(n,"/messages/")),e)};return(0,t.useEffect)((()=>{const e=sm(Bf(Jp(e_,"Chats/".concat(n,"/messages")),Gf("timestamp")),(e=>{const t=[];e.docs.forEach((e=>{const n=e.data();t.push(n)})),i(t)}));return()=>{e()}}),[n]),(0,Ne.jsxs)("div",{className:"p-2",children:[(0,Ne.jsx)("div",{className:"rounded-md bg-gray-50 h-48 overflow-y-scroll flex flex-col-reverse mb-2",children:(0,Ne.jsx)("div",{className:"flex flex-col justify-end p-4",children:(()=>{const e=r.reduce(((e,t,n)=>(0===n||t.author!==r[n-1].author?e.push({author:t.author,messages:[t],firstTimestamp:t.timestamp}):e[e.length-1].messages.push(t),e)),[]).sort(((e,t)=>e.firstTimestamp-t.firstTimestamp));return e.map((e=>(0,Ne.jsx)("div",{className:e.author===a.currUser.uid?"flex justify-end":"flex justify-start",children:(0,Ne.jsx)("div",{style:{display:"flex",flexDirection:"row-reverse",width:"max-content"},children:(0,Ne.jsxs)("div",{className:"flex flex-col",children:[e.messages.map((e=>(0,Ne.jsx)("p",{className:e.author===a.currUser.uid?"p-2 bg-blue-100 rounded-md mb-1 max-w-max self-end":"p-2 bg-gray-100 rounded-md mb-1 max-w-max self-start",children:e.text},e.timestamp))),(0,Ne.jsx)("p",{className:e.author===a.currUser.uid?"text-right text-xs mb-1":"text-left text-xs mb-1",children:e.messages[0].username})]})})},e.id)))})()})}),(0,Ne.jsxs)("div",{className:"flex p-2 border border-2",children:[(0,Ne.jsx)("input",{type:"text",value:o,onChange:e=>s(e.target.value),placeholder:"Type your message...",onKeyDown:e=>{"Enter"===e.key&&l()},className:"w-full"}),(0,Ne.jsx)("button",{className:"w-24",onClick:l,children:"Send"})]})]})}function XU(e){let{history:n,jobId:r,isPrinter:i,customerUid:o}=e;const[s,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1);function u(e){let{state:n,date:r}=e;const[i,o]=(0,t.useState)(!1);return(0,Ne.jsx)(Ne.Fragment,{children:(0,Ne.jsxs)("div",{className:"flex flex-col p-2 w-48",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[(0,Ne.jsx)("div",{className:"flex justify-center",children:(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"green",viewBox:"0 0 24 24",strokeWidth:1.5,className:"w-6 h-6",children:(0,Ne.jsx)("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})})}),(0,Ne.jsx)("div",{className:"flex justify-center",children:n}),i&&(0,Ne.jsx)("div",{className:"absolute bg-gray-200 text-gray-800 rounded-md shadow-lg z-10 ml-24",children:(0,Ne.jsx)("div",{className:"p-2",children:(0,Ne.jsxs)("p",{className:"text-sm",children:["Completed ",r]})})})]})})}function h(e){let{state:t}=e;return(0,Ne.jsxs)("div",{className:"flex flex-col p-2 w-48 ",children:[(0,Ne.jsx)("div",{className:"flex justify-center",children:(0,Ne.jsx)("button",{onClick:()=>{(e=>{"Exchanged"===e&&c(!0);var t=n;t[e]=dU();const i=Zp(e_,"Jobs/".concat(r));im(i,{History:t}).then((()=>a(!1))),"Exchanged"===e&&im(i,{Complete:!0})})(t)},children:(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"grey",class:"w-6 h-6",children:(0,Ne.jsx)("circle",{cx:"12",cy:"12",r:"9","stroke-width":"1.5"})})})}),(0,Ne.jsx)("div",{className:"flex justify-center",children:t})]})}function d(e){let{state:t}=e;return(0,Ne.jsxs)("div",{className:"flex flex-col p-2 w-48 ",children:[(0,Ne.jsx)("div",{className:"flex justify-center",children:(0,Ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"grey",class:"w-6 h-6",children:(0,Ne.jsx)("circle",{cx:"12",cy:"12",r:"9","stroke-width":"1.5"})})}),(0,Ne.jsx)("div",{className:"flex justify-center",children:t})]})}const p=["Submitted","Accepted","Printed","Exchanged"].map((e=>({state:e,date:n[e]}))),f=i&&null!==n.Accepted;return(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsxs)("div",{className:"flex flex-col",children:[f?(0,Ne.jsx)("div",{className:"flex justify-end mr-3",children:(0,Ne.jsx)("button",{className:"text-blue-500 text-sm hover:underline focus:outline-none",onClick:()=>{a(!s)},children:s?"Cancel":"Edit"})}):(0,Ne.jsx)(Ne.Fragment,{}),(0,Ne.jsx)("div",{className:"flex justify-center",children:p.map((e=>null!==e.date?(0,Ne.jsx)(u,{state:e.state,date:e.date}):s?(0,Ne.jsx)(h,{state:e.state}):(0,Ne.jsx)(d,{state:e.state})))})]}),l&&(0,Ne.jsx)(KU,{onClose:()=>{c(!1)},isModalVisible:l,isCustomer:!1,targetUserUid:o})]})}function QU(e){let{isPrinter:n=!1}=e;const r=function(){let{matches:e}=t.useContext(X),n=e[e.length-1];return n?n.params:{}}().Id,[i,o]=(0,t.useState)([]),[s,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!0),u=$(),h={Submitted:"01/03/2024",Accepted:"03/03/2024",Printed:"07/03/2024",Exchanged:null};return(0,t.useEffect)((()=>((async()=>{try{const t=await function(e){e=Wp(e,Qp);const t=Wp(e.firestore,tf);return Up(nf(t),e._key).then((n=>lm(t,e,n)))}(Zp(e_,"/Jobs/".concat(r)));let n=null,i=null;const s=t.data();try{n=await s_(r),i=await async function(e,t){try{const n=Jb(t_,"print-files/".concat(e+"_"+t,".stl"));return await Yb(n)}catch(n){throw console.error("Error getting download URL:",n),n}}(s.JobName,r)}catch(e){console.error("Error fetching thumbnail: ",e),n=null,i=null}o({thumbnail:n,infill:s.Infill,material:s.Material,distance:s.Radius,file:i,jobName:s.JobName,history:s.History?s.History:h,quantity:s.Quantity,color:s.Color,CustomerUid:s.CustomerUid}),a(null==s.AcceptedBid),c(!1)}catch(e){console.error("Error fetching data:",e)}})(),()=>{})),[r]),(0,Ne.jsxs)("div",{children:[(0,Ne.jsxs)("div",{className:"pl-10 pt-2 flex gap-2",children:[n?(0,Ne.jsx)("button",{className:"text-blue-500 hover:underline focus:outline-none",onClick:()=>u("/Jobs"),children:" Your Jobs "}):(0,Ne.jsx)("button",{className:"text-blue-500 hover:underline focus:outline-none",onClick:()=>u("/Orders"),children:" Your Orders "}),(0,Ne.jsxs)("div",{children:[" > ",r.substring(0,8),"..."]})]}),(0,Ne.jsx)("div",{children:l?(0,Ne.jsx)(Ne.Fragment,{}):(0,Ne.jsxs)("div",{className:"flex justify-center gap-2",children:[(0,Ne.jsxs)("div",{className:"w-2/5",children:[(0,Ne.jsxs)("div",{className:"border border-2 mt-2 p-2 rounded-md",children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Details"}),(0,Ne.jsx)(GU,{job:i,onSelectJob:()=>{},img:i.thumbnail,file:i.file})]}),(0,Ne.jsxs)("div",{className:"border border-2 mt-2 p-2 rounded-md",children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Status"}),(0,Ne.jsx)(XU,{history:i.history,jobId:r,customerUid:i.CustomerUid,isPrinter:n})]})]}),(0,Ne.jsx)("div",{className:"w-1/3",children:(0,Ne.jsx)("div",{className:"border border-2 mt-2 p-2 rounded-md",children:s?(0,Ne.jsx)(Ne.Fragment,{children:n?(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Bid Status"}),(0,Ne.jsx)(PU,{jobId:r})]}):(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Offered Bids"}),(0,Ne.jsx)(IU,{jobId:r,history:i.history,onUpdate:()=>a(!1)})]})}):(0,Ne.jsxs)(Ne.Fragment,{children:[(0,Ne.jsx)("div",{className:"text-lg font-semibold",children:"Chat"}),(0,Ne.jsx)(qU,{jobId:r})]})})})]})})]})}const YU=n.p+"static/media/cube_icon_black.2813a89cf7a4e36e3ea5.png",JU=async(e,t)=>async function(e,t,n){if(Xt(e.app))return Promise.reject(Rm(e));const r=Dg(e),i=zg(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",lv),o=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vv(e),t})),s=await cv._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(s.user),s}(n_,e,t),ZU=(e,t)=>function(e,t,n){return Xt(e.app)?Promise.reject(Rm(e)):gv(at(e),tv.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&vv(e),t}))}(n_,e,t),$U=async()=>{const e=new ov,t=await async function(e,t,n){if(Xt(e.app))return Promise.reject(Tm(e,"operation-not-supported-in-this-environment"));const r=Dg(e);Lm(e,t,nv);const i=zv(r,n);return new Qv(r,"signInViaPopup",t,i).executeNotNull()}(n_,e);return t};const eF=function(){const e=$(),t=[{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADYAAAA2CAYAAACMRWrdAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAWYSURBVHgB1VpdaBxVFJ47s39J48aUpBtKwFS3avKQigEr9aERn/Y9QaSoQUp88aEqKIi0UV+k+qKI+CZqW1RE9EEQrUpFEEEFHzWKFBGEllQxUrXJbr8zO3d69+6dO2dmZ3bZgcOZzNxz5pzz3XvOvWcjnPZVAG2DPNCOgbuglmO+BKipjJW6qqC7QIdBteB5EXQZdBF0DvR58LeqqxV8b8dij8qbBpt8W71WqyXm5+dLkq+vr7vEV1ZWSNBbW1srKtzVuGg0GmVSRDKFQuFuIcRHoG1QSyX6oOu6HdzzvHfB7zHpstlFpNuFZ6WAe45UIoWILy4uFjVh3RmpxCFD6MPlcvkmGP+x7oxKulMaP12tVvfrTpnsIr60tFSw2RUiRg9UYQtSIhAWq6urFV+B5zVg+F89OCX5P9B1f0qkQrsCp68hlhQp4jDoEdO040xDnStBeDoGKS/CrnAqOySQFikY8HCcQ0ykuuSA3EMJ1lSHUyFiCZAKhbGmboYBf2aJlEaXisXigTik9KQj17y/RLhISSGKIj78Ta9IxQUF9NXMzMxIVFY22RU41c6KFA0uUiSMaXJfjkjpU/JeG1J6dlacCwdFZhldCNf3OSOl6vqOi5TiFBV4v9qzkArq1S1ZJwqGrjttm4II57qdsUUEH3qiT0iFHLuZ4xykZHnwEZM3cUhJIVxv9REpyd9JsuUKfOIhFZUNuUi5bmqniG9wkFKcEiFicUhJDgN+6yNSkl9A5q7EISVrntwEdyFliowUhhF/9BEpyf/mTD8qW+GuI/AuFikZCRiy0UekJD9vC7a+OwkRi0NK3XLh+rCPSMkAfWmzS0FKJkH/8jhzV9lHPt9HpHwOepGDlJLZ21sqDlJSCAW60Uek5LbqQSZS3QfNBK2BMj58KQ1SXIQ0XZv1er2cujUQh5Qm/FwWOwrOVMazlzmtAe1s1okYt4lTq9X2gG96XvZrSpO7WKlU9nGRUnb8nc0cBlJhRLB/e4zrFHcaGoLxaFxrIOoU7SOWtN2mtAbO5IQU0XspkPKDzmoNREWEFvT4+PiEiDlJp3Tqh6mpqTEOUr20BqxnIDIABp7KEKmzExMT4zak4nqcTtrWgCnZwNBnYNROD0hdwfOT3HZbL60BK1Lo2u7WnUPxrqOYnsLQZgKn/sWzt0ul0q36mpqenp5KglRPrYHgFP04FU7wl6iLpNcWOF0HPwYnPwO/bHBqC/Qp/n4S6fwGPUCzs7MVvHsNY39H9n0qCVLs1oDqFKI6Twtbm0K/4uOHYhpCxcnJyb3gtYWFhV22owd0HYZTP2oo/wK+T7craivoJGkN0H4NTlywZL83A6RYqOtOYRrvhwOvW9bnJvgDNqRYrQHVECg9zq1TCMDX4EfGxsbm4qI7Ojq6F+OPQM+5BJn0BMOp+NYAlJ3ooU79BP4Btl5v4P4V0Ksguj8N2Z/T1Dw6PeD+2ajsTLMlsjWQBik34hjDoZSb43XTKT9IYCKyNYApcrTXHQXnbMbX5ZoCcsyAVHdrQMl+cyLih7xBI6XRNmVkQyH3r67WAATO52RIYl2MQG2glFznmFoDWvE9OQRI6VP5Ba2AtxGTTqGW3CgMP7vmYEhmgQrGXgFfjGwNUCoeMqTU+nnWMbUGqPIPIVIdfGRk5KCjtwZc7Uw1CKcy0HWmozVAWxsIbCZ1qpfo5qRrC/z6sDVAv/MOOVLqWjsatgYg9P6QI6Xq+sL3iTzDH/+Dis1mkzpPjo1jnMO5ELVB6fpveXl5F93cluX0G4QuHXU8O0hHljuyRGoQughR9cK7Q+TY7VkYIj8Qp4t43rrw7gD9prx7kNFNqwtHokhdGFNx8XLPMCJliw/GzBWgbDJvpGzRzVpX22xRLWDQJxD6tlPYf8n8EA8pIeh/kvPXJQSh2dy6CtOlbCaKuaLNAAAAAElFTkSuQmCC",text:"Profile",onClick:()=>e("/profile")},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAxCAYAAABznEEcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAH1SURBVHgB7ZjRbcIwEIYvVkCIpzzCGyO0EzTdgE5QOkG7QcsELRM03aBMQEZgA/wAEhIveQ+C/kZxFSzTBrDgQP6kJM7lQu7HvotjIoMI0IUR6kar1YqDIHhV7SzL7okp7XZ7hDjlarXqz+dzqWyBDh5brB3zPL9dLBZjYgZi7QghJiVTosQIU4AiDMMeMQRxvhmmHkSNsImhxfmRW26oXlBxmXbY+qJWqyVoZMa1qNlsvhAvYotNzmazREgps/V6PbA4PBMjdNExSNVOqF29Xv+wOEQq6YkBiKMHER3TrpJaHTciit5ITacd6k+OLRdAokus0BaI6Ftujs/dG0VCx6YdBenrt60bUJXaegPOtn/hZFjKqkJOp9NUn4jyFVu5Bd1zldu/ymr5fEsEt3KLWLoW86aslg1bIhiWW9tzU9MQmgaUrRTDyqxKESZeEzoxtrJaTmhNSEf8IBcEXQFeBBe8CC54EVy4ChGVX3b/Ucy5hlX9Mb25w6FDDnAl4huTsgfak2INKaYjcTKcMJ8Z0AHYPsQOej45YLlcSjoMSQ5wImLHvL8KMTnASU6oBQV8hanETqvegyn/DYbhOznAVWJHCOhznxvgT67wLzsueBFc8CK44EVwwYvgghfBBS+CC14EF65z3anRaIzzPH8iptgWJX4AR2KO8rrB6s0AAAAASUVORK5CYII=",text:"Orders",onClick:()=>e("/orders")},{icon:YU,text:"Jobs",onClick:()=>e("/jobs")},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAvCAYAAACYECivAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAATySURBVHgB1ZlraFxFFMfP3s2rRc0LWhNjHrsJlAoKbUhtrajxgVUq/aKBglXJB1EKolgRRNRPCqIiwSAi1ipFMNoWRA3SalAsNhLBYm2h2bwf3cboNhETN9ldfyfdLenuNp17J9LNH87O3NkzZ/53HmfOzPWJJerq6pri8XiLz+fbiNRQtBopRhxkKpFInKN8FJ1jsVjsvZGRkdNiAZ/YwamtrR2C0HWG+n/V1NSs6erqmhePcMQCkG1yQVZRGgqF1okFrAgz3JXiEo7j3CQWsCJM794mLgHhm8UCtoRdDy+jEhALWBEG68UleMkbxAIZXqK6unorw/YkbqiL9JsBkK1iQ0NDYH5+PiQegO3KwcHB8Wz/VVVVlfn9/if0xWj/g76+vsNyKcKQXY/yUTnvR3X4ElT8iqRjZmbm63A4fDZpdFV+fv5esi3iAdg7WF5e3tLT0zOnz3ibEpIdyC7au4W0IKk3S6dswncfzyAcDAbXqHPX+tkawdDfOP5O3QSQByiqEzsM0N4BbAWQ23kuuYReP7K5v78/fBFhdqx9JLskB8ELfcLU2LmQ1x96t5m3PSI5DPg1M++/U8K+QCBwmvkSlBwG/E7k5eVtdCC7M9fJKtRrzM3N3e8vKSl5n2c38cAVA6QrfSy2hKwg5Mny4zg90cc0W0X+GmSzLCPyMD6N8avFHh/jp18eGhrqW1yIB6rH/gvIo2IJuE7plLiR/BdItXiEkmEH37eUDu3sJmkT7zgD4e3+SCQSZuEdYt++j8JycY/nINt+OSXa6S4rK4uSvVPcQ3e7W9ntTi5Eaxrg4OOayXa6scIb92LkdVP9oqKiN6hzVFwA/UOM4AbaGdRnf+qPycnJaXphf2lpqfbyJhNjGHqFOsfEEBMTE7Hi4uKrILHNsEobRB+jjdlUQUY8PDs7+zzJWTEAhH8Wl2BhmvZwuLGx8WltZnFhBuHx8fF/SE6KGc6IS7BWJg1VT3V0dMQy6mdR1GlidPQhdvaySK811FtXUVGxOr0wnbC6uTdJ14oBiKC2iEvQw42GqmsLCgpeSy+8EA9r1M9i+JTs3WIOdVVbUycHEyQjw3pTfXQ7mfetw8PDY/rsJI1UQ/YXl2QVTXiXZ02VGb09bsgq4HUvLvdbOrR24RmyjRjRnc50bmXDbtzPO0sp0N4jNP6heMcQ4eV2nbPn5HyQYgVeei8HxlfTL/vq6+uDDOlLZB8We0wve3ipOxmLcYrsDKIHTKurqXQse3hJT2+BpPxf0EX3vawcdDv0xtuyQsBaaMOPO19C+oTkOOAY4nCw3+nt7f2X56ck9/E4kljYOLhVOaK3K5KjYCF/pBw1fyGWwBU9QzKwRL0IFTWYfusyeqbox5aun8/03m4JvQGCrD2ph4v8Dz5ZfeZPSFGyKIqxH9kQ2pnrhzmYRFK67JAHaXCHeICOZjQabWWTUV8tGpUVFhY+RBsPYnPbIl5TtL2BOCKUlXCSyF30disVf0P53dHR0azxK1+DKmhgTDyA1R5MP12nkIwZ7kHuQK8dsj8s/t/KwzMiAyQ17mrJCHHH9eIRtl+RfheXoI7paSYrbD/KePlkcOUIA+MTcwr0cJdYwLaHfxWXoM64WMCKMHcYp0gipvr07hiusVss4BcLcCUQ50x3gKxu77GkxJF8RD+A/4n8gehXoM/p3Re5FBkRC/wHpH0GpJeQ1gwAAAAASUVORK5CYII=",text:"Settings",onClick:()=>e("/settings")},{icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcIAAAGQCAYAAAA9XmC5AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAACXBIWXMAAA7CAAAOwgEVKEqAAAAABmJLR0QAAAAAAAD5Q7t/AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDI0LTAzLTA3VDIwOjA5OjQ4KzAwOjAwpEwk1AAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyNC0wMy0wN1QyMDowOTo0OCswMDowMNURnGgAAABVdEVYdHN2Zzpjb21tZW50ACBVcGxvYWRlZCB0bzogU1ZHIFJlcG8sIHd3dy5zdmdyZXBvLmNvbSwgR2VuZXJhdG9yOiBTVkcgUmVwbyBNaXhlciBUb29scyBFB1wTAAAZTUlEQVR4Xu3de5BkZ3nYYZ2entmZ7e5Z67rasCsROeAESRVLmCoLg1HERbYjJCyEC+HESSWW/wETu7BcwqRSSaXkKMExprD9R3BSlRhsx0LCSFQMwThCLkzKlRDKugQkGxASrFZCrHe6Z3s1t8571J+wFGl3p++nz3meqlPf+51lV1ox078+PX05AwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYDqytJbO/v37G51O56W1Wu2VsT27fxYq6aF6vX7f0aNHD8e82T8FPKsUITxw4MDedrt9YUTv8p2dnauzLHtHnF7o/yrwrF6v95fx/fGxOO7Z3Ny8v9vtHonT4kilzV0I8+jFld6hCN5l8c38pjhujNPL/V8FhvDlOO6I76V7I44PpDhuPfMrUAGFD2Gr1XpZHr242ntD3Ju9Mb5Zm+mXgMm5P44743vv3vi+e/D48eP5w6pQSoUNYaPROC+i95E43phOAbPznna7/cFYt/tbKI9ChrDZbF4fAbwjbYECiCvDR/I7phHEh9MpKIVaWgshAnhOHHeJIBRPfF9eGMtDjUbjnbEW6rYDRlGYK8JWq3VNLHf3d0CRxdXhVxYWFn702LFjX0unYG7N/F7dvn37zowI/n6MIghzIq4Ov29nZ+erzWbzpnzbPwvzaaZfwKurq1fHPctPpS0wn75Ur9evO3r06DfSHubKTK4IzzzzzH1xT/K3RRBK4fu3trYeabVa/yhmV4fMnal/0TYajatqtdpn0xYokbhz+4Xt7e23dbvdb6ZTUHhTuyI899xzm3GP8cMiCOWVZdkV9Xr9sdXV1fxtDmEuTOv9OOsLCwuPxvqa/hYoubcuLS2d2NjY+HzaQ2FN5Yqw2WzeHMs5/R1QBXF1eFuj0bg4baGwJv4zwvhGuLRWq/152gIV0uv11jqdTn4n2CdcUFiTfmh0ac+ePQ/HPcOltAcqJL739ywtLW1tbGx8Lp2CwpnoQ6OtVuuX4huhkbZABcVtwL/au3fv301bKJyJPTQaX/iXLSwsfDFtgWrbbLfbrVif7m+hOCb10Oie5eXl/F0mvLgWyC3s2bMn29jY+OO0h8KYyEOjrVbrX8YigsBzvW91dfUH0gyFMfZYxRf6q3q93p+lLcDztNvtlVhO9Hcwe+N+aHRlaWnp62kGeIG4jVje2Nj4TNrCzI31odFms3lrGgFeVJZlv9BqtX4wbWHmxvbQaHxhvzoWb6cE7ErccW4cPnz4eNrCzIzlodH9+/c3Njc3/zJtAU7r6aefXt3Y2PjDtIWZGctDo8ePH/93aQTYlSzLfjauCl+btjAz47girO/Zs+fuNAPsWsRwM64KP5m2MBMjXxGurKycl0aAgfR6vbenEWZm5BDWarVXpBFgIHFFuBpL/rpCmJlxhPCH0wgwsFardSiNMBPjeLLM9WkFGNjOzs5laYSZGDWE9Th8AjUwtFqt9sY0wkyMFMKVlZX9aQQYSq/XuzGNMBMjhXBxcfGSNAIMJcuyvQcOHNibtjB1I4Uw7sm9Lo0AQ2u32xekEaZu1BC+NY0AQ6vVapenEaZulBAuZln28jQDDG1nZ+dNaYSpGzqEy8vL56cRYCRxp/odaYSpGzqEnigDjNFi/ik2aYapGuWh0SvTCjCy9fX1C9MIUzV0CHu93g1pBBhZlmWvTCNM1bAhXIov2ovSDDCyuHN9dRphqrK0DmRlZeVgvV5/NG0BxqLdbg91mwSjqEQIt7a2DnW73cfSFiqj1Wr9fCy/2t8VnxAyC6M8WQYA5p4QAlBpQghApQkhAJUmhABUmhACUGlCCEClCSEAlSaEAFSaEAJQaUIIQKUJIQCVJoQAVJoQAlBpQghApQkhAJUmhABUmhACUGlCCEClCSEAlSaEAFSaEAJQaUIIQKUJIQCVJoQAVJoQAlBpQghApQkhAJUmhABUmhACUGlCCEClCSEAlSaEAFSaEAJQaUIIQKUJIQCVJoQAVJoQAlBpQghApQkhAJUmhACzt7SysnIwX/tbpkkIodyeSmvh9Xq9r6Wx7JZXV1e/t9lsviWOX2u1Wt+I4+l6vf5ovub7OP+B/Nfz/13+v+//NiYlS+tA8nsu+f9paVt4W1tbh7rd7mNpC5XRaDQurtVq96dtoUUI39/pdH4xbUslgnZW/P1ui+NtWZZ9Tzq9a/H7/ip+3+1x3LK2tvaddJoxcUUIJRZXFV9PY+HFjfw9aSyVuMJ7c4QsvzK/aZgI5tLvuyn/c+LPu6Z/lnERQiixI0eOrMey3d8V2+bm5n1pLIUI1tlxfDzGu/pnxubu/M/N//y0Z0RCCCUXVxG/k8ZCO3HixONpnHtxJX5dLN+O4y3PnBi//M/9dsTw2v6WUQghlFytVvt0GgsrYv1wLJv93fyKAJ4Tx11Zlv1BOjVpn8j/efk/N+0ZghBCye3s7HwxjYUV4bgjjXMrj1H8PZ6M483p1FTk/7z8n5s/MSqdYkBCCCXXarUeSWNhxQ15GZ4o85/SOhP5s4PFcDhCCCV3+PDh471er5O2hbS5uflAGudSXA1eN+0rwRcjhsMRQqiACOEVaSyc+Hd73zy/zjd/9mZEcFo/EzwtMRycEEIFrK+v3x/BeW/aFkb8Oz3V6XTen7bz6rfSWhhiOBghhIqI4PxKLE/0d4Xx2jjm9tmicTWYPxw6qZdIjEQMd08IoTq24grsdWkugpsjzv83zXMnf9u0WMb9YvmxEsPdEUKokAjPl2N5T383U4+12+0PpHkuxZ2K29JYaGJ4ekIIFRMB+mDciM/6JRWvj2Mu3vrtZOK/4dvSWHhieGpCCNWznWXZG9M8dTs7O++KGD+UtvNqOf4bDvUG2rMihicnhFBBEaKHm81mI65qPpROTUP+EonvW19f/43+dn6trq6+JI1zRQxfnBBCReUvtO90Ou+OGP5wOjVJN0d8X1qCK8FnxFXtpWmcO2L4QkIIFRcx/JPl5eVWjB/unxmfiOxTcbwiApi/dGOufyb4/7kyrXNJDJ9PCIEznnzyyU7E6mfiSueqdGpkEcD3RWQPzPNLJE4my7Lr0zi3xPCvCSHwXevr6/9jcXFxX4w/GMfPxfHZ/PxuRPjyj1K6LSLxI1tbW4cigL8c+7n/aKUXsRTHof4438SwL0vrQFZWVg7W6/VH07bw8m/KeX4vQ5ixrNVq5S8ef3kc+XuWXhvRuyDWj0X07sk/WT59qG4Zo/cC83b7txs7OzuXxJ2guX7j81EIIcBgluKOwdNpLo0qx9BDowCD2YijVFeEuSo/TCqEAAPq9Xp3prFUqhpDIQQYXBk+Uf9FVTGGQggwoIjFfWksparFUAgBBrS2tvbNNJZWlWIohACDO9Hr9f4qzaVVlRgKIcAQsiy7PY2lVoUYCiHAECKEt6Sx9MoeQyEEGMLa2tp3Yrm2vyu/MsdQCAGG1G63747lD/q78itrDIUQYDQ/ndZKKGMMhRBgBHFVmH/m4lvSthLKFkMhBBhRp9P5RMQwf5i0MsoUQyEEGI9/ktbKKEsMhRBgDOKq8Nv5RxmlbWWUIYZCCDAm+ef5ieH8EUKAMRLD+SOEAGMmhvNFCAEmQAznhxACTIgYzgchBJggMSw+IQSYMDEsNiEEmAIxLC4hBJgSMSwmIQSYIjEsHiEEmDIxLBYhBJgBMSwOIQSYETEsBiEEmCExnD0hBJgxMZwtIQQoADGcHSEEKAgxnA0hBCgQMZw+IQQoGDGcLiEEKCAxnB4hBCgoMZwOIQQoMDGcPCEEKDgxnCwhBJgDYjg5QggwJ8RwMrK0DmRlZeVgvV5/NG0Lb2tr61C3230sbSmmpfi6Oi/NwClEGPblcUjbysjvBOR3BtJ2bISQWVhcXl4+f3FxMb9ne2Wv17shy7KL+r8EcHKTiKEQMhXxNfOS+Jp5Z0TvrRG9l6fTAAMbdwz9jJCJW11d/cmIYH5H5L0iCIxq3D8zFEImZu/evee3Wq174irwI+kUwFiMM4ZCyEQ0m823LSwsHI7xdf0zAOM1rhgKIWMVATw3jj/Msuz30ymAiRlHDIWQsckjGAF8Io4fSacAJi6PYdz+nJO2AxNCxum/pBVg2v5jWgcmhIxF/jNBV4LArMTtz7WtVuvatB2IEDKy/NmhfiYIFMAnIoZnp3nXhJCRLSws/F4aAWbtw2ndNSFkJPmL5WPxEgmgKH48rgqvSfOuCCFDy982zYvlgQK6O+6kn5Xm0xJChpa/d2gaAQol7qTflsbTEkKGlr+BdhoBCiVun25I42kJIcNazLyBNlBQcft0ZizL/d2pCSFDyT9PMI0AhbRv376/kcZTEkKGkj5UF6Cwtre3L03jKQkhw7oyrQBFtavbKSFkKIP8IBpgRq5P6ykJIcNYyrLsojQDFFLcTl0Qy1J/d3JCyMBWVlbOSyNAocXt1blpPCkhZGDdbveJNAIUWtxePZnGkxJChrHR6/W+mmaAQorbqW/EstHfnZwQMpQsyz6WRoCiujOtpySEDOuetAIU1a5up4SQoWxubt6fRoBCWlhYuC+NpySEDOXEiROPpxGgkI4dO/atNJ6SEDKszV6v91CaAQolbp+OxnKivzs1IWRoWZbdkUaAQonbp9vTeFpCyNC2trZ+I40AhRIhfG8aT0sIGVq32/1mfLH9g7QFKIo3r62tfSfNpyWEjCS+2D4ai5dSAEXx8Xa7/ck074oQMrLt7e0b0wgwazelddeEkJEdP3788V6v9xNpCzAr18XV4FNp3jUhZCw6nc7tEcNPpS3AVMXtz10RwbvSdiBCyDj9VFoBpu2fpnVgQsjYxFXhk3Gv7DxXhsA07ezsXBK3P99O24EJIWOVxzCOH/UzQ2Aa8giur68/kLZDEUImIv+Z4fb29oEYvbQCmIhxRDAnhExM/mzSdrv997zoHhi3cUUwJ4RMXP6i+62trYMx/nKv1/tK/yzAcMYZwVyW1oGsrKwcrNfrj6Zt4cWN8KFut/tY2jJ7i8vLy+cvLi5eEvOVEccb4qrxov4vAZzcuCOYE0KKYim+rs5LM3AKtVptXxyV+3DsSUQwJ4QAc6TRaFwsguPlZ4QAc0IEJ0MIAeaACE6OEAIUnAhOlhACFJgITp4QAhSUCE6HEAIUkAhOjxACFIwITpcQAhSICE6fEAIUhAjOhhACFIAIzo4QAsyYCM6WEALMkAjOnhACzIgIFoMQAsyACBaHEAJMmQgWixACTJEIFo8QAkyJCBaTEAJMgQgWlxACTJgIFpsQAkyQCBafEAJMiAjOByEEmAARnB9CCDBmIjhfhBBgjERw/gghwJiI4HwSQoAxaLVaZ4vgfBJCgPH4zbRWRhkimBNCgBE1Go3Xx/IT/V01lCWCOSEEGMG5557brNVqf5S2lVCmCOaEEGAE3W731jRWQtkimBNCgCGtrq7+QJZl707b0itjBHNCCDCcpV6v94U0l15ZI5gTQoAhNJvNfxhLvb8rtzJHMCeEAMO5Kq2lVvYI5oQQYAhZll2fxtKqQgRzQggwuOV0lFZVIpgTQoAB7du370AaS6lKEcwJIcCAIhSvSGPpVC2COSEEGNyr01oqVYxgTggBBvf301oaVY1gLkvrQFZWVg7W6/VH07bwtra2DnW73cfSFhhMrdVqnRnry+PIr4Te3Ov1Loz19izL7onbgvuPHj16OPabcVRBFv89dtJcClWOYE4Igec566yzVjc3N/9OjFfEcU0c+ScrnFbE8eEI4x15HOP3P1Dm77kI4WdieUN/N9+qHsGch0aB72o0GldFxI7F+D/j+EAcu4pgLgL4slhuiSB+Kr+j3Gw2fyn2i8/8Yvl8Mq1zTQT7hBB45qOE4irnP9Rqtc+mUyOLMN4aMTwcR+meYRl/t7l/j1ER/GtCCBUXoXrtiRMn2jHe1D8zPhGMs+N4ICL7C7Fd6J8thb9I61wSwecTQqioAwcO7I0IfihCdW86NUnvjxh+PY78CTdzb21t7Wga544IvpAQQgVFkF7W6XTWI4LvSqem4WAcX2k0Gu/sb+daL3w6zXNDBF+cEEL1LMSN+B+leepqtdqvl+HKMP4ec/WEGRE8OSGEiokI/bO4ErwgbWclf1LOvP/MMH9m7VwQwVMTQqiQZrP5t2P59/3dTB2MIP98mufS2tra/4or6w+lbWGJ4OkJIVRHfUpPjNmt98/7Sysi5reksZBEcHeEECoiopO/hOHc/q4w8jDP7YvuDx8+fDyuCl+TtoUigrsnhFABjUbjkrga/DdpWxjx73R2BPrmtJ1LnU7n80V7iFQEByOEUAERnMK+E0r8u92av39x2s6lIj1EKoKDE0IoufyF8xGbZtoW0uLi4sVpnEv5Q6Sx/FB/NzsiOBwhhJJrt9v5RyYVWq/XuzKNcyv+O/9p/D1+LW2nTgSHJ4RQcrVa7fI0FlYE5K1pnGudTid/Sci0rwz/axzniODwhBBKLq4Urk5jYWX9j3AqxUc25VeGzWazMY0n0MT/t2+If97b43gqnWIIQgglF5F5RxoLbXl5+fw0zr38Z4ZxdfjuGCdydRiR/eDevXubcRU4to/NqjIhhBLbv39/I5a5eCuzxcXFS9NYGhO4OtyKOzavisj+3JEjR9bTOUYkhFBicYP50jQWXsRi7p8w82KevTrMAxbHz8bfc9BPrejG7/loHD8dYW3kb+2WzjMmWVoHkr/mp16vP5q2hbe1tXWo2+0+lrZQGa1W66di+c/9XbHFDf3XIhgXpW3ZZaurq2fG+rfi731FrNfE8YY4vhTHf4vjT2u12oPHjh07HPOJOJggIYQSS29s/av9XfHFFc9Qt0klkf/de/2RafLQKEAxiOCMCCEAlSaEAFSaEAJQaUIIQKUJIQCVJoQAVJoQAlBpQghApQkhAJUmhABUmhACUGlCCEClCSEAlSaEAFSaEAJQaUIIQKUJIQCVJoQAVJoQAlBpQghApQkhAJUmhABUmhACUGlCCEClCSEAlSaEAFSaEAJQaUIIQKUJIQCVJoQAVJoQAlBpQghApQkhAJUmhABUmhACUGlCCEClCSEAlSaEAFSaEAJQaUIIQKVlaR3IysrKwXq9/mjaAoxFu90e6jYJRjHUFWG3230ijQBj0ev1PppGmKphHxrdiC/ar6YZYGRZln06jTBVQ/+MML5oP5ZGgJHFnev/nUaYqlGeLHNPWgFG1mg0HkkjTNXQIdzc3Lw/jQCj2jxy5Mh6mmGqhg7hiRMnHk8jwEh6vd7vpBGmbpSHRjfji/ehNAMMrVar/fc0wtSNEsL8CTN3pBFgaDs7O19MI0zdqCH8XBoBhtZqtb6RRpi6kd7FYWVl5SX1ev2xtAUYWK/XO97pdBppC1M30hVht9s9kkaAoWRZ9rtphJkYKYRhK44H+iPA4HZ2dj6TRpiJUUOYuzOtAAOr1Wr/J40wEyOHMO7N3ZtGgIG1222fZMNMjSOED6YRYCC9Xm8tlm5/B7Mxcgh9JBMwrCzLfi+NMDPj+Blh/oSZ3+yPALsXV4QfSSPMzDhCeMbevXt/MY0AuxIR/FCn0/mTtIWZGekF9c/VarVeHcvn+zuAU2s2m43Dhw8fT1uYmYW0jmxjY+PRpaWlfVmWXZFOAZzMFU899dTX0gwzNbYrwmQlrgzdwwNOqtfr/Uqn07k5bWHmxh3CM1ZXV18VX+h/lrYAz9Nut1diOdHfweyN7aHRZz399NPf2rNnz3KMr+mfAejLsuxVcRvhkyYolLFfESZ70kOkY3lWKlAKt8bV4D9PMxTGpEKYv6TisoWFBR+2CeQ2I4KtWJ/ub6E4xv7Q6LM2Nzcf37NnTx7aK/tngKra3t5+ZdwmfDNtoVAmdkWYLDWbze9kWeZDN6Gier3ev+h0Ov86baFwJh3CMxqNxqW1Wu3P0xaokIjgWkTwnBg3+2egeCb20OizNjc3n1haWtqIq8LXp1NARUQI84dEH09bKKSJXxEm9VardTjW/J4hUAERwVviavDfpi0U1rRe3rC1vLz8N2P9rf4WKLMsy94hgsyLaV0Rflej0biqVqt9Nm2BEomrwC9sb2/f0O12v5VOQeFN/QXv6+vrf1yv178nvmF+O50CyuEfx1XgD4kg82bqV4TPtbq6enUE8VNpC8ynL8Wd2+uOHj3qrdOYSzN9C7S1tbVP12q1s2K8vX8GmCdxR/Zn2u325SLIPJvpFeFztVqta2K5u78DCu7LcSf2x44dO+YzBZl7hXlT7LhX+clYzol7mGIIBbazs/Ou+H69WAQpi8JcET5Xs9n88SzL7kxboADiTuoj8X35xojgw+kUlEIhPyap0+l8PO517o9vvM+kU8BsvSe+L79XBCmjQl4RPler1XpZBPH783uisb491vyjXIDJuj+OO+MO6b3xfffg8ePH83eGglIqfAhfxErE8YL4Br0sovimOG6Mc/kn4gPD+XIcd8T30uc2Nzcf7Ha7R2K/9cyvQAXMYwhf4MCBA3vb7faFtVrt8ghkHsefjNMTf0NxmDdxdfcX8f2RR++eiN79KXo+GYJKK0UIX8z+/fsbnU7npRHHV8b27P5ZqKSH6vX6fUePHs0f3hQ9AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAoFDOOOP/AQjC5qnn1Pp5AAAAAElFTkSuQmCC",text:"Log out",onClick:()=>n_.signOut()}];return(0,Ne.jsx)(Ne.Fragment,{children:t.map(((e,t)=>(0,Ne.jsxs)("div",{className:"p-3 flex items-center hover:bg-gray-200 rounded-lg",children:[(0,Ne.jsx)("img",{src:e.icon,className:"w-10 h-10",alt:"".concat(e.text," icon")}),(0,Ne.jsx)("button",{onClick:e.onClick,className:"block px-4 py-2 text-lg text-gray-700",children:e.text})]},t)))})},tF=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),{userLoggedIn:h}=cU();return(0,Ne.jsxs)(Ne.Fragment,{children:[h&&(0,Ne.jsx)(fe,{to:"/",replace:!0}),(0,Ne.jsx)("main",{className:"w-full h-screen flex self-center place-content-center place-items-center",children:(0,Ne.jsxs)("div",{className:"w-96 text-gray-600 space-y-5 p-4 shadow-xl border rounded-xl",children:[(0,Ne.jsx)("div",{className:"text-center mb-6",children:(0,Ne.jsx)("div",{className:"mt-2",children:(0,Ne.jsx)("h3",{className:"text-gray-800 text-xl font-semibold sm:text-2xl",children:"Create a New Account"})})}),(0,Ne.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),a||(l(!0),await JU(e,r))},className:"space-y-4",children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("label",{className:"text-sm text-gray-600 font-bold",children:"Email"}),(0,Ne.jsx)("input",{type:"email",autoComplete:"email",required:!0,value:e,onChange:e=>{n(e.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:indigo-600 shadow-sm rounded-lg transition duration-300"})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("label",{className:"text-sm text-gray-600 font-bold",children:"Password"}),(0,Ne.jsx)("input",{disabled:a,type:"password",autoComplete:"new-password",required:!0,value:r,onChange:e=>{i(e.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("label",{className:"text-sm text-gray-600 font-bold",children:"Confirm Password"}),(0,Ne.jsx)("input",{disabled:a,type:"password",autoComplete:"off",required:!0,value:o,onChange:e=>{s(e.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),c&&(0,Ne.jsx)("span",{className:"text-red-600 font-bold",children:c}),(0,Ne.jsx)("button",{type:"submit",disabled:a,className:"w-full px-4 py-2 text-white font-medium rounded-lg ".concat(a?"bg-gray-300 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 hover:shadow-xl transition duration-300"),children:a?"Signing Up...":"Sign Up"}),(0,Ne.jsxs)("div",{className:"text-sm text-center",children:["Already have an account? ","   ",(0,Ne.jsx)(Te,{to:"/login",className:"text-center text-sm hover:underline font-bold",children:"Continue"})]})]})]})})]})},nF=()=>{const{userLoggedIn:e}=cU(),[n,r]=(0,t.useState)(""),[i,o]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)("");return(0,Ne.jsxs)("div",{children:[e&&(0,Ne.jsx)(fe,{to:"/",replace:!0}),(0,Ne.jsx)("main",{className:"flex justify-center items-center",children:(0,Ne.jsxs)("div",{className:"w-96 text-gray-600 space-y-5 p-4 shadow-xl border rounded-xl",children:[(0,Ne.jsx)("div",{className:"text-center",children:(0,Ne.jsx)("div",{className:"mt-2",children:(0,Ne.jsx)("h3",{className:"text-gray-800 text-xl font-semibold sm:text-2xl",children:"Welcome Back"})})}),(0,Ne.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l||(c(!0),await ZU(n,i))},className:"space-y-5",children:[(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("label",{className:"text-sm text-gray-600 font-bold",children:"Email"}),(0,Ne.jsx)("input",{type:"email",autoComplete:"email",required:!0,value:n,onChange:e=>{r(e.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),(0,Ne.jsxs)("div",{children:[(0,Ne.jsx)("label",{className:"text-sm text-gray-600 font-bold",children:"Password"}),(0,Ne.jsx)("input",{type:"password",autoComplete:"current-password",required:!0,value:i,onChange:e=>{o(e.target.value)},className:"w-full mt-2 px-3 py-2 text-gray-500 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg transition duration-300"})]}),u&&(0,Ne.jsx)("span",{className:"text-red-600 font-bold",children:u}),(0,Ne.jsx)("button",{type:"submit",disabled:l,className:"w-full px-4 py-2 text-white font-medium rounded-lg ".concat(l?"bg-gray-300 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 hover:shadow-xl transition duration-300"),children:l?"Signing In...":"Sign In"})]}),(0,Ne.jsxs)("p",{className:"text-center text-sm",children:["Don't have an account?"," ",(0,Ne.jsx)(Te,{to:"/register",className:"hover:underline font-bold",children:"Sign up"})]}),(0,Ne.jsxs)("div",{className:"flex flex-row text-center w-full",children:[(0,Ne.jsx)("div",{className:"border-b-2 mb-2.5 mr-2 w-full"}),(0,Ne.jsx)("div",{className:"text-sm font-bold w-fit",children:"OR"}),(0,Ne.jsx)("div",{className:"border-b-2 mb-2.5 ml-2 w-full"})]}),(0,Ne.jsxs)("button",{disabled:l,onClick:e=>{(async e=>{e.preventDefault(),l||(c(!0),await $U().catch((e=>{c(!1)})))})(e)},className:"w-full flex items-center justify-center gap-x-3 py-2.5 border rounded-lg text-sm font-medium  ".concat(l?"cursor-not-allowed":"hover:bg-gray-100 transition duration-300 active:bg-gray-100"),children:[(0,Ne.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ne.jsxs)("g",{clipPath:"url(#clip0_17_40)",children:[(0,Ne.jsx)("path",{d:"M47.532 24.5528C47.532 22.9214 47.3997 21.2811 47.1175 19.6761H24.48V28.9181H37.4434C36.9055 31.8988 35.177 34.5356 32.6461 36.2111V42.2078H40.3801C44.9217 38.0278 47.532 31.8547 47.532 24.5528Z",fill:"#4285F4"}),(0,Ne.jsx)("path",{d:"M24.48 48.0016C30.9529 48.0016 36.4116 45.8764 40.3888 42.2078L32.6549 36.2111C30.5031 37.675 27.7252 38.5039 24.4888 38.5039C18.2275 38.5039 12.9187 34.2798 11.0139 28.6006H3.03296V34.7825C7.10718 42.8868 15.4056 48.0016 24.48 48.0016Z",fill:"#34A853"}),(0,Ne.jsx)("path",{d:"M11.0051 28.6006C9.99973 25.6199 9.99973 22.3922 11.0051 19.4115V13.2296H3.03298C-0.371021 20.0112 -0.371021 28.0009 3.03298 34.7825L11.0051 28.6006Z",fill:"#FBBC04"}),(0,Ne.jsx)("path",{d:"M24.48 9.49932C27.9016 9.44641 31.2086 10.7339 33.6866 13.0973L40.5387 6.24523C36.2 2.17101 30.4414 -0.068932 24.48 0.00161733C15.4055 0.00161733 7.10718 5.11644 3.03296 13.2296L11.005 19.4115C12.901 13.7235 18.2187 9.49932 24.48 9.49932Z",fill:"#EA4335"})]}),(0,Ne.jsx)("defs",{children:(0,Ne.jsx)("clipPath",{id:"clip0_17_40",children:(0,Ne.jsx)("rect",{width:"48",height:"48",fill:"white"})})})]}),l?"Signing In...":"Continue with Google"]})]})})]})};function rF(){const[e,n]=(0,t.useState)(!1),[r,i]=(0,t.useState)(null),o=cU(),s=J(),a=()=>{n(!0)},l=()=>{n(!1)};return(0,Ne.jsxs)(Ne.Fragment,{children:["/"===s.pathname&&(0,Ne.jsxs)("nav",{className:"flex flex-col md:flex-row md:justify-between items-center w-full px-4 py-3 home-page",children:[(0,Ne.jsx)(Te,{to:"/",children:(0,Ne.jsx)("h2",{className:"text-4xl",children:(0,Ne.jsx)("span",{className:"text-white",children:"PrintLink3d"})})}),(0,Ne.jsxs)("div",{className:"flex flex-col md:flex-row md:space-x-4 w-full md:w-auto",children:[(0,Ne.jsx)(Te,{to:"/create",className:"bg-brand-blue text-white p-2 px-4 mb-2 md:mb-0 mt-2 md:mt-0 rounded",children:(0,Ne.jsx)("h2",{children:"Order"})}),(0,Ne.jsx)(Te,{to:"/browse",className:"bg-brand-purple text-white p-2 px-4 rounded",children:(0,Ne.jsx)("h2",{children:"View Jobs"})}),o&&o.userLoggedIn?(0,Ne.jsxs)("div",{className:"mt-2",onMouseEnter:()=>a(),onMouseLeave:()=>l(),children:[(0,Ne.jsx)("button",{children:o&&o.userLoggedIn&&o.currUser.displayName?(0,Ne.jsx)("h2",{children:o.currUser.displayName}):(0,Ne.jsx)("h2",{children:"Profile Name"})}),e&&(0,Ne.jsx)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",style:{zIndex:1},children:(0,Ne.jsx)(eF,{})})]}):(0,Ne.jsx)(Te,{to:"/login",className:"p-2",children:(0,Ne.jsx)("h2",{children:"Login"})})]})]}),"/"!==s.pathname&&(0,Ne.jsxs)("nav",{className:"flex justify-between items-center w-full px-4 py-3 app-page",children:[(0,Ne.jsx)(Te,{to:"/",children:(0,Ne.jsxs)("h2",{className:"text-4xl",children:[(0,Ne.jsx)("span",{className:"fg-brand-blue",children:"Print"}),(0,Ne.jsx)("span",{className:"fg-brand-purple",children:"Link3d"})]})}),(0,Ne.jsxs)("div",{className:"flex space-x-4",children:[(0,Ne.jsx)(Te,{to:"/create",className:"bg-brand-blue text-white p-2 px-4 rounded",children:(0,Ne.jsx)("h2",{children:"Order"})}),(0,Ne.jsx)(Te,{to:"/browse",className:"bg-brand-purple text-white p-2 px-4 rounded",children:(0,Ne.jsx)("h2",{children:"View Jobs"})}),o&&o.userLoggedIn?(0,Ne.jsxs)("div",{className:"mt-2",onMouseEnter:()=>a(),onMouseLeave:()=>l(),children:[(0,Ne.jsx)("button",{children:o&&o.userLoggedIn&&o.currUser.displayName?(0,Ne.jsx)("h2",{children:o.currUser.displayName}):(0,Ne.jsx)("h2",{children:"Profile Name"})}),e&&(0,Ne.jsx)("div",{className:"absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5",style:{zIndex:1},children:(0,Ne.jsx)(eF,{})})]}):(0,Ne.jsx)(Te,{to:"/login",className:"p-2",children:(0,Ne.jsx)("h2",{children:"Login"})})]})]}),(0,Ne.jsx)(me,{})]})}const iF=function(){return(0,Ne.jsx)(uU,{children:(0,Ne.jsx)(ye,{children:(0,Ne.jsxs)(ge,{path:"/",element:(0,Ne.jsx)(rF,{}),children:[(0,Ne.jsx)(ge,{index:!0,element:(0,Ne.jsx)(ke,{})}),(0,Ne.jsx)(ge,{path:"create",element:(0,Ne.jsx)(fU,{})}),(0,Ne.jsx)(ge,{path:"browse",element:(0,Ne.jsx)(FU,{})}),(0,Ne.jsx)(ge,{path:"profile",element:(0,Ne.jsx)(zU,{})}),(0,Ne.jsx)(ge,{path:"register",element:(0,Ne.jsx)(tF,{})}),(0,Ne.jsx)(ge,{path:"login",element:(0,Ne.jsx)(nF,{})}),(0,Ne.jsx)(ge,{path:"orders",element:(0,Ne.jsx)(HU,{})}),(0,Ne.jsx)(ge,{path:"orders/:Id",element:(0,Ne.jsx)(QU,{})}),(0,Ne.jsx)(ge,{path:"jobs",element:(0,Ne.jsx)(HU,{isPrinter:!0})}),(0,Ne.jsx)(ge,{path:"jobs/:Id",element:(0,Ne.jsx)(QU,{isPrinter:!0})})]})})})};i.createRoot(document.getElementById("root")).render((0,Ne.jsx)(t.StrictMode,{children:(0,Ne.jsx)(Se,{children:(0,Ne.jsx)(iF,{})})})),Le()})()})();
//# sourceMappingURL=main.d9269aed.js.map